function input_int(a){return!isNaN(a)&&parseInt(a,10)==a}function loadOptions(){if(localStorage.token){$("#token").val(localStorage.token);$("#limit").val(localStorage.limit);$("#interval").val(localStorage.interval);$("#comopt").val(localStorage.comopt);if(localStorage.autoplay===1){$("#autoplay").attr("checked","checked")}}}function saveOptions(){var a="Error:";var b=$("#token").val();var c=$("#limit").val();var d=$("#interval").val();var e=$("#comopt").val();if(b!==""){localStorage.token=b}else{a=a+" missing token,"}if(input_int(c)){if(parseInt(c,10)>50||parseInt(c,10)<1){a=a+" invalid track limit,"}else{localStorage.limit=c}}else{a=a+" invalid track limit,"}if(input_int(d)){if(parseInt(d,10)<1){a=a+" invalid new track check time,"}else{localStorage.interval=d}}else{a=a+" invalid new track check time,"}if($("#autoplay").attr("checked")){localStorage.autoplay=1}else{localStorage.autoplay=0}if(input_int(e)){if(parseInt(e,10)<1){a=a+" invalid comments per track,"}else{localStorage.comopt=e}}else{a=a+" invalid comments per track,"}if(a==="Error:"){chrome.extension.sendRequest({requestlist:"update,"+b+","+c+","+d});$("#message").html('<div id="saved">Options saved.</div>')}else{$("#message").html('<div id="errors">'+a.substring(0,a.length-1)+".</div>")}}$(function(){loadOptions();$("#save").click(function(){saveOptions()})})