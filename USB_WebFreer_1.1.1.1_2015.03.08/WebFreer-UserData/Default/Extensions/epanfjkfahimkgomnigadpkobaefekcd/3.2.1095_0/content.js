/**
 * DoNotTarckMe Copyright (c) 2008-2014 by Abine, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information
 * of Abine, Inc. ("Confidential Information"), subject
 * to the Non-Disclosure Agreement and/or License Agreement you entered
 * into with Abine. You shall use such Confidential Information only
 * in accordance with the terms of said Agreement(s). Abine makes
 * no representations or warranties about the suitability of the
 * software. The software is provided with ABSOLUTELY NO WARRANTY
 * and Abine will NOT BE LIABLE for ANY DAMAGES resulting from
 * the use of the software.
 *
 * Contact license@getabine.com with any license-related questions.
 *
 * https://www.abine.com
 * @license
 *
 */
/*Copyright (c) 2009 pidder <www.pidder.com>*/
function pidCrypt(){function e(e){e||(e=8);for(var t=new Array(e),n=[],i=0;256>i;i++)n[i]=i;for(i=0;i<t.length;i++)t[i]=n[Math.floor(Math.random()*n.length)];return t}this.setDefaults=function(){this.params.nBits=256,this.params.salt=e(8),this.params.salt=pidCryptUtil.byteArray2String(this.params.salt),this.params.salt=pidCryptUtil.convertToHex(this.params.salt),this.params.blockSize=16,this.params.UTF8=!0,this.params.A0_PAD=!0},this.debug=!0,this.params={},this.params.dataIn="",this.params.dataOut="",this.params.decryptIn="",this.params.decryptOut="",this.params.encryptIn="",this.params.encryptOut="",this.params.key="",this.params.iv="",this.params.clear=!0,this.setDefaults(),this.errors="",this.warnings="",this.infos="",this.debugMsg="",this.setParams=function(e){e||(e={});for(var t in e)this.params[t]=e[t]},this.getParams=function(){return this.params},this.getParam=function(e){return this.params[e]||""},this.clearParams=function(){this.params={}},this.getNBits=function(){return this.params.nBits},this.getOutput=function(){return this.params.dataOut},this.setError=function(e){this.error=e},this.appendError=function(e){return this.errors+=e,""},this.getErrors=function(){return this.errors},this.isError=function(){return this.errors.length>0?!0:!1},this.appendInfo=function(e){return this.infos+=e,""},this.getInfos=function(){return this.infos},this.setDebug=function(e){this.debug=e},this.appendDebug=function(e){return this.debugMsg+=e,""},this.isDebug=function(){return this.debug},this.getAllMessages=function(e){var t={lf:"\n",clr_mes:!1,verbose:15};e||(e=t);for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);var i="",a="";for(var s in this.params){switch(s){case"encryptOut":a=pidCryptUtil.toByteArray(this.params[s].toString()),a=pidCryptUtil.fragment(a.join(),64,e.lf);break;case"key":case"iv":a=pidCryptUtil.formatHex(this.params[s],48);break;default:a=pidCryptUtil.fragment(this.params[s].toString(),64,e.lf)}i+="<p><b>"+s+"</b>:<pre>"+a+"</pre></p>"}return this.debug&&(i+="debug: "+this.debug+e.lf),this.errors.length>0&&1==(1&e.verbose)&&(i+="Errors:"+e.lf+this.errors+e.lf),this.warnings.length>0&&2==(2&e.verbose)&&(i+="Warnings:"+e.lf+this.warnings+e.lf),this.infos.length>0&&4==(4&e.verbose)&&(i+="Infos:"+e.lf+this.infos+e.lf),this.debug&&8==(8&e.verbose)&&(i+="Debug messages:"+e.lf+this.debugMsg+e.lf),e.clr_mes&&(this.errors=this.infos=this.warnings=this.debug=""),i},this.getRandomBytes=function(t){return e(t)}}var ABINE_DNTME=ABINE_DNTME||{};ABINE_DNTME.startTime=Date.now(),window.ABINE_DNTME=window.ABINE_DNTME||ABINE_DNTME,define.unordered=!0,ABINE_DNTME.require=require,ABINE_DNTME.define=define,ABINE_DNTME.define("jquery",["abine/timer"],function(e){function t(e,t,n,i,a){var s="@mozilla.org/parserutils;1";if(s in Components.classes){var r=Components.classes[s].getService(Components.interfaces.nsIParserUtils);if("parseFragment"in r)return r.parseFragment(t,n?r.SanitizerAllowStyle:0,!!a,i,e.documentElement)}return Components.classes["@mozilla.org/feed-unescapehtml;1"].getService(Components.interfaces.nsIScriptableUnescapeHTML).parseFragment(t,!!a,i,e.documentElement)}function n(n){if(!n.abineDntmeJQuery){var i={window:n,document:n.document,navigator:n.navigator,location:n.location,setTimeout:e.setTimeout,clearTimeout:e.clearTimeout,setInterval:e.setInterval,clearInterval:e.clearInterval},a=Components.classes["@mozilla.org/moz/jssubscript-loader;1"].getService(Components.interfaces.mozIJSSubScriptLoader);a.loadSubScript("resource://dntme/content/vendor/jquery-min.js",i),i.$=i.jQuery=n.jQuery,a.loadSubScript("resource://dntme/content/vendor/twitter_bootstrap/bootstrap-tooltip-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jquery_jqplot-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jqplot_canvasTextRenderer-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jqplot_canvasAxisLabelRenderer-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jqplot_canvasAxisTickRenderer-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jqplot_categoryAxisRenderer-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jqplot_barRenderer-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jqplot_highlighter-min.js",i),a.loadSubScript("resource://dntme/content/vendor/jqplot/jqplot_bubbleRenderer-min.js",i),n.abineDntmeJQuery=n.jQuery.noConflict(!0);var s=n.abineDntmeJQuery.prototype.html;n.abineDntmeJQuery.prototype.html=function(){if(arguments.length>0&&"string"==typeof arguments[0]){var e=t(n.document,arguments[0],!0);arguments[0]=e}return s.apply(this,arguments)}}return n.abineDntmeJQuery}function i(e,t){try{var i=null;if(e&&e.jquery)return e;if(t&&t.jquery)return t.find(e);if(t&&(i=(t.ownerDocument||t).defaultView||t),!i&&e&&"string"!=typeof e&&(i=(e.ownerDocument||e).defaultView||e),i&&!i.abineDntmeJQuery&&(i=i.top),i)return i.abineDntmeJQuery||n(i),i.abineDntmeJQuery.apply(i,arguments);to.get=stack.trace}catch(a){if("string"==typeof e){var s="Please use a node/document as context to use jQuery from that window sandbox";throw!0&&ABINE_DNTME.log.error(s+"\n"+e+"\n"+a.stack),s}throw"Could not get window object from parameters to stub. Node disconnected from DOM?"}}return"undefined"==typeof $?(i.getRealJQuery=function(e){if(e){var t=(e.ownerDocument||e).defaultView||e;return t.abineDntmeJQuery||n(t),t.abineDntmeJQuery}return i},i):$}),ABINE_DNTME.define("abine/config",[],function(){var e=ABINE_DNTME.config={version:"3.2.1095",buildNum:"1095.ccaf3a11a2b153fea0418a2c4d7eae407b9af800",appName:"DoNotTrackMe: Online Privacy Protection",environment:"production",tags:["chromestore"],crypt:!0,silent:!1,payments:!0,browser:"Chrome",serverHost:"mm.abine.com",webHost:"www.abine.com",webAppHost:"dnt.abine.com",mappingServerHost:"mapping.abine.com",phoneServerHost:"phone.abine.com",licenseServerHost:"license.abine.com",emailServerHost:"emails.abine.com",disposableDomain:"opayq.com",paymentsServerHost:"payments.abine.com",logLevel:"ERROR",pfVersion:".790 Chrome development",mmVersion:"0.0.1 development"};return e.protocol="production"===ABINE_DNTME.config.environment?"https://":"http://",document.documentElement.hasAttribute("abine_webapp")&&document.documentElement.setAttribute("dnt",e.version),e}),ABINE_DNTME.require("abine/config"),ABINE_DNTME.define("abine/timer",[],function(){var e=1,t={},n=function(n,i){var a=e++,s=Components.classes["@mozilla.org/timer;1"].createInstance(Components.interfaces.nsITimer);return t[a]=s,s.initWithCallback(function(){delete t[a],n()},i,Components.interfaces.nsITimer.TYPE_ONE_SHOT),a},i=function(e){try{e in t&&(t[e].cancel(),delete t[e])}catch(n){}},a=function(n,i){var a=e++,s=Components.classes["@mozilla.org/timer;1"].createInstance(Components.interfaces.nsITimer);return t[a]=s,s.initWithCallback(n,i,Components.interfaces.nsITimer.TYPE_REPEATING_SLACK),a},s={};return s.setTimeout="undefined"!=typeof window&&"function"==typeof window.setTimeout?function(){return ABINE_DNTME.log,window.setTimeout.apply(window,arguments)}:n,s.clearTimeout="undefined"!=typeof window&&"function"==typeof window.clearTimeout?function(){window.clearTimeout.apply(window,arguments)}:i,s.setInterval="undefined"!=typeof window&&"function"==typeof window.setInterval?function(){return window.setInterval.apply(window,arguments)}:a,s.clearInterval="undefined"!=typeof window&&"function"==typeof window.clearInterval?function(){window.clearInterval.apply(window,arguments)}:i,s}),ABINE_DNTME.define("abine/intl",[],function(){return{getText:function(e,t){var n=null;e=e.replace(/\./g,"_");try{n=chrome.i18n.getMessage(e,t)}catch(i){}return n&&""!=n||(n="***"+e),n}}}),ABINE_DNTME.define("abine/eventLogger",["abine/config"],function(e){function t(t){var n={},i=t&&t.split?t.split("#"):[];return 4==i.length?(n.error_tag=i[0],n.module=i[1],n.method=i[2],n.message=i[3]):(n.error_tag=n.module=n.method="not well-formed",n.message=t+""),n.browser=e.browser,n.build=e.buildNum,n.environment=e.environment,n.build_tag=e.tags[0],n.server_host=e.serverHost,n.mapping_server_host=e.mappingServerHost,n.license_server_host=e.licenseServerHost,n.phone_server_host=e.phoneServerHost,n.crypt=e.crypt,n.version=e.version,n.user_agent=ABINE_DNTME.userAgent,n}function n(t){var n={error:t},i=ABINE_DNTME.user||ABINE_DNTME.contentuser||ABINE_DNTME.bguser;i&&(n.email_salt=i.getEmailSalt()),ABINE_DNTME.require(["abine/ajax"],function(t){t.ajax({type:"POST",url:e.protocol+e.serverHost+"/api/errors",data:n,success:function(){s.debug("error reporting successful")},error:function(){s.debug("error reporting failed")}})})}function i(){if("undefined"!=typeof console)return{finest:function(e){console.debug("[FINEST]["+(new Date).toUTCString()+"]: "+e)},debug:function(e){console.debug("[DEBUG]["+(new Date).toUTCString()+"]: "+e)},info:function(e){console.info("[INFO]["+(new Date).toUTCString()+"]: "+e)},warn:function(e){console.warn("[WARNING]["+(new Date).toUTCString()+"]: "+e)},error:function(e){console.error("[ERROR]["+(new Date).toUTCString()+"]: "+e);var i=ABINE_DNTME.user||ABINE_DNTME.contentuser||ABINE_DNTME.bguser;i&&i.shouldSendErrorReports()&&n(t(e))}};if("undefined"!=typeof Components){var e=Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService);return{finest:function(t){e.logStringMessage("[FINEST]["+(new Date).toUTCString()+"]: "+t),dump("FINEST: "+t+"\n")},debug:function(t){e.logStringMessage("[DEBUG]["+(new Date).toUTCString()+"]: "+t),dump("DEBUG: "+t+"\n")},info:function(t){e.logStringMessage("[INFO]["+(new Date).toUTCString()+"]: "+t),dump("INFO: "+t+"\n")},warn:function(t){e.logStringMessage("[WARNING]["+(new Date).toUTCString()+"]: "+t),dump("WARNING: "+t+"\n")},error:function(i){e.logStringMessage("[ERROR]["+(new Date).toUTCString()+"]: "+i),dump("ERROR: "+i+"\n");var a=ABINE_DNTME.user||ABINE_DNTME.contentuser||ABINE_DNTME.bguser;a&&a.shouldSendErrorReports()&&n(t(i))}}}}var a=function(){},s=i();switch(s.dumpObj=function(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,i,a=[],r=e&&e.constructor==Array;for(n in e)i=e[n],t=typeof i,"string"==t?i='"'+i+'"':"object"==t&&null!==i&&(i=s.dumpObj(i)),a.push((r?"":'"'+n+'":')+String(i));return(r?"[":"{")+String(a)+(r?"]":"}")},e.logLevel){case"NONE":s.error=a;case"ERROR":s.warn=a;case"WARN":s.info=a;case"INFO":s.debug=a;case"DEBUG":s.finest=a}return s.stackTrace=function(e){e=e||"";try{does.not=exist}catch(t){var n=(t.stack+"").split("\n");n.length>3&&(n.shift(),n.shift(),n.shift()),e+="\n"+n.join("\n")}this.debug(e)},s.info("Log level set to "+e.logLevel),ABINE_DNTME.log=s,s}),ABINE_DNTME.define(["documentcloud/underscore"],function(){return _}),ABINE_DNTME.define("documentcloud/underscore/async",["documentcloud/underscore","abine/timer"],function(e,t){var n=t.setTimeout,i={},a=e,s=e.async;a.async=i,i.noConflict=function(){return a.async=s,i};var r=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},o=function(e,t){if(e.map)return e.map(t);var n=[];return r(e,function(e,i,a){n.push(t(e,i,a))}),n},l=function(e,t,n){return e.reduce?e.reduce(t,n):(r(e,function(e,i,a){n=t(n,e,i,a)}),n)},c=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};i.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:function(e){n(e,0)},i.forEach=function(e,t,n){if(n=n||function(){},!e.length)return n();var i=0;r(e,function(a){t(a,function(t){t?(n(t),n=function(){}):(i+=1,i===e.length&&n(null))})})},i.forEachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var i=0,a=function(){t(e[i],function(t){t?(n(t),n=function(){}):(i+=1,i===e.length?n(null):a())})};a()},i.forEachLimit=function(e,t,n,i){if(i=i||function(){},!e.length||0>=t)return i();var a=0,s=0,r=0;!function o(){if(a===e.length)return i();for(;t>r&&s<e.length;)s+=1,r+=1,n(e[s-1],function(t){t?(i(t),i=function(){}):(a+=1,r-=1,a===e.length?i():o())})}()};var d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.forEach].concat(t))}},h=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.forEachSeries].concat(t))}},u=function(e,t,n,i){var a=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,i){a[e.index]=i,t(n)})},function(e){i(e,a)})};i.map=d(u),i.mapSeries=h(u),i.reduce=function(e,t,n,a){i.forEachSeries(e,function(e,i){n(t,e,function(e,n){t=n,i(e)})},function(e){a(e,t)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(e,t,n,a){var s=o(e,function(e){return e}).reverse();i.reduce(s,t,n,a)},i.foldr=i.reduceRight;var p=function(e,t,n,i){var a=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&a.push(e),t()})},function(){i(o(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.filter=d(p),i.filterSeries=h(p),i.select=i.filter,i.selectSeries=i.filterSeries;var f=function(e,t,n,i){var a=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||a.push(e),t()})},function(){i(o(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.reject=d(f),i.rejectSeries=h(f);var m=function(e,t,n,i){e(t,function(e,t){n(e,function(n){n?(i(e),i=function(){}):t()})},function(){i()})};i.detect=d(m),i.detectSeries=h(m),i.some=function(e,t,n){i.forEach(e,function(e,i){t(e,function(e){e&&(n(!0),n=function(){}),i()})},function(){n(!1)})},i.any=i.some,i.every=function(e,t,n){i.forEach(e,function(e,i){t(e,function(e){e||(n(!1),n=function(){}),i()})},function(){n(!0)})},i.all=i.every,i.sortBy=function(e,t,n){i.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);var i=function(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0};n(null,o(t.sort(i),function(e){return e.value}))})},i.auto=function(e,t){t=t||function(){};var n=c(e);if(!n.length)return t(null);var i={},a=[],s=function(e){a.unshift(e)},o=function(e){for(var t=0;t<a.length;t+=1)if(a[t]===e)return a.splice(t,1),void 0},d=function(){r(a.slice(0),function(e){e()})};s(function(){c(i).length===n.length&&(t(null,i),t=function(){})}),r(n,function(n){var a=e[n]instanceof Function?[e[n]]:e[n],r=function(e){if(e)t(e),t=function(){};else{var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),i[n]=a,d()}},c=a.slice(0,Math.abs(a.length-1))||[],h=function(){return l(c,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(n)};if(h())a[a.length-1](r,i);else{var u=function(){h()&&(o(u),a[a.length-1](r,i))};s(u)}})},i.waterfall=function(e,t){if(t=t||function(){},!e.length)return t();var n=function(e){return function(a){if(a)t(a),t=function(){};else{var s=Array.prototype.slice.call(arguments,1),r=e.next();r?s.push(n(r)):s.push(t),i.nextTick(function(){e.apply(null,s)})}}};n(i.iterator(e))()},i.parallel=function(e,t){if(t=t||function(){},e.constructor===Array)i.map(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};i.forEach(c(e),function(t,i){e[t](function(e){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),n[t]=a,i(e)})},function(e){t(e,n)})}},i.series=function(e,t){if(t=t||function(){},e.constructor===Array)i.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};i.forEachSeries(c(e),function(t,i){e[t](function(e){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),n[t]=a,i(e)})},function(e){t(e,n)})}},i.iterator=function(e){var t=function(n){var i=function(){return e.length&&e[n].apply(null,arguments),i.next()};return i.next=function(){return n<e.length-1?t(n+1):null},i};return t(0)},i.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var g=function(e,t,n,i){var a=[];e(t,function(e,t){n(e,function(e,n){a=a.concat(n||[]),t(e)})},function(e){i(e,a)})};i.concat=d(g),i.concatSeries=h(g),i.whilst=function(e,t,n){e()?t(function(a){return a?n(a):(i.whilst(e,t,n),void 0)}):n()},i.until=function(e,t,n){e()?n():t(function(a){return a?n(a):(i.until(e,t,n),void 0)})},i.queue=function(e,t){var n=0,a={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(e,n){e.constructor!==Array&&(e=[e]),r(e,function(e){a.tasks.push({data:e,callback:"function"==typeof n?n:null}),a.saturated&&a.tasks.length==t&&a.saturated(),i.nextTick(a.process)})},process:function(){if(n<a.concurrency&&a.tasks.length){var t=a.tasks.shift();a.empty&&0==a.tasks.length&&a.empty(),n+=1,e(t.data,function(){n-=1,t.callback&&t.callback.apply(t,arguments),a.drain&&a.tasks.length+n==0&&a.drain(),a.process()})}},length:function(){return a.tasks.length},running:function(){return n}};return a};var b=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&r(n,function(t){console[e](t)}))}]))}};return i.log=b("log"),i.dir=b("dir"),i.memoize=function(e,t){var n={},i={};t=t||function(e){return e};var a=function(){var a=Array.prototype.slice.call(arguments),s=a.pop(),r=t.apply(null,a);r in n?s.apply(null,n[r]):r in i?i[r].push(s):(i[r]=[s],e.apply(null,a.concat([function(){n[r]=arguments;var e=i[r];delete i[r];for(var t=0,a=e.length;a>t;t++)e[t].apply(null,arguments)}])))};return a.unmemoized=e,a},i.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e}),ABINE_DNTME.require(["documentcloud/underscore/async"],function(){}),pidCryptUtil={},pidCryptUtil.encodeBase64=function(e,t){e||(e="");var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t="undefined"==typeof t?!1:t;var i,a,s,r,o,l,c,d,h,u,p,f=[],m="";if(u=t?pidCryptUtil.encodeUTF8(e):e,h=u.length%3,h>0)for(;h++<3;)m+="=",u+="\x00";for(h=0;h<u.length;h+=3)i=u.charCodeAt(h),a=u.charCodeAt(h+1),s=u.charCodeAt(h+2),r=i<<16|a<<8|s,o=r>>18&63,l=r>>12&63,c=r>>6&63,d=63&r,f[h/3]=n.charAt(o)+n.charAt(l)+n.charAt(c)+n.charAt(d);return p=f.join(""),p=p.slice(0,p.length-m.length)+m},pidCryptUtil.decodeBase64=function(e,t){e||(e="");var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t="undefined"==typeof t?!1:t;var i,a,s,r,o,l,c,d,h,u,p=[];u=t?pidCryptUtil.decodeUTF8(e):e;for(var f=0;f<u.length;f+=4)r=n.indexOf(u.charAt(f)),o=n.indexOf(u.charAt(f+1)),l=n.indexOf(u.charAt(f+2)),c=n.indexOf(u.charAt(f+3)),d=r<<18|o<<12|l<<6|c,i=d>>>16&255,a=d>>>8&255,s=255&d,p[f/4]=String.fromCharCode(i,a,s),64==c&&(p[f/4]=String.fromCharCode(i,a)),64==l&&(p[f/4]=String.fromCharCode(i));return h=p.join(""),h=t?pidCryptUtil.decodeUTF8(h):h},pidCryptUtil.encodeUTF8=function(e){return e||(e=""),e=e.replace(/[\u0080-\u07ff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)}),e=e.replace(/[\u0800-\uffff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|63&t)})},pidCryptUtil.decodeUTF8=function(e){return e||(e=""),e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){var t=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1);return String.fromCharCode(t)}),e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){var t=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2);return String.fromCharCode(t)})},pidCryptUtil.convertToHex=function(e){e||(e="");for(var t="",n="",i=0;i<e.length;i++)n=e.charCodeAt(i).toString(16),t+=1==n.length?"0"+n:n;return t},pidCryptUtil.convertFromHex=function(e){e||(e="");for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substring(n,n+2),16));return t},pidCryptUtil.stripLineFeeds=function(e){e||(e="");var t="";return t=e.replace(/\n/g,""),t=t.replace(/\r/g,"")},pidCryptUtil.toByteArray=function(e){e||(e="");for(var t=[],n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},pidCryptUtil.fragment=function(e,t,n){if(e||(e=""),!t||t>=e.length)return e;n||(n="\n");for(var i="",a=0;a<e.length;a+=t)i+=e.substr(a,t)+n;return i},pidCryptUtil.formatHex=function(e,t){e||(e=""),t||(t=45);for(var n="",i=e.toLowerCase(),a=0;a<i.length;a+=2)n+=i.substr(a,2)+":";return i=this.fragment(n,t)},pidCryptUtil.byteArray2String=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},"undefined"!=typeof pidCrypt&&(pidCrypt.SHA1=function(e){function t(e,t){var n=e<<t|e>>>32-t;return n}function n(e){var t,n,i="";for(t=7;t>=0;t--)n=e>>>4*t&15,i+=n.toString(16);return i}var i,a,s,r,o,l,c,d,h,u=new Array(80),p=1732584193,f=4023233417,m=2562383102,g=271733878,b=3285377520,v=e.length,y=new Array;for(a=0;v-3>a;a+=4)s=e.charCodeAt(a)<<24|e.charCodeAt(a+1)<<16|e.charCodeAt(a+2)<<8|e.charCodeAt(a+3),y.push(s);switch(v%4){case 0:a=2147483648;break;case 1:a=e.charCodeAt(v-1)<<24|8388608;break;case 2:a=e.charCodeAt(v-2)<<24|e.charCodeAt(v-1)<<16|32768;break;case 3:a=e.charCodeAt(v-3)<<24|e.charCodeAt(v-2)<<16|e.charCodeAt(v-1)<<8|128}for(y.push(a);y.length%16!=14;)y.push(0);for(y.push(v>>>29),y.push(v<<3&4294967295),i=0;i<y.length;i+=16){for(a=0;16>a;a++)u[a]=y[i+a];for(a=16;79>=a;a++)u[a]=t(u[a-3]^u[a-8]^u[a-14]^u[a-16],1);for(r=p,o=f,l=m,c=g,d=b,a=0;19>=a;a++)h=t(r,5)+(o&l|~o&c)+d+u[a]+1518500249&4294967295,d=c,c=l,l=t(o,30),o=r,r=h;for(a=20;39>=a;a++)h=t(r,5)+(o^l^c)+d+u[a]+1859775393&4294967295,d=c,c=l,l=t(o,30),o=r,r=h;for(a=40;59>=a;a++)h=t(r,5)+(o&l|o&c|l&c)+d+u[a]+2400959708&4294967295,d=c,c=l,l=t(o,30),o=r,r=h;for(a=60;79>=a;a++)h=t(r,5)+(o^l^c)+d+u[a]+3395469782&4294967295,d=c,c=l,l=t(o,30),o=r,r=h;p=p+r&4294967295,f=f+o&4294967295,m=m+l&4294967295,g=g+c&4294967295,b=b+d&4294967295}var h=n(p)+n(f)+n(m)+n(g)+n(b);return h.toLowerCase()}),ABINE_DNTME.define("pidcrypt",function(){return pidCrypt}),ABINE_DNTME.define("abine/core",["documentcloud/underscore"],function(e){var t={on:function(e,t,n){var i=this._callbacks||(this._callbacks={}),a=i[e]||(i[e]={}),s=a.tail||(a.tail=a.next={});return s.callback=t,s.context=n,a.tail=s.next={},this},off:function(e,t){var n,i,a;if(e){if(n=this._callbacks)if(t){if(i=n[e])for(;(a=i)&&(i=i.next);)if(i.callback===t){a.next=i.next,i.context=i.callback=null;break}}else n[e]={}}else this._callbacks=null;return this},trigger:function(e){var t,n,i,a,s,r=["all",e];if(!(n=this._callbacks))return this;for(;s=r.pop();)if(t=n[s])for(a="all"==s?arguments:Array.prototype.slice.call(arguments,1);t=t.next;)(i=t.callback)&&i.apply(t.context||this,a);return this},once:function(e,t,n){function i(){return a.off(e,i),t.apply(this,arguments)}var a=this;return this.on(e,i,n)},onceAny:function(){function e(){for(var n=0;n<t.length;n++)this.off.apply(this,[t[n][0],e]),this.off.apply(this,t[n])}for(var t=arguments,n=0;n<arguments.length;n++)this.on.apply(this,arguments[n]),this.on.apply(this,[arguments[n][0],e]);return this}},n=function(){},i=function(t,i,a){var s;return s=i&&i.hasOwnProperty("constructor")?i.constructor:function(){return t.apply(this,arguments)},e.extend(s,t),n.prototype=t.prototype,s.prototype=new n,i&&e.extend(s.prototype,i),a&&e.extend(s,a),s.prototype.constructor=s,s.__super__=t.prototype,s},a=function(e,t){var n=i(this,e,t);return n.extend=this.extend,n},s=function(){this.initialize.apply(this,arguments)};return e.extend(s.prototype,t,{initialize:function(){}}),s.extend=a,{BaseClass:s,Events:t}}),ABINE_DNTME.define("abine/contentManager",["documentcloud/underscore","jquery","abine/core","abine/contentMessenger","abine/window","abine/timer","abine/formAnalyzer","abine/formStrategy","models","abine/config","abine/url","abine/proxies","abine/views/unlockPanel","abine/views/notificationPanel","abine/assets","abine/views/paymentHelperPanel","abine/views/dntmePanel"],function(e,t,n,i,a,s,r,o,l,c,d,h,u,p,f,m,g){function b(e){var t=0,n=0;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{left:t,top:n}}var v={zIndex:"2147483647",position:"absolute",top:"20px",right:"20px",overflow:"hidden",borderWidth:"0px",background:"transparent",backgroundColor:"transparent"};allowedHostsRegex="development"==c.environment?/(^(.+\.)?abine\.com$)|(^(.+\.)?idme\.dev$)|(^(.+\.)?license-platform\.dev$)|(^(.+\.)?idme-platform\.dev$)|(^localhost(:[0-9]+)?$)/i:/^(.+\.)?abine\.com$/i;var y=n.BaseClass.extend({initialize:function(n){return this.document=n.document,this.href=this.document.location?this.document.location.href:null,this.domain=n.domain||(this.href?d.getTLD(this.href):null),this.document.documentElement.hasAttribute("abine_webapp")&&this.document.documentElement.setAttribute("dnt",ABINE_DNTME.config.version),n.force||this.document.defaultView==this.document.defaultView.top?(this.messenger=new i.ContentMessenger({eventAggregator:n.eventAggregator,document:n.document}),this.document.defaultView&&this.document.defaultView==this.document.defaultView.top&&this.messenger.on("background:dntme:show",e.bind(this.showDNTMe,this)),"Firefox"==ABINE_DNTME.config.browser?(h.connect(null),this.tabId=this.messenger.messengerId):h.connect(this.messenger,e.bind(function(e){this.tabId=e},this)),h.securityManager.isMaskmeInstalled(e.bind(function(n){n?(this._disableFormHelpers=!0,this.maskme_installed=!0):(this.document.defaultView&&this.document.defaultView==this.document.defaultView.top&&(this.messenger.on("background:saveForm:notification",e.bind(this.showNotification,this)),this.messenger.on("contentManager:processNewFrame",e.bind(function(e){var t=this.document.getElementById(e);if(t){var n=t.contentWindow||t.contentDocument;n&&(n.document&&(n=n.document),this.setupFormsInFrame(n,t))}},this))),t(this.document).ready(e.bind(this.hookDocumentEventHandlers,this,this.document)),this.messenger.on("background:failedSubmitDetector:recheckForms",e.bind(function(){this.startFormHelpers()},this)),this.lockedCB=e.bind(this.locked,this),this.unlockedCB=e.bind(this.unlocked,this),h.securityManager.on("background:securityManager:locked",this.lockedCB),h.securityManager.on("background:securityManager:unlocked",this.unlockedCB),this._locked=null,h.securityManager.isLocked(e.bind(function(e){this._locked=e},this)),this.domain&&this.messenger.send("contentscript:contextmenu:refresh",{domain:this.domain}),t(this.document).bind("contextmenu",e.bind(this.trackLastElementClicked,this)),this.messenger.on("background:contextmenu:fill",e.bind(this.fillField,this)),this.messenger.on("background:contextmenu:maskcard",e.bind(this.maskCardContextMenu,this)),this.messenger.on("broadcast:preference:reload",e.bind(function(){this.loadUserPreferences()},this)),ABINE_DNTME.contentuser={shouldSendErrorReports:e.bind(function(){return this.preferences&&this.preferences.isPrefTrue("shouldSendErrorReports")},this),getEmailSalt:e.bind(function(){return this.preferences?this.preferences.getPref("Salt.ShieldedEmail"):"NULL PREFERENCES"},this),hasRegEmail:e.bind(function(){return this.preferences?this.preferences.hasPref("regEmail"):!1},this),shieldedEmails:new l.ShieldedEmailCollection},ABINE_DNTME.contentuser.shieldedEmails.fetchAll())},this)),this.notifyInit(),void 0):(this.messenger={send:function(){}},void 0)},triggerKeyboardEvent:function(e,t){var n=this.document.createEvent("KeyboardEvent");n.initKeyboardEvent?n.initKeyboardEvent(e,!0,!0,null,!1,!1,!1,!1,9,0):n.initKeyEvent&&n.initKeyEvent(e,!0,!0,null,!1,!1,!1,!1,9,0),t.dispatchEvent(n)},maskCardContextMenu:function(){if(this.lastElementClicked){var n={element:this.lastElementClicked,dataType:"/financial/creditcard/number"};this.createPanel({style:{},secured:!0,panelWidth:450,field:n,ready:e.bind(function(i){var a=new m({field:n,formEl:this.lastElementClicked.parentNode,contentManager:this,fromContextMenu:!0,authToken:this.preferences.getPref("authToken"),beginnerMode:this.preferences.getPref("beginnerMode"),hasRegistered:this.preferences.isPrefTrue("hasRegistered"),entitledToPayments:this.preferences.isPrefTrue("entitledToPayments"),hasEnabledPayments:this.preferences.isPrefTrue("hasEnabledPayments"),entitledToPhone:this.preferences.isPrefTrue("entitledToPhone"),dynamicPanel:null,fields:[n],domain:this.domain,el:t("<div></div>",i).get(0)});t(n.element).one("dntme.closepanel",e.bind(a.closePanel,a)),a.bind("remove",function(){t(n.element).unbind("dntme.closepanel");try{a.remove()}catch(e){}this.removePanels()},this),a.bind("render",function(){this.autoResizePanels()},this),t("body",i).append(a.el)},this)})}},fillField:function(e){var n=e.element||this.lastElementClicked;if(n){"/password"==e.dataType&&(!this.generatedPassword&&e.generatedNow?this.generatedPassword=e.value:this.generatedPassword&&e.generatedNow&&(e.value=this.generatedPassword)),t(n).val(e.value),e.name=n.getAttribute("name"),e.id=n.getAttribute("id"),this.contextForm||(this.contextForm=t("<form maskMeFilled='yes'></form>",this.document));var i=t(n).clone();i.attr("abinedatatype",e.dataType),this.contextForm.append(i),t(this.contextForm.get(0)).data("mmFields",null),this.messenger.send("panel:fill",{fieldData:e})}},trackLastElementClicked:function(e){("input"==e.target.localName||"textarea"==e.target.localName)&&(this.lastElementClicked=e.target)},isLocked:function(){return this._locked},locked:function(){this._locked=!0,this.trigger("locked"),this.domain&&this.messenger.send("contentscript:contextmenu:refresh",{domain:this.domain})},unlocked:function(){this._locked=!1,this.trigger("unlocked"),this.domain&&this.messenger.send("contentscript:contextmenu:refresh",{domain:this.domain})},notifyInit:function(){if(this.href){var e={url:this.href,domain:this.domain};this.messenger.send("contentManager:init",e),this.trigger("contentManager:init",e)}},start:function(n){function i(){if(this.document.defaultView==this.document.defaultView.top&&this.preferences.getPref("showTrackersOnload")&&-1==ABINE_DNTME.config.webAppHost.indexOf(this.domain)){var n=this.domain;h.memoryStore.get(n,e.bind(function(i){i||t(this.document).ready(e.bind(function(){var t=new l.TabData({messenger:this.messenger});t.fetch({success:e.bind(function(){this.lastDNTMePanel||t.get("reloadRequired")||this.href.match(/dntmeFullTour=|dntmeTour=/i)||(h.memoryStore.set(n,!0),this.showDNTMe({tabId:this.tabId,compact:!0}))},this)})},this))},this))}}function a(){!this.maskme_installed&&this.preferences.getPref("showInTheKnowGrowls")?h.panelsModule.getDNTMeGrowl(this.tabId,e.bind(function(n){n?t(this.document).ready(e.bind(function(){this.showNotification({type:"growl",dynamicPanel:n,neverFade:!0})},this)):i.call(this)},this)):i.call(this)}function r(){this.startFormHelpers(),a.call(this)}return n=n||0,null===this._locked?(20>n&&s.setTimeout(e.bind(function(){this.start(n+1)},this),100),void 0):(this.blacklist?this.loadUserPreferences(e.bind(r,this)):(this.blacklist=new l.Blacklist({domain:this.domain}),this.blacklist.fetchByDomain(!1,e.bind(function(){this.blacklisted=this.blacklist.get("tracker"),this.loadUserPreferences(e.bind(r,this))},this))),void 0)},loadUserPreferences:function(t){t=t||function(){},this.preferences=new l.PreferenceCollection({}),this.preferences.bind("sync:success",e.once(e.bind(function(){t.call(this)},this))),this.preferences.bind("sync:error",e.bind(function(){t.call(this)},this)),this.preferences.fetchAll()},arrayFromNodeList:function(e){return Array.prototype.slice.call(e)},hookForUserIntent:function(){this.userIntent=!0},disableFormHelpers:function(){t(this.document).off("mousedown",this.hookNewFormsOnClickHandler),this.stopFormHelpers(),this.blacklisted=!0,this._disableFormHelpers=!0},hookNewFormsOnClick:function(n){function i(){s.setTimeout(function(){t(a).trigger("focus")},50)}if(!this.blacklisted){this.formHelpers=this.formHelpers||[];var a=n.target;if("input"===a.nodeName.toLowerCase()){var o=a.form||t(a).closest("form").get(0),l=null;o?(l=e(this.formHelpers).find(function(e){return e.formEl==o?!0:void 0}),l&&r.hasFormChanged(o)&&(l.cleanup(),this.formHelpers=e(this.formHelpers).filter(function(e){return e!=l}),l=null,r.clearFormCache(o)),l||this.setupFormHelperForFormEl(o,[],i)):(l=e(this.formHelpers).find(function(e){for(var t=a.parentNode;t&&t!=e.formEl;)t=t.parentNode;return e.formEl==t?!0:void 0}),l?i():this.startFormHelpers(function(){l=e(this.formHelpers).find(function(e){for(var t=a.parentNode;t&&t!=e.formEl;)t=t.parentNode;return e.formEl==t?!0:void 0}),i()}))}}},setupFormHelperForFormEl:function(t,n,i){if(this._disableFormHelpers)return i&&i(),void 0;var a=null,s=null;if(this.domain&&this.domain.match(allowedHostsRegex)&&t.hasAttribute("datatype-ignore"))return i(),void 0;var c=r.getFormSignature(this.domain,t),d=null;if(this.formMappings&&(d=this.formMappings.find(function(e){return e.get("signature")==c?!0:!1
})),s=d?d.get("formType"):r.getFormType(t),s==r.LOGIN_FORM?a=o.LoginHelper:s==r.REGISTRATION_FORM?a=o.RegistrationHelper:s==r.OTHER_FORM?a=o.OtherHelper:s==r.LOGIN_REGISTRATION_FORM?a="loginRegisterHelper":s==r.CHECKOUT_FORM&&(a=o.CheckoutHelper),a){var h={};if(t.elements)for(var u=0;u<t.elements.length;u++)t.elements[u].name&&(h[t.elements[u].name]=1);var p=t.hasAttribute("action")?t.getAttribute("action"):"";n.push({url:p,type:s,fields:h});var f,m;if(d&&d.fields&&d.fields.models&&(m={},e.each(d.fields.models,function(e){m[e.get("signature")]=e.get("dataType")})),"loginRegisterHelper"==a||a==o.LoginHelper){var g=new l.DisposableEmailCollection,b=e.bind(function(e){e&&!0&&ABINE_DNTME.log.error("[ERROR CALLBACK]#[abine/common/content_manager]#[setupFormHelperForFormEl]# error while loading emails for site"),a=e||!g||0==g.length?"loginRegisterHelper"==a?o.RegistrationHelper:a:o.LoginHelper,f=new a({el:t,mappedFields:m,contentManager:this,preferences:this.preferences,emails:g}),this.formHelpers.push(f),i()},this);this.domain?g.fetchAllByDomain(this.domain,b):b()}else f=new a({el:t,mappedFields:m,contentManager:this,preferences:this.preferences}),this.formHelpers.push(f),i()}},hookDocumentEventHandlers:function(n){this.userIntentHandler?(t(n).off("keydown",this.userIntentHandler),t(n).off("mousedown",this.userIntentHandler),t(n).off("mousedown",this.hookNewFormsOnClickHandler)):(this.userIntentHandler=e.bind(this.hookForUserIntent,this),this.hookNewFormsOnClickHandler=e.bind(this.hookNewFormsOnClick,this)),t(n).on("keydown",this.userIntentHandler),t(n).on("mousedown",this.userIntentHandler),t(n).on("mousedown",this.hookNewFormsOnClickHandler)},startFormHelpers:function(t){if(this._disableFormHelpers)return t&&t(),void 0;if(this.blacklisted)return t&&t(),void 0;this.hookDocumentEventHandlers(this.document);var n=Date.now();this.formHelpers=this.formHelpers||[],this.innerFrames=this.innerFrames||{};var i=this.arrayFromNodeList(this.document.getElementsByTagName("form")),a=this.arrayFromNodeList(this.document.getElementsByTagName("iframe"));if(e(a).each(function(t){try{var n=t.contentWindow||t.contentDocument;if(n){n.document&&(n=n.document),n.documentElement.mmFormsProcessed=!0;var a=this.arrayFromNodeList(n.getElementsByTagName("form"));if(a.length>0){var s="iframe."+Math.random();this.innerFrames[s]=t,e(a).each(function(e){e.setAttribute("abFrameId",s)}),i=i.concat(a)}}}catch(r){}},this),i=i.concat(r.getFieldGroupsWithoutForm(this.document)),i=e(i).filter(e.bind(function(e){for(var t=0;t<this.formHelpers.length;t++)if(this.formHelpers[t].formEl==e)return!1;return!0},this)),this.formsData=this.formsData||[],0==i.length)return t&&t(),void 0;var s=e.bind(function(){e.async.forEachSeries(i,e.bind(function(e,t){this.setupFormHelperForFormEl(e,this.formsData,t)},this),e.bind(function(e){e&&!0&&ABINE_DNTME.log.error("[ERROR CALLBACK]#[abine/common/content_manager]#[startFormHandlers]# error event in setupFormHelperForFormEl while doing formElements async.forEach"),this.messenger.send("contentManager:formsInitialized",{forms:this.formsData,domain:this.domain}),this.trigger("contentManager:formsInitialized",{forms:this.formsData,domain:this.domain});Date.now()-n;t&&t()},this))},this);!this.formMappings&&0!==i.length&&this.domain?(this.formMappings=new l.MappedFormCollection({}),this.formMappings.fetchAllByDomain(this.domain,e.bind(function(){s()},this))):s()},stopFormHelpers:function(){e(this.formHelpers).each(function(e){e.cleanup()}),this.formHelpers=[],this.innerFrames=[]},setupFormsInFrame:function(n,i){if(n.documentElement&&!n.documentElement.mmFormsProcessed&&!this.blacklisted){this.hookDocumentEventHandlers(n),this.formHelpers=this.formHelpers||[],this.innerFrames=this.innerFrames||{},this.formsData=this.formsData||[];var a=null;!i&&n.defaultView&&n.defaultView.frameElement&&(i=n.defaultView.frameElement),i&&(a="iframe."+Math.random(),this.innerFrames[a]=i),n.documentElement.mmFormsProcessed=!0,t(n).bind("click",e.bind(this.hookNewFormsOnClick,this));var s=this.arrayFromNodeList(n.getElementsByTagName("form"));s=s.concat(r.getFieldGroupsWithoutForm(n));var o=[];e.async.forEachSeries(s,e.bind(function(e,t){a&&e.setAttribute("abFrameId",a),this.setupFormHelperForFormEl(e,o,t)},this),e.bind(function(e){e&&!0&&ABINE_DNTME.log.error("[ERROR CALLBACK]#[abine/common/content_manager]#[setupFormsInFrame]# error in setupFormHelperForFormEl while doing formElements async.forEach"),this.formsData=this.formsData.concat(o),this.messenger.send("contentManager:formsInitialized",{forms:o,domain:this.domain}),this.trigger("contentManager:formsInitialized",{forms:o,domain:this.domain})},this))}},triggerFocusOnElement:function(e){t(e).trigger("focus")},getPanelForDataType:function(t,n){var i=e.find(t,function(e){return e.field_type==n});return i?i:!1},createPanel:function(t){if(t.style=e.extend({},v,t.style),t.document=this.document,t.field){var n=this.innerFrames;t.ready=e.wrap(t.ready,function(e,i,a){_(i,a.parentElement,t.field.element,n),e(i,a)}),this.closeCurrentPanel(),this._currentPanelField=t.field}return t.secured&&this.isLocked()&&!t.hasDynamicPanel?(this.createLoginPanel(t),void 0):(t.panelWidth||(t.panelWidth=400),a.createPanel(t))},/**
       * @license
       * Array Remove Copyright (c) John Resig (MIT Licensed)
       */
removeFromArray:function(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=0>t?e.length+t:t,e.push.apply(e,i)},processDynamicPanelForField:function(e){var t=this.preferences.getPref("dynamicPanels"),n=t?JSON.parse(t):"",i=!1;if(n&&n.panels&&(i=this.getPanelForDataType(n.panels,e))){parseInt(i.masked_emails)>0&&(i.dontShow=!0);var a=parseFloat(i.show_rate),s=Math.random();s>a&&(i.dontShow=!0)}return{dynamicPanel:i}},showDNTMe:function(n){n=n||{tabId:this.tabId};var i=this.document.getElementById("mmPostInstallClose");i&&t(i).click();var a=600;this.createPanel({className:"abineDNTMePanel",panelWidth:n.compact&&"medals"!=n.page?200:311,panelHeight:a,style:{borderRadius:"0px",height:a+"px",position:"fixed",top:n.compact?"50px":v.top},ready:e.bind(function(i,a){if(this.lastDNTMePanel){var s=this.lastDNTMePanel;this.lastDNTMePanel=null;try{s.remove()}catch(r){}try{t(s.iframe.parentNode).remove()}catch(r){}}h.panelsModule.getDNTMePanel(n.tabId,e.bind(function(e){var s=this.lastDNTMePanel=new g({messenger:this.messenger,contentManager:this,domain:this.domain,dynamicPanel:e,compact:n.compact,page:n.page,highlight:n.highlight,premium:this.preferences.getPref("entitledToPhone"),footerCampaign:this.preferences.getPref("footerCampaign"),el:t("<div></div>",i).get(0)});s.iframe=a,s.messenger=this.messenger,s.bind("remove",function(){this.lastDNTMePanel=null;try{s.remove()}catch(e){}try{t(a.parentNode).remove()}catch(e){}},this),s.bind("render resize",function(){this.autoResizePanels("abineDNTMePanel",10,10)},this),s.bind("show-settings",function(e){delete n.compact,n.page="settings",e&&(n.highlight=e.highlight),this.showDNTMe(n)},this),s.bind("show-trackers",function(){delete n.compact,n.page="trackers",this.showDNTMe(n)},this),s.bind("show-medals",function(){n.page="medals",this.showDNTMe(n)},this),s.bind("show-report",function(){n.page="weekly-report",this.showDNTMe(n)},this),s.bind("max-height",function(){this.autoResizePanels("abineDNTMePanel",10,1e3)},this),s.bind("show-trackers",function(){delete n.compact,n.page="trackers",this.showDNTMe(n)},this),t("body",i).append(s.el)},this))},this)})},showNotification:function(n){if(this.preferences.getPref("showNotifications")&&n){var i=parseInt(this.preferences.getPref("countNotifications"))+1;this.preferences.setPref("countNotifications",i);var a=i>10?3e3:1e4;if(n.height=n.height?n.height:35,this.lastDNTMePanel)try{this.lastDNTMePanel.remove(),this.lastDNTMePanel=null}catch(s){}this.createPanel({className:"abineNotificationPanel",panelWidth:n.panelWidth,panelHeight:n.height,style:{height:n.height+"px",position:"Firefox"==ABINE_DNTME.config.browser?"absolute":"fixed"},ready:e.bind(function(i,s){var r=!1,o=p.NotificationPanelView;if("card"==n.type){var l=1;this.preferences.hasPref("countCardNotifications")&&(l=parseInt(this.preferences.getPref("countCardNotifications"))+1),this.preferences.setPref("countCardNotifications",l),o=p.CardNotificationPanelView,5>=l&&(r=!0,n.detailed=!0)}else if("email"==n.type||"post-register"==n.type){var c=1;this.preferences.hasPref("countEmailNotifications")&&(c=parseInt(this.preferences.getPref("countEmailNotifications"))+1),this.preferences.setPref("countEmailNotifications",c),5>=c&&(o=p.DetailedEmailNotificationPanelView,r=!0,n.neverFade=!0)}else"growl"==n.type&&(o=p.GrowlNotificationPanelView);var d=new o({notification:n,contentManager:this,domain:this.domain,messenger:this.messenger,el:t("<div></div>",i).get(0),timeout:a});d.iframe=s,this.notificationViews||(this.notificationViews=[]),r&&(e.each(this.notificationViews,function(e){e.remove()}),this.notificationViews=[]),this.notificationViews.unshift(d),d.bind("remove",function(){for(var e=0,n=0;n<this.notificationViews.length;n++)this.notificationViews[n].iframe==s&&(e=n);if(this.removeFromArray(this.notificationViews,e),d.remove(),t(s.parentElement).remove(),this.notificationViews.length>0)for(var i=10,n=this.notificationViews.length-1;n>=0;n--)this.notificationViews[n].iframe.parentElement.style.top=i+"px",i+=this.notificationViews[n].iframe.parentElement.offsetHeight+5},this);var h=10;e.each(this.notificationViews,function(e){e.iframe!=s&&(h+=e.iframe.parentElement.offsetHeight+5)}),s.parentElement.style.top=h+"px",d.bind("render resize",function(){this.autoResizePanels("abineNotificationPanel")},this),t("body",i).append(d.el)},this)})}},createLoginPanel:function(n){n.contentManager=this,n.ready=e.bind(function(i,a){var s=this.innerFrames;_(i,a.parentElement,n.field.element,s);var r=new u({field:n.field,contentManager:n.contentManager,preferences:n.contentManager.preferences,el:t("<div></div>",i).get(0),doc:i});t(n.field.element).one("dntme.closepanel",e.bind(r.closePanel,r)),r.bind("remove",function(){t(n.field.element).unbind("dntme.closepanel"),r.remove(),this.removePanels()},this),r.bind("render resize",function(){this.autoResizePanels()},this),t("body",i).append(r.el)},this)},isPanelShown:function(e){return this._currentPanelField&&this._currentPanelField.element==e.element},closeCurrentPanel:function(){this._currentPanelField&&(t(this._currentPanelField.element).trigger("dntme.closepanel"),this._currentPanelField=null)},autoResizePanels:function(e,t,n){a.autoResizePanels({document:this.document,className:e,extraWidth:t,extraHeight:n})},removePanels:function(e){a.removePanels({document:this.document,iframe:e})},destroy:function(){try{h.securityManager.off("background:securityManager:locked",this.lockedCB)}catch(e){}try{h.securityManager.off("background:securityManager:unlocked",this.unlockedCB)}catch(e){}if("Firefox"!=ABINE_DNTME.config.browser)try{h.disconnect()}catch(e){}try{this.disableFormHelpers()}catch(e){}if(this.messenger){try{this.messenger.send("contentManager:destroy")}catch(e){}this.messenger.off(),this.messenger.destroy(),delete this.messenger}}}),_=function(e,n,i,a){function s(){var e=null;if(i.form){var n=i.form.getAttribute("abFrameId");n&&n in a&&(e=a[n])}if(!e)try{e=i.ownerDocument.defaultView.frameElement}catch(s){}if(e){var o;try{o=t(e).offset()}catch(s){o=b(e)}r.top+=o.top+1-i.ownerDocument.body.scrollTop,r.left+=o.left-i.ownerDocument.body.scrollLeft}}var r;try{try{r=t(i).offset();try{i.ownerDocument!=n.ownerDocument&&s()}catch(o){}}catch(o){r=b(i),s()}r.top+=t(i,e).outerHeight()}catch(o){r={top:0,left:0}}n.style.top=r.top+"px",n.style.left=r.left+"px"};return{ContentManager:y}}),ABINE_DNTME.define("abine/formAnalyzer",["documentcloud/underscore","jquery","pidcrypt","abine/phoneHeuristics","abine/paymentHeuristics","abine/url"],function(e,t,n,i,a){var s="loginForm",r="registrationForm",o="checkoutForm",l="changepasswordForm",c="otherForm",d="loginRegistrationForm",h="emailField",u="passwordField",p="phoneField",f="usernameField",m="paymentField",g="addressField",b={checkbox:1,radio:1,hidden:1,button:1,submit:1,file:1,image:1},v={LOGIN_FORM:s,REGISTRATION_FORM:r,CHECKOUT_FORM:o,CHANGEPASSWORD_FORM:l,OTHER_FORM:c,LOGIN_REGISTRATION_FORM:d,EMAIL_FIELD:h,PASSWORD_FIELD:u,PHONE_FIELD:p,USERNAME_FIELD:f,PAYMENT_FIELD:m,ADDRESS_FIELD:g,getFormType:function(t){var n=v.getFields(t),i=0,a=0,d=0,h=0,u={},p=0;e(n).each(function(e){"/ignore"!=e.dataType&&("password"==e.fieldType||"/password"==e.dataType||"/passwordold"==e.dataType?(i++,u[e.fieldType]||(u[e.fieldType]=0),u[e.fieldType]++):(e.fieldType in{text:1,email:1,tel:1}&&a++,"/contact/email"==e.dataType?d++:"/nameperson/friendly"==e.dataType&&h++,e.dataType&&e.dataType.indexOf("financial")>=0&&p++))}),u.text&&u.password&&(i-=u.text);var f=c;return 0===i?d>=1?f=r:1===h&&(f=s):1===i?f=a>1?r:s:2===i?f=r:3===i&&(f=l),p>0&&(f=o),f},hasFormChanged:function(e){for(var n=t(e).find("input, textarea").toArray(),i=0;i<n.length;i++)if(!t(n[i]).data("mmProcessed"))return!0;var a=this.getFields(e);for(var i in a)if(!a[i].element.parentNode)return!0;return!1},clearFormCache:function(e){t(e).removeData("mmSignature"),t(e).removeData("mmFields")},getFormSignature:function(e,i){var a,s,r,o={},l=t(i).find("input, textarea").toArray(),c=t(i).data("mmSignature");if(c)return c;c="",c+=e;for(var d=[],h=0;h<l.length;h++)if(r=l[h],!(r.hasAttribute("type")&&r.getAttribute("type").toLowerCase()in b||r.hasAttribute("readonly"))){if(s=r.nodeName.toLowerCase(),a=r.name||r.id||s,o[a]){for(var u=2;o[a+u];)u++;a+=u}d.push(a),o[a]=1}d.sort();for(var h=0;h<d.length;h++)c+=d[h]+"_";return c=n.SHA1(c),t(i).data("mmSignature",c),c},getFields:function(e,n){var s,r,o,l,c,d,h,u,p=[],f=0,m=0,g=t(e).data("mmFields");if(g)return g;g={},t(e).data("mmFields",g);for(var y=t(e).find("input, textarea, select").toArray(),E=v.getLabelMapFor(e),k=0;k<y.length;k++)if(d=y[k],t(d).data("mmProcessed",1),!(d.hasAttribute("type")&&d.getAttribute("type").toLowerCase()in b||d.hasAttribute("readonly"))){if(f+=1,r=d.nodeName.toLowerCase(),s=d.name||d.id||r,g[s]){for(var w=2;g[s+w];)w++;s+=w}c=E[d.id||d.name]?E[d.id||d.name].text:null,null==c&&d.hasAttribute("placeholder")&&(c=d.getAttribute("placeholder")),""==c&&(c=null),"select"==r?h="select":"textarea"==r?h="textarea":"input"==r&&(h=d.getAttribute("type")?d.getAttribute("type").toLowerCase():"text"),"email"==h?l="/contact/email":"tel"==h?l="/contact/phone":(u=d.name||_(d.id)||d.className||"",l=v.getDataTypeByRegExRules(u,c,h,d.innerHTML),"password"!=h||"/passwordold"==l||l&&-1!=l.indexOf("/financial")||(l="/password"),"/password"==l&&(m++,o||(o=s))),n&&n[s]&&(l=n[s]),d.hasAttribute("abinedatatype")&&(l=d.getAttribute("abinedatatype")),g[s]={position:f,element:d,fieldType:h,id:d.id,className:d.className,name:d.name,dataType:l,label:c,signature:s,maxlength:d.hasAttribute("maxlength")?parseInt(d.getAttribute("maxlength")):null,size:d.size?d.size:null},p[f]=g[s],p[f].key=s}return n||(3==m&&(g[o].dataType="/passwordold"),i.apply(g,p),a.apply(g,p)),g},getFieldType:function(e){var t=e.nodeName.toLowerCase();if("select"==t)return"select";if("textarea"==t)return"textarea";if("input"==t){var n=e.getAttribute("type");return n?n.toLowerCase():"text"}},getLabelMapFor:function(e){var n,i={};return t(e).find("label").each(function(e,a){if(n=a.getAttribute("for"))i[n]||(i[n]={element:a,text:t(a).text()||a.name||a.id});else{var s=a.nextSibling;for(s||(s=a.parentNode.nextSibling);s&&1!=s.nodeType;)s=s.nextSibling;if(s&&!s.form&&s.firstChild)for(s=s.firstChild;s&&1!=s.nodeType;)s=s.nextSibling;s&&s.form&&(s.id||s.name)&&(i[s.id||s.name]={element:a,text:t(a).text()||a.name||a.id})}}),i},getLabelFor:function(e,n){var i=e.id||e.name;return i?t(n).find('label[for="'+i+'"]').get(0):null},getDataTypeByRegExRules:function(t,n,i,a){var s=t&&t.length>0,r=n&&n.length>0,o=s?t.replace(E.nonAlphanumeric,""):null,l=r?n.replace(E.nonAlphanumeric,""):null;o==t&&(alternameName=null),l==n&&(alternameLabel=null);var c=n+t,d=l+o,h=y[i];if(!h)return null;for(var u=[],p=0;p<h.length;p++){var f=h[p],m="undefined"!=typeof f.label,g="undefined"!=typeof f.name;if(!f.negative||!(t&&t.match(f.negative)||n&&n.match(f.negative))){if(r&&!m&&g&&n.match(f.name)||r&&m&&n.match(f.label)||s&&g&&t.match(f.name)||l&&!m&&g&&l.match(f.name)||l&&m&&l.match(f.label)||o&&g&&o.match(f.name)){if(f.options&&a&&!a.match(f.options))continue;u.push(f.data_type);break}if(f.label_name&&r&&s&&(!m&&g&&c.match(f.name)||m&&c.match(f.label)||g&&c.match(f.name)||d&&!m&&g&&d.match(f.name)||d&&m&&d.match(f.label)||d&&g&&d.match(f.name))){u.push(f.data_type);break}if(f.matchByOptions&&f.options&&a&&a.match(f.options)){u.push(f.data_type);break}}}if(1==u.length)return u[0];if(u.length>1){var b=e(u).find(function(e){return"/contact/email"==e?!0:void 0});return b?b:u[0]}return null},getFieldGroupsWithoutForm:function(t){for(var n={text:1,password:1,email:1,tel:1},i=t.getElementsByTagName("input"),a=(e(i).filter(function(e){if(e.form)return!1;var t=e.type?e.type.toLowerCase():"text";return t in n},this)),s=[],r=[],o=[1],l={},c=0;c<a.length;c++){for(var d=a[c].parentNode,h={},u=0,p=!1;d&&3>u;){if(d.id=d.id||"abId"+Math.random(),c>0&&d.id in r[c-1]){o[c]=o[c-1],h=r[c-1],(!(o[c-1]in l)||l[o[c-1]].depth<u)&&(l[o[c-1]]={lca:d,depth:u}),p=!0;break}h[d.id]=1,d=d.parentNode,u++}r.push(h),p||(o[c]=0==c?1:o[c-1]+1,l[o[c]]={lca:a[c].parentNode,depth:0})}var f={};for(var m in l)l[m].lca.id in f||(f[l[m].lca.id]=1,s.push(l[m].lca));return s.length>0,s}},y={text:[{name:/.*captcha.*/i,data_type:"/ignore"},{name:/^q$|find|search|terms/i,data_type:"/ignore"},{name:/hint/i,data_type:"/ignore"},{name:/email|e\-mail/i,label:/windowsliveid|email|e\-mail/i,negative:/search|friend|reference|recipient|reference|receiver/i,data_type:"/contact/email"},{name:/user|userid|alias|login|uname|yahooid|onlineid|session_key|(?:(?:nick|screen|member|usr|user|account|login|display).*(name|id))/i,label:/alias|shortname|login|handle|display.*name|user[\s]*(name|id)/i,negative:/credit|password|full/i,data_type:"/nameperson/friendly"},{name:/(?:title|salutation)/i,data_type:"/nameperson/prefix"},{name:/(?:lname|last|sur).*(?:name)?/i,label:/last.*name/i,data_type:"/nameperson/last",negative:/full/i},{name:/(?:fname|first).*(?:name)?/i,label:/first.*name/i,data_type:"/nameperson/first",negative:/full/i},{name:/(?:.*(?:full|invoice|real|bill|(?:ship.*to)).*name)|(?:^name$)/i,negative:/holder|credit/i,data_type:"/nameperson/full"},{label:/(?:middle|middleinitial)/i,data_type:"/nameperson/middle"},{label:/(?:suffix)/i,data_type:"/nameperson/suffix"},{name:/(?:(?:confirm|new|create|re\-enter)[\s]*)?password(?:(?:confirm|new|create|re\-enter)[\s]*)?/i,label:/(?:(?:confirm|new|create|re\-enter)[\s]*)?password/i,negative:/hint|old|current/i,data_type:"/password"},{name:/(?:old|current)[\s]*(?:pass|pwd)/i,label:/[\s]*(?:(?:current|old)[\s]*)password/i,data_type:"/passwordold"},{label:/.*twitter.*/i,data_type:"/contact/im/twitter"},{label:/.*linkedin.*/i,data_type:"/contact/web/linkedin"},{label:/.*blog.*/i,data_type:"/contact/web/blog"},{label:/.*aim/i,data_type:"/contact/IM/aim"},{label:/.*icq.*/i,data_type:"/contact/IM/icq"},{label:/.*msn(?:m)?/i,data_type:"/contact/IM/msn"},{label:/.*jabber/i,data_type:"/contact/IM/jabber"},{label:/.*skypq/i,data_type:"/contact/IM/skype"},{label:/.*(?:yim|yahoo)/i,data_type:"/contact/IM/yahoo"},{name:/(?:home).*phone.*(?:num|number)/i,label:/even.*phone/,negative:/gift|loyalty/i,data_type:"/contact/phone"},{name:/.*(?:cell|mob(?:ile)?).*/i,data_type:"/contact/phone/mobile"},{name:/.*fax.*/i,data_type:"/contact/phone/fax"},{name:/(?:day|daytime|work|business).*phone/i,label:/(?:day|daytime|work|business).*phone/,data_type:"/contact/phone/work"},{name:/(?:night|nighttime|home).*phone/i,label:/(?:night|nighttime|home).*phone/,data_type:"/contact/phone/home"},{name:/area.*code.*/i,data_type:"/contact/phone/areacode",negative:/zip/i},{name:/(?:phone.*(?:area|1).*)/i,data_type:"/contact/phone/areacode",negative:/zip/i},{name:/(?:phone.*(?:exch|prefix|first|2).*)|(?:exchange)/i,data_type:"/contact/phone/exchange"},{name:/phone.*(?:suffix|end|last|3).*/i,data_type:"/contact/phone/local",negative:/zip/i},{name:/phone.*(?:country|countrycode).*/i,label:/\+1/,data_type:"/contact/phone/countrycode"},{name:/home.*(?:exch|prefix).*/i,data_type:"/contact/phone/exchange"},{name:/home.*area.*/i,data_type:"/contact/phone/areacode",negative:/zip/i},{name:/home.*(?:num|suffix|end).*/i,data_type:"/contact/phone/local"},{name:/home.*(?:country|countrycode).*/i,data_type:"/contact/phone/countrycode"},{name:/area.*code/i,data_type:"/contact/phone/areacode",negative:/zip/i},{name:/exchange/i,data_type:"/contact/phone/exchange"},{name:/local/i,data_type:"/contact/phone/local"},{name:/phone.*(?:ext|extension)/i,data_type:"/contact/phone/extension",negative:/text/i},{name:/extension/i,data_type:"/contact/phone/extension"},{name:/phone/i,label:/phone/i,data_type:"/contact/phone"},{name:/(?:bill|b).*(?:zip|postal|post)(?:.*code)?/i,data_type:"/contact/postalcode/billing"},{name:/.*(?:zip|postal|post)(?:.*code)?/i,data_type:"/contact/postalcode"},{name:/bill.*city/i,data_type:"/contact/city/billing"},{name:/business.*city/i,data_type:"/contact/city/business"},{name:/home.*city/i,data_type:"/contact/city/home"},{name:/city/i,data_type:"/contact/city"},{name:/bill.*country/i,data_type:"/contact/country/billing"},{name:/business.*country/i,data_type:"/contact/country/business"},{name:/home.*country/i,data_type:"/contact/country/home"},{name:/country/i,data_type:"/contact/country"},{name:/bill.*state/i,data_type:"/contact/state/billing"},{name:/business.*state/i,data_type:"/contact/state/business"},{name:/home.*state/i,data_type:"/contact/state/home"},{name:/state/i,data_type:"/contact/state"},{name:/bill.*addr.*2/i,data_type:"/contact/postaladdressAdditional/billing"},{name:/home.*addr.*2/i,data_type:"/contact/postaladdressAdditional/home"},{name:/(?:addr.*2)|(?:(?:ad.*)?line.*2)/i,label:/.*address.*(?:line)?.*2.*/,data_type:"/contact/postaladdressAdditional"},{name:/bill.*addr.*3/i,data_type:"/contact/postaladdress3/billing"},{name:/home.*addr.*3/i,data_type:"/contact/postaladdress3/home"},{name:/(?:addr.*3)|(?:(?:ad.*)?line.*3)/i,label:/.*address.*(?:line)?.*3.*/,data_type:"/contact/postaladdress3"},{name:/bill.*addr/i,data_type:"/contact/postaladdress/billing"},{name:/home.*addr/i,data_type:"/contact/postaladdress/home"},{name:/(?:addr.*1?)|(?:(?:ad.*)?line.*1?)/i,label:/.*address.*(?:line1?)?.*/,negative:/type/i,data_type:"/contact/postaladdress"},{name:/.*(?:comment|message).*/i,data_type:"/message"},{name:/.*(?:(?:(?:cc|card)?.*(?:(?:holder|owner).*)))|(?:name.*on.*card)|(?:issued.*to)|(?:(?:card|cc|payment).*name)/i,label:/(?:issued.*to)|(?:name.*on.*card)|(?:card.*name)|(?:card.*holder)/i,negative:/gift|placeholder|account|acct|first|last|num|cvv/i,data_type:"/financial/creditcard/issuedto"},{name:/.*(?:cc|card|credit.*card)?(?:(?:cvv|cvc|ccv|cv|cid|verify|verif.*(?:code|num)|verification|sec.*code|card.*sec.*num)|cvv).*/i,negative:/gift/i,data_type:"/financial/creditcard/verification"},{name:/.*(?:cc|card|credit.*card|payment).*(?:num|number|no)|ccard/i,label:/card.*number/i,negative:/gift|account|reward|acct|issue/i,data_type:"/financial/creditcard/number"},{name:/.*(?:cc|card|credit.*card).*(?:type|issuer)/i,negative:/gift/i,data_type:"/financial/creditcard/type"},{name:/.*(?:(?:(?:cc|card|billing)?.*(?:exp.*))|(?:(?:cc|card).*(?:exp.*)))(?:date.*)?(?:[m]{2}|mo|mon|month|mn)/i,negative:/gift|start|valid|birth/i,data_type:"/financial/creditcard/expirymonth"},{name:/.*(?:(?:(?:cc|card|billing)?.*(?:exp.*))|(?:(?:cc|card).*(?:exp.*)))(?:date.*)?(?:[y]{2,4}|yr|year)/i,negative:/gift|start|valid|birth/i,data_type:"/financial/creditcard/expiryyear"},{name:/.*(?:(?:(?:cc|card|billing)?.*(?:exp.*))|(?:(?:cc|card).*(?:exp.*))|expiration)/i,negative:/gift|year|yr|mon|mm|yy|start|valid|birth/i,data_type:"/financial/creditcard/expiry"},{name:/(?:birth.*year)|(?:dob[y]+)|(?:(?:dob|date).*year.*)|(?:year.*(?:born|birth))|(?:birthday[y]+r?)/i,negative:/exp/i,data_type:"/birthdate/birthyear"},{name:/(?:birth.*mon(?:th)?)|(?:dob[m]+)|(?:(?:dob|date).*mon(?:th)?.*)|(?:month.*(?:born|birth))|(?:birthday[m]+)/i,negative:/exp/i,data_type:"/birthdate/birthmonth"},{name:/(?:birth.*day)|(?:dob[d]+)|(?:(?:dob|date).*(?:day|date).*)|(?:day.*(?:born|birth))|(?:birthday[d]+)/i,data_type:"/birthdate/birthday"},{name:/(?:b|birth|dob)(?:day|date)/i,data_type:"/birthdate"},{name:/.*(?:co|comp|company|business)(?:name)/i,label:/(?:company|business|organization)(?:\s+name)?/i,data_type:"/company/name"},{name:/.*(?:customer).*(?:company).*/i,data_type:"/company/name"},{name:/^pin$/i,label:/^pin$/i,data_type:"/pin"}],password:[{name:/.*(?:cc|card|credit.*card)?(?:cvv|cvc|ccv|id|verify|verif.*(?:code|num)|verification|security.*code|card.*sec.*num).*/i,negative:/gift|password|pass/i,data_type:"/financial/creditcard/verification"},{name:/pin/i,label:/pin/i,data_type:"/pin"},{name:/(?:(?:confirm|new|create|re\-enter|verify)[\s]*)?password(?:(?:confirm|new|create|re\-enter)[\s]*)?/i,label:/(?:(?:confirm|new|create|re\-enter)[\s]*)?password/i,negative:/hint|old|current/i,data_type:"/password"},{name:/(?:old|current)[\s]*(?:pass|pwd)/i,label:/[\s]*(?:(?:current|old)[\s]*)password/i,data_type:"/passwordold"}],select:[{name:/(?:title|salutation)/i,data_type:"/nameperson/prefix"},{name:/.*(?:cc|card|credit.*card|payment).*(?:type|issuer)/i,negative:/gift/i,data_type:"/financial/creditcard/type",options:/visa|diner|amex|american[^<]*express/i,matchByOptions:!0},{name:/.*(?:(?:(?:cc|card|billing|payment)?.*(?:exp.*))|(?:(?:cc|card).*(?:exp.*)?)|exp.*)(?:date.*)?(?:[m]{2}|mo|mon|month|mn)/i,negative:/gift|start|valid|birth/i,data_type:"/financial/creditcard/expirymonth",options:/12|jan|feb/i},{name:/.*(?:(?:(?:cc|card|billing|payment)?.*(?:exp.*))|(?:(?:cc|card).*(?:exp.*)?)|exp.*)(?:date.*)?(?:[y]{2,4}|yr|year)/i,negative:/gift|start|valid|birth/i,data_type:"/financial/creditcard/expiryyear",options:/20[0-9]{2}/i},{name:/(?:birth.*year)|(?:dob[y]+)|(?:(?:dob|date).*year.*)|(?:year.*(?:born|birth))|(?:birthday[y]+r?)/i,negative:/exp/i,data_type:"/birthdate/birthyear"},{name:/(?:birth.*mon(?:th)?)|(?:dob[m]+)|(?:(?:dob|date).*mon(?:th)?.*)|(?:month.*(?:born|birth))|(?:birthday[m]+)/i,negative:/exp/i,data_type:"/birthdate/birthmonth"},{name:/(?:birth.*day)|(?:dob[d]+)|(?:(?:dob|date).*(?:day|date).*)|(?:day.*(?:born|birth))|(?:birthday[d]+)/i,data_type:"/birthdate/birthday"},{name:/(?:b|birth|dob)(?:day|date)/i,data_type:"/birthdate"},{name:/gender|sex/i,data_type:"/person/gender"},{name:/phone.*(?:country|countrycode).*/i,data_type:"/contact/phone/countrycode"},{name:/home.*(?:country|countrycode).*/i,data_type:"/contact/phone/home/countrycode"},{name:/bill.*country/i,data_type:"/contact/country/billing"},{name:/business.*country/i,data_type:"/contact/country/business"},{name:/home.*country/i,data_type:"/contact/country/home"},{name:/country/i,data_type:"/contact/country"},{name:/bill.*state/i,data_type:"/contact/state/billing"},{name:/business.*state/i,data_type:"/contact/state/business"},{name:/home.*state/i,data_type:"/contact/state/home"},{name:/state/i,data_type:"/contact/state"}],checkbox:[{name:/agree|tos|terms|service/i,data_type:"/agreetos"},{name:/(?:accept|agree|terms|(?:read)?rules|conditions|privacypolicy).*/i,data_type:"/agreetos"},{name:/.*(?:remember|persistent).*/i,label:/keepmesignedin/i,data_type:"/rememberme"}],radio:[{name:/gender|sex/i,label:/^(?:male|female)$/i,data_type:"/person/gender"}]},_=function(e){var t=e.match(/^user\[(.*)\]$/);return t?t[1]:e},E={nonAlphanumeric:/[^a-z0-9]+/gim,nonAlpha:/[^a-z]+/gim,spaces:/[\s]+/gim,startsWithDot:/^\./,trimSepartor:/(^\|\|)|(\|\|$)/g,textOrSelect:/text|select/i,email:/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~\-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9\-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i};return v}),ABINE_DNTME.define("abine/formObserver",["documentcloud/underscore","jquery","abine/core","abine/contentMessenger","abine/formAnalyzer","abine/timer"],function(e,t,n,i,a,s){function r(e){return e in l?l[e]:(e=e.substr(0,e.lastIndexOf("/")),e in l?l[e]:null)}function o(e){var t=e.dataType;return t?t in l?!0:(t=t.substr(0,t.lastIndexOf("/")),t in l):!1}var l={"/contact/email":a.EMAIL_FIELD,"/contact/phone":a.PHONE_FIELD,"/contact/phone/countrycode":a.PHONE_FIELD,"/contact/phone/areacode":a.PHONE_FIELD,"/contact/phone/exchange":a.PHONE_FIELD,"/contact/phone/local":a.PHONE_FIELD,"/contact/phone/number":a.PHONE_FIELD,"/contact/phone/extension":a.PHONE_FIELD,"/nameperson/friendly":a.USERNAME_FIELD,"/financial/creditcard/number":a.PAYMENT_FIELD,"/financial/creditcard/number/part1":a.PAYMENT_FIELD,"/financial/creditcard/number/part2":a.PAYMENT_FIELD,"/financial/creditcard/number/part3":a.PAYMENT_FIELD,"/financial/creditcard/number/part4":a.PAYMENT_FIELD,"/financial/creditcard/type":a.PAYMENT_FIELD,"/financial/creditcard/issuedto":a.PAYMENT_FIELD,"/financial/creditcard/expiry":a.PAYMENT_FIELD,"/financial/creditcard/expiryyear":a.PAYMENT_FIELD,"/financial/creditcard/expirymonth":a.PAYMENT_FIELD,"/financial/creditcard/verification":a.PAYMENT_FIELD,"/contact/postaladdress":a.ADDRESS_FIELD,"/contact/postaladdressAdditional":a.ADDRESS_FIELD,"/contact/state":a.ADDRESS_FIELD,"/contact/city":a.ADDRESS_FIELD,"/contact/country":a.ADDRESS_FIELD,"/contact/postalcode":a.ADDRESS_FIELD},c=["focus.mmfo","click.mmfo","blur.mmfo","change.mmfo"],d=n.BaseClass.extend({initialize:function(t){if(this.id=e.uniqueId(),this.el=t.el,this.mappedFields=t.mappedFields,this.messenger=t.messenger||this,this.contentManager=t.contentManager,this.strategy=t.strategy,!this.el)throw"Error: FormObserver initialized without a form element.";this.triggerFormPresent(),this.bindToFormEvents()},getType:function(){return this.formType?this.formType:(this.formType=a.getFormType(this.el),this.formType)},getFields:function(){return this.fields?this.fields:(this.fields=a.getFields(this.el,this.mappedFields),this.fields)},triggerFormPresent:function(){var e=this.getType();e==a.LOGIN_FORM?this.trigger("loginFormPresent",{formObserver:this,fields:this.getFields()}):e==a.REGISTRATION_FORM?this.trigger("registrationFormPresent",{formObserver:this,fields:this.getFields()}):e==a.CHECKOUT_FORM&&this.trigger("checkoutFormPresent",{formObserver:this,fields:this.getFields()})},bindToFormEvents:function(){var n=c.join(" "),i=this.getFields();e(i).each(function(i){var a=o(i);if(a){if(this.strategy.fieldTypeDisabled(i.dataType))return;t(i.element).bind(n,e.bind(function(t){if(!this.contentManager||this.contentManager.userIntent){if("focus"==t.type){if(i.element.getAttribute("dntmeHasFocus"))return;i.element.setAttribute("dntmeHasFocus","yes")}else if("blur"==t.type)return i.element.removeAttribute("dntmeHasFocus"),i.element.removeAttribute("dntmeHasFocusRemoved"),void 0;if(!i.element.getAttribute("mmautofilling")&&!i.element.getAttribute("dntmeIgnoreBlur")){if("click"==t.type||"focus"==t.type){if(i.element.getAttribute("dntmeIgnoreClickFocus"))return;i.element.setAttribute("dntmeIgnoreClickFocus","yes"),s.setTimeout(function(){i.element.removeAttribute("dntmeIgnoreClickFocus")},750)}var n=r(i.dataType);if(n){var a=h(n,t.type);a&&s.setTimeout(e.bind(function(){this.trigger(a,{formObserver:this,field:i,type:t.type,keyCode:"keydown"===t.type?t.keyCode:0})},this),0)}}}},this))}},this)},unbindFormEvents:function(){var n=c.join(" "),i=this.getFields();e(i).each(function(e){t(e.element).unbind(n)})}}),h=function(e,t){var n;return e==a.EMAIL_FIELD?n="emailField":e==a.PHONE_FIELD?n="phoneField":e==a.PASSWORD_FIELD?n="passwordField":e==a.USERNAME_FIELD?n="usernameField":e==a.PAYMENT_FIELD?n="paymentField":e==a.ADDRESS_FIELD&&(n="addressField"),"change"==t?n+="Changed":"focus"==t?n+="Focused":"blur"==t?n+="Blurred":"click"==t?n+="Clicked":"keydown"==t&&(n+="Keydown"),n};return{FormObserver:d,LOGIN_FORM:a.LOGIN_FORM,REGISTRATION_FORM:a.REGISTRATION_FORM,CHECKOUT_FORM:a.CHECKOUT_FORM,OTHER_FORM:a.OTHER_FORM}}),ABINE_DNTME.define("abine/formStrategy",["jquery","documentcloud/underscore","abine/core","abine/formObserver","abine/timer","abine/formAnalyzer","abine/views/emailHelperPanel","abine/views/phoneHelperPanel","abine/views/loginHelperPanel","abine/views/paymentHelperPanel","models","abine/config"],function(e,t,n,i,a,s,r,o,l,c,d){var h=!1,u={fieldTypeDisabled:function(e){return"/contact/email"==e?this.emailDisabledHere():"/contact/phone"==e?this.phoneDisabledHere():e.match(/creditcard|state|city|postal|country/)?this.cardDisabledHere():!1},emailDisabledHere:function(){return!this.contentManager.preferences.getPref("suggestProtectedEmail")||this.contentManager.blacklist&&this.contentManager.blacklist.get("email")},phoneDisabledHere:function(){return!this.contentManager.preferences.getPref("suggestProtectedPhone")||this.contentManager.blacklist&&this.contentManager.blacklist.get("phone")},cardDisabledHere:function(){return!this.contentManager.preferences.getPref("suggestProtectedCard")||this.contentManager.blacklist&&this.contentManager.blacklist.get("card")},disableAutoComplete:function(e){e.hasAttribute("autocomplete")&&!e.hasAttribute("oldautocomplete")?e.setAttribute("oldautocomplete",e.getAttribute("autocomplete")):e.hasAttribute("autocomplete")||e.setAttribute("oldautocomplete","remove"),e.setAttribute("autocomplete","off")},enableAutoComplete:function(e){e.hasAttribute("oldautocomplete")&&("remove"==e.getAttribute("oldautocomplete")?e.removeAttribute("autocomplete"):e.setAttribute("autocomplete",e.getAttribute("oldautocomplete")),e.removeAttribute("oldautocomplete"))},cleanupPanel:function(t,n,i){try{t.remove()}catch(a){}e(n).unbind("dntme.closepanel"),this.contentManager.removePanels(t.iframe),i&&this.enableAutoComplete(n),n.hasAttribute("dntmeHasFocusRemoved")?(n.removeAttribute("dntmeHasFocusRemoved"),n.setAttribute("dntmeHasFocus","yes")):n.removeAttribute("dntmeIgnoreBlur")},canShowDNTMeHelper:function(e,t){var n=e.field.element,i=e.type;if("click"==i&&"register"==t&&h){if(n.hasAttribute("dntmeHasFocus"))return this.contentManager.isPanelShown(e.field)?!0:(n.removeAttribute("dntmeHasFocus"),n.setAttribute("dntmeHasFocusRemoved","yes"),this.disableAutoComplete(n),!1);n.removeAttribute("dntmeHasFocusRemoved"),n.setAttribute("dntmeHasFocus","yes")}return!0},bindFieldChangeObserver:function(){this.formObserver=this.formObserver||new i.FormObserver({el:this.formEl,mappedFields:this.mappedFields,contentManager:this.contentManager,strategy:this})}},p={bindFormObserver:function(){this.formObserver=this.formObserver||new i.FormObserver({el:this.formEl,mappedFields:this.mappedFields,contentManager:this.contentManager,strategy:this});var e=t.bind(this.onEmailFieldActivity,this);this.formObserver.on("emailFieldFocused",e),this.formObserver.on("emailFieldClicked",e);var n=t.bind(this.onPhoneFieldActivity,this);this.formObserver.on("phoneFieldFocused",n),this.formObserver.on("phoneFieldClicked",n);var a=t.bind(this.onPaymentFieldActivity,this);this.formObserver.on("paymentFieldFocused",a),this.formObserver.on("paymentFieldClicked",a);var s=t.bind(this.onAddressFieldActivity,this);this.formObserver.on("addressFieldChanged",s)},cleanup:function(){this.formObserver&&(this.formObserver.unbindFormEvents(),this.formObserver.off())},onEmailFieldActivity:function(n){if(!this.emailDisabledHere()&&this.canShowDNTMeHelper(n,"register")){if(this.contentManager.isPanelShown(n.field))return this.contentManager.closeCurrentPanel(),void 0;if(!this.contentManager.preferences.getPref("hasRegistered")||this.contentManager.preferences.getPref("authToken")){var i=this.formObserver,a=n.field.element;if(this.disableAutoComplete(a),!a.hasAttribute("mmautofilling")&&!a.hasAttribute("mmclosedfield")){var s=this.contentManager.processDynamicPanelForField("/contact/email");if(s.dynamicPanel&&s.dynamicPanel.dontShow&&!this.contentManager.preferences.isPrefTrue("hasRegistered"))return!1;this.contentManager.createPanel({style:{},field:n.field,ready:t.bind(function(o,l){var c=new r({field:n.field,formEl:this.formEl,contentManager:this.contentManager,fields:i.getFields(),dynamicPanel:s.dynamicPanel,hasRegistered:this.contentManager.preferences.isPrefTrue("hasRegistered"),domain:this.contentManager.domain,el:e("<div></div>",o).get(0)});c.iframe=l,e(a).one("dntme.closepanel",t.bind(c.closePanel,c)),c.bind("remove",function(){this.cleanupPanel(c,a,h)},this),c.bind("render resize",function(){this.contentManager.autoResizePanels()},this),e("body",o).append(c.el)},this)})}}}},onPhoneFieldActivity:function(n){function i(){this.disableAutoComplete(s),this.contentManager.createPanel({style:{},secured:!0,hasDynamicPanel:!!r.dynamicPanel,panelWidth:450,field:n.field,ready:t.bind(function(i,l){var c=new o({field:n.field,formEl:this.formEl,contentManager:this.contentManager,dynamicPanel:r.dynamicPanel,entitledToPhone:this.contentManager.preferences.isPrefTrue("entitledToPhone"),hasRegistered:this.contentManager.preferences.isPrefTrue("hasRegistered"),fields:a.getFields(),domain:this.contentManager.domain,el:e("<div></div>",i).get(0)});c.iframe=l,e(s).one("dntme.closepanel",t.bind(c.closePanel,c)),c.bind("remove",function(){this.cleanupPanel(c,s,h)},this),c.bind("render resize",function(){this.contentManager.autoResizePanels()},this),e("body",i).append(c.el)},this)})}if(!this.phoneDisabledHere()&&this.canShowDNTMeHelper(n,"register")){if(this.contentManager.isPanelShown(n.field))return this.contentManager.closeCurrentPanel(),void 0;if(!this.contentManager.preferences.getPref("hasRegistered")||this.contentManager.preferences.getPref("authToken")){var a=this.formObserver,s=n.field.element;if(!s.hasAttribute("mmautofilling")&&!s.hasAttribute("mmclosedfield")){var r=this.contentManager.processDynamicPanelForField("/contact/phone");
if(r.dynamicPanel&&r.dynamicPanel.dontShow&&!this.contentManager.preferences.isPrefTrue("entitledToPhone"))return!1;if(!r.dynamicPanel){if(this.contentManager.isLocked())return!1;if(!this.contentManager.preferences.getPref("entitledToPhone"))return}i.call(this)}}}},onAddressFieldActivity:function(t){try{var n=e(t.field.element).val();n&&""!=n&&(new d.Address).save({data_type:t.field.dataType,value:n})}catch(i){}},onPaymentFieldActivity:function(n){function i(){this.disableAutoComplete(s),this.contentManager.createPanel({style:{},panelWidth:400,hasDynamicPanel:!!r.dynamicPanel,field:n.field,ready:t.bind(function(i,o){var l=new c({field:n.field,formEl:this.formEl,contentManager:this.contentManager,authToken:this.contentManager.preferences.getPref("authToken"),beginnerMode:this.contentManager.preferences.getPref("beginnerMode"),hasRegistered:this.contentManager.preferences.isPrefTrue("hasRegistered"),entitledToPayments:this.contentManager.preferences.isPrefTrue("entitledToPayments"),hasEnabledPayments:this.contentManager.preferences.isPrefTrue("hasEnabledPayments"),entitledToPhone:this.contentManager.preferences.isPrefTrue("entitledToPhone"),dynamicPanel:r.dynamicPanel,fields:a.getFields(),domain:this.contentManager.domain,el:e("<div></div>",i).get(0)});l.iframe=o,e(s).one("dntme.closepanel",t.bind(l.closePanel,l)),l.bind("remove",function(){this.cleanupPanel(l,s,h)},this),l.bind("render resize",function(){this.contentManager.autoResizePanels()},this),this.contentManager.notificationViews&&t.each(this.contentManager.notificationViews,function(e){e.style.display="block"}),e("body",i).append(l.el)},this)})}if("select"!=n.field.fieldType&&!this.cardDisabledHere()&&this.canShowDNTMeHelper(n,"register")){if(this.contentManager.isPanelShown(n.field))return this.contentManager.closeCurrentPanel(),void 0;if(!this.contentManager.preferences.getPref("hasRegistered")||this.contentManager.preferences.getPref("authToken")){var a=this.formObserver,s=n.field.element;if(!s.hasAttribute("mmautofilling")&&!s.hasAttribute("mmclosedfield")){var r=this.contentManager.processDynamicPanelForField("/creditcard");if(r.dynamicPanel&&r.dynamicPanel.dontShow&&!this.contentManager.preferences.isPrefTrue("hasEnabledPayments"))return;if(!r.dynamicPanel){if(this.contentManager.isLocked())return;if(!this.contentManager.preferences.getPref("entitledToPhone")){var o=new d.DisposableEmailCollection;return o.fetchAll({success:t.bind(function(){o.countUserCreated()<=0||i.call(this)},this)}),void 0}}i.call(this)}}}}},f=n.BaseClass.extend({initialize:function(e){if(!e.el)throw"RegistrationFormHelper expects a form element";this.formEl=e.el,this.contentManager=e.contentManager,this.preferences=e.preferences,this.mappedFields=e.mappedFields,this.bindFormObserver(),this.bindFieldChangeObserver()},bindFieldChangeObserver:function(){},bindFormObserver:function(){}});t.extend(f.prototype,p,u);var m=n.BaseClass.extend({initialize:function(e){if(!e.el)throw"LoginHelper expects a form element";this.formEl=e.el,this.contentManager=e.contentManager,this.preferences=e.preferences,this.mappedFields=e.mappedFields,this.emails=e.emails,this.bindFieldChangeObserver(),this.contentManager.preferences.getPref("helpMeLogin")&&this.tryToAutoFillLogins()},cleanup:function(){this.formObserver&&(this.formObserver.unbindFormEvents(),this.formObserver.off())},onEmailFieldActivity:function(n){if(this.autofilled)return this.autofilled--,void 0;if(!this.emailDisabledHere()&&this.canShowDNTMeHelper(n,"login")){if(this.contentManager.isPanelShown(n.field))return this.contentManager.closeCurrentPanel(),void 0;var i=this.formObserver,a=n.field.element;if(this.disableAutoComplete(a),!a.hasAttribute("mmautofilling")&&!a.hasAttribute("mmclosedfield")){var s=this.contentManager.processDynamicPanelForField("/contact/email");this.contentManager.createPanel({style:{},field:n.field,ready:t.bind(function(r,o){var c=new l({field:n.field,formEl:this.formEl,fields:i.getFields(),contentManager:this.contentManager,domain:this.contentManager.domain,dynamicPanel:s.dynamicPanel,el:e("<div></div>",r).get(0)});c.iframe=o,e(a).one("dntme.closepanel",t.bind(c.closePanel,c)),c.bind("remove",function(){this.cleanupPanel(c,a,!0)},this),c.bind("render resize",function(){this.contentManager.autoResizePanels()},this),e("body",r).append(c.el)},this)})}}},tryToAutoFillLogins:function(){var e=this.formObserver.getFields(),n=this.emails;if(this.contentManager.domain&&!this.contentManager.isLocked()&&n&&0!=n.length){var i=t.bind(this.onEmailFieldActivity,this);this.formObserver.on("emailFieldFocused",i),this.formObserver.on("emailFieldClicked",i),this.formObserver.on("usernameFieldClicked",i),this.formObserver.on("usernameFieldFocused",i);var a={};if(t.each(e,t.bind(function(e){e.dataType&&(a[e.dataType]=e)},this)),"/contact/email"in a||"/nameperson/friendly"in a){var s=(a["/contact/email"]||a["/nameperson/friendly"]).element.value;if(""!=s){var r=!1;if(t.each(n,function(e){e.getAddress()==s&&(r=!0)}),!r&&"/password"in a&&""!=a["/password"].element.value)return}}this.contentManager.userIntent&&(this.autofilled=2);var o=n.at(0),l={};l["/contact/email"]=o.getAddress(),t.each(t.keys(a),t.bind(function(e){var t=null;if(e in l?t=e:"/nameperson/friendly"==e&&(t="/contact/email"),t){var n=a[e].element;n.setAttribute("mmautofilling","now"),n.value=l[t],this.contentManager.triggerKeyboardEvent("keydown",n),this.contentManager.triggerKeyboardEvent("keyup",n),this.contentManager.triggerKeyboardEvent("keypress",n),n.removeAttribute("mmautofilling","now")}},this))}}});t.extend(m.prototype,u);var g=n.BaseClass.extend({initialize:function(e){if(!e.el)throw"OtherHelper expects a form element";this.formEl=e.el,this.contentManager=e.contentManager,this.preferences=e.preferences,this.mappedFields=e.mappedFields,this.bindFieldChangeObserver(),this.bindFormObserver()},bindFormObserver:function(){},bindFieldChangeObserver:function(){}});t.extend(g.prototype,p,u);var b=n.BaseClass.extend({initialize:function(e){if(!e.el)throw"CheckoutHelper expects a form element";this.formEl=e.el,this.contentManager=e.contentManager,this.preferences=e.preferences,this.mappedFields=e.mappedFields,this.bindFieldChangeObserver(),this.bindFormObserver()},bindFormObserver:function(){},bindFieldChangeObserver:function(){}});return t.extend(b.prototype,p,u),{RegistrationHelper:f,LoginHelper:m,OtherHelper:g,CheckoutHelper:b}}),ABINE_DNTME.define("abine/views/panelBase",["documentcloud/underscore","jquery","duckbone/core","abine/timer","models","abine/window","abine/contentMessenger","abine/formAnalyzer","abine/timer","abine/config","abine/proxies"],function(e,t,n,i,a,s,r,o,l,c,d){var h=300,u=13,p=38,f=40,m=8,g=46,b={"short":"jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec".split(","),"long":"january,february,march,april,may,june,july,august,september,october,november,december".split(",")},v=n.View.extend({opacity:"1.0",render:function(){return this.model?(this.renderTemplate(),l.setTimeout(e.bind(function(){this.trigger("render")},this),50),this):this},autoResize:function(){l.setTimeout(e.bind(function(){this.trigger("resize")},this),50)},triggerRender:function(){l.setTimeout(e.bind(function(){this.trigger("render")},this),50)},ignoreBlur:function(e){return"undefined"==typeof e?this.field.element.getAttribute("dntmeIgnoreBlur"):(e===!1?this.field.element.removeAttribute("dntmeIgnoreBlur"):this.field.element.setAttribute("dntmeIgnoreBlur","true"),void 0)},bindHeaderClose:function(){t(this.el).bind("mousedown",e.bind(function(e){this.ignoreBlur(!0);var n=t(e.target);if(n.hasClass("close-link")||n.parent().hasClass("close-link"))this.closeHeader();else if(n.hasClass("logo-link")||n.parent().hasClass("logo-link"))d.webapp.openDashboard(),this.closePanel();else if(n.hasClass("close-icon")||n.hasClass("close-dd"))this.closePanel();else if(n.hasClass("settings-link")||n.parent().hasClass("settings-link")){var i=n.data("highlight")||n.parent().data("highlight");this.options.contentManager.showDNTMe({page:"settings",highlight:i}),this.closePanel()}},this))},bindFieldBlur:function(){t(this.field.element).unbind("blur.dntme").bind("blur.dntme",e.bind(function(){this.ignoreBlur()?i.setTimeout(e.bind(function(){t(this.field.element).focus(),this.ignoreBlur(!1)},this),0):this.closePanel()},this))},bindKeyDown:function(){t(this.field.element).unbind("keydown.dntme").bind("keydown.dntme",e.bind(function(e){return e.keyCode===u?(e.preventDefault(),e.stopPropagation(),!1):void 0}))},bindKeyUp:function(){t(this.field.element).unbind("keyup.dntme").bind("keyup.dntme",e.bind(function(e){if(e.keyCode===p)this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField-1:-1);else if(e.keyCode===f)this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField+1:0);else{if(e.keyCode===u&&(this.selectedField||0===this.selectedField))return e.selectedField=this.selectedField,this.trigger("enter"+this.selectedField,e,this.selectedField),!1;String.fromCharCode(e.keyCode).match(/\w/)&&e.currentTarget.value.length>=5&&!this.doNotCloseOnTyping&&(this.closePanel(),delete this.selectedField)}},this))},bindPanelTextInput:function(n){t(this.field.element).add(n).unbind("blur.dntme").bind("blur.dntme",e.bind(function(i){this.ignoreBlur()?(this.ignoreBlur(!1),i.target.element!==this.field.element&&l.setTimeout(e.bind(function(){t(n).focus()},this),1)):(this.cleanupPanel(),this.closePanel())},this))},bindBaseEvents:function(){this.bindHeaderClose(),this.bindFieldBlur(),this.bindKeyDown(),this.bindKeyUp()},highlightOption:function(n){var i=e(t(this.el).find(".mmKeyOption")).filter(function(e){return t(e).hasClass("mmKeyOption")&&"none"!==t(e).css("display")&&t(e).is("a")&&!t(e).hasClass("disabled")});n=(n+i.length)%i.length,(this.selectedField||0===this.selectedField)&&t(i[this.selectedField].children[0]).removeClass("hover"),t(i[n].children[0]).addClass("hover"),this.selectedField=n},applyFadingStyle:function(){var e=h/1e3+"s",t="opacity ease "+e+", margin-top ease "+e;this.el.style.transition=this.el.style.WebkitTransition=this.el.style.MozTransition=this.el.style.OTransition=this.el.style.MsTransition=t},fadeIn:function(){this.el.style.opacity="0.0",this.el.style.marginTop="50px",i.setTimeout(e.bind(function(){this.el.style.opacity=this.opacity,this.el.style.marginTop="0px"},this),100)},fadeOut:function(){try{this.el.style.opacity="1.0",this.el.style.marginTop="0px"}catch(t){}i.setTimeout(e.bind(function(){try{this.el.style.opacity="0.0",this.el.style.marginTop="50px"}catch(e){}},this),100);try{delete this.contentManager._currentPanelField}catch(t){}i.setTimeout(e.bind(function(){this.trigger("remove")},this),100+h)},triggerPanelFillEvent:function(e){this.messenger=this.messenger||new r.ContentMessenger,e.field.origin=e.origin;var n={disposableGUID:e.field.disposableGUID,name:e.field.name,origin:e.field.origin,dataType:e.field.dataType,value:e.field.value};t(this.options.formEl).attr("maskMeFilled","yes"),this.messenger.send("panel:fill",{fieldData:n})},fillPhoneFieldsWith:function(e,t,n){var i,a,s,r,o;return 1===parseInt(t)?(a=n.substr(0,3),r=n.substr(3,3),o=n.substr(6,4),i="("+a+") "+r+"-"+o,s=r+"-"+o):(i="+"+t+n,s="+"+t+n),this.fillFieldsByType(e,"/contact/phone",i),this.fillFieldsByType(e,"/contact/phone/number",s),this.fillFieldsByType(e,"/contact/phone/countrycode",t),this.fillFieldsByType(e,"/contact/phone/areacode",a),this.fillFieldsByType(e,"/contact/phone/exchange",r),this.fillFieldsByType(e,"/contact/phone/local",o),i},isVisible:function(e){return t(e).is(":visible")&&"hidden"!=t(e).css("visibility")},fillPaymentFieldsWith:function(e,t,n,i,a,s,r){function o(t,n){for(var i=0;i<n.length&&!l.fillFieldsByType(e,t,n[i]);i++);}var l=this,c=[n];-1!=n.toLowerCase().indexOf("master")&&(c=["master","master card","mastercard"]),o("/financial/creditcard/type",c),this.fillFieldsByType(e,"/financial/creditcard/number",t),this.fillFieldsByType(e,"/financial/creditcard/number/part1",t.substr(0,4)),this.fillFieldsByType(e,"/financial/creditcard/number/part2",t.substr(4,4)),this.fillFieldsByType(e,"/financial/creditcard/number/part3",t.substr(8,4)),this.fillFieldsByType(e,"/financial/creditcard/number/part4",t.substr(12,4)),this.fillFieldsByType(e,"/financial/creditcard/issuedto",i),this.fillFieldsByType(e,"/financial/creditcard/verification",r),this.fillFieldsByType(e,"/financial/creditcard/expiry",a+"/"+s);var d=[a];return d.push(parseInt(a)),d.push(b.short[parseInt(a)-1]),d.push(b.long[parseInt(a)-1]),o("/financial/creditcard/expirymonth",d),o("/financial/creditcard/expiryyear",[s,parseInt(s)%100]),t},fillFieldsByType:function(n,a,s,r){var o=!1,l=!1,c=this,d=e(n).filter(function(e){return e.dataType==a&&c.isVisible(e.element)});e(d).each(e.bind(function(e){t(e.element).val(""),e.element.setAttribute("mmautofilling","now")},this));var c=this;return e(d).each(e.bind(function(d){function h(e){if(c.options.contentManager&&c.options.contentManager.triggerKeyboardEvent&&(c.options.contentManager.triggerKeyboardEvent("keydown",t(e.element)[0]),c.options.contentManager.triggerKeyboardEvent("keyup",t(e.element)[0]),c.options.contentManager.triggerKeyboardEvent("keypress",t(e.element)[0])),l)try{t(e.element).change()}catch(n){}r&&(e.disposableGUID=r.disposableGUID,c.triggerPanelFillEvent({domain:r.domain,origin:r.origin,field:e}))}if("/password"==a&&"text"==d.element.type){try{t(d.element).focus()}catch(u){}var p=d.element.form;i.setTimeout(e.bind(function(){var i=t("[type='password']",p);if(i.length>0){var a=e(n).find(function(e){return e.element==i[0]});i.focus().val(s).css({color:"#0000aa","background-color":"#ffffee"}),h(a)}},this),100)}else{s+="";try{t(d.element).focus().val(s)}catch(u){t(d.element).val(s)}if(t(d.element).val()==s){if(o=!0,l="select"==d.fieldType,"select"==d.fieldType&&a.match(/month/i)){var f=d.element.selectedIndex,m=d.element.options[d.element.options.length-1].value;11==parseInt(m)&&(d.element.selectedIndex=f-1)}}else if(d.element.options){s=s.toLowerCase();for(var g=d.element.options,b=0;b<g.length;b++){var v=g[b].text.toLowerCase(),y=g[b].value;if(y&&y.toLowerCase()==s||v==s||-1!=v.indexOf(s)){g[b].selected=!0,l="select"==d.fieldType,o=!0;break}}}this.markFieldFilled(d),h(d)}},this)),e(d).each(e.bind(function(e){e.element.removeAttribute("mmautofilling")},this)),o},markFieldFilled:function(e){t(e.element).css({color:"#0000aa","background-color":"#ffffee"})},hidePanel:function(){this.trigger("hide")},removePanel:function(){this.trigger("remove")},closePanel:function(e){e&&e.preventDefault(),this.field&&(t(this.field.element).unbind("blur.dntme"),this.ignoreBlur(!1),t(this.field.element).unbind("keydown.dntme"),t(this.field.element).unbind("keyup.dntme"),t(this.field.element).bind("keyup.dntme",function(e){e.keyCode!==m&&e.keyCode!==g||0!==e.currentTarget.value.length||e.target.click()})),this.fadeOut()},clickedInsideOfTarget:function(e,t){for(;t.parentNode&&t.id!=e;)t=t.parentNode;return t.id==e?!0:!1},performActions:function(t){this.messenger=this.messenger||new r.ContentMessenger,e.each(this.panelSectionActionMap[t.currentTarget.id],e.bind(function(e){(e.target_id&&""!=e.target_id&&this.clickedInsideOfTarget(e.target_id,t.target)||e.target_id&&""==e.target_id||!e.target_id)&&("open_registration_page"==e.name?this.getStarted(t,{id:this.options.dynamicPanel.id,action:e.name}):"open_page"==e.name?d.securityManager.openPage(e.extra):"trigger_click"==e.name?this.messenger.send("update:panelActivity:click",{panelId:this.options.dynamicPanel.id}):"trigger_conversion"==e.name?this.messenger.send("update:panelActivity:conversion",{panelId:this.options.dynamicPanel.id}):"dismiss_panel"==e.name?-1!=this.options.dynamicPanel.field_type.indexOf("new-feature-added")||this.closePanel():"change_show_rate"==e.name?d.panelsModule.changePanelShowRate({panelId:this.options.dynamicPanel.id,extra:e.extra}):"no_action"==e.name||("open_plans_page"==e.name?this.openPlansPage("panelID"+this.options.dynamicPanel.id,null,{id:this.options.dynamicPanel.id,action:e.name}):"open_activate_cards_page"==e.name?this.openActivateCardsPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_snowman_page"==e.name?this.openSnowmanPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_new_premium_feature_added_page"==e.name&&this.openNewFeatureAdded(null,{id:this.options.dynamicPanel.id,action:e.name})))},this))},setupDynamicPanel:function(){this.panelPositions=this.options.dynamicPanel.panel_positions,this.panelSections=[],this.panelSectionActionMap={},e.each(this.panelPositions,e.bind(function(t){var n=t.panel_section;n.has_action=t.panel_actions.length>0,this.panelSectionActionMap[n.id]=[],e.each(t.panel_actions,e.bind(function(e){this.panelSectionActionMap[n.id].push(e)},this)),this.panelSections.push(n)},this))},closeHeader:function(e){e&&e.preventDefault(),this.ignoreExplicitClose||t(this.field.element).attr("mmclosedfield",!0),this.closePanel(e)},getStarted:function(e,t){d.webapp.openHome(t),this.closePanel()},openSetupEmailPage:function(){d.webapp.openEmails(),this.closePanel()},openSettings:function(e){return e&&e.preventDefault(),d.webapp.openSettings(),this.closePanel(),!1},openLoginPage:function(e){e&&"string"!=typeof e&&(e.preventDefault&&e.preventDefault(),e=null),d.webapp.openLogin(e),this.closePanel()},openDnt2UpgradePage:function(){d.webapp.openDnt2UpgradePage(),this.closePanel()},openPasswordSetupPage:function(e){d.webapp.openPasswordSetup(e),this.closePanel()},openActivateCardsPage:function(e,t){d.webapp.openCards(t),this.closePanel()},openPlansPage:function(e,t,n){d.webapp.openPremium(e,null,n)},openSnowmanPage:function(e,t){d.webapp.openSnowman(null,t)},openNewFeatureAdded:function(e,t){d.webapp.openNewFeatureAdded(null,t)}});return v}),ABINE_DNTME.define("abine/paymentHeuristics",["documentcloud/underscore","jquery"],function(e){function t(e,t,n,i){i=i||0,len=e.length;for(var a=i;len>a;a++)if(obj=e[a],obj&&obj[t]===n)return a;return null}var n={apply:function(e,t){var n=!1;for(var i in e)if(e[i].dataType&&0==e[i].dataType.indexOf("/financial")){n=!0;break}n&&(this.fixMissingPaymentFields(e,t),this.fixOrphanedPaymentFields(e,t),this.fixDuplicatePaymentFields(e,t))},fixMissingPaymentFields:function(n,i){var a="/financial/creditcard/number",s=e(n).filter(function(e){return e.dataType&&e.dataType===a});if(0==s.length)for(var r=t(i,"dataType","/financial/creditcard/expirymonth",0),o=r-1;o>=0;o--)if("undefined"!=typeof i[o]&&!i[o].dataType){var l=i[o].name+":"+i[o].id;if(i[o].element.getAttribute("maxlength")>=16||l&&l.match(/num|card/i)&&!l.match(/cvs|cv|code|sec/i)){i[o].dataType="/financial/creditcard/number",s.push(i[o]);break}}if(0==s.length){for(var c=-1,d=0,o=0;o<i.length;o++)if("undefined"!=typeof i[o]&&!i[o].dataType)if(4==i[o].element.getAttribute("maxlength")){if(-1==c&&(c=o),d++,4==d)break}else 4>d&&(c=-1,d=0);if(4==d){for(var o=c;c+4>o;o++)i[o].dataType="/financial/creditcard/number/part"+(o-c+1),s.push(i[o]);a="/financial/creditcard/number/part4"}}if(s.length>0){var h=e(n).filter(function(e){return e.dataType&&0==e.dataType.indexOf("/financial/creditcard/expiry")});if(h.length<2){var u=e(n).filter(function(e){return e.dataType&&0==e.dataType.indexOf("/financial/creditcard/expirymonth")});if(0==u.length)for(var p=t(i,"dataType",a,0),o=p+1,f=0;o<i.length&&4>f;o++)if("select"==i[o].fieldType&&f++,i[o].element&&i[o].element.innerHTML.match(/jan|feb|dec|\b12\b|\b11\b/i)){i[o].dataType="/financial/creditcard/expirymonth",u.push(i[o]);break}var m=e(n).filter(function(e){return e.dataType&&0==e.dataType.indexOf("/financial/creditcard/expiryyear")});if(0==m.length)for(var p=t(i,"dataType",a,0),o=p+1,f=0;o<i.length&&5>f;o++)if("select"==i[o].fieldType&&f++,i[o].element&&i[o].element.innerHTML.match(/20[0-9]{2}|year/i)){i[o].dataType="/financial/creditcard/expiryyear",m.push(i[o]);break}}var g=e(n).filter(function(e){return e.dataType&&0==e.dataType.indexOf("/financial/creditcard/verification")});if(0==g.length)for(var p=t(i,"dataType",a,0),o=p+1;o<i.length&&p+5>o;o++)if(i[o].name&&i[o].name.match(/cvv|cid|cvs/i)||i[o].id&&i[o].id.match(/cvv|cid|cvs/i)){i[o].dataType="/financial/creditcard/verification";break}}},fixDuplicatePaymentFields:function(e,n){var i=!1,a=0,s={};for(var r in e){var o=e[r].dataType;if(o&&0==o.indexOf("/financial")){if(o in s){i=!0;break}s[o]=1}}for(;i;){i=!1;var l=t(n,"dataType","/financial/creditcard/number",a);if(null==l)break;var c=t(n,"dataType","/financial/creditcard/verification",l+1),d=t(n,"dataType","/financial/creditcard/expirymonth",l+1),h=t(n,"dataType","/financial/creditcard/expiryyear",l+1),u=t(n,"dataType","/financial/creditcard/number",l+1);if(null!==u){if(i=!0,!(u>h||u>d)){for(var r=1;u>r;r++)n[r].dataType&&0==n[r].dataType.indexOf("/financial")&&-1==n[r].dataType.indexOf("/issuedto")&&-1==n[r].dataType.indexOf("/type")&&(n[r].dataType=null);a=l;continue}n[u].dataType=null}var p=t(n,"dataType","/financial/creditcard/verification",c+1);null!==p&&(i=!0,n[p].dataType=null);var f=t(n,"dataType","/financial/creditcard/expirymonth",d+1);null!==f&&(i=!0,n[f].dataType=null);var m=t(n,"dataType","/financial/creditcard/expiryyear",h+1);null!==m&&(i=!0,n[m].dataType=null)}},fixOrphanedPaymentFields:function(t){var n=e(t).filter(function(e){return e.dataType&&"/financial/creditcard/verification"===e.dataType}),i=e(t).filter(function(e){return e.dataType&&"/financial/creditcard/type"===e.dataType}),a=e(t).filter(function(e){return e.dataType&&("/financial/creditcard/number"===e.dataType||"/financial/creditcard/number/part4"===e.dataType)}),s=e(t).filter(function(e){return e.dataType&&"/financial/creditcard/issuedto"===e.dataType}),r=e(t).filter(function(e){return e.dataType&&0==e.dataType.indexOf("/financial/creditcard/expiry")});n.length>0&&0==a.length&&e(n).each(function(e){e.dataType=null}),s.length>0&&0==a.length&&e(s).each(function(e){e.dataType=null}),i.length>0&&0==a.length&&e(i).each(function(e){e.dataType=null}),r.length>0&&0==a.length&&e(r).each(function(e){e.dataType=null}),a.length>0&&0==r.length&&e(a).each(function(e){e.dataType=null})}};return n}),ABINE_DNTME.define("abine/phoneHeuristics",["documentcloud/underscore","jquery"],function(e){function t(e,t,n,i){i=i||0,len=e.length;for(var a=i;len>a;a++)if(obj=e[a],obj&&obj[t]===n)return obj;return null}var n={apply:function(e,t){var n=!1;for(var i in e)if(e[i].dataType&&e[i].dataType.indexOf("contact/phone")>0){n=!0;break}this.fixUnknownPhoneFieldsWithMaxLengths(e,t),this.fixUnknownPhoneFieldsWithSizes(e,t),n&&(this.fixUnknownPhoneFieldsWithAreaCode(e,t),this.fixThreePhoneFieldsInnaRow(e,t),this.fixOrphanedPaymentFields(e,t),this.normalizeAllPhoneFields(e))},fixUnknownPhoneFieldsWithAreaCode:function(e,n,i){var i=i||1,a=t(n,"dataType","/contact/phone/areacode",i);if(!a)return e;var s=n[a.position+1]?n[a.position+1].key:null,r=n[a.position+2]?n[a.position+2].key:null;return s&&r?(null==e[s].dataType&&null==e[r].dataType&&(e[s].dataType="/contact/phone/exchange",e[r].dataType="/contact/phone/local"),this.fixUnknownPhoneFieldsWithAreaCode(e,n,i+3)):e},fixUnknownPhoneFieldsWithMaxLengths:function(e,n,i){i=i||1;var a=t(n,"maxlength",3,i);if(!a)return e;var s=n[a.position+1]?n[a.position+1].key:null,r=n[a.position+2]?n[a.position+2].key:null;return s&&r?(3===e[s].maxlength&&4===e[r].maxlength&&(e[a.key].dataType="/contact/phone/areacode",e[s].dataType="/contact/phone/exchange",e[r].dataType="/contact/phone/local"),this.fixUnknownPhoneFieldsWithMaxLengths(e,n,i+3)):e},fixUnknownPhoneFieldsWithSizes:function(e,n,i){i=i||1;var a=t(n,"size",3,i);if(!a)return e;var s=n[a.position+1]?n[a.position+1].key:null,r=n[a.position+2]?n[a.position+2].key:null;return s&&r?(3===e[s].size&&4===e[r].size&&(e[a.key].dataType="/contact/phone/areacode",e[s].dataType="/contact/phone/exchange",e[r].dataType="/contact/phone/local"),this.fixUnknownPhoneFieldsWithSizes(e,n,i+3)):e},fixThreePhoneFieldsInnaRow:function(t,n){var i=e(n).filter(function(e){return e?e.dataType&&e.dataType.indexOf("contact/phone")>0:!1});return e(i).each(function(e){if(!(e.dataType&&"/contact/phone/exchange"===e.dataType||e.dataType&&"/contact/phone/local"===e.dataType)){var i=n[e.position+1]?n[e.position+1].key:null,a=n[e.position+2]?n[e.position+2].key:null;if(i&&a){var s=t[i],r=t[a];s.dataType===e.dataType&&r.dataType===e.dataType&&null==s.label&&null==r.label&&(t[e.key].dataType="/contact/phone/areacode",t[i].dataType="/contact/phone/exchange",t[a].dataType="/contact/phone/local")}}}),t},normalizeAllPhoneFields:function(t){var n,i=["/contact/phone/mobile","/contact/phone/home","/contact/phone/work"];for(var a in t)n=t[a],e(i).include(n.dataType)&&(n.dataType="/contact/phone")},fixOrphanedPaymentFields:function(t){var n=e(t).filter(function(e){return e.dataType&&"/contact/phone/areacode"===e.dataType}),i=e(t).filter(function(e){return e.dataType&&"/contact/phone/exchange"===e.dataType}),a=e(t).filter(function(e){return e.dataType&&"/contact/phone/local"===e.dataType});(0===n.length||0===i.length||0===a.length)&&(e(i).each(function(e){e.dataType="/contact/phone"}),e(a).each(function(e){e.dataType="/contact/phone"}));var s=e(t).filter(function(e){return e.dataType&&"/contact/phone"===e.dataType});n.length>0&&s.length>0&&e(s).each(function(e){e.dataType="/contact/phone/number"})}};return n}),ABINE_DNTME.define("abine/pluralizer",[],function(){var e=function(e,t){return 1==e?t:t+"s"},t={};return t.pluralize=e,t}),ABINE_DNTME.define("abine/proxies",["documentcloud/underscore","abine/core","abine/contentMessenger","abine/timer"],function(e,t,n,i){function a(t,i){r||(i=e.once(i||function(){}),r=t||new n.ContentMessenger({eventAggregator:ABINE_DNTME.eventAggregator||window.eventAggregator}),e.each(o,function(e){e.connect(i)}))}function s(){r&&(e.each(o,function(e){e.disconnect()}),r=null)}var r,o=[],l=t.BaseClass.extend({initialize:function(t){var n=this;e.each(t.methods,function(e){n.addMethod(e)}),e.each(t.asyncMethods,function(e){n.addAsyncMethod(e)}),this._require=t.require,this._events=t.events,o.push(this),r&&this.connect()},connect:function(e){var t=""+Math.random();this._proxyId=t,this._connected=!1;var n=this;r.on("background:stub:events:"+t,function(t){return"stub:connected"==t.name?(n._connected=!0,e&&e(t.tabId),void 0):(n.trigger(t.name,t.payload),void 0)}),r.send("contentManager:proxy:connect",{proxyId:t,require:this._require,events:this._events})},disconnect:function(){r.send("contentManager:proxy:disconnect",{proxyId:this._proxyId}),this._connected=!1},addMethod:function(e){this[e]=function(){var t=function(){},n=arguments;arguments.length>0&&"function"==typeof arguments[arguments.length-1]?(t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1)):n=Array.prototype.slice.call(arguments,0),this.call({method:e,params:n},t)}},addAsyncMethod:function(e){this[e]=function(){var t=function(){},n=arguments;arguments.length>0&&"function"==typeof arguments[arguments.length-1]?(t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1)):n=Array.prototype.slice.call(arguments,0),this.callAsync({method:e,params:n},t)}},call:function(e,t){var n=""+Math.random();e.proxyId=this._proxyId,e.callId=n,e.require=this._require,t&&r.once("background:stub:response:"+n,function(e){t(e)});var a=this,s=100,o=function(){return s--,!a._connected&&s>0?(i.setTimeout(o,50),void 0):(r.send("contentManager:proxy:call",e),void 0)};o()},callAsync:function(e,t){var n=""+Math.random();e.proxyId=this._proxyId,e.callId=n,e.require=this._require,t&&r.once("background:stub:response:"+n,function(e){t(e.err,e.data)});var a=this,s=100,o=function(){return s--,!a._connected&&s>0?(i.setTimeout(o,50),void 0):(r.send("contentManager:proxy:callAsync",e),void 0)};o()}}),c=new l({require:"abine/securityManager",methods:["isLocked","login","isInitialized","openPage","openLink","refreshData","refreshRules","resetData","openWindow","isMaskmeInstalled"],events:["background:securityManager:unlocked","background:securityManager:locked"]}),d=new l({require:"abine/webapp",methods:["openHome","openDashboard","openEmails","openPhones","openCards","openLogin","openMaskedEmailsIn30","openPremium","openNewFeatureAdded","openSnowman","openBlacklist","openSettings","openStats","openHelp","openPasswordSetup","openDnt2UpgradePage","openPiwikCampaign","openWeeklyReport","openFAQ","openPage","openCashForCardsFaq","openCashForCardsSignup","openUnderstandingTracking"],events:[]}),h=new l({require:"abine/modules/license",methods:[],asyncMethods:["sendFeedbackEmail","refreshEntitlements","refreshLastFourCardDigits","register","subscribe","incrementMedalsEarned","incrementMedalsEarnedWithCurrentMedals","retrieveMedalsEarned","logAction"],events:[]}),u=new l({require:"abine/modules/payments",methods:[],asyncMethods:["retrieveCardCredit","retrieveCardFee","verifyCardRequest"],events:[]}),p=new l({require:"abine/modules/panels",methods:[],asyncMethods:["getDNTMePanel","changePanelShowRate","getDNTMeGrowl"],events:[]}),f=new l({require:"abine/pageEvents",asyncMethods:["processAction"],methods:[],events:[]}),m=new l({require:"abine/modules/mappings",asyncMethods:["makeDailyMappingCheck"],methods:[],events:[]}),g=new l({require:"abine/memoryStore",methods:["set"],asyncMethods:["get"],events:[]});return{Proxy:l,connect:a,disconnect:s,securityManager:c,webapp:d,licenseModule:h,paymentsModule:u,panelsModule:p,pageEventsModule:f,mappingsModule:m,memoryStore:g}}),ABINE_DNTME.define("abine/responseCodes",[],function(){return{UNKNOWN_ERROR:"unknown error",SUCCESS:"successful",ERROR:"error",SERVICE_UNAVAILABLE_ERROR:"service unavailable error",SCHEDULED_DOWNTIME:"scheduled downtime",MISSING_PARAMETERS:"missing parameters",UNAUTHORIZED:"unauthorized bad token",NO_ACCESS_FOR_FEATURE:"no access to requested feature",INVALID_PASSWORD:"invalid password",ACCOUNT_ALREADY_EXISTS:"account already exists for that email",SAVE_NEW_USER_ERROR:"error saving new user",FAILED_CREATING_TARGET_EMAIL:"failed to create target email",FAILED_TO_UPDATE_USER:"error updating user",NO_ACCOUNT_FOUND_FOR_EMAIL:"no account found for email",ACCOUNT_MARKED_FOR_DELETION:"account has been marked for deletion",ACCOUNT_HAS_BEEN_LOCKED:"account has been locked",WRONG_PASSWORD:"wrong password",INVALID_EMAIL_ADDRESS:"invalid email address",NO_RECURLY_ACCOUNT_FOUND:"no recurly account found",DOWNGRADE_SCHEMA_NOT_ALLOWED:"downgrade of schema_version is not allowed",SAVE_CLIENT_DATA_ERROR:"errors saving client data",DESTROY_CLIENT_DATA_ERROR:"errors destroying client data",NO_CLIENT_DATA_FOUND:"no client data found",USER_EXISTS_FOR_CLIENT_DATA_DELETION:"cannot destroy client data when user exists",UPGRADE_REQUIRED:"upgrade required",PHONE_NOT_FOUND:"phone not found",NO_DISPOSABLE_PHONE:"no disposable phone",FAILED_TO_SAVE_PHONE:"failed to save phone",PHONE_ALREADY_VALIDATED:"phone already validated",NO_NUMBERS_AVAILABLE:"no numbers available",FAILED_TO_SEND_VERIFICATION_CODE:"failed to send verification code",WRONG_VERIFICATION_CODE:"wrong verification code",OLD_PHONE_NOT_FOUND:"old phone not found",COUNTRY_NOT_SUPPORTED:"country not supported",COUNTRY_CHANGE_NOT_SUPPORTED:"country change not supported",ERROR_CREATING_DISPOSABLE:"error creating disposable",MISSING_USER_PARAMS_ERROR_CODE:"missing user params",NO_BILLING_ACCOUNT_FOR_USER_ERROR_CODE:"no billing account for user",REQUEST_ALREADY_EXISTS_ERROR_CODE:"request already exists",NO_CARDS_AVAILABLE_ERROR_CODE:"no cards available",REQUESTED_AMOUNT_OVER_LIMIT_ERROR_CODE:"requested amount over limit",REQUESTED_AMOUNT_BELOW_MINIMUM_ERROR_CODE:"requested amount below minimum",REQUESTED_AMOUNT_INVALID_ERROR_CODE:"requested amount invalid",BILLING_FAILED_ERROR_CODE:"billing failed",BILLING_DECLINED_ERROR_CODE:"billing declined",NO_CARD_FOUND_ERROR_CODE:"no card found",NO_BILLING_TRANSACTION_FOUND_ERROR_CODE:"no billing transaction found",FRAUD_SOFT_LIMIT_REACHED:"fraud soft limit",REFUND_FAILED_ERROR_CODE:"refund failed",PROVIDER_CANCEL_FAILED_ERROR_CODE:"provider cancel failed",PROVIDER_READ_FAILED_ERROR_CODE:"provider read failed",PROVIDER_CARD_CREATION_FAILED_ERROR_CODE:"provider card creation failed",FRAUD_HARD_LIMIT_REACHED:"fraud hard limit reached",CARD_ALREADY_DEACTIVATED_ERROR_CODE:"card already deactivated",FRAUD_VERIFIED_SOFT_LIMIT_REACHED:"fraud verified soft limit",FRAUD_PLATFORM_UNAVAILABLE:"fraud verification unavailable",FRAUD_HIGH_RISK_COUNTRY_ERROR_CODE:"high risk country ban",BILLING_IN_NON_US_ERROR_CODE:"billing in non us",GREY_LISTED_ERROR_CODE:"grey listed user",GLOBAL_SOFT_LIMIT_REACHED:"global soft limit",DUPLICATE_CARD_ERROR_CODE:"duplicate card used ban",REJECTED_DOMAIN_ERROR_CODE:"domains known to not accept masked cards",BANNED_DOMAIN_ERROR_CODE:"banned domain"}}),ABINE_DNTME.define("abine/url",function(){function e(e){return e?e.toLowerCase().replace(/\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1)
}):e}function t(e){var t=e.match(r);return t&&t.length>1?t[1].toString():e}function n(e){var n=t(e);if(n.match(o)||n.match(l))return n;var i=n.split(".");if(i.length<2)return null;var r=i.pop(),c=i.pop(),d=c+"."+r;if(a.test(d)&&i.length>0&&(r=d,c=i.pop(),d=c+"."+r),s.test(d)&&i.length>0){var h=i.pop();d=h+"."+d}return d}function i(t){if(t=n(t),t.match(o))return t;var i=t.split(".");if(i.length>2){var r=i.pop(),l=i.pop(),t=l+"."+r;if(a.test(t)&&i.length>0&&(r=t,l=i.pop(),t=l+"."+r),s.test(t)&&i.length>0){var c=i.pop();return e(l+" "+c)}return e(l)}return e(i[0])}var a=/^(((co|ac|go|ed|ga|mn|nj|nc|or|ne|in|gr|ca|on|pa|qc|bc|sh|at|va|us|il|tv|me|lg|at|ny|gv|com|edu|org|net|gov|mil|biz)\...)|(163\.com)|(kiev\.ua)|(gob\.pe)|(gen\.tr)|(waw.pl)|(jus.br))$/,s=/^(((go|typepad|tumblr|blogspot|squarespace|wordpress|myshopify|blogfa|blog|blogs|blinkweb|ning|posterous|over-blog|mihanblog|appspot|webs|weebly|onsugar|ucoz|uk|pch|ecwid)(\.com|\.in))|(nic\.in)|((ucoz|spb|narod)\.ru)|(blog\.163\.com)|((gouv|free)\.fr)|(uol\.com\.br)|(web\.id)|(gob\.mx)|(blogg\.se)|(home.pl))$/,r=/^http(?:s)?\:\/\/([^/]+)/im,o=/^[0-9\.]+(:[0-9]+)?$/,l=/^localhost(:[0-9]+)?$/;return{getHostname:t,getTLD:n,getSiteName:i}}),ABINE_DNTME.define("abine/window",["documentcloud/underscore","abine/timer","jquery"],function(e,t,n){APPLICATION_CSS="pages/application.css";var i=function(){},a=function(e,n){e.documentElement?e.documentElement.appendChild(n):t.setTimeout(function(){a(e,n)},100)},s=function(e){var t,i=e.getElementsByTagName("head")[0];i&&(t=e.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",chrome.extension.getURL(APPLICATION_CSS)),i.appendChild(t)),n("body",e).css("backgroundColor","transparent")};return{createTab:function(t,n){function a(i){var a=e.find(i,function(e){return-1!=e.url.indexOf(r)});a||t.doNotOpenNewTab?a&&(chrome.tabs.update(a.id,{active:!0,url:s}),chrome.windows.get(a.windowId,function(e){"minimized"==e.state&&chrome.windows.update(e.id,{state:"normal"}),chrome.windows.update(e.id,{focused:!0}),n()})):(chrome.tabs.create({active:!0,url:s}),n())}n=n||i;var s=t.localUrl?chrome.extension.getURL(t.localUrl):t.url;if(t.force)return chrome.tabs.create({active:!0,url:s}),n(),void 0;var r=s.replace(/http[s]?/i,"").replace(/\?.*/i,"").replace(/\#.*/i,"");chrome.tabs.query({},a)},openWindow:function(e,t,n){chrome.windows.create({url:e,width:t,height:n,focused:!0,type:"popup"})},reloadTab:function(t,n){function a(i){var a=e.find(i,function(e){return-1!=e.url.indexOf(r)});a||t.doNotOpenNewTab?a&&(chrome.tabs.reload(a.id),t.doNotActivate||(chrome.tabs.update(a.id,{active:!0}),chrome.windows.get(a.windowId,function(e){"minimized"==e.state&&chrome.windows.update(e.id,{state:"normal"}),chrome.windows.update(e.id,{focused:!0}),n()}))):(chrome.tabs.create({active:!0,url:s}),n())}n=n||i;var s=t.localUrl?chrome.extension.getURL(t.localUrl):t.url,r=s.replace(/http[s]?/i,"").replace(/\?.*/i,"").replace(/\#.*/i,"");chrome.tabs.query({},a)},createPanel:function(t){var n=t.localUrl?chrome.extension.getURL(t.localUrl):t.url,i=t.document||document||window.document,r=t.panelWidth?t.panelWidth:368;if(!i)throw"Error. abine/window createPanel called without a document context.";var o=i.createElement("div");o.className=t.className||"abineContentPanel",e.extend(o.style,{backgroundColor:"transparent",margin:"0",padding:"0"},t.style);var l=i.createElement("iframe");return e.extend(l,{className:"abineContentFrame",width:r+"px",allowTransparency:"true",frameborder:0,height:t.panelHeight+"px",scrolling:"no",src:n?n:""}),e.extend(l.style,{position:"relative",background:"transparent",borderWidth:"0px",opacity:1,margin:"0",padding:"0",height:t.panelHeight+"px",width:r+"px"}),o.appendChild(l),l.onload=function(){s(l.contentDocument),t.ready&&t.ready.call(l,l.contentDocument,l)},a(i,o,l),l},autoResizePanels:function(t){var i=t.document||document||window.document,a=(i.getElementsByTagName("body")[0],i.getElementsByClassName(t.className||"abineContentPanel"));e(a).each(function(e){var i=n("iframe",e)[0];i.scrolling="no",n(i).height("auto");var a=i.contentDocument.body.offsetHeight;t.extraHeight&&(a+=t.extraHeight),n(i).height(a),e.style.height=a+"px";try{var s=parseInt(e.style.left),r=s+e.offsetWidth,o=e.ownerDocument.defaultView.innerWidth,l=e.ownerDocument.documentElement.scrollLeft+o;if(r>l){var c=r-l;if(s-c>0)e.style.left=s-c+"px";else if(e.style.left="0px",r-s>o){var d=Math.round(o/(r-s)*100);d-=1,80>d&&(d=80),i.style.zoom=d+"%",i.contentDocument.body.style.zoom=d+"%"}}}catch(h){}})},removePanels:function(t){var n=t.document||document||window.document;if(t.iframe){var i=t.iframe.parentNode;return i&&i.parentNode&&i.parentNode.removeChild(i),void 0}var a=n.getElementsByClassName("abineContentPanel");e(a).each(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})}}}),ABINE_DNTME.define("abine/contentMessenger",["documentcloud/underscore","abine/core"],function(e,t){var n=function(e){this.trigger(e.eventName,e.payload)},i=function(){throw"Error. Attempt to call destroyed ContentMessenger."},a=t.BaseClass.extend({initialize:function(){this.listener=e.bind(n,this),chrome.extension.onRequest.addListener(this.listener)},send:function(e,t){this.trigger(e,t),chrome&&chrome.extension&&chrome.extension.sendRequest({eventName:e,payload:"undefined"==typeof t?{}:t})},destroy:function(){this.off(),chrome.extension.onRequest.removeListener(n),this.on=this.off=this.trigger=i}});return{ContentMessenger:a}}),ABINE_DNTME.define("abine/pageEventsImpl",["abine/core","abine/proxies","jquery"],function(e,t,n){function i(e){var n=e.target,i=n.ownerDocument,a=n.getAttribute("action"),s=n.getAttribute("params")||n.getAttribute("param"),r=n.getAttribute("expectsResponse");if(r||n.parentNode&&n.parentNode.removeChild(n),s)try{s=JSON.parse(s)}catch(l){s={}}else s={};if(-1!=a.indexOf("AuthToken")&&o.trigger("disable:form:helpers"),"dnt_ping"==a){if(ABINE_DNTME.maskme_installed)return;var c=i.createEvent("Event");c.initEvent("dnt_pong",!0,!0),i.dispatchEvent(c)}else{var d=i.createEvent("Event");d.initEvent("received:"+a,!0,!0),i.dispatchEvent(d)}var h=function(){};r&&(h=function(e){var t=i.createEvent("Event");t.initEvent("data:"+a,!0,!0),n.setAttribute("_data_from_extension",JSON.stringify(e)),n.dispatchEvent(t)}),t.pageEventsModule.processAction({action:a,host:i.location.host,params:s},function(e){h(e)})}function a(e){var i=e.target,a=i.ownerDocument,s=i.getAttribute("action"),r=i.getAttribute("param");if(r)try{r=JSON.parse(r)}catch(o){r={}}else r={};t.pageEventsModule.processAction({action:s,host:a.location.host,params:r},function(e){i.innerHTML=JSON.stringify(e),n(i).click()})}var s,r=e.BaseClass.extend({startup:function(e,t){s=e,t.addEventListener("DntPageEvent",i,!0),t.addEventListener("DNTPPageEvent",a,!0);for(var n=t.getElementsByTagName("dntdataelement"),r=0;r<n.length;r++)i({target:n[r]})},shutdown:function(e){e.removeEventListener("DntPageEvent",i,!0),e.removeEventListener("DNTPPageEvent",a,!0)}}),o=new r;return o}),ABINE_DNTME.define("abine/assets",["wycats/handlebars"],function(e){function t(e){return chrome.extension.getURL(e)}return e.registerHelper("assetUrl",t),{assetUrl:t}}),ABINE_DNTME.define("abine/browserSyncStorage",["documentcloud/underscore","abine/core"],function(e,t){var n;n=chrome&&chrome.storage&&chrome.storage.sync?t.BaseClass.extend({initialize:function(){},set:function(e,t){chrome.storage.sync.set(e,t)},remove:function(e,t){chrome.storage.sync.remove(e,t)},get:function(e,t){chrome.storage.sync.get(e,t)},clear:function(e){chrome.storage.sync.clear(e)}}):t.BaseClass.extend({initialize:function(){this.storage={}},set:function(t,n){e.extend(this.storage,t),n&&n()},remove:function(t,n){t="string"==typeof t?[t]:t,e.each(t,e.bind(function(e){delete this.storage[e]},this)),n&&n()},get:function(t,n){t="string"==typeof t?[t]:t,n&&n(e.pick(this.storage,t))},clear:function(e){this.storage={},e&&e()}});var i=new n({});return i}),ABINE_DNTME.define("documentcloud/backbone",["documentcloud/underscore","jquery"],function(){return Backbone}),ABINE_DNTME.define("wycats/handlebars",[],function(){var e={};e.VERSION="1.0.beta.6",e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";return e.registerHelper("blockHelperMissing",function(e,i){var a=i.inverse||function(){},s=i.fn,r="",o=t.call(e);if(o===n&&(e=e.call(this)),e===!0)return s(this);if(e===!1||null==e)return a(this);if("[object Array]"===o){if(e.length>0)for(var l=0,c=e.length;c>l;l++)r+=s(e[l]);else r=a(this);return r}return s(e)}),e.registerHelper("each",function(e,t){var n=t.fn,i=t.inverse,a="";if(e&&e.length>0)for(var s=0,r=e.length;r>s;s++)a+=n(e[s]);else a=i(this);return a}),e.registerHelper("if",function(i,a){var s=t.call(i);return s===n&&(i=i.call(this)),!i||e.Utils.isEmpty(i)?a.inverse(this):a.fn(this)}),e.registerHelper("unless",function(t,n){var i=n.fn,a=n.inverse;return n.fn=a,n.inverse=i,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t){e.log(t)}),e.Exception=function(){var e=Error.prototype.constructor.apply(this,arguments);for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.message=e.message},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()},function(){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[<>"'`]/g,i=/[&<>"'`]/,a=function(e){return t[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":i.test(t)?t.replace(n,a):t},isEmpty:function(e){return"undefined"==typeof e?!0:null===e?!0:e===!1?!0:"[object Array]"===Object.prototype.toString.call(e)&&0===e.length?!0:!1}}}(),e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,i){var a=this.programs[t];return i?e.VM.program(n,i):a?a:a=this.programs[t]=e.VM.program(n)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop};return function(i,a){return a=a||{},t.call(n,e,i,a.helpers,a.partials,a.data)}},programWithDepth:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(i,a){return a=a||{},e.apply(this,[i,a.data||t].concat(n))}},program:function(e,t){return function(n,i){return i=i||{},e(n,i.data||t)}},noop:function(){return""},invokePartial:function(t,n,i,a,s,r){if(options={helpers:a,partials:s,data:r},void 0===t)throw new e.Exception("The partial "+n+" could not be found");if(t instanceof Function)return t(i,options);if(e.compile)return s[n]=e.compile(t),s[n](i,options);throw new e.Exception("The partial "+n+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template,e}),ABINE_DNTME.define("duckbone/core",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars"],function(e,t){var n={};return n.helpers=n.helpers||{},n.forms=n.forms||{},n.TemplatesData=n.TemplatesData||{},n.PartialsData=n.PartialsData||{},e.extend(n,t.Events),e.extend(n,{serverError:function(t){e.log("500 Server Error"),t&&e.log(t)},fileNotFound:function(t){e.log("404 File Not Found"),t&&e.log(t)},register:function(t,i){i=i||!1;var a=e.uniqueId("regfunc");return e.isUndefined(n.registeredFunctions)&&(n.registeredFunctions={}),i&&(t=e.wrap(t,function(e){e(arguments),delete n.registeredFunctions[a]})),n.registeredFunctions[a]=t,"Duckbone.registeredFunctions."+a},wrapMethods:function(t,n){var i=Array.prototype.slice.call(arguments,2);e.isArray(i[0])&&(i=i[0]),e.each(i,function(e){var i=t[e];t[e]=function(){var e=[i].concat(Array.prototype.slice.call(arguments));return n.apply(t,e)}})},log:function(e){window.console&&console.log&&console.log(e)},include:function(t){if("undefined"==typeof t)throw"Attempt to include into undefined object.";return e.each(e.toArray(arguments).slice(1),function(e){if("undefined"==typeof e)throw"Attempt to include undefined object.";for(var n in e)"included"!=n&&void 0!==e[n]&&(t.hasOwnProperty(n)||(t[n]=e[n]));"function"==typeof e.included&&e.included.call(t)}),t}}),e.extend(n.helpers,{dateToPrettyTimeAgo:function(e){var t=Math.floor(((new Date).getTime()-e.getTime())/6e4);0>t&&(t=0);var n,i,a,s=t||0;return 0===s?"just now":(s>=1440?(i=Math.floor(s/1440),s-=1440*i,n=i,n+=i>1?" days":" day"):s>=60?(a=Math.floor(s/60),s-=60*a,n=a,n+=a>1?" hours":" hour"):s>0&&(n=s,n+=s>1?" minutes":" minute"),n+" ago")}}),e.mixin({log:n.log}),n}),ABINE_DNTME.define("duckbone/model",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core","abine/eventLogger"],function(e,t,n,i,a){function s(n,i,s,r){var l=c("set_"+i),d=c(i),h=function(e,i){if(e instanceof t.Model){if(e===n[d])return e;n[d]&&(n.trigger("remove:"+d),r&&(n[d][r]=null)),n[d]=e,r&&o(n,n[d],r,i),n.trigger("add:"+d)}else if(e)if(n[d]){var a=function(){n.trigger("change:"+d)};n[d].on("change",a),n[d].set(e),n[d].off("change",a)}else n[d]=new s(e),r&&o(n,n[d],r,i),n.trigger("add:"+d);else n[d]&&(n.trigger("remove:"+d),r&&(n[d][r]=null)),n[d]=null;return e};try{h.call(n,n.get(i),!0)}catch(u){a.error("Error creating association for "+i+":\n"+u)}delete n.attributes[i],n[l]=e.bind(h,n)}function r(e,t,n,i){try{var s=c(t),r=e.get(t),l=e[s]=new n(r);delete e.attributes[t],i&&(l[i]=e,l.each(function(t){o(e,t,i)}),l.on("add",function(t){o(e,t,i)}),l.on("remove",function(e){e[i]=null}),l.on("reset",function(t){t.each(function(t){o(e,t,i)})}))}catch(d){a.error("Error creating association for "+t+":\n"+d)}}function o(e,t,n,i){var s="set"+n.slice(0,1).toUpperCase()+n.slice(1);"function"==typeof t[s]?t[s].call(t,e,i):i?t[n]=e:a.error("To use belongsTo, model must define hasOne for "+n)}function l(n,i){var a={};return n instanceof t.Model||!this._associations?a=n:e(n).each(function(e,t){var n=this._associations[t];if("hasOne"==n){var i=c("set_"+t);this[i](e)}else if("hasMany"==n){var s=c(t);"function"==typeof this[s].freshen?this[s].freshen(e):this[s].reset(e)}else a[t]=e},this),this.setWithoutAssociations.call(this,a,i)}function c(e){return e.replace(/(\_[a-z])/g,function(e){return e.toUpperCase().replace("_","")})}function d(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})}i.AssociableModel={isAssociableModel:!0,included:function(){this.setWithoutAssociations||(this.setWithoutAssociations=this.set,this.set=l)},hasOne:function(t){e.each(t,function(e,t){this._associations=this._associations||{},this._associations[t]="hasOne",s(this,t,e.model,e.belongsTo)},this)},hasMany:function(t){e.each(t,function(e,t){this._associations=this._associations||{},this._associations[t]="hasMany",r(this,t,e.collection,e.belongsTo)},this)}},i.ModelHelpers={simpleSave:function(e){var t={};this.id&&(e.id=this.id),this.paramRoot?t[this.paramRoot]=e:t=e;var n=JSON.stringify(t);return this.save({},{contentType:"application/json",data:n})},url:function(){var e="function"==typeof this.urlRoot?this.urlRoot():this.urlRoot,t=h(this.collection)||e||urlError();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},setOne:function(e,t,n){var i={};return i[e]=t,this.set(i,n)},createGetters:function(){var t=this,n=arguments,i={};e.each(n,function(e){getterFuncName=c(e),getterFuncName="get"+d(getterFuncName),t[getterFuncName]||(i[getterFuncName]=function(){return this.get(e)})}),e.extend(this,i)},isValidAttribute:function(t){return!e.isNaN(t)&&!e.isUndefined(t)}};var h=function(t){return t&&t.url?e.isFunction(t.url)?t.url():t.url:null}}),ABINE_DNTME.define("duckbone/syncable",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){function s(t){return t&&t.url?e.isFunction(t.url)?t.url():t.url:null}function r(){throw new Error("A 'url' property or function must be specified")}function o(e){var t,n,i,a,s,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="",l="",c="",d=0;do t=e.charCodeAt(d++),n=e.charCodeAt(d++),l=e.charCodeAt(d++),i=t>>2,a=(3&t)<<4|n>>4,s=(15&n)<<2|l>>6,c=63&l,isNaN(n)?s=c=64:isNaN(l)&&(c=64),o=o+r.charAt(i)+r.charAt(a)+r.charAt(s)+r.charAt(c),t=n=l="",i=a=s=c="";while(d<e.length);return o}a.Syncable={isSyncable:!0,sync:function(n,i,d){var h,u=c[n],p=i.defaultSyncOptions||{},f=e.extend({type:u,dataType:"json",beforeSend:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)}},p,d);if(t.browser.msie&&(f.cache=!1),f.url||(f.url=s(i)||r()),!f.data&&i&&("create"==n||"update"==n)){f.contentType="application/json";var m={};i.paramRoot?m[i.paramRoot]=i.toJSON():m=i.toJSON(),f.data=JSON.stringify(m)}return"GET"!==f.type&&(f.processData=!1),l.username&&(f.username=l.username,f.password=l.password,f.headers=f.headers||{},f.headers.Authorization="Basic "+o(f.username+":"+f.password)),h=t.ajax(f),h.params=f,i.trigger("sync:"+n.toLowerCase()),h.complete(function(){i.trigger("sync:complete",h)}),h.success(function(){delete i.errors,i.trigger("sync:success",h)}),h.error(function(e){e.status>=400&&a.trigger("sync:"+e.status,h)}),h.error(function(e){if(422==e.status){var t=JSON.parse(e.responseText);i.errors=t.errors?t.errors:t,i.trigger("sync:invalid",h)}else i.trigger("sync:error",h)}),h}},a.setAuthenticatedUser=function(e,t){l.username=e,l.password=t},a.removeAuthenticatedUser=function(){delete l.username,delete l.password};var l={},c={create:"POST",update:"PUT","delete":"DELETE",read:"GET"}}),ABINE_DNTME.define("duckbone/collection",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i){i.CollectionHelpers={hasDuckboneCollectionHelpers:!0,slice:function(){return this.models.slice(arguments)},toSelectOptions:function(e,t){var n={};return e=e||"title",t&&(n[" "]=" "),this.each(function(t){n[t.id]=t.get(e)}),n},freshen:function(t){var n;this.each(function(e){e._remove=!0}),e(t).each(function(e){n=this.get(e.id),n?(n.set(e),delete n._remove):this.add(e)},this);var i=this.filter(function(e){return e._remove});e(i).each(function(e){this.remove(e)},this),this.trigger("freshen",this)},fetch:function(e){e||(e={});var n=this,i=e.success;e.success=function(t,a,s){n[e.add?"add":e.freshen?"freshen":"reset"](n.parse(t,s),e),n.trigger("sync"),i&&i(n,t)};var a=e.error;return e.error=function(t){a?a(n,t,e):n.trigger("error",n,t,e)},(this.sync||t.sync).call(this,"read",this,e)}}}),ABINE_DNTME.define("duckbone/routeable_application",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.RouteableApplication={isRouteableApplication:!0,setContainer:function(e){this.mainContainer=e},mapRoutes:function(t){e.each(e.keys(t),function(n){try{var i=t[n].routeName||t[n].prototype.templateName;if(!i)throw"Missing or bad routeName for "+n;if("function"!=typeof t[n].routeAction)throw"Missing or bad routeAction for "+n;this.route(n,i,t[n].routeAction),this.route(n+"?*params",i,function(){var i=e.toArray(arguments),a=i.pop(),s=e(a.split("&")).reduce(function(e,t){return e[t.split("=")[0]]=t.split("=")[1],e},{});return t[n].routeAction.apply(this,i.concat(s))})}catch(a){throw e.log(a),"Bad route for "+n}},this)},loadView:function(e,n){return void 0===n&&(n={}),this._removableFlashes&&(this._removableFlashes.remove(),delete this._removableFlashes),this.mainView&&this.mainView.remove(),n.application=this,this.mainView=new e(n),t(this.mainView.el).appendTo(this.mainContainer),this.mainView},navigate:function(e,t){this.isFlashableView&&(this._removableFlashes=this.activeFlashes()),n.history.navigate(e,t)},bindNavigationBars:function(){this.on("all",function(e){if("route"==e.split(":")[0]){var n=e.split(":")[1];t("nav ul li").removeClass("active"),t("nav ul li."+n).addClass("active")}})}}}),ABINE_DNTME.define("duckbone/view_lifecycle_extensions",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.ViewLifecycleExtensions={hasViewLifecycleExtensions:!0,initialize:function(){this.application=this.options.application,this.messenger=this.options.messenger,this.isEditableView&&(s(this,"beforeClone"),this.cloneModelForEditing(),s(this,"afterClone")),this.render(),this.isStylizeableView&&this.applyStyles(),this.isBindableView&&this.bindAttributes(),this.isEditableView&&(this.bindModelSyncEvents(),this.createForm(),s(this,"afterCreateForm")),s(this,"afterInitialize")},render:function(){return this.isTemplateableView&&this.renderTemplate(),this.isStylizeableView&&this.applyStyles(),this},remove:function(){return this.isEditableView&&this.expireClone(),s(this,"beforeRemove"),this.removeWeakBindings(),this.isNestableView&&this.removeNestedViews(),n.View.prototype.remove.call(this),s(this,"afterRemove"),this},weakBindToModel:function(e,t,n){this.weakBindTo(this.model,e,t,n)},weakBindTo:function(t,n,i){this._weakBindings=this._weakBindings||[],this._weakBindings.push([t,n,i]),t.bind.apply(t,e.toArray(arguments).slice(1))},removeWeakBindings:function(){e.each(this._weakBindings,function(e){e[0].unbind(e[1],e[2])}),delete this._weakBindings,this.isBindableView&&this.unbindLiveTimestamps()}};var s=function(e,t){e[t]&&e[t].call(e)}}),ABINE_DNTME.define("duckbone/handlebars_extensions",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){ABINE_DNTME.Duckbone=a,a.Handlebars=i,i.getAttr=function(e,t){return/^[0-9]+$/.test(t)?e[parseInt(t)]:void 0!=e[t]?"function"==typeof e[t]?e[t].call(e):e[t]:e.get?e.get(t):void 0}}),ABINE_DNTME.define("duckbone/idme_template_registry",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){function s(t){t.templatesCompiled||(e.each(e.keys(ABINE_DNTME.CompiledTemplates),function(e){var n=e.replace("views/","").replace("/","_");t.compiledTemplates[n]=ABINE_DNTME.CompiledTemplates[e]}),t.templatesCompiled=!0)}a.TemplateRegistry=function(e){e=e||{},this.compiledTemplates={},this.templatesCompiled=!1,this.partialsCompiled=!1},e.extend(a.TemplateRegistry.prototype,{refresh:function(){},compile:function(){s(this)},get:function(e){return s(this),this.compiledTemplates[e]}})}),ABINE_DNTME.define("duckbone/nestable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.NestableView={isNestableView:!0,setupNestedViews:function(){this.createChildren&&(this.children=this.createChildren())},removeNestedViews:function(){this.children&&(e.each(this.children,function(e){e.remove()}),delete this.children)}}}),ABINE_DNTME.define("duckbone/templateable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core","abine/eventLogger"],function(e,t,n,i,a,s){var r=new a.TemplateRegistry;i&&(i.helpers.oldIf=i.helpers["if"],i.registerHelper("if",function(e,t,n){var a="function"==typeof e?e.call(this):e;return i.helpers.oldIf.call(this,a,t,n)}),i.registerHelper("attr",function(e){return new i.SafeString('<span data-bind="attr_'+i.Utils.escapeExpression(e)+'">'+i.Utils.escapeExpression(this.get(e))+"</span>")}),i.registerHelper("child",function(t,n){return n=e.isObject(n)?"div":n,new i.SafeString("<"+n+' data-child-view="'+i.Utils.escapeExpression(t)+'"></'+n+">")}),i.helpers.oldEach=i.helpers.each,i.registerHelper("each",function(e,t,n){return e.models&&(e=e.models),i.helpers.oldEach.call(this,e,t,n)})),a.TemplateableView={isTemplateableView:!0,included:function(){this.hasViewLifecycleExtensions||a.include(this,a.ViewLifecycleExtensions),this.isNestableView||a.include(this,a.NestableView)},templateRegistry:r,getTemplate:function(e,t){if(this.templateData=this.options.templateData||this.templateData||null,this.templateData)throw s.error("Cannot compile template."),"Cannot compile template";return e=e||this.options.templateName||this.templateName||"",this.template=this.templateRegistry.get(e),this.template||t||(this.template=a.Handlebars.compile('<div>Missing Template "'+e+'"</div>')),this.template},renderTemplate:function(i){var i=i||this.model||{};if(e.isFunction(this.options.template)?this.template=this.options.template:this.template||this.getTemplate(),!this.template)throw"renderTemplate called without a template.";this.removeNestedViews(),this.isBindableView&&this.unbindAttributes();try{t(this.el).empty().html(this.template(i))}catch(a){s.error("Handlebars threw an exception rendering your template:"),s.error(a.message),s.error("Context:"),s.error(i),t(this.el).html('<div class="duckbone_error">Handlebars exception: '+a.message+"</div>")}this.isBindableView&&i instanceof n.Model&&t(this.el).find("span[data-bind]").each(e.bind(function(e,n){var a=t(n).attr("data-bind").slice(5),s='span[data-bind="attr_'+a+'"]';this.bindAttribute(i,a,s)},this)),this.setupNestedViews(),t(this.el).find("*[data-child-view]").each(e.bind(function(e,i){var a=t(i).attr("data-child-view"),r=this.children[a];r instanceof n.View?(t(i).replaceWith(r.el),t(r.el).attr({"data-child-view":a}),r.delegateEvents()):s.error("Unknown child view "+a)},this));this.options.templateName||this.templateName;return this.templateName&&t(this.el).addClass(this.templateName),this.templateRendered=!0,this},renderTemplateOnce:function(e){return this.templateRendered||this.renderTemplate(e),this}}}),ABINE_DNTME.define("duckbone/stylizeable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.StylizeableView={isStylizeableView:!0,included:function(){this.hasViewLifecycleExtensions||a.include(this,a.ViewLifecycleExtensions)},applyStyles:function(e){e=e||this.styles||{};var n,i;for(var a in e)n=a.split(".")[0],i=a.split(".")[1],"el"==a?t(this.el).css(e.el):"el"==n&&i&&t(this.el).hasClass(i)?t(this.el).css(e[a]):t(this.el).find(a).css(e[a])}}}),ABINE_DNTME.define("duckbone/pageable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.PageableView={isPageableView:!0,included:function(){this.isTemplateableView||a.include(this,a.TemplateableView)},getTemplate:function(e){a.TemplateableView.getTemplate.call(this,e,!0),this.template=this.template||a.Handlebars.compile('{{child "list"}}{{child "pager"}}')},createChildren:function(){var t=this.createListView(),n=this.createPagerView();return this.application=this.options.application||this.application,this.application&&this.collection.on("pageChange",function(t,n){var i=window.location.hash.split("?")[0]+"?",a=e(e.keys(n)).map(function(e){return e+"="+n[e]}).join("&");i+=a,this.application.navigate(i,!1)},this),{list:t,pager:n}},createListView:function(){return new a.ListView({viewClass:this.viewClass,pageableView:this,tagName:"ul",className:"listable_view",collection:this.collection})},createPagerView:function(){var e=this.options.pagerClass||this.pagerClass||Pager;return new e({collection:this.collection,pageableView:this})},showPage:function(e){e=parseInt(e)||1,this.collection.setPage(e)},showNextPage:function(){this.showPage(this.collection.currentPage+1)},showPreviousPage:function(){this.showPage(this.collection.currentPage-1)},scrollToTopOfList:function(){var e=t(this.children.list.el).offset().top-20;t("html body").animate({scrollTop:e},400,"swing")}};var s='<div class="pager">&nbsp;<br/>    {{#if showPrevious}}      <a href="#" class="previous_link">&laquo;&nbsp;Previous</a>&nbsp;    {{else}}      <span class="inactive">&laquo;&nbsp;Previous</span>&nbsp;    {{/if}}    {{#each pages}}      {{#if currentPage}}        <span class="current">{{title}}</span>&nbsp;      {{else}}        <a href="#" class="page_link" data-page="{{id}}">{{title}}</a>&nbsp;      {{/if}}    {{/each}}    {{#if showNext}}      <a href="#" class="next_link">Next&nbsp;&raquo;</a>    {{else}}      <span class="inactive">Next&nbsp;&raquo;</span>    {{/if}}  </div>';Pager=n.View.extend({el:'<div class="pager_view"></div>',templateData:s,events:{"click a.previous_link":"showPreviousPage","click a.next_link":"showNextPage","click a.page_link":"showPage"},initialize:function(){this.render(),this.collection.on("all",this.render,this)},render:function(){return this.collection.numPages&&this.renderTemplate(this.paginationData()),this.collection.numPages>1?t(this.el).show():t(this.el).hide(),this},paginationData:function(){var t=this.collection.numPages,n={showPrevious:this.collection.currentPage>1,numPages:t,showNext:this.collection.currentPage<this.collection.numPages,pages:e(e.range(1,t+1)).map(function(e){return{id:e,title:""+e,currentPage:e==this.collection.currentPage}},this)};return n},showPage:function(e){e.preventDefault();var n=parseInt(t(e.target).data("page"));return this.options.pageableView.showPage(n),this.options.pageableView.scrollToTopOfList(),!1},showPreviousPage:function(e){return e.preventDefault(),this.options.pageableView.showPreviousPage(),this.options.pageableView.scrollToTopOfList(),!1},showNextPage:function(e){return e.preventDefault(),this.options.pageableView.showNextPage(),this.options.pageableView.scrollToTopOfList(),!1}}),a.include(Pager.prototype,a.TemplateableView)}),ABINE_DNTME.define("duckbone/pageable_collection",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){function s(e,t){t=t||{};var n="function"==typeof e.url?e.url():e.url;n.indexOf("?")<0&&(n+="?");for(var i in t)n+=i+"="+t[i]+"&";return n}a.PageableCollection={isPageableCollection:!0,parse:function(e){return this.numPages=e.num_pages,this.limitValue=e.limit_value,this.currentPage=e.current_page,this.totalCount=e.total_count,e.records},fetch:function(){this.fetchPage(1)},fetchPage:function(t,i){return t=t||1,i=i||e.clone(this.params)||{},n.Collection.prototype.fetch.call(this,{url:s(this,e.extend(i,{page:t})),success:function(e){e.trigger("pageChange",e.currentPage,i)}})},setParam:function(e,t){this.params=this.params||{},this.params[e]=t},setPage:function(e){return e!=this.currentPage&&e>0&&e<=this.numPages?this.fetchPage(e):void 0},nextPage:function(){return this.fetchPage(this.currentPage+1)},prevPage:function(){return this.fetchPage(this.currentPage-1)},updateTotalCountOnCollectionEvents:function(){this.on("add",function(){this.totalCount&&(this.totalCount+=1)},this),this.on("remove",function(){this.totalCount&&(this.totalCount-=1)},this)}}}),ABINE_DNTME.define("duckbone/bindable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.BindableView={isBindableView:!0,included:function(){this.hasViewLifecycleExtensions||a.include(this,a.ViewLifecycleExtensions)},bindAttributes:function(e){if(this.attributeChanges){e=e||this.model||new n.Model;for(var t in this.attributeChanges)this.bindAttribute(e,t,this.attributeChanges[t])}},bindAttribute:function(e,a,s){e=e||this.model||new n.Model;var r,o=i.Utils.escapeExpression(e.get(a));"function"==typeof s?(s.call(this,o),r=function(){s.call(this,i.Utils.escapeExpression(e.get(a)))}):"string"==typeof s&&(t(this.el).find(s).html(o),r=function(){t(this.el).find(s).html(i.Utils.escapeExpression(e.get(a)))}),this._attributeBindings=this._attributeBindings||[];var l="change:"+a;this._attributeBindings.push([e,l,r]),this.weakBindTo(e,l,r,this)},unbindAttributes:function(){this._attributeBindings&&(e(this._attributeBindings).each(function(e){e[0].unbind(e[1],e[2])}),delete this._attributeBindings)},bindLiveTimestamps:function(e){return},unbindLiveTimestamps:function(){}},i&&i.registerHelper("live_timestamp",function(e){var t=a.Handlebars.getAttr(this,e);if(!t)return"";var n=new Date(t);return n?new i.SafeString('<span data-live-timestamp="'+n.getTime()+'">'+a.helpers.dateToPrettyTimeAgo(n)+"</span>"):""})}),ABINE_DNTME.define("duckbone/listable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){function s(e){e.viewClass=e.options.viewClass||e.viewClass||new n.View}function r(e){e.collection=e.options.collection||e.collection||new n.Collection}a.ListableView={isListableView:!0,tagName:"ul",className:"listable_view",included:function(){this.hasViewLifecycleExtensions||a.include(this,a.ViewLifecycleExtensions),this.isBindableView||a.include(this,a.BindableView),this.isNestableView||a.include(this,a.NestableView)},render:function(e){return this.doc=this.doc||this.options.doc||document,(!this._viewsRendered||e)&&(this.renderItems(),this.collectionEventsBound||(this.bindCollectionEvents(),this.collectionEventsBound=!0),this._viewsRendered=!0),this
},createChildren:function(){return e.reduce(this.collection.models,function(e,t){return e[t.cid]=new this.viewClass({model:t,doc:this.doc}),e},{},this)},renderItems:function(){s(this),r(this),this.setupNestedViews();var t=this.doc.createDocumentFragment();e.each(this.children,function(e){t.appendChild(e.el)}),this.el.appendChild(t)},bindCollectionEvents:function(e){var t;r(this),e=e||this.collectionEvents||o;for(var n in e){if(t=e[n],"string"==typeof t&&(t=this[t]),"function"!=typeof t)throw"Duckbone.ListableView.bindCollectionEvents() called with bad handler for "+n;this.weakBindTo(this.collection,n,t,this)}},refresh:function(e){e=e||{},this.empty(),this.collection.fetch()},getViewByModel:function(e){return this.children[e.cid]},collectionReset:function(){this.removeNestedViews(),this.render(!0)},collectionAdd:function(n){var i=new this.viewClass({model:n,doc:this.doc});this.children[n.cid]=i;var a=e(this.collection.models).indexOf(n);if(0==a)t(this.el).prepend(i.el);else{var s=t(this.el).children().eq(a-1);t(s).after(i.el)}},collectionRemove:function(e){this.children[e.cid].remove(),delete this.children[e.cid]}};var o={reset:"collectionReset",add:"collectionAdd",remove:"collectionRemove"}}),ABINE_DNTME.define("duckbone/flashable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.FlashableView={isFlashableView:!0,configureFlash:function(t){if(!t.container)throw"configureFlash called without a container";var n={noticeDuration:1e4,fadeDuration:300};this.flashOptions=e.extend(n,t),s.fadeDuration=this.flashOptions.fadeDuration,t.noticeTemplate&&"string"==typeof t.noticeTemplate?o.prototype.templateData=t.noticeTemplate:"function"==typeof t.noticeTemplate&&(o.prototype.template=t.noticeTemplate),t.errorTemplate&&"string"==typeof t.errorTemplate?FlashErrorView.prototype.templateData=t.errorTemplate:"function"==typeof t.errorTemplate&&(FlashErrorView.prototype.template=t.errorTemplate)},flashNotice:function(e,n){n=n||1e4;var i=new o({model:{message:e},duration:n});return t(this.flashOptions.container).append(i.el),t(i.el).hide().slideDown(300),i},flashAlert:function(e){var n=new l({model:{message:e}});return t(this.flashOptions.container).append(n.el),t(n.el).hide().slideDown(300),n},activeFlashes:function(){return t(this.flashOptions.container).find("div.flash_notice, div.flash_alert")},clearFlashes:function(e){if(this.flashOptions){var t=this.activeFlashes();e?t.remove():t.fadeOut(this.flashOptions.fadeDuration)}}};var s=n.View.extend({events:{"click a.close":"dismiss"},fadeDuration:300,dismiss:function(n){return n&&n.preventDefault(),t(this.el).fadeOut(this.fadeDuration),e.delay(e.bind(this.remove,this),this.fadeDuration),!1}});a.include(s.prototype,a.TemplateableView);var r='<div class="message">{{{message}}}</div>     <div class="close"><a href="#" class="close">X</a></div>',o=s.extend({className:"flash_notice",templateData:r,afterInitialize:function(){this.options.duration&&e.delay(e.bind(this.dismiss,this),this.options.duration)}}),l=s.extend({className:"flash_alert",templateData:r})}),ABINE_DNTME.define("duckbone/bindable_field",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){function s(e,t,n,i){i=i||!1,"undefined"==typeof n&&(n=null),a.ModelHelpers.setOne.call(e,t,n,{silent:i})}a.BindableField={isBindableField:!0,get:function(){var e=this.domToModelTransform(t(this.el).val());return this.stripWhitespace&&this.options.stripWhitespace!==!1&&(e=e.replace(/^\s+|\s+$/g,"")),e},set:function(e){t(this.el).val(this.modelToDomTransform(e))},modelToDomTransform:function(e){return void 0!==e||0/0!==e?e:""},domToModelTransform:function(e){return e},bindToModel:function(e){if(e=e||this.options.modelAttribute||this.modelAttribute||this.options.name||this.name,!e)throw"Duckbone.BindableField.bindToModel() called without a modelAttribute";this.modelAttribute=e;var t=this,n=this.model,i="change:"+e;t.form.view.weakBindToModel(i,function(){var i=n.get(e);i!==t.get()&&a.ModelHelpers.isValidAttribute(i)&&t.set(i)}),t.set(n.get(e))},bindToDOM:function(e,n,i){if(e=e||this.options.modelAttribute||this.modelAttribute||this.options.name||this.name,!e)throw"Duckbone.BindableField.bindToDOM() called without a modelAttribute";this.modelAttribute=e;var n=this.options.changeEvent||this.changeEvent||"change";i=i||this.el;var a=this,r=this.model;t(i).bind(n,function(){s(r,e,a.get())}),s(r,e,a.get())}}}),ABINE_DNTME.define("duckbone/validateable_field",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.ValidateableField={isValidateableField:!0,bindValidation:function(e,n){var i=this.options.validate||this.options.required;if(i){var a=this;e=e||this.options.validateEvent||"change",n=n||this.el;var s=t(window),r=null,o=function(){r=new Date},l=function(){s.unbind("mouseup",l),a.validate()};this.form.view&&this.form.view.isBindableView?this.form.view.weakBindTo(s,"mousedown",o):s.bind("mousedown",o),t(n).bind(e,function(){r&&new Date-r<10?s.bind("mouseup",l):a.validate()})}},validate:function(e,t){if(t=t||!1,t||this.clearErrors(),this.valid=!0,!this.options.validate&&this.options.required&&(this.options.validate="required",this.options.invalidMessage=this.options.invalidMessage||"Required"),e=e||this.options.validate,"string"==typeof e&&(e=a.forms.validators[e]),!e)return!0;var n=this.options.invalidMessage||"Invalid";if(0==e.call(this,this.get())&&(this.valid=!1),this.valid||t){var i=this.get();a.ModelHelpers.isValidAttribute(i)&&this.set(i)}else this.addError(n);return this.valid},addError:function(e){if(!this.errorList){this.errorList=t("<ul>").addClass("error");var n=t(this.el).parents("form").find("div."+this.name+"_errors").get(0);n?t(n).append(this.errorList):t(this.el).after(this.errorList)}this.errorList.append(t("<li>").html(e))},clearErrors:function(){this.errorList&&(this.errorList.remove(),this.errorList=null)}}}),ABINE_DNTME.define("duckbone/form_fields",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core","abine/intl"],function(e,t,n,i,a,s){i.registerHelper("form",function(e,t){var n=e;return n=n.replace(/^(new_)(.*)/,"$2").replace(/^(edit_)(.*)/,"$2"),n!=e&&(n+=" "+e),'<form action="#" name="'+e+'" class="'+n+'">\n'+t(this)+"\n</form>"}),i.registerHelper("form_error_banner",function(e){return e="string"==typeof e?e:"mm_duckbone_default_form_error",e=s.getText(e),new i.SafeString('<div class="error_banner alert alert-error" style="display: none">'+i.Utils.escapeExpression(e)+"</div>")}),i.registerHelper("form_error",function(e){return new i.SafeString('<div class="'+i.Utils.escapeExpression(e)+'_errors"></div>')}),i.registerHelper("form_label",function(e,t){var n;return"object"==typeof t?(n=e,n=n.replace(/^(.)/,function(e){return e.toUpperCase()}),n=n.replace(/(\_[a-z])/g,function(e){return e.toUpperCase().replace("_"," ")})):n="function"==typeof t?new i.SafeString(t(this)):s.getText(t),new i.SafeString('<label data-field-name="'+i.Utils.escapeExpression(e)+'">'+i.Utils.escapeExpression(n)+"</label>")}),i.registerHelper("form_text",function(e){return new i.SafeString('<input class="form_text" type="text" name="'+i.Utils.escapeExpression(e)+'"/>')}),i.registerHelper("form_select",function(e){return new i.SafeString('<select class="form_select" name="'+i.Utils.escapeExpression(e)+'"></select>')}),i.registerHelper("form_radio_set",function(e){return new i.SafeString('<div class="form_radio_set" name="'+i.Utils.escapeExpression(e)+'"></div>')}),i.registerHelper("form_checkbox",function(e){return new i.SafeString('<input class="form_checkbox" type="checkbox" name="'+i.Utils.escapeExpression(e)+'"/>')}),i.registerHelper("form_textarea",function(e){return new i.SafeString('<textarea class="form_textarea" name="'+i.Utils.escapeExpression(e)+'"></textarea>')}),i.registerHelper("form_password",function(e){return new i.SafeString('<input class="form_password" type="password" name="'+i.Utils.escapeExpression(e)+'"></input>')}),i.registerHelper("form_submit",function(e,t){return"undefined"==typeof t&&(t="mm_duckbone_default_form_submit_text"),"object"==typeof t&&(t="mm_duckbone_default_form_submit_text"),t=s.getText(t),new i.SafeString('<button class="form_submit" name="'+i.Utils.escapeExpression(e)+'">'+i.Utils.escapeExpression(t)+"</button>")}),i.registerHelper("form_submit_with_spinner",function(e,t,n){n="object"==typeof n?"/pages/images/ajax_loader.gif":n,"undefined"==typeof t&&(t="mm_duckbone_default_form_submit_text"),"object"==typeof t&&(t="mm_duckbone_default_form_submit_text"),t=s.getText(t);var a='<button class="form_submit" name="'+i.Utils.escapeExpression(e)+'">'+i.Utils.escapeExpression(t)+"</button>";return a+='<img src="'+i.Utils.escapeExpression(n)+'" class="ajax_loading '+i.Utils.escapeExpression(e)+'_loading" style="display: none"/>',new i.SafeString(a)}),a.FormFieldBase=n.View.extend(),e.extend(a.FormFieldBase.prototype,a.BindableField,a.ValidateableField,{initialize:function(e){this.name=this.options.name||t(this.el).attr("name"),this.form=this.options.form,e.elAttributes&&t(this.el).attr(e.elAttributes),this.afterInitialize(e),this.createChildren(),this.bindToModel(),this.bindToDOM(),this.bindValidation()},afterInitialize:function(){},createChildren:function(){}}),a.TextFormField=a.FormFieldBase.extend({type:"text",stripWhitespace:!0}),a.SelectFormField=a.FormFieldBase.extend({type:"select",createChildren:function(){var e=this.options.selectOptions,n="function"==typeof e?e.call(this):e;for(var a in n){var s=t("<option></option>").attr({value:a});s.html(i.Utils.escapeExpression(n[a])),t(this.el).append(s)}}}),a.RadioSetFormField=a.FormFieldBase.extend({type:"radio_set",createChildren:function(){var e=this.options.selectOptions,n="function"==typeof e?e.call(this):e;for(var a in n){var s=this.form.name+"_"+this.name+"_"+a,r=t('<div><input type="radio"/><label for="'+s+'" class="radio_label"></label></div>');t(r).find("input").attr({id:s,name:this.name,value:a}),t(r).find("label").html(i.Utils.escapeExpression(this.options.selectOptions[a])),t(this.el).append(r)}var o=this.el;t(this.el).find("input").bind("change",function(){t(o).trigger("change")})},get:function(){return t(this.el).find("input:checked").attr("value")},set:function(e){var n=t(this.el).find("input:checked").get(0);n&&(n.checked=!1);var i=t(this.el).find('input[value="'+e+'"]').get(0);i&&(i.checked=!0)}}),a.CheckboxFormField=a.FormFieldBase.extend({type:"checkbox",get:function(){return t(this.el).is(":checked")},set:function(e){t(this.el).attr({checked:e})}}),a.TextAreaFormField=a.FormFieldBase.extend({type:"textarea",stripWhitespace:!0}),a.PasswordFormField=a.FormFieldBase.extend({type:"password"}),a.SubmitFormField=n.View.extend(),e.extend(a.SubmitFormField.prototype,a.BindableField,{type:"submit",initialize:function(n){this.form=n.form,this.name=n.name,this.spinnerEl=t(this.el).next("img.ajax_loading"),t(this.el).bind("click",e.bind(this.bindDisableAndSpin,this)),this.submitForm="undefined"==typeof n.submitForm?!0:n.submitForm},bindDisableAndSpin:function(e){e.preventDefault(),this.form.model.off("sync:create",this.disableAndSpin),this.form.model.off("sync:update",this.disableAndSpin),this.form.model.on("sync:create",this.disableAndSpin,this),this.form.model.on("sync:update",this.disableAndSpin,this),this.submitForm&&this.form.submit()},disableAndSpin:function(){this.form.model.off("sync:create",this.disableAndSpin),this.form.model.off("sync:update",this.disableAndSpin),this.spinnerEl&&t(this.spinnerEl).fadeIn(),t(this.el).addClass("loading"),t(this.el).unbind("click"),t(this.el).bind("click",this.stealClick),this.form.model.on("sync:complete",this.syncComplete,this)},stealClick:function(e){return e.preventDefault(),!1},syncComplete:function(){t(this.el).unbind("click"),t(this.el).removeClass("loading"),this.spinnerEl&&t(this.spinnerEl).fadeOut(),t(this.el).bind("click",e.bind(this.bindDisableAndSpin,this))}}),a.forms.fieldTypes={text:a.TextFormField,select:a.SelectFormField,radio_set:a.RadioSetFormField,checkbox:a.CheckboxFormField,textarea:a.TextAreaFormField,password:a.PasswordFormField,submit:a.SubmitFormField}}),ABINE_DNTME.define("duckbone/editable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){function s(e,t){for(var n in t){var i=e[t[n]];"function"==typeof i&&e.weakBindToModel(n,i,e)}}function r(e,t){return e.name+"_"+t.name}function o(e){return"[name="+e+"]"}function l(e){var n=/^form_(.*)/.exec(t(e).attr("class"))[1];return a.forms.fieldTypes[n]}function c(e){var n=t(e).offset().top;n=n>f?n-f:0,t("html body").animate({scrollTop:n},u,p)}a.EditableView={isEditableView:!0,included:function(){this.hasViewLifecycleExtensions||a.include(this,a.ViewLifecycleExtensions)},createForm:function(e){e=e||{};var i=e.el||t(this.el).find("form").get(0)||t(this.el).get(0),s=e.fields||this.options.fields||this.fields,r=e.model||this.model,o=new a.FormManager({el:i,fields:s,model:r||new n.Model,view:this});return this.form=this.form||o,o},bindModelSyncEvents:function(){s(this,h),this.modelSyncEvents&&s(this,this.modelSyncEvents)},cloneModelForEditing:function(){if(!this.model)throw"Found not, has your model been. Cloned, it can not be.";this.originalModel=this.model,this.model=this.originalModel.clone(),this.weakBindToModel("sync:success",function(){var t=e.clone(this.model.attributes);e(this.form.fields).each(function(e){e.options.temporary&&delete t[e.modelAttribute]}),this.originalModel.set(t),d.call(this)},this)},expireClone:function(){if(this.originalModel){this.model.clear({silent:!0});var e=function(){throw"Attempted get/set on expired clone from Duckbone.EditableView. Use original model instead."};this.model.set=e,this.model.get=e,this.model=this.originalModel,delete this.originalModel}},resetModel:function(){if(!this.originalModel)throw"Cloned not, has your model been. Reset, we can not do.";this.model.set(this.originalModel.attributes)},defaultModelSyncSavingHandler:function(){t(this.el).find("div.error_banner").hide(),e.each(this.form.fields,function(e){e.isValidateableField&&e.clearErrors()},this)},defaultModelSyncInvalidHandler:function(){t(this.el).find("div.error_banner").show(),e.each(this.model.errors,function(t,n){var i=this.form.getFieldForModelAttribute(n);e.each(this.model.errors[n],function(t){i&&i.isValidateableField?i.addError(t):e.log("Cannot add error for field "+n+": "+t)},this)},this),t(this.el).find("div.error_banner").show(),c(this.el)},defaultModelSyncSuccessHandler:function(){},defaultModelSyncErrorHandler:function(){},defaultModelSyncCompleteHandler:function(){}},a.FormManager=function(i){this.el=i.el||t('<form action="#"></form>').get(0),this.fieldOptions=e.clone(i.fields)||{},this.model=i.model||new n.Model({}),this.view=i.view,this.name=t(this.el).attr("name")||"untitled_form",this.createFields()},e.extend(a.FormManager.prototype,n.Events),e.extend(a.FormManager.prototype,{createFields:function(){var e,n,i=this;for(n in this.fieldOptions)e=this.createField(n,this.fieldOptions[n]);t(this.el).find("button.form_submit").each(function(){n=t(this).attr("name"),i.fields[n]||(e=new a.forms.fieldTypes.submit({name:n,el:this,form:i}),i.fields[e.name]=e)}),t(this.el).find("label").each(function(){var e=t(this).attr("data-field-name");e&&i.fields[e]&&t(this).attr("for",r(i,i.fields[e]))})},createField:function(n,i){this.fields=this.fields||{};var s,c,d;if(s=t(this.el).find(o(n)).get(0),!s)throw"Form field "+n+" defined in view, missing in template";if(c=i.type?a.forms.fieldTypes[i.type]:l(s),!c)throw"Bad form field type "+n;return d=new c(e.extend(i,{el:s,model:this.model,form:this,name:n})),d.name=n,t(d.el).attr("id",r(this,d)),this.fields[n]=d,d},getField:function(e){return this.fields[e]},getFieldForModelAttribute:function(t){return e.detect(this.fields,function(e){return e.modelAttribute==t},this)},validate:function(){this.isValid=!0;var e;for(var t in this.fields)e=this.fields[t].validate?this.fields[t].validate():!0,e||(this.isValid=!1);return this.isValid},submit:function(n){this.validate()?(n=e.clone(n)||{},e.each(["success","error"],function(t){if("function"==typeof n[t]){var i=n[t];n[t]=function(t,n){e.defer(e.bind(i,t,t,n))}}},this),this.model.save(null,n)):(e.log("Form is invalid."),t(this.el).find("div.error_banner").show(),c(this.el))}});var d=function(){var t=this.options.afterSaveDestination||this.afterSaveDestination;t&&(t instanceof Array||(t=[t]),e.each(t,function(e){if(e.collection)e.collection.add(this.originalModel);else{var t="set"+e.association.slice(0,1).toUpperCase()+e.association.slice(1);e.model[t].call(e.model,this.originalModel)}},this))},h={"sync:create":"defaultModelSyncSavingHandler","sync:update":"defaultModelSyncSavingHandler","sync:success":"defaultModelSyncSuccessHandler","sync:invalid":"defaultModelSyncInvalidHandler","sync:error":"defaultModelSyncErrorHandler","sync:complete":"defaultModelSyncCompleteHandler"},u=400,p="swing",f=100}),ABINE_DNTME.define("duckbone/form_validations",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.forms=a.forms||{},a.forms.validators=a.forms.validators||{},e.extend(a.forms.validators,{required:function(e){return!(void 0==e||null==e||""==e)},USPhone:function(e){return/^\(?(\d{3})\)?[\- ]?\d{3}[\- ]?\d{4}$/.test(e)},date:function(e){return/^(?:0?[1-9]|1[0-2])\/(?:0?[1-9]|[12][0-9]|3[01])\/\d{2}?\d{2}$/.test(e)},email:function(e){return/^([A-Za-z0-9\._%\+\-]+)@([A-Za-z0-9\-]+\.)+([A-Za-z]{2,})$/.test(e)},numeric:function(e){return 0/0!=parseFloat(e)}})}),ABINE_DNTME.define("duckbone/remoteable_view",["documentcloud/underscore","jquery","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i,a){a.RemoteableView={debounceRequest:500,initialize:function(){this.render=e.debounce(e.bind(this.serverSideRender,this),this.debounceRequest),this.model&&this.model.on("change",this.render),this.render()},serverSideRender:function(){if(!this.url)throw"Set url property on RemoteView to enable server-side rendering.";return"string"==typeof this.loading&&t(this.el).html(this.loading),t.ajax({url:this.url,dataType:"html",context:this,success:function(e){t(this.el).empty(),t(this.el).html(e)},error:function(){t(this.el).html("Error rendering from "+this.url)}}),this}}}),ABINE_DNTME.define("duckbone/simple_queue",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core"],function(e,t,n,i){i.SimpleQueue=function(e){this.interval=e.interval||400,this.elements=[],this.callback=e.callback,this.running=!1},e.extend(i.SimpleQueue.prototype,{push:function(t){this.elements.push(t),this.comparator&&e(this.elements).sortBy(this.comparator),this.running||(this.running=!0,this.timer=setInterval(e.bind(this.shift,this),this.interval))},shift:function(){if(0==this.elements.length)this.running=!1,clearInterval(this.timer);else{var e=this.elements.shift();this.callback.call(e,e,this)}}})}),ABINE_DNTME.define("duckbone/base_classes",["documentcloud/underscore","documentcloud/backbone","wycats/handlebars","duckbone/core","jquery"],function(e,t,n,i,a){i.Model=t.Model.extend(),i.include(i.Model.prototype,i.AssociableModel,i.ModelHelpers,i.Syncable),i.Collection=t.Collection.extend(),i.include(i.Collection.prototype,i.CollectionHelpers,i.Syncable),i.View=t.View.extend(),i.include(i.View.prototype,i.TemplateableView,i.BindableView),t.View.prototype.make=function(e,t,n){var i=(this.doc||this.options.doc||document).createElement(e);return t&&a(i).attr(t),n&&a(i).html(n),i},i.FormView=i.View.extend(),i.include(i.FormView.prototype,i.EditableView),i.ListView=t.View.extend(),i.include(i.ListView.prototype,i.ListableView,i.BindableView),i.Application=t.Router.extend(),i.include(i.Application.prototype,i.RouteableApplication,i.FlashableView)}),ABINE_DNTME.define("duckbone/security",["documentcloud/underscore","jquery","duckbone/core"],function(e,t,n){function i(e,t,n){if(!e._unlockHooked){e._unlockHooked=!0;var i=function(){a(e,t,n)};ABINE_DNTME.App.on("unlocked",i),t.prototype._oldBeforeRemove=t.prototype.beforeRemove,t.prototype.beforeRemove=function(){t.prototype.beforeRemove=t.prototype._oldBeforeRemove,t.prototype.beforeRemove&&t.prototype.beforeRemove.apply(e,arguments),e._unlockHooked=!1,ABINE_DNTME.App.off("unlocked",i)}}}function a(e,t,n){return ABINE_DNTME.App.isLocked()?(i(e,t,n),e):(t.prototype._oldRender.apply(e,n),void 0)}function s(e,t){ABINE_DNTME.App.isLocked()?ABINE_DNTME.App.renderPage():e._oldRouteAction.apply(e,t)}n.Security={showBlankWhenLocked:function(e){e.prototype._oldRender=e.prototype.render,e.prototype.render=function(){a(this,e,arguments)}},showLoginWhenLocked:function(e){e._oldRouteAction=e.routeAction,e.routeAction=function(){s(e,arguments)}}}}),ABINE_DNTME.requireDuckbone=function(e){ABINE_DNTME.require(["duckbone/core","duckbone/model","duckbone/syncable","duckbone/collection","duckbone/routeable_application","duckbone/view_lifecycle_extensions","duckbone/handlebars_extensions","duckbone/idme_template_registry","duckbone/nestable_view","duckbone/templateable_view","duckbone/stylizeable_view","duckbone/pageable_view","duckbone/pageable_collection","duckbone/bindable_view","duckbone/listable_view","duckbone/flashable_view","duckbone/bindable_field","duckbone/validateable_field","duckbone/form_fields","duckbone/editable_view","duckbone/form_validations","duckbone/remoteable_view","duckbone/simple_queue","duckbone/base_classes"],function(){e()})},ABINE_DNTME.define("abine/models/base",["abine/contentMessenger","documentcloud/backbone","duckbone/core","models"],function(e,t,n,i){function a(){if(!s){var t=new e.ContentMessenger({eventAggregator:ABINE_DNTME.eventAggregator||window.eventAggregator});return ABINE_DNTME.config.browser.match(/Chrome|Opera/i)&&(s=t),t}return s}var s,r=function(e,t,n){var i,s,r,o={};!t||"create"!=e&&"update"!=e||(o=t.toJSON(),delete o.messenger),n.eventName?i=n.eventName:(i=t.model?e+":"+t.model.storageEntity:e+":"+t.storageEntity,"create"!=e&&(i+=":"+t.id)),s="response:"+i.split(":").slice(1).join(":"),r="error:"+i.split(":").slice(1).join(":");var l=t.messenger||a(),c=function(e){l.off(s,c),l.off(r,d),delete t.errors,n.success.call(t,e,200,null),t.trigger("sync:success",e)},d=function(e){l.off(r,d),l.off(s,c),delete t.errors,n.error.call(t,e,500,null),t.trigger("sync:error",e)};l.on(s,c,t),l.on(r,d,t),t.trigger("sync:"+e.toLowerCase()),l.send(i,o)},o=function(e){var t=this.get(e);return"1"===t||"true"===t||t===!0||1===t?!0:!1},l=function(e){return!o(e)},c=t.Model.extend({sync:r,getMessenger:a,isTrue:o,isFalse:l});n.include(c.prototype,n.AssociableModel,n.ModelHelpers);var d=t.Collection.extend({sync:r,getMessenger:a,fetchAll:function(e){e=e||{},e.eventName=["read",this.model.prototype.storageEntity,"all"].join(":"),this.fetch(e)}});return n.include(d.prototype,n.CollectionHelpers),i.BaseModel=c,i.BaseCollection=d,{BaseModel:c,BaseCollection:d}}),ABINE_DNTME.define("abine/models/blacklist",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"blacklist",initialize:function(){this.messenger=this.getMessenger()},getDomain:function(){return this.get("domain")},getId:function(){return this.get("id")},fetchByDomain:function(e,t){var n=this,i=e?"create":"read",a=this.get("domain");a&&(a=a.replace(":","::"));var s=i+":blacklist:domain:"+a;this.sync(i,this,{eventName:s,success:function(e){n.set(e),t(null)},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/site]#[loadAccounts]# error event in model.sync eventName: create/read:blacklist:domain:domain"),t("No blacklist")}})},emailEnabled:function(){return this.get("globalEmail")&&!this.get("email")},phoneEnabled:function(){return this.get("globalPhone")&&this.get("premium")&&!this.get("phone")},cardEnabled:function(){return this.get("globalCard")&&this.get("hasEnabledCard")&&!this.get("card")}}),i=t.BaseCollection.extend({model:n});return t.Blacklist=n,t.BlacklistCollection=i,{Blacklist:n,BlacklistCollection:i}}),ABINE_DNTME.define("abine/models/disposableCard",["models","abine/eventLogger"],function(e,t){var n=e.BaseModel.extend({storageEntity:"disposableCard",initialize:function(){},isGift:function(){return this.isTrue("gift")},getRecipientEmail:function(){return this.get("recipient_email")},isActive:function(){return this.isTrue("active")},getID:function(){return this.id},getGUID:function(){return this.get("guid")},getAmountRefunded:function(){return"$"+(this.get("amount_refunded")/100).toFixed(2)},getOriginalValue:function(){return"$"+(this.get("original_amount")/100).toFixed(2)},getCardDetails:function(){return this.getCardNumber()+" - "+this.getExpiry()},getLastFour:function(){return this.get("number").substr(this.get("number").length-4)},getCardNumber:function(){return this.get("number")},getSeparatedCardNumber:function(){var e=this.get("number");return 16==e.length?e.substring(0,4)+" "+e.substring(4,8)+" "+e.substring(8,12)+" "+e.substring(12,16):e},getType:function(){return this.get("type").toLowerCase()},getPrettyNumber:function(){for(var e="",t=0;t<this.get("number").length;t++)e+=this.get("number").charAt(t),t%4==3&&(e+="  ");return e},getCVC:function(){return this.get("cvc")},getExpiry:function(){var e=parseInt(this.get("expiry_month"));return 10>e&&(e="0"+e),e+"/"+this.get("expiry_year")},getLabel:function(){var e=this.get("label");return e&&e.length>15&&(e=e.substr(0,12)+"..."),e},getProtectedNumber:function(){var e=this.get("number")+"";return e.substr(0,e.length-12).replace(/./g,"x")+e.substr(e.length-4)},getProtectedVerification:function(){var e=this.get("verification")+"";return e.substr(0,e.length-1).replace(/./g,"x")+e.substr(e.length-1)},toggleDisposable:function(){this.save({active:1===this.get("active")?0:1})}});n.convertStringToCents=function(e){return parseFloat(e).toFixed(2).toString().replace(".","")};var i=e.BaseCollection.extend({model:n,fetchAllLocal:function(e){e=e||{},"undefined"==typeof e.reset&&(e.reset=!0),e.eventName=["read",this.model.prototype.storageEntity,"allLocal"].join(":"),this.fetch(e)},fetchAllBySite:function(e){this.sync("read",this,{eventName:"read:disposableCard:site:"+e,success:function(e){this.reset(e)},error:function(){t.error("[ERROR HANDLER][abine/models/disposableCard][fetchAllBySite]: error event in model.sync event: read:disposableCard:site:id")}})},fetchAllFromServer:function(e){this.sync("read",this,{eventName:"read:disposableCard:server",success:function(t){this.reset(t),e.success(t)},error:function(){e.error(),!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableCard]#[fetchAllFromServer]# error event in model.sync eventName: read:disposableCard:server")}})},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:disposableCard:domain:"+e,success:function(e){this.reset(e),t()},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableCard]#[fetchAllByDomain]# error event in model.sync eventName: read:disposableCard:domain:domain")}})},comparator:function(e){return new Date-new Date(e.get("createdAt"))}});return e.DisposableCard=n,e.DisposableCardCollection=i,{DisposableCard:n,DisposableCardCollection:i}}),ABINE_DNTME.define("abine/models/disposableEmail",["models","documentcloud/underscore"],function(e,t){var n=e.BaseModel.extend({storageEntity:"disposableEmail",highlighted:!1,initialize:function(){this.hasOne({account:{model:e.Account}})},getId:function(){return this.get("id")},hasWebmail:function(){return this.has("webmails")&&this.get("webmails").length>0?!0:!1},getWebmailCount:function(){return this.hasWebmail()?this.get("webmails").length:0},hasAccount:function(){return this.has("accountId")&&""!=this.get("accountId")&&this.account&&this.account.accountFields?t.any(this.account.accountFields.models,function(e){return e.get("value")==this.getAddress()},this):!1},getAddress:function(){return this.get("user")+"@"+this.get("domain")},getHighlightedClass:function(){return this.get("highlighted")?"highlighted":""},noConnectionError:function(){return!this.get("err")},isActive:function(){return 1==this.get("active")},toggleDisposable:function(e){this.save({active:1==this.get("active")?0:1},e)},needsTruncation:function(){var e=this.getDomain();return e.length>20},getTruncatedDomain:function(){var e=this.getDomain();return e.substring(0,20)+"..."},getDomain:function(){return this.attributes.label?this.attributes.label:"Unknown"}}),i=e.BaseCollection.extend({model:n,interestedBroadcasts:/broadcast:saveForm:(new|update)/i,initialize:function(){this.messenger=this.getMessenger()},totalWebmails:function(){return t.reduce(this.models,function(e,t){return e+t.getWebmailCount()},0)},countUserCreated:function(){return t.reduce(this.models,function(e,t){return"abine.com"!=t.getDomain()?e+1:e},0)},fetchAllLocal:function(e){e=e||{},"undefined"==typeof e.reset&&(e.reset=!0),e.eventName=["read",this.model.prototype.storageEntity,"allLocal"].join(":"),this.fetch(e)},fetchAllBySite:function(e){this.sync("read",this,{eventName:"read:disposableEmail:site:"+e,success:function(e){this.reset(e)},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableEmail]#[fetchAllBySite]# error event in model.sync eventName: read:disposableEmail:site:id")}})},fetchAllFromServer:function(e){this.sync("read",this,{eventName:"read:disposableEmail:server",success:function(t){this.reset(t),e()},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableEmail]#[fetchAllFromServer]# error event in model.sync eventName: read:disposableEmail:server")}})},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:disposableEmail:domain:"+e,success:function(e){this.reset(e),t()},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposableEmail]#[fetchAllByDomain]# error event in model.sync eventName: read:disposableEmail:domain:domain")}})},comparator:function(e){return new Date-new Date(e.get("createdAt"))}});return e.DisposableEmail=n,e.DisposableEmailCollection=i,{DisposableEmail:n,DisposableEmailCollection:i}}),ABINE_DNTME.define("abine/models/disposablePhone",["models"],function(e){var t=e.BaseModel.extend({storageEntity:"disposablePhone",initialize:function(){this.hasOne({account:{model:e.Account}})},getCountryCode:function(){return this.get("country_code")||"1"},getAreaCode:function(){return this.get("number").substr(0,3)},getExchange:function(){return this.get("number").substr(3,3)},getLocal:function(){return this.get("number").substr(6,4)},getPrettyNumber:function(){return this.isNorthAmericaFormat()?"("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():this.get("number")},getFullPrettyNumber:function(){return this.isNorthAmericaFormat()?"+"+this.getCountryCode()+" ("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():"+"+this.getCountryCode()+" "+this.get("number")},isNorthAmericaFormat:function(){return"1"==this.getCountryCode()},isSuspended:function(){return"true"==this.get("isSuspended")},toggleDisposable:function(){this.save({active:1===this.get("active")?0:1})}}),n=e.BaseCollection.extend({model:t,fetchAllBySite:function(e){this.sync("read",this,{eventName:"read:disposablePhone:site:"+e,success:function(e){this.reset(e)},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/disposablePhone]#[fetchAllBySite]# error event in model.sync event: read:disposablePhone:site:id")}})}});return e.DisposablePhone=t,e.DisposablePhoneCollection=n,{DisposablePhone:t,DisposablePhoneCollection:n}}),ABINE_DNTME.define("abine/models/dntStats",["documentcloud/underscore","models","jquery","abine/intl"],function(e,t,n,i){function a(e){e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2}var s=t.BaseModel.extend({storageEntity:"dntStats",initialize:function(){this.messenger=this.getMessenger()},addCommas:function(e){e+="";for(var t=e.split("."),n=t[0],i=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1,$2");return n+i},showMedals:function(){return this.get("showMedals")},viewedBadge:function(){return this.get("viewedBadge")},canAutoShowBadge:function(){if(this.get("viewedBadge")||!this.get("showMedals"))return!1;var e=this.get("earnedOn");return!e||Date.now()-e<2592e5},toggleViewedBadge:function(){this.save({viewedBadge:!this.get("viewedBadge")})},achievedBronze:function(){return this.get("currentBadgeIndex")>-1},achievedSilver:function(){return this.get("currentBadgeIndex")>0},achievedGold:function(){return this.get("currentBadgeIndex")>1
},achievedPlatinum:function(){return this.get("currentBadgeIndex")>2},getPlatinumCount:function(){return this.achievedPlatinum()?"x"+(this.get("currentBadgeIndex")-2):"X"},nextMedalAtFormatted:function(){return this.addCommas(this.nextMedalAt())},nextMedalAt:function(){return this.achievedPlatinum()?this.platinumLimit*(this.get("currentBadgeIndex")-1)-this.get("totalAllTimeTrackers"):this.achievedGold()?this.platinumLimit-this.get("totalAllTimeTrackers"):this.achievedSilver()?this.goldLimit-this.get("totalAllTimeTrackers"):this.achievedBronze()?this.silverLimit-this.get("totalAllTimeTrackers"):this.bronzeLimit-this.get("totalAllTimeTrackers")},getFunword:function(){var e=this.get("totalAllTimeTrackers");return 100>=e?i.getText("mm_dntme_funword1"):1e3>=e?i.getText("mm_dntme_funword2"):1e4>=e?i.getText("mm_dntme_funword3"):i.getText("mm_dntme_funword4")},getBadgeCount:function(){var e=JSON.parse(this.get("currentBadge"));return this.addCommas(e.limit)},getBadgeType:function(){var e=JSON.parse(this.get("currentBadge"));return e.cssClass},getAllTimeTotalTrackers:function(){return this.get("totalAllTimeTrackers")},formattedTotal:function(){return a(this.get("totalAllTimeTrackers")+"")},totalGreaterThan10000:function(){return this.get("totalAllTimeTrackers")>1e4},getDailyTotalsByYear:function(e){var t=JSON.parse(this.get("dailyTrackerCounts"));return e in t?t[e]:{}},getBadTrackerDataByYear:function(e){var t=JSON.parse(this.get("badTrackers"));if(!t.totals)return{};var n=t.totals,i={},a=[e,e-1];for(var s in n)for(var r=0;r<a.length;r++){var o=s+"."+a[r];t.daily&&o in t.daily&&(i[s]={},i[s][a[r]]=t.daily[o])}var l={};return{totals:n,daily:i,links:l}}});return t.DntStats=s,{DntStats:s}}),ABINE_DNTME.define("abine/models/preference",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"preference",initialize:function(){},parse:function(e){return"true"==e.value?e.value=!0:"false"==e.value&&(e.value=!1),e},toJSON:function(){var t=e.clone(this.attributes);return t.value===!0?t.value="true":t.value===!1&&(t.value="false"),t}}),i=t.BaseCollection.extend({model:n,interestedBroadcasts:/broadcast:preference:reload/i,parse:function(t){return e(t).map(function(e){return"true"==e.value?e.value=!0:"false"==e.value&&(e.value=!1),e})},restoreDefaults:function(t){this.sync("update",this,{eventName:"update:preference:restore",success:e.bind(function(e){this.reset(this.parse(e)),t()},this),error:function(e){t(e)}})},getPrefFromStorage:function(t,i){this.sync("read",this,{eventName:"read:preference:name:"+t,success:function(t){e.isArray(t)&&0===t.length?i(null):e.isObject(t)?i(new n(t)):i(null)},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/preference]#[getPrefFromStorage]# error event in model.sync eventName: read:preference:name:key"),i(null)}})},isPrefTrue:function(t){var n=e(this.models).find(function(e){return e.get("key")===t});return n?n.isTrue("value"):!1},getPref:function(t){var n=e(this.models).find(function(e){return e.get("key")===t});return n?n.get("value"):null},setPref:function(n,i){var a=e(this.models).find(function(e){return e.get("key")===n});a?a.save({value:i}):(a=new t.Preference,a.save({key:n,value:i}),this.add(a))},hasPref:function(t){var n=e(this.models).find(function(e){return e.get("key")===t});return!!n}});return t.Preference=n,t.PreferenceCollection=i,{Preference:n,PreferenceCollection:i}}),ABINE_DNTME.define("abine/models/mappedForm",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"mappedForm",initialize:function(){this.hasMany({fields:{collection:t.MappedFieldCollection}})},searchSignature:function(t){this.sync("read",this,{eventName:"read:mappedForm:signature:"+this.get("signature"),success:e.bind(function(e){e?(this.set(e),t()):t(!0)},this),error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/mappedForm]#[searchSignature]# error event in searchSignature"),t(!0)}})}}),i=t.BaseCollection.extend({model:n,initialize:function(){},fetchAllByDomain:function(e,t){e&&(e=e.replace(":","::")),this.sync("read",this,{eventName:"read:mappedForm:site:"+e,success:function(e){this.reset(e),t()},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/mappedForm]#[fetchAllByDomain]# error event in read:mappedForm:site:domain"),t(!0)}})}});return t.MappedForm=n,t.MappedFormCollection=i,{MappedForm:n,MappedFormCollection:i}}),ABINE_DNTME.define("abine/models/mappedField",["documentcloud/underscore","models"],function(e,t){var n=t.BaseModel.extend({storageEntity:"mappedField",initialize:function(){}}),i=t.BaseCollection.extend({model:n,initialize:function(){}});return t.MappedField=n,t.MappedFieldCollection=i,{MappedField:n,MappedFieldCollection:i}}),ABINE_DNTME.define("abine/models/shieldedCard",["models","documentcloud/underscore","abine/eventLogger"],function(e){var t=e.BaseModel.extend({storageEntity:"shieldedCard",interestedBroadcasts:/broadcast:billinginfo:updated/i,generateDisposable:function(){return new e.DisposableCard({shielded_card_id:this.get("id")})},getName:function(){return this.get("first_name")+" "+this.get("last_name")},getExpiry:function(){return parseInt(this.get("month"))+" / "+parseInt(this.get("year"))},getFirstName:function(){return this.get("first_name").toUpperCase()},getLastName:function(){return this.get("last_name").toUpperCase()},getLastFour:function(){return this.get("last_four")},getProtectedNumber:function(){if(!this.get("number"))return"---";var e=this.get("number")+"";return e.substr(0,e.length-4).replace(/./g,"x")+e.substr(e.length-4)},getProtectedVerification:function(){if(!this.get("number"))return"---";var e=this.get("verification")+"";return e.substr(0,e.length-1).replace(/./g,"x")+e.substr(e.length-1)}}),n=e.BaseCollection.extend({model:t,getPrimaryCardName:function(){return this.models.length>0?this.models[0].getFirstName+" "+this.models[0].getLastName():""},getPrimaryCardLastFour:function(){return this.models.length>0?this.models[0].getLastFour():""},getPrimaryCardExpiry:function(){return this.models.length>0?this.models[0].get:""}});return e.ShieldedCard=t,e.ShieldedCardCollection=n,{ShieldedCard:t,ShieldedCardCollection:n}}),ABINE_DNTME.define("abine/models/shieldedEmail",["models"],function(e){var t=e.BaseModel.extend({storageEntity:"shieldedEmail",generateDisposable:function(t){return new e.DisposableEmail({targetGuid:this.get("guid"),label:t})},getAddress:function(){return this.get("email")},isValidated:function(){return 1==this.get("active")},resendValidationEmail:function(e){this.sync("update",this,{eventName:"update:shieldedEmail:resendValidationEmail:"+this.get("id"),success:function(t){e(t)},error:function(t){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/shieldedEmail]#[resendValidationEmail]# error event in model.sync eventName: update:shieldedEmail:resendValidationEmail:id"),e(t)}})}}),n=e.BaseCollection.extend({model:t,interestedBroadcasts:/broadcast:register:success/i});return e.ShieldedEmail=t,e.ShieldedEmailCollection=n,{ShieldedEmail:t,ShieldedEmailCollection:n}}),ABINE_DNTME.define("abine/models/shieldedPhone",["models","documentcloud/underscore"],function(e){var t=e.BaseModel.extend({storageEntity:"shieldedPhone",generateDisposable:function(){return new e.DisposablePhone({shielded_phone_id:this.get("id")})},hasNumber:function(){return this.has("number")&&""!=this.get("number")?!0:!1},registerNumber:function(e){this.sync("create",this,{eventName:"create:shieldedPhone",success:e.success,error:e.error})},verifySecret:function(e){this.sync("update",this,{eventName:"update:shieldedPhone:secret",success:e.success,error:e.error})},getCountryCode:function(){return this.get("country_code")||"1"},getAreaCode:function(){return this.get("number").substr(0,3)},getExchange:function(){return this.get("number").substr(3,3)},getLocal:function(){return this.get("number").substr(6,4)},getPrettyNumber:function(){return this.isNorthAmericaFormat()?"("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():this.get("number")},getFullPrettyNumber:function(){return this.isNorthAmericaFormat()?"+"+this.getCountryCode()+" ("+this.getAreaCode()+") "+this.getExchange()+"-"+this.getLocal():"+"+this.getCountryCode()+" "+this.get("number")},isNorthAmericaFormat:function(){return"1"==this.getCountryCode()},isTextAllowed:function(){return this.getCountryCode()in{1:1,44:1}},isValidated:function(){return"true"==this.get("is_validated")}}),n=e.BaseCollection.extend({model:t});return e.ShieldedPhone=t,e.ShieldedPhoneCollection=n,{ShieldedPhone:t,ShieldedPhoneCollection:n}}),ABINE_DNTME.define("abine/models/tabData",["documentcloud/underscore","models","jquery","abine/intl"],function(e,t,n,i){var a=t.BaseModel.extend({storageEntity:"pageTracker",initialize:function(){this.messenger=this.getMessenger()},hasSuggested:function(){return!0}}),s=t.BaseCollection.extend({model:a,getBlocked:function(){for(var e=0,t=0;t<this.length;t++)1==this.at(t).get("blocked")&&e++;return e},getAllowed:function(){for(var e=0,t=0;t<this.length;t++)1!=this.at(t).get("blocked")&&e++;return e}}),r=t.BaseModel.extend({storageEntity:"customTabData",initialize:function(){this.messenger=this.getMessenger()}}),o=t.BaseCollection.extend({model:r,isFeedbackShown:function(){for(var e=0;e<this.length;e++)if("feedbackShown"==this.at(e).get("name"))return this.at(e).get("value");return!1},changedFeature:function(){for(var e=0;e<this.length;e++)if("changedFeature"==this.at(e).get("name")){var t=this.at(e).get("value");if(""==t)break;var n=this.changedFeatureOffStatus(),a="";return a=n?"tracker"==t?"allowed":"off":"tracker"==t?"blocked":"on",i.getText("mm_dntme_toggled_"+t,[a])}return null},changedFeatureOffStatus:function(){for(var e=0;e<this.length;e++)if("changedFeatureOffStatus"==this.at(e).get("name"))return this.at(e).get("value");return null},setCustomTabData:function(e,t){for(var n=null,i=0;i<this.length;i++)this.at(i).get("name")==e&&(n=this.at(i));n||(n=new r,this.add(n)),n.save({name:e,value:t})}}),l=t.BaseModel.extend({storageEntity:"tabData",initialize:function(e){this.messenger=e.messenger||this.getMessenger(),this.hasMany({trackers:{collection:s},custom:{collection:o}}),this.hasOne({blacklist:{model:t.Blacklist},dntStats:{model:t.DntStats}})},hasFiveOrMoreTrackers:function(){return this.trackers.length>=5}});return t.TabData=l,t.CustomTabData=r,{TabData:l}}),ABINE_DNTME.define("abine/models/address",["models","documentcloud/underscore"],function(e){var t=e.BaseModel.extend({storageEntity:"address"}),n=e.BaseCollection.extend({model:t,initialize:function(){this.messenger=this.getMessenger()}});return e.Address=t,e.AddressCollection=n,{Address:t,AddressCollection:n}}),ABINE_DNTME.define("abine/models/globalData",["documentcloud/underscore","models","jquery","abine/intl"],function(e,t,n,i){var a=t.BaseModel.extend({storageEntity:"globalTracker",initialize:function(){this.messenger=this.getMessenger()},hasSuggested:function(){return!1}}),s=t.BaseCollection.extend({model:a}),r=t.BaseModel.extend({storageEntity:"globalPreference",initialize:function(){this.messenger=this.getMessenger()},getLabel:function(){return i.getText("mm_dntme_"+this.get("name").toLowerCase())},getId:function(){return this.get("name").toLowerCase()},getTooltip:function(){return i.getText("mm_dntme_help_"+this.get("name").toLowerCase())}}),o=t.BaseCollection.extend({model:r}),l=t.BaseModel.extend({storageEntity:"globalFeature",initialize:function(){this.messenger=this.getMessenger()},getLabel:function(){return i.getText("mm_dntme_dont_track_"+this.get("name").toLowerCase())},isBrowsing:function(){return"browsing"==this.get("name")},getTooltip:function(){return i.getText("mm_dntme_help_"+this.get("name").toLowerCase())}}),c=t.BaseCollection.extend({model:l}),d=t.BaseModel.extend({storageEntity:"globalData",initialize:function(e){this.messenger=e.messenger||this.getMessenger(),this.hasMany({trackers:{collection:s},preferences:{collection:o},globalFeatures:{collection:c},blacklist:{collection:t.BlacklistCollection}})}});return t.GlobalData=d,{GlobalData:d}}),ABINE_DNTME.define("abine/models/feedback",["documentcloud/underscore","documentcloud/backbone","models"],function(e,t,n){var i=n.BaseModel.extend({initialize:function(){},getSuccessLeadMsg:function(){return this.attributes.leadMsg},getSuccessMsg:function(){return this.attributes.successMsg},clone:function(){var e=new this.constructor(this);return e.user=this.user,e}});return n.Feedback=i,{Feedback:i}}),ABINE_DNTME.define("models",[],function(){return{}}),ABINE_DNTME.requireModels=function(e){ABINE_DNTME.require(["abine/models/base","abine/models/blacklist","abine/models/disposableCard","abine/models/disposableEmail","abine/models/disposablePhone","abine/models/dntStats","abine/models/preference","abine/models/mappedForm","abine/models/mappedField","abine/models/shieldedCard","abine/models/shieldedEmail","abine/models/shieldedPhone","abine/models/tabData","abine/models/address","abine/models/globalData","abine/models/feedback"],function(){e()})},/* ===========================================================
 * bootstrap-tooltip.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var a,s,r,o,l;for(this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)o=r[l],"click"==o?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=o&&(a="hover"==o?"mouseenter":"focus",s="hover"==o?"mouseleave":"blur",this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n,i=e.fn[this.type].defaults,a={};return this._options&&e.each(this._options,function(e,t){i[e]!=t&&(a[e]=t)},this),n=e(t.currentTarget)[this.type](a).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,n,i,a,s,r,o=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),i=t[0].offsetWidth,a=t[0].offsetHeight,s){case"bottom":r={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":r={top:n.top-a,left:n.left+n.width/2-i/2};break;case"left":r={top:n.top+n.height/2-a/2,left:n.left-i};break;case"right":r={top:n.top+n.height/2-a/2,left:n.left+n.width}}this.applyPlacement(r,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,i,a,s,r=this.tip(),o=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),n=r[0].offsetWidth,i=r[0].offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,s=!0),"bottom"==t||"top"==t?(a=0,e.left<0&&(a=-2*e.left,e.left=0,r.offset(e),n=r[0].offsetWidth,i=r[0].offsetHeight),this.replaceArrow(a-o+n,n,"left")):this.replaceArrow(i-l,i,"top"),s&&r.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip(),i=e.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),a=i.data("tooltip"),s="object"==typeof n&&n;a||i.data("tooltip",a=new t(this,s)),"string"==typeof n&&a[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),/**
 * Abine Modifications: removed "#" prefix from target to use NODE directly:
 * https://bitbucket.org/cleonello/jqplot/issue/114/jqplot-target-should-accept-any-element
 *
 * Title: jqPlot Charts
 * 
 * Pure JavaScript plotting plugin for jQuery.
 * 
 * About: Version
 * 
 * version: 1.0.8 
 * revision: 1250
 * 
 * About: Copyright & License
 * 
 * Copyright (c) 2009-2013 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly.
 * 
 * See <GPL Version 2> and <MIT License> contained within this distribution for further information. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris at jqplot dot com 
 * or see http://www.jqplot.com/info.php.  This is, of course, not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php.
 *
 * sprintf functions contained in jqplot.sprintf.js by Ash Searle:
 * 
 *     version 2007.04.27
 *     author Ash Searle
 *     http://hexmen.com/blog/2007/03/printf-sprintf/
 *     http://hexmen.com/js/sprintf.js
 *     The author (Ash Searle) has placed this code in the public domain:
 *     "This code is unrestricted: you are free to use it however you like."
 * 
 * 
 * About: Introduction
 * 
 * jqPlot requires jQuery (1.4+ required for certain features). jQuery 1.4.2 is included in the distribution.  
 * To use jqPlot include jQuery, the jqPlot jQuery plugin, the jqPlot css file and optionally 
 * the excanvas script for IE support in your web page:
 * 
 * > <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="excanvas.js"></script><![endif]-->
 * > <script language="javascript" type="text/javascript" src="jquery-1.4.4.min.js"></script>
 * > <script language="javascript" type="text/javascript" src="jquery.jqplot.min.js"></script>
 * > <link rel="stylesheet" type="text/css" href="jquery.jqplot.css" />
 * 
 * jqPlot can be customized by overriding the defaults of any of the objects which make
 * up the plot. The general usage of jqplot is:
 * 
 * > chart = $.jqplot('targetElemId', [dataArray,...], {optionsObject});
 * 
 * The options available to jqplot are detailed in <jqPlot Options> in the jqPlotOptions.txt file.
 * 
 * An actual call to $.jqplot() may look like the 
 * examples below:
 * 
 * > chart = $.jqplot('chartdiv',  [[[1, 2],[3,5.12],[5,13.1],[7,33.6],[9,85.9],[11,219.9]]]);
 * 
 * or
 * 
 * > dataArray = [34,12,43,55,77];
 * > chart = $.jqplot('targetElemId', [dataArray, ...], {title:'My Plot', axes:{yaxis:{min:20, max:100}}});
 * 
 * For more inforrmation, see <jqPlot Usage>.
 * 
 * About: Usage
 * 
 * See <jqPlot Usage>
 * 
 * About: Available Options 
 * 
 * See <jqPlot Options> for a list of options available thorugh the options object (not complete yet!)
 * 
 * About: Options Usage
 * 
 * See <Options Tutorial>
 * 
 * About: Changes
 * 
 * See <Change Log>
 * 
 */
function(e){function t(t){e.jqplot.ElemContainer.call(this),this.name=t,this._series=[],this.show=!1,this.tickRenderer=e.jqplot.AxisTickRenderer,this.tickOptions={},this.labelRenderer=e.jqplot.AxisLabelRenderer,this.labelOptions={},this.label=null,this.showLabel=!0,this.min=null,this.max=null,this.autoscale=!1,this.pad=1.2,this.padMax=null,this.padMin=null,this.ticks=[],this.numberTicks,this.tickInterval,this.renderer=e.jqplot.LinearAxisRenderer,this.rendererOptions={},this.showTicks=!0,this.showTickMarks=!0,this.showMinorTicks=!0,this.drawMajorGridlines=!0,this.drawMinorGridlines=!1,this.drawMajorTickMarks=!0,this.drawMinorTickMarks=!0,this.useSeriesColor=!1,this.borderWidth=null,this.borderColor=null,this.scaleToHiddenSeries=!1,this._dataBounds={min:null,max:null},this._intervalStats=[],this._offsets={min:null,max:null},this._ticks=[],this._label=null,this.syncTicks=null,this.tickSpacing=75,this._min=null,this._max=null,this._tickInterval=null,this._numberTicks=null,this.__ticks=null,this._options={}}function n(t){e.jqplot.ElemContainer.call(this),this.show=!1,this.location="ne",this.labels=[],this.showLabels=!0,this.showSwatches=!0,this.placement="insideGrid",this.xoffset=0,this.yoffset=0,this.border,this.background,this.textColor,this.fontFamily,this.fontSize,this.rowSpacing="0.5em",this.renderer=e.jqplot.TableLegendRenderer,this.rendererOptions={},this.preDraw=!1,this.marginTop=null,this.marginRight=null,this.marginBottom=null,this.marginLeft=null,this.escapeHtml=!1,this._series=[],e.extend(!0,this,t)}function i(t){e.jqplot.ElemContainer.call(this),this.text=t,this.show=!0,this.fontFamily,this.fontSize,this.textAlign,this.textColor,this.renderer=e.jqplot.DivTitleRenderer,this.rendererOptions={},this.escapeHtml=!1}function a(t){t=t||{},e.jqplot.ElemContainer.call(this),this.show=!0,this.xaxis="xaxis",this._xaxis,this.yaxis="yaxis",this._yaxis,this.gridBorderWidth=2,this.renderer=e.jqplot.LineRenderer,this.rendererOptions={},this.data=[],this.gridData=[],this.label="",this.showLabel=!0,this.color,this.negativeColor,this.lineWidth=2.5,this.lineJoin="round",this.lineCap="round",this.linePattern="solid",this.shadow=!0,this.shadowAngle=45,this.shadowOffset=1.25,this.shadowDepth=3,this.shadowAlpha="0.1",this.breakOnNull=!1,this.markerRenderer=e.jqplot.MarkerRenderer,this.markerOptions={},this.showLine=!0,this.showMarker=!0,this.index,this.fill=!1,this.fillColor,this.fillAlpha,this.fillAndStroke=!1,this.disableStack=!1,this._stack=!1,this.neighborThreshold=4,this.fillToZero=!1,this.fillToValue=0,this.fillAxis="y",this.useNegativeColors=!0,this._stackData=[],this._plotData=[],this._plotValues={x:[],y:[]},this._intervals={x:{},y:{}},this._prevPlotData=[],this._prevGridData=[],this._stackAxis="y",this._primaryAxis="_xaxis",this.canvas=new e.jqplot.GenericCanvas,this.shadowCanvas=new e.jqplot.GenericCanvas,this.plugins={},this._sumy=0,this._sumx=0,this._type=""}function s(){e.jqplot.ElemContainer.call(this),this.drawGridlines=!0,this.gridLineColor="#cccccc",this.gridLineWidth=1,this.background="#fffdf6",this.borderColor="#999999",this.borderWidth=2,this.drawBorder=!0,this.shadow=!0,this.shadowAngle=45,this.shadowOffset=1.5,this.shadowWidth=3,this.shadowDepth=3,this.shadowColor=null,this.shadowAlpha="0.07",this._left,this._top,this._right,this._bottom,this._width,this._height,this._axes=[],this.renderer=e.jqplot.CanvasGridRenderer,this.rendererOptions={},this._offsets={top:null,bottom:null,left:null,right:null}}function r(){function o(e){for(var t,n=0;n<e.length;n++)for(var i,a=[e[n].data,e[n]._stackData,e[n]._plotData,e[n]._prevPlotData],s=0;4>s;s++)if(i=!0,t=a[s],"x"==e[n]._stackAxis){for(var r=0;r<t.length;r++)if("number"!=typeof t[r][1]){i=!1;break}i&&t.sort(function(e,t){return e[1]-t[1]})}else{for(var r=0;r<t.length;r++)if("number"!=typeof t[r][0]){i=!1;break}i&&t.sort(function(e,t){return e[0]-t[0]})}}function l(e){var t,n,i=e.data.plot,a=i.eventCanvas._elem.offset(),s={x:e.pageX-a.left,y:e.pageY-a.top},r={xaxis:null,yaxis:null,x2axis:null,y2axis:null,y3axis:null,y4axis:null,y5axis:null,y6axis:null,y7axis:null,y8axis:null,y9axis:null,yMidAxis:null},o=["xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"],l=i.axes;for(t=11;t>0;t--)n=o[t-1],l[n].show&&(r[n]=l[n].series_p2u(s[n.charAt(0)]));return{offsets:a,gridPos:s,dataPos:r}}function c(t,n){function i(e,t,n){var i=(t[1]-n[1])/(t[0]-n[0]),a=t[1]-i*t[0],s=e+t[1];return[(s-a)/i,s]}var a,s,r,o,l,c,d,h,u,p,f,m,g,b,v,y,_,E,k,w=n.series;for(r=n.seriesStack.length-1;r>=0;r--)switch(a=n.seriesStack[r],o=w[a],_=o._highlightThreshold,o.renderer.constructor){case e.jqplot.BarRenderer:for(c=t.x,d=t.y,s=0;s<o._barPoints.length;s++)if(y=o._barPoints[s],v=o.gridData[s],c>y[0][0]&&c<y[2][0]&&d>y[2][1]&&d<y[0][1])return{seriesIndex:o.index,pointIndex:s,gridData:v,data:o.data[s],points:o._barPoints[s]};break;case e.jqplot.PyramidRenderer:for(c=t.x,d=t.y,s=0;s<o._barPoints.length;s++)if(y=o._barPoints[s],v=o.gridData[s],c>y[0][0]+_[0][0]&&c<y[2][0]+_[2][0]&&d>y[2][1]&&d<y[0][1])return{seriesIndex:o.index,pointIndex:s,gridData:v,data:o.data[s],points:o._barPoints[s]};break;case e.jqplot.DonutRenderer:if(p=o.startAngle/180*Math.PI,c=t.x-o._center[0],d=t.y-o._center[1],l=Math.sqrt(Math.pow(c,2)+Math.pow(d,2)),c>0&&-d>=0?h=2*Math.PI-Math.atan(-d/c):c>0&&0>-d?h=-Math.atan(-d/c):0>c?h=Math.PI-Math.atan(-d/c):0==c&&-d>0?h=3*Math.PI/2:0==c&&0>-d?h=Math.PI/2:0==c&&0==d&&(h=0),p&&(h-=p,0>h?h+=2*Math.PI:h>2*Math.PI&&(h-=2*Math.PI)),u=o.sliceMargin/180*Math.PI,l<o._radius&&l>o._innerRadius)for(s=0;s<o.gridData.length;s++)if(f=s>0?o.gridData[s-1][1]+u:u,m=o.gridData[s][1],h>f&&m>h)return{seriesIndex:o.index,pointIndex:s,gridData:[t.x,t.y],data:o.data[s]};break;case e.jqplot.PieRenderer:if(p=o.startAngle/180*Math.PI,c=t.x-o._center[0],d=t.y-o._center[1],l=Math.sqrt(Math.pow(c,2)+Math.pow(d,2)),c>0&&-d>=0?h=2*Math.PI-Math.atan(-d/c):c>0&&0>-d?h=-Math.atan(-d/c):0>c?h=Math.PI-Math.atan(-d/c):0==c&&-d>0?h=3*Math.PI/2:0==c&&0>-d?h=Math.PI/2:0==c&&0==d&&(h=0),p&&(h-=p,0>h?h+=2*Math.PI:h>2*Math.PI&&(h-=2*Math.PI)),u=o.sliceMargin/180*Math.PI,l<o._radius)for(s=0;s<o.gridData.length;s++)if(f=s>0?o.gridData[s-1][1]+u:u,m=o.gridData[s][1],h>f&&m>h)return{seriesIndex:o.index,pointIndex:s,gridData:[t.x,t.y],data:o.data[s]};break;case e.jqplot.BubbleRenderer:c=t.x,d=t.y;var T=null;if(o.show){for(var s=0;s<o.gridData.length;s++)v=o.gridData[s],b=Math.sqrt((c-v[0])*(c-v[0])+(d-v[1])*(d-v[1])),b<=v[2]&&(g>=b||null==g)&&(g=b,T={seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]});if(null!=T)return T}break;case e.jqplot.FunnelRenderer:c=t.x,d=t.y;var D,A,N,x=o._vertices,M=x[0],C=x[x.length-1];for(D=i(d,M[0],C[3]),A=i(d,M[1],C[2]),s=0;s<x.length;s++)if(N=x[s],d>=N[0][1]&&d<=N[3][1]&&c>=D[0]&&c<=A[0])return{seriesIndex:o.index,pointIndex:s,gridData:null,data:o.data[s]};break;case e.jqplot.LineRenderer:if(c=t.x,d=t.y,l=o.renderer,o.show){if(!(!(o.fill||o.renderer.bands.show&&o.renderer.bands.fill)||n.plugins.highlighter&&n.plugins.highlighter.show)){var I=!1;if(c>o._boundingBox[0][0]&&c<o._boundingBox[1][0]&&d>o._boundingBox[1][1]&&d<o._boundingBox[0][1])for(var S,P=o._areaPoints.length,s=P-1,S=0;P>S;S++){var B=[o._areaPoints[S][0],o._areaPoints[S][1]],R=[o._areaPoints[s][0],o._areaPoints[s][1]];(B[1]<d&&R[1]>=d||R[1]<d&&B[1]>=d)&&B[0]+(d-B[1])/(R[1]-B[1])*(R[0]-B[0])<c&&(I=!I),s=S}if(I)return{seriesIndex:a,pointIndex:null,gridData:o.gridData,data:o.data,points:o._areaPoints};break}k=o.markerRenderer.size/2+o.neighborThreshold,E=k>0?k:0;for(var s=0;s<o.gridData.length;s++)if(v=o.gridData[s],l.constructor==e.jqplot.OHLCRenderer)if(l.candleStick){var F=o._yaxis.series_u2p;if(c>=v[0]-l._bodyWidth/2&&c<=v[0]+l._bodyWidth/2&&d>=F(o.data[s][2])&&d<=F(o.data[s][3]))return{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}else if(l.hlc){var F=o._yaxis.series_u2p;if(c>=v[0]-l._tickLength&&c<=v[0]+l._tickLength&&d>=F(o.data[s][1])&&d<=F(o.data[s][2]))return{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}else{var F=o._yaxis.series_u2p;if(c>=v[0]-l._tickLength&&c<=v[0]+l._tickLength&&d>=F(o.data[s][2])&&d<=F(o.data[s][3]))return{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}else if(null!=v[0]&&null!=v[1]&&(b=Math.sqrt((c-v[0])*(c-v[0])+(d-v[1])*(d-v[1])),E>=b&&(g>=b||null==g)))return g=b,{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}break;default:if(c=t.x,d=t.y,l=o.renderer,o.show){k=o.markerRenderer.size/2+o.neighborThreshold,E=k>0?k:0;for(var s=0;s<o.gridData.length;s++)if(v=o.gridData[s],l.constructor==e.jqplot.OHLCRenderer)if(l.candleStick){var F=o._yaxis.series_u2p;if(c>=v[0]-l._bodyWidth/2&&c<=v[0]+l._bodyWidth/2&&d>=F(o.data[s][2])&&d<=F(o.data[s][3]))return{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}else if(l.hlc){var F=o._yaxis.series_u2p;if(c>=v[0]-l._tickLength&&c<=v[0]+l._tickLength&&d>=F(o.data[s][1])&&d<=F(o.data[s][2]))return{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}else{var F=o._yaxis.series_u2p;if(c>=v[0]-l._tickLength&&c<=v[0]+l._tickLength&&d>=F(o.data[s][2])&&d<=F(o.data[s][3]))return{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}else if(b=Math.sqrt((c-v[0])*(c-v[0])+(d-v[1])*(d-v[1])),E>=b&&(g>=b||null==g))return g=b,{seriesIndex:a,pointIndex:s,gridData:v,data:o.data[s]}}}return null}this.animate=!1,this.animateReplot=!1,this.axes={xaxis:new t("xaxis"),yaxis:new t("yaxis"),x2axis:new t("x2axis"),y2axis:new t("y2axis"),y3axis:new t("y3axis"),y4axis:new t("y4axis"),y5axis:new t("y5axis"),y6axis:new t("y6axis"),y7axis:new t("y7axis"),y8axis:new t("y8axis"),y9axis:new t("y9axis"),yMidAxis:new t("yMidAxis")},this.baseCanvas=new e.jqplot.GenericCanvas,this.captureRightClick=!1,this.data=[],this.dataRenderer,this.dataRendererOptions,this.defaults={axesDefaults:{},axes:{xaxis:{},yaxis:{},x2axis:{},y2axis:{},y3axis:{},y4axis:{},y5axis:{},y6axis:{},y7axis:{},y8axis:{},y9axis:{},yMidAxis:{}},seriesDefaults:{},series:[]},this.defaultAxisStart=1,this.drawIfHidden=!1,this.eventCanvas=new e.jqplot.GenericCanvas,this.fillBetween={series1:null,series2:null,color:null,baseSeries:0,fill:!0},this.fontFamily,this.fontSize,this.grid=new s,this.legend=new n,this.noDataIndicator={show:!1,indicator:"Loading Data...",axes:{xaxis:{min:0,max:10,tickInterval:2,show:!0},yaxis:{min:0,max:12,tickInterval:3,show:!0}}},this.negativeSeriesColors=e.jqplot.config.defaultNegativeColors,this.options={},this.previousSeriesStack=[],this.plugins={},this.series=[],this.seriesStack=[],this.seriesColors=e.jqplot.config.defaultColors,this.sortData=!0,this.stackSeries=!1,this.syncXTicks=!0,this.syncYTicks=!0,this.target=null,this.targetId=null,this.textColor,this.title=new i,this._drawCount=0,this._sumy=0,this._sumx=0,this._stackData=[],this._plotData=[],this._width=null,this._height=null,this._plotDimensions={height:null,width:null},this._gridPadding={top:null,right:null,bottom:null,left:null},this._defaultGridPadding={top:10,right:10,bottom:23,left:10},this._addDomReference=e.jqplot.config.addDomReference,this.preInitHooks=new e.jqplot.HooksManager,this.postInitHooks=new e.jqplot.HooksManager,this.preParseOptionsHooks=new e.jqplot.HooksManager,this.postParseOptionsHooks=new e.jqplot.HooksManager,this.preDrawHooks=new e.jqplot.HooksManager,this.postDrawHooks=new e.jqplot.HooksManager,this.preDrawSeriesHooks=new e.jqplot.HooksManager,this.postDrawSeriesHooks=new e.jqplot.HooksManager,this.preDrawLegendHooks=new e.jqplot.HooksManager,this.addLegendRowHooks=new e.jqplot.HooksManager,this.preSeriesInitHooks=new e.jqplot.HooksManager,this.postSeriesInitHooks=new e.jqplot.HooksManager,this.preParseSeriesOptionsHooks=new e.jqplot.HooksManager,this.postParseSeriesOptionsHooks=new e.jqplot.HooksManager,this.eventListenerHooks=new e.jqplot.EventListenerManager,this.preDrawSeriesShadowHooks=new e.jqplot.HooksManager,this.postDrawSeriesShadowHooks=new e.jqplot.HooksManager,this.colorGenerator=new e.jqplot.ColorGenerator,this.negativeColorGenerator=new e.jqplot.ColorGenerator,this.canvasManager=new e.jqplot.CanvasManager,this.themeEngine=new e.jqplot.ThemeEngine;this.init=function(n,i,a){a=a||{};for(var s=0;s<e.jqplot.preInitHooks.length;s++)e.jqplot.preInitHooks[s].call(this,n,i,a);for(var s=0;s<this.preInitHooks.hooks.length;s++)this.preInitHooks.hooks[s].call(this,n,i,a);if(this.targetId=n,this.target=e(n),this._addDomReference&&this.target.data("jqplot",this),this.target.removeClass("jqplot-error"),!this.target.get(0))throw new Error("No plot target specified");if("static"==this.target.css("position")&&this.target.css("position","relative"),this.target.hasClass("jqplot-target")||this.target.addClass("jqplot-target"),this.target.height())this._height=r=this.target.height();else{var r;r=a&&a.height?parseInt(a.height,10):this.target.attr("data-height")?parseInt(this.target.attr("data-height"),10):parseInt(e.jqplot.config.defaultHeight,10),this._height=r,this.target.css("height",r+"px")}if(this.target.width())this._width=l=this.target.width();else{var l;l=a&&a.width?parseInt(a.width,10):this.target.attr("data-width")?parseInt(this.target.attr("data-width"),10):parseInt(e.jqplot.config.defaultWidth,10),this._width=l,this.target.css("width",l+"px")}for(var s=0,c=S.length;c>s;s++)this.axes[S[s]]=new t(S[s]);if(this._plotDimensions.height=this._height,this._plotDimensions.width=this._width,this.grid._plotDimensions=this._plotDimensions,this.title._plotDimensions=this._plotDimensions,this.baseCanvas._plotDimensions=this._plotDimensions,this.eventCanvas._plotDimensions=this._plotDimensions,this.legend._plotDimensions=this._plotDimensions,this._height<=0||this._width<=0||!this._height||!this._width)throw new Error("Canvas dimension not set");if(a.dataRenderer&&e.isFunction(a.dataRenderer)&&(a.dataRendererOptions&&(this.dataRendererOptions=a.dataRendererOptions),this.dataRenderer=a.dataRenderer,i=this.dataRenderer(i,this,this.dataRendererOptions)),a.noDataIndicator&&e.isPlainObject(a.noDataIndicator)&&e.extend(!0,this.noDataIndicator,a.noDataIndicator),null==i||0==e.isArray(i)||0==i.length||0==e.isArray(i[0])||0==i[0].length){if(0==this.noDataIndicator.show)throw new Error("No data specified");for(var d in this.noDataIndicator.axes)for(var h in this.noDataIndicator.axes[d])this.axes[d][h]=this.noDataIndicator.axes[d][h];this.postDrawHooks.add(function(){var t=this.eventCanvas.getHeight(),n=this.eventCanvas.getWidth(),i=e('<div class="jqplot-noData-container" style="position:absolute;"></div>');this.target.append(i),i.height(t),i.width(n),i.css("top",this.eventCanvas._offsets.top),i.css("left",this.eventCanvas._offsets.left);var a=e('<div class="jqplot-noData-contents" style="text-align:center; position:relative; margin-left:auto; margin-right:auto;"></div>');i.append(a),a.html(this.noDataIndicator.indicator);var s=a.height(),r=a.width();a.height(s),a.width(r),a.css("top",(t-s)/2+"px")})}this.data=e.extend(!0,[],i),this.parseOptions(a),this.textColor&&this.target.css("color",this.textColor),this.fontFamily&&this.target.css("font-family",this.fontFamily),this.fontSize&&this.target.css("font-size",this.fontSize),this.title.init(),this.legend.init(),this._sumy=0,this._sumx=0,this.computePlotData();for(var s=0;s<this.series.length;s++){this.seriesStack.push(s),this.previousSeriesStack.push(s),this.series[s].shadowCanvas._plotDimensions=this._plotDimensions,this.series[s].canvas._plotDimensions=this._plotDimensions;for(var u=0;u<e.jqplot.preSeriesInitHooks.length;u++)e.jqplot.preSeriesInitHooks[u].call(this.series[s],n,this.data,this.options.seriesDefaults,this.options.series[s],this);for(var u=0;u<this.preSeriesInitHooks.hooks.length;u++)this.preSeriesInitHooks.hooks[u].call(this.series[s],n,this.data,this.options.seriesDefaults,this.options.series[s],this);this.series[s]._plotDimensions=this._plotDimensions,this.series[s].init(s,this.grid.borderWidth,this);for(var u=0;u<e.jqplot.postSeriesInitHooks.length;u++)e.jqplot.postSeriesInitHooks[u].call(this.series[s],n,this.data,this.options.seriesDefaults,this.options.series[s],this);for(var u=0;u<this.postSeriesInitHooks.hooks.length;u++)this.postSeriesInitHooks.hooks[u].call(this.series[s],n,this.data,this.options.seriesDefaults,this.options.series[s],this);this._sumy+=this.series[s]._sumy,this._sumx+=this.series[s]._sumx}for(var p,f,s=0,c=S.length;c>s;s++)p=S[s],f=this.axes[p],f._plotDimensions=this._plotDimensions,f.init(),null==this.axes[p].borderColor&&(f.borderColor="x"!==p.charAt(0)&&f.useSeriesColor===!0&&f.show?f._series[0].color:this.grid.borderColor);this.sortData&&o(this.series),this.grid.init(),this.grid._axes=this.axes,this.legend._series=this.series;for(var s=0;s<e.jqplot.postInitHooks.length;s++)e.jqplot.postInitHooks[s].call(this,n,this.data,a);for(var s=0;s<this.postInitHooks.hooks.length;s++)this.postInitHooks.hooks[s].call(this,n,this.data,a)},this.resetAxesScale=function(t,n){var i=n||{},a=t||this.axes;if(a===!0&&(a=this.axes),e.isArray(a))for(var s=0;s<a.length;s++)this.axes[a[s]].resetScale(i[a[s]]);else if("object"==typeof a)for(var r in a)this.axes[r].resetScale(i[r])},this.reInitialize=function(n,i){for(var a=e.extend(!0,{},this.options,i),s=this.targetId.substr(1),r=null==n?this.data:n,l=0;l<e.jqplot.preInitHooks.length;l++)e.jqplot.preInitHooks[l].call(this,s,r,a);for(var l=0;l<this.preInitHooks.hooks.length;l++)this.preInitHooks.hooks[l].call(this,s,r,a);if(this._height=this.target.height(),this._width=this.target.width(),this._height<=0||this._width<=0||!this._height||!this._width)throw new Error("Target dimension not set");this._plotDimensions.height=this._height,this._plotDimensions.width=this._width,this.grid._plotDimensions=this._plotDimensions,this.title._plotDimensions=this._plotDimensions,this.baseCanvas._plotDimensions=this._plotDimensions,this.eventCanvas._plotDimensions=this._plotDimensions,this.legend._plotDimensions=this._plotDimensions;for(var c,d,h,u,l=0,p=S.length;p>l;l++){c=S[l],u=this.axes[c],d=u._ticks;for(var h=0,f=d.length;f>h;h++){var m=d[h]._elem;m&&(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==I&&window.G_vmlCanvasManager.uninitElement(m.get(0)),m.emptyForce(),m=null,d._elem=null)}d=null,delete u.ticks,delete u._ticks,this.axes[c]=new t(c),this.axes[c]._plotWidth=this._width,this.axes[c]._plotHeight=this._height}n&&(a.dataRenderer&&e.isFunction(a.dataRenderer)&&(a.dataRendererOptions&&(this.dataRendererOptions=a.dataRendererOptions),this.dataRenderer=a.dataRenderer,n=this.dataRenderer(n,this,this.dataRendererOptions)),this.data=e.extend(!0,[],n)),i&&this.parseOptions(a),this.title._plotWidth=this._width,this.textColor&&this.target.css("color",this.textColor),this.fontFamily&&this.target.css("font-family",this.fontFamily),this.fontSize&&this.target.css("font-size",this.fontSize),this.title.init(),this.legend.init(),this._sumy=0,this._sumx=0,this.seriesStack=[],this.previousSeriesStack=[],this.computePlotData();for(var l=0,p=this.series.length;p>l;l++){this.seriesStack.push(l),this.previousSeriesStack.push(l),this.series[l].shadowCanvas._plotDimensions=this._plotDimensions,this.series[l].canvas._plotDimensions=this._plotDimensions;for(var h=0;h<e.jqplot.preSeriesInitHooks.length;h++)e.jqplot.preSeriesInitHooks[h].call(this.series[l],s,this.data,this.options.seriesDefaults,this.options.series[l],this);for(var h=0;h<this.preSeriesInitHooks.hooks.length;h++)this.preSeriesInitHooks.hooks[h].call(this.series[l],s,this.data,this.options.seriesDefaults,this.options.series[l],this);this.series[l]._plotDimensions=this._plotDimensions,this.series[l].init(l,this.grid.borderWidth,this);for(var h=0;h<e.jqplot.postSeriesInitHooks.length;h++)e.jqplot.postSeriesInitHooks[h].call(this.series[l],s,this.data,this.options.seriesDefaults,this.options.series[l],this);for(var h=0;h<this.postSeriesInitHooks.hooks.length;h++)this.postSeriesInitHooks.hooks[h].call(this.series[l],s,this.data,this.options.seriesDefaults,this.options.series[l],this);this._sumy+=this.series[l]._sumy,this._sumx+=this.series[l]._sumx}for(var l=0,p=S.length;p>l;l++)c=S[l],u=this.axes[c],u._plotDimensions=this._plotDimensions,u.init(),null==u.borderColor&&(u.borderColor="x"!==c.charAt(0)&&u.useSeriesColor===!0&&u.show?u._series[0].color:this.grid.borderColor);this.sortData&&o(this.series),this.grid.init(),this.grid._axes=this.axes,this.legend._series=this.series;for(var l=0,p=e.jqplot.postInitHooks.length;p>l;l++)e.jqplot.postInitHooks[l].call(this,s,this.data,a);for(var l=0,p=this.postInitHooks.hooks.length;p>l;l++)this.postInitHooks.hooks[l].call(this,s,this.data,a)},this.quickInit=function(){if(this._height=this.target.height(),this._width=this.target.width(),this._height<=0||this._width<=0||!this._height||!this._width)throw new Error("Target dimension not set");this._plotDimensions.height=this._height,this._plotDimensions.width=this._width,this.grid._plotDimensions=this._plotDimensions,this.title._plotDimensions=this._plotDimensions,this.baseCanvas._plotDimensions=this._plotDimensions,this.eventCanvas._plotDimensions=this._plotDimensions,this.legend._plotDimensions=this._plotDimensions;for(var t in this.axes)this.axes[t]._plotWidth=this._width,this.axes[t]._plotHeight=this._height;this.title._plotWidth=this._width,this.textColor&&this.target.css("color",this.textColor),this.fontFamily&&this.target.css("font-family",this.fontFamily),this.fontSize&&this.target.css("font-size",this.fontSize),this._sumy=0,this._sumx=0,this.computePlotData();for(var n=0;n<this.series.length;n++)"line"===this.series[n]._type&&this.series[n].renderer.bands.show&&this.series[n].renderer.initBands.call(this.series[n],this.series[n].renderer.options,this),this.series[n]._plotDimensions=this._plotDimensions,this.series[n].canvas._plotDimensions=this._plotDimensions,this._sumy+=this.series[n]._sumy,this._sumx+=this.series[n]._sumx;for(var i,a=0;12>a;a++){i=S[a];for(var s=this.axes[i]._ticks,n=0;n<s.length;n++){var r=s[n]._elem;r&&(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==I&&window.G_vmlCanvasManager.uninitElement(r.get(0)),r.emptyForce(),r=null,s._elem=null)}s=null,this.axes[i]._plotDimensions=this._plotDimensions,this.axes[i]._ticks=[]}this.sortData&&o(this.series),this.grid._axes=this.axes,this.legend._series=this.series},this.computePlotData=function(){this._plotData=[],this._stackData=[];var t,n,i;for(n=0,i=this.series.length;i>n;n++){t=this.series[n],this._plotData.push([]),this._stackData.push([]);var a=t.data;this._plotData[n]=e.extend(!0,[],a),this._stackData[n]=e.extend(!0,[],a),t._plotData=this._plotData[n],t._stackData=this._stackData[n];var s={x:[],y:[]};if(this.stackSeries&&!t.disableStack){t._stack=!0;for(var r="x"===t._stackAxis?0:1,o=0,l=a.length;l>o;o++){var c=a[o][r];if(null==c&&(c=0),this._plotData[n][o][r]=c,this._stackData[n][o][r]=c,n>0)for(var d=n;d--;){var h=this._plotData[d][o][r];if(c*h>=0){this._plotData[n][o][r]+=h,this._stackData[n][o][r]+=h;break}}}}else{for(var u=0;u<t.data.length;u++)s.x.push(t.data[u][0]),s.y.push(t.data[u][1]);this._stackData.push(t.data),this.series[n]._stackData=t.data,this._plotData.push(t.data),t._plotData=t.data,t._plotValues=s}for(n>0&&(t._prevPlotData=this.series[n-1]._plotData),t._sumy=0,t._sumx=0,u=t.data.length-1;u>-1;u--)t._sumy+=t.data[u][1],t._sumx+=t.data[u][0]}},this.populatePlotData=function(t,n){this._plotData=[],this._stackData=[],t._stackData=[],t._plotData=[];var i={x:[],y:[]};if(this.stackSeries&&!t.disableStack){t._stack=!0;for(var a,s,r,o,l="x"===t._stackAxis?0:1,c=e.extend(!0,[],t.data),d=e.extend(!0,[],t.data),h=0;n>h;h++)for(var u=this.series[h].data,p=0;p<u.length;p++)r=u[p],a=null!=r[0]?r[0]:0,s=null!=r[1]?r[1]:0,c[p][0]+=a,c[p][1]+=s,o=l?s:a,t.data[p][l]*o>=0&&(d[p][l]+=o);for(var f=0;f<d.length;f++)i.x.push(d[f][0]),i.y.push(d[f][1]);this._plotData.push(d),this._stackData.push(c),t._stackData=c,t._plotData=d,t._plotValues=i}else{for(var f=0;f<t.data.length;f++)i.x.push(t.data[f][0]),i.y.push(t.data[f][1]);this._stackData.push(t.data),this.series[n]._stackData=t.data,this._plotData.push(t.data),t._plotData=t.data,t._plotValues=i}for(n>0&&(t._prevPlotData=this.series[n-1]._plotData),t._sumy=0,t._sumx=0,f=t.data.length-1;f>-1;f--)t._sumy+=t.data[f][1],t._sumx+=t.data[f][0]},this.getNextSeriesColor=function(e){var t=0,n=e.seriesColors;return function(){return t<n.length?n[t++]:(t=0,n[t++])}}(this),this.parseOptions=function(t){for(var n=0;n<this.preParseOptionsHooks.hooks.length;n++)this.preParseOptionsHooks.hooks[n].call(this,t);for(var n=0;n<e.jqplot.preParseOptionsHooks.length;n++)e.jqplot.preParseOptionsHooks[n].call(this,t);this.options=e.extend(!0,{},this.defaults,t);var i=this.options;if(this.animate=i.animate,this.animateReplot=i.animateReplot,this.stackSeries=i.stackSeries,e.isPlainObject(i.fillBetween))for(var s,r=["series1","series2","color","baseSeries","fill"],n=0,o=r.length;o>n;n++)s=r[n],null!=i.fillBetween[s]&&(this.fillBetween[s]=i.fillBetween[s]);i.seriesColors&&(this.seriesColors=i.seriesColors),i.negativeSeriesColors&&(this.negativeSeriesColors=i.negativeSeriesColors),i.captureRightClick&&(this.captureRightClick=i.captureRightClick),this.defaultAxisStart=t&&null!=t.defaultAxisStart?t.defaultAxisStart:this.defaultAxisStart,this.colorGenerator.setColors(this.seriesColors),this.negativeColorGenerator.setColors(this.negativeSeriesColors),e.extend(!0,this._gridPadding,i.gridPadding),this.sortData=null!=i.sortData?i.sortData:this.sortData;for(var n=0;12>n;n++){var l=S[n],c=this.axes[l];c._options=e.extend(!0,{},i.axesDefaults,i.axes[l]),e.extend(!0,c,i.axesDefaults,i.axes[l]),c._plotWidth=this._width,c._plotHeight=this._height}var d=function(t,n,i){var a,s,r=[];if(n=n||"vertical",e.isArray(t[0]))e.extend(!0,r,t);else for(a=0,s=t.length;s>a;a++)"vertical"==n?r.push([i+a,t[a]]):r.push([t[a],i+a]);return r};this.series=[];for(var n=0;n<this.data.length;n++){for(var h=e.extend(!0,{index:n},{seriesColors:this.seriesColors,negativeSeriesColors:this.negativeSeriesColors},this.options.seriesDefaults,this.options.series[n],{rendererOptions:{animation:{show:this.animate}}}),r=new a(h),u=0;u<e.jqplot.preParseSeriesOptionsHooks.length;u++)e.jqplot.preParseSeriesOptionsHooks[u].call(r,this.options.seriesDefaults,this.options.series[n]);for(var u=0;u<this.preParseSeriesOptionsHooks.hooks.length;u++)this.preParseSeriesOptionsHooks.hooks[u].call(r,this.options.seriesDefaults,this.options.series[n]);e.extend(!0,r,h);var p="vertical";switch(r.renderer===e.jqplot.BarRenderer&&r.rendererOptions&&"horizontal"==r.rendererOptions.barDirection&&(p="horizontal",r._stackAxis="x",r._primaryAxis="_yaxis"),r.data=d(this.data[n],p,this.defaultAxisStart),r.xaxis){case"xaxis":r._xaxis=this.axes.xaxis;break;case"x2axis":r._xaxis=this.axes.x2axis}r._yaxis=this.axes[r.yaxis],r._xaxis._series.push(r),r._yaxis._series.push(r),r.show?(r._xaxis.show=!0,r._yaxis.show=!0):(r._xaxis.scaleToHiddenSeries&&(r._xaxis.show=!0),r._yaxis.scaleToHiddenSeries&&(r._yaxis.show=!0)),r.label||(r.label="Series "+(n+1).toString()),this.series.push(r);for(var u=0;u<e.jqplot.postParseSeriesOptionsHooks.length;u++)e.jqplot.postParseSeriesOptionsHooks[u].call(this.series[n],this.options.seriesDefaults,this.options.series[n]);for(var u=0;u<this.postParseSeriesOptionsHooks.hooks.length;u++)this.postParseSeriesOptionsHooks.hooks[u].call(this.series[n],this.options.seriesDefaults,this.options.series[n])}e.extend(!0,this.grid,this.options.grid);for(var n=0,o=S.length;o>n;n++){var l=S[n],c=this.axes[l];null==c.borderWidth&&(c.borderWidth=this.grid.borderWidth)}"string"==typeof this.options.title?this.title.text=this.options.title:"object"==typeof this.options.title&&e.extend(!0,this.title,this.options.title),this.title._plotWidth=this._width,this.legend.setOptions(this.options.legend);for(var n=0;n<e.jqplot.postParseOptionsHooks.length;n++)e.jqplot.postParseOptionsHooks[n].call(this,t);for(var n=0;n<this.postParseOptionsHooks.hooks.length;n++)this.postParseOptionsHooks.hooks[n].call(this,t)},this.destroy=function(){this.canvasManager.freeAllCanvases(),this.eventCanvas&&this.eventCanvas._elem&&this.eventCanvas._elem.unbind(),this.target.empty(),this.target[0].innerHTML=""},this.replot=function(t){var n=t||{},i=n.data||null,a=n.clear===!1?!1:!0,s=n.resetAxes||!1;delete n.data,delete n.clear,delete n.resetAxes,this.target.trigger("jqplotPreReplot"),a&&this.destroy(),i||!e.isEmptyObject(n)?this.reInitialize(i,n):this.quickInit(),s&&this.resetAxesScale(s,n.axes),this.draw(),this.target.trigger("jqplotPostReplot")},this.redraw=function(e){e=null!=e?e:!0,this.target.trigger("jqplotPreRedraw"),e&&(this.canvasManager.freeAllCanvases(),this.eventCanvas._elem.unbind(),this.target.empty());for(var t in this.axes)this.axes[t]._ticks=[];this.computePlotData(),this._sumy=0,this._sumx=0;for(var n=0,i=this.series.length;i>n;n++)this._sumy+=this.series[n]._sumy,this._sumx+=this.series[n]._sumx;this.draw(),this.target.trigger("jqplotPostRedraw")},this.draw=function(){if(this.drawIfHidden||this.target.is(":visible")){this.target.trigger("jqplotPreDraw");var t,n,i;for(t=0,i=e.jqplot.preDrawHooks.length;i>t;t++)e.jqplot.preDrawHooks[t].call(this);for(t=0,i=this.preDrawHooks.hooks.length;i>t;t++)this.preDrawHooks.hooks[t].apply(this,this.preDrawSeriesHooks.args[t]);this.target.append(this.baseCanvas.createElement({left:0,right:0,top:0,bottom:0},"jqplot-base-canvas",null,this)),this.baseCanvas.setContext(),this.target.append(this.title.draw()),this.title.pack({top:0,left:0});var a=this.legend.draw({},this),s={top:0,left:0,bottom:0,right:0};if("outsideGrid"==this.legend.placement){switch(this.target.append(a),this.legend.location){case"n":s.top+=this.legend.getHeight();break;case"s":s.bottom+=this.legend.getHeight();break;case"ne":case"e":case"se":s.right+=this.legend.getWidth();break;case"nw":case"w":case"sw":s.left+=this.legend.getWidth();break;default:s.right+=this.legend.getWidth()}a=a.detach()}var r,o=this.axes;for(t=0;12>t;t++)r=S[t],this.target.append(o[r].draw(this.baseCanvas._ctx,this)),o[r].set();o.yaxis.show&&(s.left+=o.yaxis.getWidth());var l,c=["y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis"],d=[0,0,0,0,0,0,0,0],h=0;for(l=0;8>l;l++)o[c[l]].show&&(h+=o[c[l]].getWidth(),d[l]=h);if(s.right+=h,o.x2axis.show&&(s.top+=o.x2axis.getHeight()),this.title.show&&(s.top+=this.title.getHeight()),o.xaxis.show&&(s.bottom+=o.xaxis.getHeight()),this.options.gridDimensions&&e.isPlainObject(this.options.gridDimensions)){var u=parseInt(this.options.gridDimensions.width,10)||0,p=parseInt(this.options.gridDimensions.height,10)||0,f=(this._width-s.left-s.right-u)/2,m=(this._height-s.top-s.bottom-p)/2;m>=0&&f>=0&&(s.top+=m,s.bottom+=m,s.left+=f,s.right+=f)}var g=["top","bottom","left","right"];for(var l in g)null==this._gridPadding[g[l]]&&s[g[l]]>0?this._gridPadding[g[l]]=s[g[l]]:null==this._gridPadding[g[l]]&&(this._gridPadding[g[l]]=this._defaultGridPadding[g[l]]);var b=this._gridPadding;for("outsideGrid"===this.legend.placement&&(b={top:this.title.getHeight(),left:0,right:0,bottom:0},"s"===this.legend.location&&(b.left=this._gridPadding.left,b.right=this._gridPadding.right)),o.xaxis.pack({position:"absolute",bottom:this._gridPadding.bottom-o.xaxis.getHeight(),left:0,width:this._width},{min:this._gridPadding.left,max:this._width-this._gridPadding.right}),o.yaxis.pack({position:"absolute",top:0,left:this._gridPadding.left-o.yaxis.getWidth(),height:this._height},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top}),o.x2axis.pack({position:"absolute",top:this._gridPadding.top-o.x2axis.getHeight(),left:0,width:this._width},{min:this._gridPadding.left,max:this._width-this._gridPadding.right}),t=8;t>0;t--)o[c[t-1]].pack({position:"absolute",top:0,right:this._gridPadding.right-d[t-1]},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top});var v=(this._width-this._gridPadding.left-this._gridPadding.right)/2+this._gridPadding.left-o.yMidAxis.getWidth()/2;o.yMidAxis.pack({position:"absolute",top:0,left:v,zIndex:9,textAlign:"center"},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top}),this.target.append(this.grid.createElement(this._gridPadding,this)),this.grid.draw();var y=this.series,_=y.length;for(t=0,i=_;i>t;t++)n=this.seriesStack[t],this.target.append(y[n].shadowCanvas.createElement(this._gridPadding,"jqplot-series-shadowCanvas",null,this)),y[n].shadowCanvas.setContext(),y[n].shadowCanvas._elem.data("seriesIndex",n);for(t=0,i=_;i>t;t++)n=this.seriesStack[t],this.target.append(y[n].canvas.createElement(this._gridPadding,"jqplot-series-canvas",null,this)),y[n].canvas.setContext(),y[n].canvas._elem.data("seriesIndex",n);this.target.append(this.eventCanvas.createElement(this._gridPadding,"jqplot-event-canvas",null,this)),this.eventCanvas.setContext(),this.eventCanvas._ctx.fillStyle="rgba(0,0,0,0)",this.eventCanvas._ctx.fillRect(0,0,this.eventCanvas._ctx.canvas.width,this.eventCanvas._ctx.canvas.height),this.bindCustomEvents(),this.legend.preDraw?(this.eventCanvas._elem.before(a),this.legend.pack(b),this.legend._elem?this.drawSeries({legendInfo:{location:this.legend.location,placement:this.legend.placement,width:this.legend.getWidth(),height:this.legend.getHeight(),xoffset:this.legend.xoffset,yoffset:this.legend.yoffset}}):this.drawSeries()):(this.drawSeries(),_&&e(y[_-1].canvas._elem).after(a),this.legend.pack(b));
for(var t=0,i=e.jqplot.eventListenerHooks.length;i>t;t++)this.eventCanvas._elem.bind(e.jqplot.eventListenerHooks[t][0],{plot:this},e.jqplot.eventListenerHooks[t][1]);for(var t=0,i=this.eventListenerHooks.hooks.length;i>t;t++)this.eventCanvas._elem.bind(this.eventListenerHooks.hooks[t][0],{plot:this},this.eventListenerHooks.hooks[t][1]);var E=this.fillBetween;E.fill&&E.series1!==E.series2&&E.series1<_&&E.series2<_&&"line"===y[E.series1]._type&&"line"===y[E.series2]._type&&this.doFillBetweenLines();for(var t=0,i=e.jqplot.postDrawHooks.length;i>t;t++)e.jqplot.postDrawHooks[t].call(this);for(var t=0,i=this.postDrawHooks.hooks.length;i>t;t++)this.postDrawHooks.hooks[t].apply(this,this.postDrawHooks.args[t]);this.target.is(":visible")&&(this._drawCount+=1);var k,w,T,D;for(t=0,i=_;i>t;t++)k=y[t],w=k.renderer,T=".jqplot-point-label.jqplot-series-"+t,w.animation&&w.animation._supported&&w.animation.show&&(this._drawCount<2||this.animateReplot)&&(D=this.target.find(T),D.stop(!0,!0).hide(),k.canvas._elem.stop(!0,!0).hide(),k.shadowCanvas._elem.stop(!0,!0).hide(),k.canvas._elem.jqplotEffect("blind",{mode:"show",direction:w.animation.direction},w.animation.speed),k.shadowCanvas._elem.jqplotEffect("blind",{mode:"show",direction:w.animation.direction},w.animation.speed),D.fadeIn(.8*w.animation.speed));D=null,this.target.trigger("jqplotPostDraw",[this])}},r.prototype.doFillBetweenLines=function(){var e=this.fillBetween,t=e.series1,n=e.series2,i=n>t?t:n,a=n>t?n:t,s=this.series[i],r=this.series[a];if(r.renderer.smooth)var o=r.renderer._smoothedData.slice(0).reverse();else var o=r.gridData.slice(0).reverse();if(s.renderer.smooth)var l=s.renderer._smoothedData.concat(o);else var l=s.gridData.concat(o);var c=null!==e.color?e.color:this.series[t].fillColor,d=null!==e.baseSeries?e.baseSeries:i,h=this.series[d].renderer.shapeRenderer,u={fillStyle:c,fill:!0,closePath:!0};h.draw(s.shadowCanvas._ctx,l,u)},this.bindCustomEvents=function(){this.eventCanvas._elem.bind("click",{plot:this},this.onClick),this.eventCanvas._elem.bind("dblclick",{plot:this},this.onDblClick),this.eventCanvas._elem.bind("mousedown",{plot:this},this.onMouseDown),this.eventCanvas._elem.bind("mousemove",{plot:this},this.onMouseMove),this.eventCanvas._elem.bind("mouseenter",{plot:this},this.onMouseEnter),this.eventCanvas._elem.bind("mouseleave",{plot:this},this.onMouseLeave),this.captureRightClick?(this.eventCanvas._elem.bind("mouseup",{plot:this},this.onRightClick),this.eventCanvas._elem.get(0).oncontextmenu=function(){return!1}):this.eventCanvas._elem.bind("mouseup",{plot:this},this.onMouseUp)},this.onClick=function(t){var n=l(t),i=t.data.plot,a=c(n.gridPos,i),s=e.Event("jqplotClick");s.pageX=t.pageX,s.pageY=t.pageY,e(this).trigger(s,[n.gridPos,n.dataPos,a,i])},this.onDblClick=function(t){var n=l(t),i=t.data.plot,a=c(n.gridPos,i),s=e.Event("jqplotDblClick");s.pageX=t.pageX,s.pageY=t.pageY,e(this).trigger(s,[n.gridPos,n.dataPos,a,i])},this.onMouseDown=function(t){var n=l(t),i=t.data.plot,a=c(n.gridPos,i),s=e.Event("jqplotMouseDown");s.pageX=t.pageX,s.pageY=t.pageY,e(this).trigger(s,[n.gridPos,n.dataPos,a,i])},this.onMouseUp=function(t){var n=l(t),i=e.Event("jqplotMouseUp");i.pageX=t.pageX,i.pageY=t.pageY,e(this).trigger(i,[n.gridPos,n.dataPos,null,t.data.plot])},this.onRightClick=function(t){var n=l(t),i=t.data.plot,a=c(n.gridPos,i);if(i.captureRightClick)if(3==t.which){var s=e.Event("jqplotRightClick");s.pageX=t.pageX,s.pageY=t.pageY,e(this).trigger(s,[n.gridPos,n.dataPos,a,i])}else{var s=e.Event("jqplotMouseUp");s.pageX=t.pageX,s.pageY=t.pageY,e(this).trigger(s,[n.gridPos,n.dataPos,a,i])}},this.onMouseMove=function(t){var n=l(t),i=t.data.plot,a=c(n.gridPos,i),s=e.Event("jqplotMouseMove");s.pageX=t.pageX,s.pageY=t.pageY,e(this).trigger(s,[n.gridPos,n.dataPos,a,i])},this.onMouseEnter=function(t){var n=l(t),i=t.data.plot,a=e.Event("jqplotMouseEnter");a.pageX=t.pageX,a.pageY=t.pageY,a.relatedTarget=t.relatedTarget,e(this).trigger(a,[n.gridPos,n.dataPos,null,i])},this.onMouseLeave=function(t){var n=l(t),i=t.data.plot,a=e.Event("jqplotMouseLeave");a.pageX=t.pageX,a.pageY=t.pageY,a.relatedTarget=t.relatedTarget,e(this).trigger(a,[n.gridPos,n.dataPos,null,i])},this.drawSeries=function(t,n){var i,a,s;if(n="number"==typeof t&&null==n?t:n,t="object"==typeof t?t:{},n!=I)a=this.series[n],s=a.shadowCanvas._ctx,s.clearRect(0,0,s.canvas.width,s.canvas.height),a.drawShadow(s,t,this),s=a.canvas._ctx,s.clearRect(0,0,s.canvas.width,s.canvas.height),a.draw(s,t,this),a.renderer.constructor==e.jqplot.BezierCurveRenderer&&n<this.series.length-1&&this.drawSeries(n+1);else for(i=0;i<this.series.length;i++)a=this.series[i],s=a.shadowCanvas._ctx,s.clearRect(0,0,s.canvas.width,s.canvas.height),a.drawShadow(s,t,this),s=a.canvas._ctx,s.clearRect(0,0,s.canvas.width,s.canvas.height),a.draw(s,t,this);t=n=i=a=s=null},this.moveSeriesToFront=function(t){t=parseInt(t,10);var n=e.inArray(t,this.seriesStack);if(-1!=n){if(n==this.seriesStack.length-1)return this.previousSeriesStack=this.seriesStack.slice(0),void 0;var i=this.seriesStack[this.seriesStack.length-1],a=this.series[t].canvas._elem.detach(),s=this.series[t].shadowCanvas._elem.detach();this.series[i].shadowCanvas._elem.after(s),this.series[i].canvas._elem.after(a),this.previousSeriesStack=this.seriesStack.slice(0),this.seriesStack.splice(n,1),this.seriesStack.push(t)}},this.moveSeriesToBack=function(t){t=parseInt(t,10);var n=e.inArray(t,this.seriesStack);if(0!=n&&-1!=n){var i=this.seriesStack[0],a=this.series[t].canvas._elem.detach(),s=this.series[t].shadowCanvas._elem.detach();this.series[i].shadowCanvas._elem.before(s),this.series[i].canvas._elem.before(a),this.previousSeriesStack=this.seriesStack.slice(0),this.seriesStack.splice(n,1),this.seriesStack.unshift(t)}},this.restorePreviousSeriesOrder=function(){var e,t,n,i,a,s;if(this.seriesStack!=this.previousSeriesStack){for(e=1;e<this.previousSeriesStack.length;e++)a=this.previousSeriesStack[e],s=this.previousSeriesStack[e-1],t=this.series[a].canvas._elem.detach(),n=this.series[a].shadowCanvas._elem.detach(),this.series[s].shadowCanvas._elem.after(n),this.series[s].canvas._elem.after(t);i=this.seriesStack.slice(0),this.seriesStack=this.previousSeriesStack.slice(0),this.previousSeriesStack=i}},this.restoreOriginalSeriesOrder=function(){var e,t,n,i=[];for(e=0;e<this.series.length;e++)i.push(e);if(this.seriesStack!=i)for(this.previousSeriesStack=this.seriesStack.slice(0),this.seriesStack=i,e=1;e<this.seriesStack.length;e++)t=this.series[e].canvas._elem.detach(),n=this.series[e].shadowCanvas._elem.detach(),this.series[e-1].shadowCanvas._elem.after(n),this.series[e-1].canvas._elem.after(t)},this.activateTheme=function(e){this.themeEngine.activate(this,e)}}function o(e,t){return(3.4182054+t)*Math.pow(e,-.3534992)}function l(e){var t=(Math.exp(2*e)-1)/(Math.exp(2*e)+1);return t}function c(e){function t(e,t){return e-t==0?Math.pow(10,10):e-t}var n=this.renderer.smooth,i=this.canvas.getWidth(),a=this._xaxis.series_p2u,s=this._yaxis.series_p2u,r=null,l=e.length/i,c=[],d=[];r=isNaN(parseFloat(n))?o(l,.5):parseFloat(n);for(var h=[],u=[],p=0,f=e.length;f>p;p++)h.push(e[p][1]),u.push(e[p][0]);for(var m,g,b,v,y=e.length-1,_=1,E=e.length;E>_;_++){for(var k=[],w=[],T=0;2>T;T++){var p=_-1+T;k[T]=0==p||p==y?Math.pow(10,10):h[p+1]-h[p]==0||h[p]-h[p-1]==0?0:(u[p+1]-u[p])/(h[p+1]-h[p])+(u[p]-u[p-1])/(h[p]-h[p-1])==0?0:(h[p+1]-h[p])*(h[p]-h[p-1])<0?0:2/(t(u[p+1],u[p])/(h[p+1]-h[p])+t(u[p],u[p-1])/(h[p]-h[p-1]))}1==_?k[0]=1.5*(h[1]-h[0])/t(u[1],u[0])-k[1]/2:_==y&&(k[1]=1.5*(h[y]-h[y-1])/t(u[y],u[y-1])-k[0]/2),w[0]=-2*(k[1]+2*k[0])/t(u[_],u[_-1])+6*(h[_]-h[_-1])/Math.pow(t(u[_],u[_-1]),2),w[1]=2*(2*k[1]+k[0])/t(u[_],u[_-1])-6*(h[_]-h[_-1])/Math.pow(t(u[_],u[_-1]),2),v=1/6*(w[1]-w[0])/t(u[_],u[_-1]),b=.5*(u[_]*w[0]-u[_-1]*w[1])/t(u[_],u[_-1]),g=(h[_]-h[_-1]-b*(Math.pow(u[_],2)-Math.pow(u[_-1],2))-v*(Math.pow(u[_],3)-Math.pow(u[_-1],3)))/t(u[_],u[_-1]),m=h[_-1]-g*u[_-1]-b*Math.pow(u[_-1],2)-v*Math.pow(u[_-1],3);for(var D,A,N=(u[_]-u[_-1])/r,T=0,f=r;f>T;T++)D=[],A=u[_-1]+T*N,D.push(A),D.push(m+g*A+b*Math.pow(A,2)+v*Math.pow(A,3)),c.push(D),d.push([a(D[0]),s(D[1])])}return c.push(e[p]),d.push([a(e[p][0]),s(e[p][1])]),[c,d]}function d(e){var t,n,i,a,s,r,c,d,h,u,p,f,m,g,b,v,y,_,E=this.renderer.smooth,k=this.renderer.tension,w=this.canvas.getWidth(),T=this._xaxis.series_p2u,D=this._yaxis.series_p2u,A=null,N=null,x=null,M=null,C=null,I=null,S=null,P=e.length/w,B=[],R=[];A=isNaN(parseFloat(E))?o(P,.5):parseFloat(E),isNaN(parseFloat(k))||(k=parseFloat(k));for(var F=0,O=e.length-1;O>F;F++)for(null===k?(C=Math.abs((e[F+1][1]-e[F][1])/(e[F+1][0]-e[F][0])),g=.3,b=.6,v=(b-g)/2,y=2.5,_=-1.4,S=C/y+_,x=v*l(S)-v*l(_)+g,F>0&&(I=Math.abs((e[F][1]-e[F-1][1])/(e[F][0]-e[F-1][0]))),S=I/y+_,M=v*l(S)-v*l(_)+g,N=(x+M)/2):N=k,t=0;A>t;t++)n=t/A,i=(1+2*n)*Math.pow(1-n,2),a=n*Math.pow(1-n,2),s=Math.pow(n,2)*(3-2*n),r=Math.pow(n,2)*(n-1),e[F-1]?(c=N*(e[F+1][0]-e[F-1][0]),d=N*(e[F+1][1]-e[F-1][1])):(c=N*(e[F+1][0]-e[F][0]),d=N*(e[F+1][1]-e[F][1])),e[F+2]?(h=N*(e[F+2][0]-e[F][0]),u=N*(e[F+2][1]-e[F][1])):(h=N*(e[F+1][0]-e[F][0]),u=N*(e[F+1][1]-e[F][1])),p=i*e[F][0]+s*e[F+1][0]+a*c+r*h,f=i*e[F][1]+s*e[F+1][1]+a*d+r*u,m=[p,f],B.push(m),R.push([T(p),D(f)]);return B.push(e[O]),R.push([T(e[O][0]),D(e[O][1])]),[B,R]}function h(){for(var t=0;t<this.series.length;t++)this.series[t].renderer.constructor==e.jqplot.LineRenderer&&this.series[t].highlightMouseOver&&(this.series[t].highlightMouseDown=!1)}function u(){this.plugins.lineRenderer&&this.plugins.lineRenderer.highlightCanvas&&(this.plugins.lineRenderer.highlightCanvas.resetCanvas(),this.plugins.lineRenderer.highlightCanvas=null),this.plugins.lineRenderer.highlightedSeriesIndex=null,this.plugins.lineRenderer.highlightCanvas=new e.jqplot.GenericCanvas,this.eventCanvas._elem.before(this.plugins.lineRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-lineRenderer-highlight-canvas",this._plotDimensions,this)),this.plugins.lineRenderer.highlightCanvas.setContext(),this.eventCanvas._elem.bind("mouseleave",{plot:this},function(e){f(e.data.plot)})}function p(e,t,n,i){var a=e.series[t],s=e.plugins.lineRenderer.highlightCanvas;s._ctx.clearRect(0,0,s._ctx.canvas.width,s._ctx.canvas.height),a._highlightedPoint=n,e.plugins.lineRenderer.highlightedSeriesIndex=t;var r={fillStyle:a.highlightColor};"line"===a.type&&a.renderer.bands.show&&(r.fill=!0,r.closePath=!0),a.renderer.shapeRenderer.draw(s._ctx,i,r),s=null}function f(e){var t=e.plugins.lineRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var n=0;n<e.series.length;n++)e.series[n]._highlightedPoint=null;e.plugins.lineRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight"),t=null}function m(e,t,n,i,a){if(i){var s=[i.seriesIndex,i.pointIndex,i.data],r=jQuery.Event("jqplotDataMouseOver");if(r.pageX=e.pageX,r.pageY=e.pageY,a.target.trigger(r,s),a.series[s[0]].highlightMouseOver&&s[0]!=a.plugins.lineRenderer.highlightedSeriesIndex){var o=jQuery.Event("jqplotDataHighlight");o.which=e.which,o.pageX=e.pageX,o.pageY=e.pageY,a.target.trigger(o,s),p(a,i.seriesIndex,i.pointIndex,i.points)}}else null==i&&f(a)}function g(e,t,n,i,a){if(i){var s=[i.seriesIndex,i.pointIndex,i.data];if(a.series[s[0]].highlightMouseDown&&s[0]!=a.plugins.lineRenderer.highlightedSeriesIndex){var r=jQuery.Event("jqplotDataHighlight");r.which=e.which,r.pageX=e.pageX,r.pageY=e.pageY,a.target.trigger(r,s),p(a,i.seriesIndex,i.pointIndex,i.points)}}else null==i&&f(a)}function b(e,t,n,i,a){var s=a.plugins.lineRenderer.highlightedSeriesIndex;null!=s&&a.series[s].highlightMouseDown&&f(a)}function v(e,t,n,i,a){if(i){var s=[i.seriesIndex,i.pointIndex,i.data],r=jQuery.Event("jqplotDataClick");r.which=e.which,r.pageX=e.pageX,r.pageY=e.pageY,a.target.trigger(r,s)}}function y(e,t,n,i,a){if(i){var s=[i.seriesIndex,i.pointIndex,i.data],r=a.plugins.lineRenderer.highlightedSeriesIndex;null!=r&&a.series[r].highlightMouseDown&&f(a);var o=jQuery.Event("jqplotDataRightClick");o.which=e.which,o.pageX=e.pageX,o.pageY=e.pageY,a.target.trigger(o,s)}}/**
    * Copyright (c) 2010 Scott Prahl
    * The next three routines are currently available for use in all personal 
    * or commercial projects under both the MIT and GPL version 2.0 licenses. 
    * This means that you can choose the license that best suits your project 
    * and use it accordingly. 
    */
function _(e){var t;if(e=Math.abs(e),e>=10)t="%d";else if(e>1)t=e===parseInt(e,10)?"%d":"%.1f";else{var n=-Math.floor(Math.log(e)/Math.LN10);t="%."+n+"f"}return t}function E(t,n,i){for(var a,s,r,o,l,c,d,h=Math.floor(i/2),u=Math.ceil(1.5*i),p=Number.MAX_VALUE,f=n-t,m=e.jqplot.getSignificantFigures,g=0,b=u-h+1;b>g;g++)c=h+g,a=f/(c-1),s=m(a),a=Math.abs(i-c)+s.digitsRight,p>a?(p=a,r=c,d=s.digitsRight):a===p&&s.digitsRight<d&&(r=c,d=s.digitsRight);return o=Math.max(d,Math.max(m(t).digitsRight,m(n).digitsRight)),l=0===o?"%d":"%."+o+"f",a=f/(r-1),[t,n,r,l,a]}function k(e,t){t=t||7;var n,i=e/(t-1),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/a;return n=1>a?s>5?10*a:s>2?5*a:s>1?2*a:a:s>5?10*a:s>4?5*a:s>3?4*a:s>2?3*a:s>1?2*a:a}function w(e,t){t=t||1;var n,i=Math.floor(Math.log(e)/Math.LN10),a=Math.pow(10,i),s=e/a;return s/=t,n=.38>=s?.1:1.6>=s?.2:4>=s?.5:8>=s?1:16>=s?2:5,n*a}function T(e,t){var n,i,a=Math.floor(Math.log(e)/Math.LN10),s=Math.pow(10,a),r=e/s;return r/=t,i=.38>=r?.1:1.6>=r?.2:4>=r?.5:8>=r?1:16>=r?2:5,n=i*s,[n,i,s]}function D(e,t){return e-t}function A(e){if(null==e||"object"!=typeof e)return e;var t=new e.constructor;for(var n in e)t[n]=A(e[n]);return t}function N(e,t){if(null!=t&&"object"==typeof t)for(var n in t)"highlightColors"==n&&(e[n]=A(t[n])),null!=t[n]&&"object"==typeof t[n]?(e.hasOwnProperty(n)||(e[n]={}),N(e[n],t[n])):e[n]=t[n]}function x(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}function M(e){return null===e?"[object Null]":Object.prototype.toString.call(e)}function C(t,n,i,a){return e.isPlainObject(t)?t:(t={effect:t},n===I&&(n={}),e.isFunction(n)&&(a=n,i=null,n={}),("number"===e.type(n)||e.fx.speeds[n])&&(a=i,i=n,n={}),e.isFunction(i)&&(a=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=a||n.complete,t)}var I;e.fn.emptyForce=function(){for(var t,n=0;null!=(t=e(this)[n]);n++){if(1===t.nodeType&&e.cleanData(t.getElementsByTagName("*")),e.jqplot.use_excanvas)t.outerHTML="";else for(;t.firstChild;)t.removeChild(t.firstChild);t=null}return e(this)},e.fn.removeChildForce=function(e){for(;e.firstChild;)this.removeChildForce(e.firstChild),e.removeChild(e.firstChild)},e.fn.jqplot=function(){for(var t=[],n=[],i=0,a=arguments.length;a>i;i++)e.isArray(arguments[i])?t.push(arguments[i]):e.isPlainObject(arguments[i])&&n.push(arguments[i]);return this.each(function(i){var a,s,r,o,l=e(this),c=t.length,d=n.length;r=c>i?t[i]:c?t[c-1]:null,o=d>i?n[i]:d?n[d-1]:null,a=l.attr("id"),a===I&&(a="jqplot_target_"+e.jqplot.targetCounter++,l.attr("id",a)),s=e.jqplot(l,r,o),l.data("jqplot",s)})},e.jqplot=function(t,n,i){var a=null,s=null;3===arguments.length?(a=n,s=i):2===arguments.length&&(e.isArray(n)?a=n:e.isPlainObject(n)&&(s=n)),null===a&&null!==s&&s.data&&(a=s.data);var o=new r;if(e(t).removeClass("jqplot-error"),!e.jqplot.config.catchErrors)return o.init(t,a,s),o.draw(),o.themeEngine.init.call(o),o;try{return o.init(t,selectorContext,a,s),o.draw(),o.themeEngine.init.call(o),o}catch(l){var c=e.jqplot.config.errorMessage||l.message;e(t).append('<div class="jqplot-error-message">'+c+"</div>"),e(t).addClass("jqplot-error"),document.getElementById(t).style.background=e.jqplot.config.errorBackground,document.getElementById(t).style.border=e.jqplot.config.errorBorder,document.getElementById(t).style.fontFamily=e.jqplot.config.errorFontFamily,document.getElementById(t).style.fontSize=e.jqplot.config.errorFontSize,document.getElementById(t).style.fontStyle=e.jqplot.config.errorFontStyle,document.getElementById(t).style.fontWeight=e.jqplot.config.errorFontWeight}},e.jqplot.version="1.0.8",e.jqplot.revision="1250",e.jqplot.targetCounter=1,e.jqplot.CanvasManager=function(){"undefined"==typeof e.jqplot.CanvasManager.canvases&&(e.jqplot.CanvasManager.canvases=[],e.jqplot.CanvasManager.free=[]);var t=[];this.getCanvas=function(){var n,i=!0;if(!e.jqplot.use_excanvas)for(var a=0,s=e.jqplot.CanvasManager.canvases.length;s>a;a++)if(e.jqplot.CanvasManager.free[a]===!0){i=!1,n=e.jqplot.CanvasManager.canvases[a],e.jqplot.CanvasManager.free[a]=!1,t.push(a);break}return i&&(n=document.createElement("canvas"),t.push(e.jqplot.CanvasManager.canvases.length),e.jqplot.CanvasManager.canvases.push(n),e.jqplot.CanvasManager.free.push(!1)),n},this.initCanvas=function(t){return e.jqplot.use_excanvas?window.G_vmlCanvasManager.initElement(t):t},this.freeAllCanvases=function(){for(var e=0,n=t.length;n>e;e++)this.freeCanvas(t[e]);t=[]},this.freeCanvas=function(t){if(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==I)window.G_vmlCanvasManager.uninitElement(e.jqplot.CanvasManager.canvases[t]),e.jqplot.CanvasManager.canvases[t]=null;else{var n=e.jqplot.CanvasManager.canvases[t];n.getContext("2d").clearRect(0,0,n.width,n.height),e(n).unbind().removeAttr("class").removeAttr("style"),e(n).css({left:"",top:"",position:""}),n.width=0,n.height=0,e.jqplot.CanvasManager.free[t]=!0}}},e.jqplot.log=function(){window.console&&window.console.log.apply(window.console,arguments)},e.jqplot.config={addDomReference:!1,enablePlugins:!1,defaultHeight:300,defaultWidth:400,UTCAdjust:!1,timezoneOffset:new Date(6e4*(new Date).getTimezoneOffset()),errorMessage:"",errorBackground:"",errorBorder:"",errorFontFamily:"",errorFontSize:"",errorFontStyle:"",errorFontWeight:"",catchErrors:!1,defaultTickFormatString:"%.1f",defaultColors:["#4bb2c5","#EAA228","#c5b47f","#579575","#839557","#958c12","#953579","#4b5de4","#d8b83f","#ff5800","#0085cc","#c747a3","#cddf54","#FBD178","#26B4E3","#bd70c7"],defaultNegativeColors:["#498991","#C08840","#9F9274","#546D61","#646C4A","#6F6621","#6E3F5F","#4F64B0","#A89050","#C45923","#187399","#945381","#959E5C","#C7AF7B","#478396","#907294"],dashLength:4,gapLength:4,dotGapLength:2.5,srcLocation:"jqplot/src/",pluginLocation:"jqplot/src/plugins/"},e.jqplot.arrayMax=function(e){return Math.max.apply(Math,e)},e.jqplot.arrayMin=function(e){return Math.min.apply(Math,e)},e.jqplot.enablePlugins=e.jqplot.config.enablePlugins,// Copyright (c) 2009 - 2010 Faruk Ates.
e.jqplot.support_canvas=function(){return"undefined"==typeof e.jqplot.support_canvas.result&&(e.jqplot.support_canvas.result=!!document.createElement("canvas").getContext),e.jqplot.support_canvas.result},e.jqplot.support_canvas_text=function(){return"undefined"==typeof e.jqplot.support_canvas_text.result&&(e.jqplot.support_canvas_text.result=window.G_vmlCanvasManager!==I&&window.G_vmlCanvasManager._version>887?!0:!(!document.createElement("canvas").getContext||"function"!=typeof document.createElement("canvas").getContext("2d").fillText)),e.jqplot.support_canvas_text.result},e.jqplot.use_excanvas=e.support.boxModel&&e.support.objectAll&&$support.leadingWhitespace||e.jqplot.support_canvas()?!1:!0,e.jqplot.preInitHooks=[],e.jqplot.postInitHooks=[],e.jqplot.preParseOptionsHooks=[],e.jqplot.postParseOptionsHooks=[],e.jqplot.preDrawHooks=[],e.jqplot.postDrawHooks=[],e.jqplot.preDrawSeriesHooks=[],e.jqplot.postDrawSeriesHooks=[],e.jqplot.preDrawLegendHooks=[],e.jqplot.addLegendRowHooks=[],e.jqplot.preSeriesInitHooks=[],e.jqplot.postSeriesInitHooks=[],e.jqplot.preParseSeriesOptionsHooks=[],e.jqplot.postParseSeriesOptionsHooks=[],e.jqplot.eventListenerHooks=[],e.jqplot.preDrawSeriesShadowHooks=[],e.jqplot.postDrawSeriesShadowHooks=[],e.jqplot.ElemContainer=function(){this._elem,this._plotWidth,this._plotHeight,this._plotDimensions={height:null,width:null}},e.jqplot.ElemContainer.prototype.createElement=function(t,n,i,a,s){this._offsets=n;var r=i||"jqplot",o=document.createElement(t);return this._elem=e(o),this._elem.addClass(r),this._elem.css(a),this._elem.attr(s),o=null,this._elem},e.jqplot.ElemContainer.prototype.getWidth=function(){return this._elem?this._elem.outerWidth(!0):null},e.jqplot.ElemContainer.prototype.getHeight=function(){return this._elem?this._elem.outerHeight(!0):null},e.jqplot.ElemContainer.prototype.getPosition=function(){return this._elem?this._elem.position():{top:null,left:null,bottom:null,right:null}},e.jqplot.ElemContainer.prototype.getTop=function(){return this.getPosition().top},e.jqplot.ElemContainer.prototype.getLeft=function(){return this.getPosition().left},e.jqplot.ElemContainer.prototype.getBottom=function(){return this._elem.css("bottom")},e.jqplot.ElemContainer.prototype.getRight=function(){return this._elem.css("right")},t.prototype=new e.jqplot.ElemContainer,t.prototype.constructor=t,t.prototype.init=function(){e.isFunction(this.renderer)&&(this.renderer=new this.renderer),this.tickOptions.axis=this.name,null==this.tickOptions.showMark&&(this.tickOptions.showMark=this.showTicks),null==this.tickOptions.showMark&&(this.tickOptions.showMark=this.showTickMarks),null==this.tickOptions.showLabel&&(this.tickOptions.showLabel=this.showTicks),null==this.label||""==this.label?this.showLabel=!1:this.labelOptions.label=this.label,0==this.showLabel&&(this.labelOptions.show=!1),0==this.pad&&(this.pad=1),0==this.padMax&&(this.padMax=1),0==this.padMin&&(this.padMin=1),null==this.padMax&&(this.padMax=(this.pad-1)/2+1),null==this.padMin&&(this.padMin=(this.pad-1)/2+1),this.pad=this.padMax+this.padMin-1,(null!=this.min||null!=this.max)&&(this.autoscale=!1),null==this.syncTicks&&this.name.indexOf("y")>-1?this.syncTicks=!0:null==this.syncTicks&&(this.syncTicks=!1),this.renderer.init.call(this,this.rendererOptions)},t.prototype.draw=function(e,t){return this.__ticks&&(this.__ticks=null),this.renderer.draw.call(this,e,t)},t.prototype.set=function(){this.renderer.set.call(this)},t.prototype.pack=function(e,t){this.show&&this.renderer.pack.call(this,e,t),null==this._min&&(this._min=this.min,this._max=this.max,this._tickInterval=this.tickInterval,this._numberTicks=this.numberTicks,this.__ticks=this._ticks)},t.prototype.reset=function(){this.renderer.reset.call(this)},t.prototype.resetScale=function(t){e.extend(!0,this,{min:null,max:null,numberTicks:null,tickInterval:null,_ticks:[],ticks:[]},t),this.resetDataBounds()},t.prototype.resetDataBounds=function(){var t=this._dataBounds;t.min=null,t.max=null;for(var n,i,a,s=this.show?!0:!1,r=0;r<this._series.length;r++)if(i=this._series[r],i.show||this.scaleToHiddenSeries){a=i._plotData,"line"===i._type&&i.renderer.bands.show&&"x"!==this.name.charAt(0)&&(a=[[0,i.renderer.bands._min],[1,i.renderer.bands._max]]);var o=1,l=1;null!=i._type&&"ohlc"==i._type&&(o=3,l=2);for(var c=0,n=a.length;n>c;c++)"xaxis"==this.name||"x2axis"==this.name?((null!=a[c][0]&&a[c][0]<t.min||null==t.min)&&(t.min=a[c][0]),(null!=a[c][0]&&a[c][0]>t.max||null==t.max)&&(t.max=a[c][0])):((null!=a[c][o]&&a[c][o]<t.min||null==t.min)&&(t.min=a[c][o]),(null!=a[c][l]&&a[c][l]>t.max||null==t.max)&&(t.max=a[c][l]));s&&i.renderer.constructor!==e.jqplot.BarRenderer?s=!1:s&&this._options.hasOwnProperty("forceTickAt0")&&0==this._options.forceTickAt0?s=!1:s&&i.renderer.constructor===e.jqplot.BarRenderer&&("vertical"==i.barDirection&&"xaxis"!=this.name&&"x2axis"!=this.name?(null!=this._options.pad||null!=this._options.padMin)&&(s=!1):"horizontal"!=i.barDirection||"xaxis"!=this.name&&"x2axis"!=this.name||(null!=this._options.pad||null!=this._options.padMin)&&(s=!1))}s&&this.renderer.constructor===e.jqplot.LinearAxisRenderer&&t.min>=0&&(this.padMin=1,this.forceTickAt0=!0)},n.prototype=new e.jqplot.ElemContainer,n.prototype.constructor=n,n.prototype.setOptions=function(t){if(e.extend(!0,this,t),"inside"==this.placement&&(this.placement="insideGrid"),this.xoffset>0){if("insideGrid"==this.placement)switch(this.location){case"nw":case"w":case"sw":null==this.marginLeft&&(this.marginLeft=this.xoffset+"px"),this.marginRight="0px";break;case"ne":case"e":case"se":default:null==this.marginRight&&(this.marginRight=this.xoffset+"px"),this.marginLeft="0px"}else if("outside"==this.placement)switch(this.location){case"nw":case"w":case"sw":null==this.marginRight&&(this.marginRight=this.xoffset+"px"),this.marginLeft="0px";break;case"ne":case"e":case"se":default:null==this.marginLeft&&(this.marginLeft=this.xoffset+"px"),this.marginRight="0px"}this.xoffset=0}if(this.yoffset>0){if("outside"==this.placement)switch(this.location){case"sw":case"s":case"se":null==this.marginTop&&(this.marginTop=this.yoffset+"px"),this.marginBottom="0px";break;case"ne":case"n":case"nw":default:null==this.marginBottom&&(this.marginBottom=this.yoffset+"px"),this.marginTop="0px"}else if("insideGrid"==this.placement)switch(this.location){case"sw":case"s":case"se":null==this.marginBottom&&(this.marginBottom=this.yoffset+"px"),this.marginTop="0px";break;case"ne":case"n":case"nw":default:null==this.marginTop&&(this.marginTop=this.yoffset+"px"),this.marginBottom="0px"}this.yoffset=0}},n.prototype.init=function(){e.isFunction(this.renderer)&&(this.renderer=new this.renderer),this.renderer.init.call(this,this.rendererOptions)},n.prototype.draw=function(t,n){for(var i=0;i<e.jqplot.preDrawLegendHooks.length;i++)e.jqplot.preDrawLegendHooks[i].call(this,t);return this.renderer.draw.call(this,t,n)},n.prototype.pack=function(e){this.renderer.pack.call(this,e)},i.prototype=new e.jqplot.ElemContainer,i.prototype.constructor=i,i.prototype.init=function(){e.isFunction(this.renderer)&&(this.renderer=new this.renderer),this.renderer.init.call(this,this.rendererOptions)},i.prototype.draw=function(e){return this.renderer.draw.call(this,e)},i.prototype.pack=function(){this.renderer.pack.call(this)},a.prototype=new e.jqplot.ElemContainer,a.prototype.constructor=a,a.prototype.init=function(t,n,i){this.index=t,this.gridBorderWidth=n;var a,s,r=this.data,o=[];for(a=0,s=r.length;s>a;a++)if(this.breakOnNull)o.push(r[a]);else{if(null==r[a]||null==r[a][0]||null==r[a][1])continue;o.push(r[a])}if(this.data=o,this.color||(this.color=i.colorGenerator.get(this.index)),this.negativeColor||(this.negativeColor=i.negativeColorGenerator.get(this.index)),this.fillColor||(this.fillColor=this.color),this.fillAlpha){var l=e.jqplot.normalize2rgb(this.fillColor),l=e.jqplot.getColorComponents(l);this.fillColor="rgba("+l[0]+","+l[1]+","+l[2]+","+this.fillAlpha+")"}e.isFunction(this.renderer)&&(this.renderer=new this.renderer),this.renderer.init.call(this,this.rendererOptions,i),this.markerRenderer=new this.markerRenderer,this.markerOptions.color||(this.markerOptions.color=this.color),null==this.markerOptions.show&&(this.markerOptions.show=this.showMarker),this.showMarker=this.markerOptions.show,this.markerRenderer.init(this.markerOptions)},a.prototype.draw=function(t,n,i){var a=n==I?{}:n;t=t==I?this.canvas._ctx:t;var s,r,o;for(s=0;s<e.jqplot.preDrawSeriesHooks.length;s++)e.jqplot.preDrawSeriesHooks[s].call(this,t,a);for(this.show&&(this.renderer.setGridData.call(this,i),a.preventJqPlotSeriesDrawTrigger||e(t.canvas).trigger("jqplotSeriesDraw",[this.data,this.gridData]),r=[],r=a.data?a.data:this._stack?this._plotData:this.data,o=a.gridData||this.renderer.makeGridData.call(this,r,i),"line"===this._type&&this.renderer.smooth&&this.renderer._smoothedData.length&&(o=this.renderer._smoothedData),this.renderer.draw.call(this,t,o,a,i)),s=0;s<e.jqplot.postDrawSeriesHooks.length;s++)e.jqplot.postDrawSeriesHooks[s].call(this,t,a,i);t=n=i=s=r=o=null},a.prototype.drawShadow=function(t,n,i){var a=n==I?{}:n;t=t==I?this.shadowCanvas._ctx:t;var s,r,o;for(s=0;s<e.jqplot.preDrawSeriesShadowHooks.length;s++)e.jqplot.preDrawSeriesShadowHooks[s].call(this,t,a);for(this.shadow&&(this.renderer.setGridData.call(this,i),r=[],r=a.data?a.data:this._stack?this._plotData:this.data,o=a.gridData||this.renderer.makeGridData.call(this,r,i),this.renderer.drawShadow.call(this,t,o,a,i)),s=0;s<e.jqplot.postDrawSeriesShadowHooks.length;s++)e.jqplot.postDrawSeriesShadowHooks[s].call(this,t,a);t=n=i=s=r=o=null},a.prototype.toggleDisplay=function(e,t){var n,i;n=e.data.series?e.data.series:this,e.data.speed&&(i=e.data.speed),i?n.canvas._elem.is(":hidden")||!n.show?(n.show=!0,n.canvas._elem.removeClass("jqplot-series-hidden"),n.shadowCanvas._elem&&n.shadowCanvas._elem.fadeIn(i),n.canvas._elem.fadeIn(i,t),n.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+n.index).fadeIn(i)):(n.show=!1,n.canvas._elem.addClass("jqplot-series-hidden"),n.shadowCanvas._elem&&n.shadowCanvas._elem.fadeOut(i),n.canvas._elem.fadeOut(i,t),n.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+n.index).fadeOut(i)):n.canvas._elem.is(":hidden")||!n.show?(n.show=!0,n.canvas._elem.removeClass("jqplot-series-hidden"),n.shadowCanvas._elem&&n.shadowCanvas._elem.show(),n.canvas._elem.show(0,t),n.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+n.index).show()):(n.show=!1,n.canvas._elem.addClass("jqplot-series-hidden"),n.shadowCanvas._elem&&n.shadowCanvas._elem.hide(),n.canvas._elem.hide(0,t),n.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+n.index).hide())},s.prototype=new e.jqplot.ElemContainer,s.prototype.constructor=s,s.prototype.init=function(){e.isFunction(this.renderer)&&(this.renderer=new this.renderer),this.renderer.init.call(this,this.rendererOptions)},s.prototype.createElement=function(e,t){return this._offsets=e,this.renderer.createElement.call(this,t)},s.prototype.draw=function(){this.renderer.draw.call(this)},e.jqplot.GenericCanvas=function(){e.jqplot.ElemContainer.call(this),this._ctx},e.jqplot.GenericCanvas.prototype=new e.jqplot.ElemContainer,e.jqplot.GenericCanvas.prototype.constructor=e.jqplot.GenericCanvas,e.jqplot.GenericCanvas.prototype.createElement=function(t,n,i,a){this._offsets=t;var s="jqplot";n!=I&&(s=n);var r;return r=a.canvasManager.getCanvas(),null!=i&&(this._plotDimensions=i),r.width=this._plotDimensions.width-this._offsets.left-this._offsets.right,r.height=this._plotDimensions.height-this._offsets.top-this._offsets.bottom,this._elem=e(r),this._elem.css({position:"absolute",left:this._offsets.left,top:this._offsets.top}),this._elem.addClass(s),r=a.canvasManager.initCanvas(r),r=null,this._elem},e.jqplot.GenericCanvas.prototype.setContext=function(){return this._ctx=this._elem.get(0).getContext("2d"),this._ctx},e.jqplot.GenericCanvas.prototype.resetCanvas=function(){this._elem&&(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==I&&window.G_vmlCanvasManager.uninitElement(this._elem.get(0)),this._elem.emptyForce()),this._ctx=null},e.jqplot.HooksManager=function(){this.hooks=[],this.args=[]},e.jqplot.HooksManager.prototype.addOnce=function(e,t){t=t||[];for(var n=!1,i=0,a=this.hooks.length;a>i;i++)this.hooks[i]==e&&(n=!0);n||(this.hooks.push(e),this.args.push(t))},e.jqplot.HooksManager.prototype.add=function(e,t){t=t||[],this.hooks.push(e),this.args.push(t)},e.jqplot.EventListenerManager=function(){this.hooks=[]},e.jqplot.EventListenerManager.prototype.addOnce=function(e,t){for(var n,i,a=!1,i=0,s=this.hooks.length;s>i;i++)n=this.hooks[i],n[0]==e&&n[1]==t&&(a=!0);a||this.hooks.push([e,t])},e.jqplot.EventListenerManager.prototype.add=function(e,t){this.hooks.push([e,t])};var S=["yMidAxis","xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis"];e.jqplot.computeHighlightColors=function(t){var n;if(e.isArray(t)){n=[];for(var i=0;i<t.length;i++){for(var a=e.jqplot.getColorComponents(t[i]),s=[a[0],a[1],a[2]],r=s[0]+s[1]+s[2],o=0;3>o;o++)s[o]=r>660?.85*s[o]:.73*s[o]+90,s[o]=parseInt(s[o],10),s[o]>255?255:s[o];s[3]=.3+.35*a[3],n.push("rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")")}}else{for(var a=e.jqplot.getColorComponents(t),s=[a[0],a[1],a[2]],r=s[0]+s[1]+s[2],o=0;3>o;o++)s[o]=r>660?.85*s[o]:.73*s[o]+90,s[o]=parseInt(s[o],10),s[o]>255?255:s[o];s[3]=.3+.35*a[3],n="rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"}return n},e.jqplot.ColorGenerator=function(t){t=t||e.jqplot.config.defaultColors;var n=0;this.next=function(){return n<t.length?t[n++]:(n=0,t[n++])},this.previous=function(){return n>0?t[n--]:(n=t.length-1,t[n])},this.get=function(e){var n=e-t.length*Math.floor(e/t.length);return t[n]},this.setColors=function(e){t=e},this.reset=function(){n=0},this.getIndex=function(){return n},this.setIndex=function(e){n=e}},e.jqplot.hex2rgb=function(e,t){e=e.replace("#",""),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var n;return n="rgba("+parseInt(e.slice(0,2),16)+", "+parseInt(e.slice(2,4),16)+", "+parseInt(e.slice(4,6),16),t&&(n+=", "+t),n+=")"},e.jqplot.rgb2hex=function(e){for(var t=/rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *(?:, *[0-9.]*)?\)/,n=e.match(t),i="#",a=1;4>a;a++){var s;-1!=n[a].search(/%/)?(s=parseInt(255*n[a]/100,10).toString(16),1==s.length&&(s="0"+s)):(s=parseInt(n[a],10).toString(16),1==s.length&&(s="0"+s)),i+=s}return i},e.jqplot.normalize2rgb=function(t,n){if(-1!=t.search(/^ *rgba?\(/))return t;if(-1!=t.search(/^ *#?[0-9a-fA-F]?[0-9a-fA-F]/))return e.jqplot.hex2rgb(t,n);throw new Error("Invalid color spec")},e.jqplot.getColorComponents=function(t){t=e.jqplot.colorKeywordMap[t]||t;for(var n=e.jqplot.normalize2rgb(t),i=/rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *,? *([0-9.]* *)?\)/,a=n.match(i),s=[],r=1;4>r;r++)s[r-1]=-1!=a[r].search(/%/)?parseInt(255*a[r]/100,10):parseInt(a[r],10);return s[3]=parseFloat(a[4])?parseFloat(a[4]):1,s},e.jqplot.colorKeywordMap={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb( 0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb( 0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb( 0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb( 95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(220, 20, 60)",cyan:"rgb( 0, 255, 255)",darkblue:"rgb( 0, 0, 139)",darkcyan:"rgb( 0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb( 0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb( 85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb( 72, 61, 139)",darkslategray:"rgb( 47, 79, 79)",darkslategrey:"rgb( 47, 79, 79)",darkturquoise:"rgb( 0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb( 0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb( 30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb( 34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",grey:"rgb(128, 128, 128)",green:"rgb( 0, 128, 0)",greenyellow:"rgb(173, 255, 47)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb( 75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb( 32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb( 0, 255, 0)",limegreen:"rgb( 50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb( 0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb( 60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb( 0, 250, 154)",mediumturquoise:"rgb( 72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb( 25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb( 0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb( 65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb( 46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb( 0, 255, 127)",steelblue:"rgb( 70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb( 0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb( 64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)"},e.jqplot.AxisLabelRenderer=function(t){e.jqplot.ElemContainer.call(this),this.axis,this.show=!0,this.label="",this.fontFamily=null,this.fontSize=null,this.textColor=null,this._elem,this.escapeHTML=!1,e.extend(!0,this,t)},e.jqplot.AxisLabelRenderer.prototype=new e.jqplot.ElemContainer,e.jqplot.AxisLabelRenderer.prototype.constructor=e.jqplot.AxisLabelRenderer,e.jqplot.AxisLabelRenderer.prototype.init=function(t){e.extend(!0,this,t)},e.jqplot.AxisLabelRenderer.prototype.draw=function(){return this._elem&&(this._elem.emptyForce(),this._elem=null),this._elem=e('<div style="position:absolute;" class="jqplot-'+this.axis+'-label"></div>'),Number(this.label)&&this._elem.css("white-space","nowrap"),this.escapeHTML?this._elem.text(this.label):this._elem.html(this.label),this.fontFamily&&this._elem.css("font-family",this.fontFamily),this.fontSize&&this._elem.css("font-size",this.fontSize),this.textColor&&this._elem.css("color",this.textColor),this._elem},e.jqplot.AxisLabelRenderer.prototype.pack=function(){},e.jqplot.AxisTickRenderer=function(t){e.jqplot.ElemContainer.call(this),this.mark="outside",this.axis,this.showMark=!0,this.showGridline=!0,this.isMinorTick=!1,this.size=4,this.markSize=6,this.show=!0,this.showLabel=!0,this.label=null,this.value=null,this._styles={},this.formatter=e.jqplot.DefaultTickFormatter,this.prefix="",this.suffix="",this.formatString="",this.fontFamily,this.fontSize,this.textColor,this.escapeHTML=!1,this._elem,this._breakTick=!1,e.extend(!0,this,t)},e.jqplot.AxisTickRenderer.prototype.init=function(t){e.extend(!0,this,t)},e.jqplot.AxisTickRenderer.prototype=new e.jqplot.ElemContainer,e.jqplot.AxisTickRenderer.prototype.constructor=e.jqplot.AxisTickRenderer,e.jqplot.AxisTickRenderer.prototype.setTick=function(e,t,n){return this.value=e,this.axis=t,n&&(this.isMinorTick=!0),this},e.jqplot.AxisTickRenderer.prototype.draw=function(){null===this.label&&(this.label=this.prefix+this.formatter(this.formatString,this.value)+this.suffix);var t={position:"absolute"};Number(this.label)&&(t.whitSpace="nowrap"),this._elem&&(this._elem.emptyForce(),this._elem=null),this._elem=e(document.createElement("div")),this._elem.addClass("jqplot-"+this.axis+"-tick"),this.escapeHTML?this._elem.text(this.label):this._elem.html(this.label),this._elem.css(t);for(var n in this._styles)this._elem.css(n,this._styles[n]);return this.fontFamily&&this._elem.css("font-family",this.fontFamily),this.fontSize&&this._elem.css("font-size",this.fontSize),this.textColor&&this._elem.css("color",this.textColor),this._breakTick&&this._elem.addClass("jqplot-breakTick"),this._elem},e.jqplot.DefaultTickFormatter=function(t,n){return"number"==typeof n?(t||(t=e.jqplot.config.defaultTickFormatString),e.jqplot.sprintf(t,n)):String(n)},e.jqplot.PercentTickFormatter=function(t,n){return"number"==typeof n?(n=100*n,t||(t=e.jqplot.config.defaultTickFormatString),e.jqplot.sprintf(t,n)):String(n)},e.jqplot.AxisTickRenderer.prototype.pack=function(){},e.jqplot.CanvasGridRenderer=function(){this.shadowRenderer=new e.jqplot.ShadowRenderer},e.jqplot.CanvasGridRenderer.prototype.init=function(t){this._ctx,e.extend(!0,this,t);var n={lineJoin:"miter",lineCap:"round",fill:!1,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.shadowWidth,closePath:!1,strokeStyle:this.shadowColor};this.renderer.shadowRenderer.init(n)},e.jqplot.CanvasGridRenderer.prototype.createElement=function(t){var n;this._elem&&(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==I&&(n=this._elem.get(0),window.G_vmlCanvasManager.uninitElement(n),n=null),this._elem.emptyForce(),this._elem=null),n=t.canvasManager.getCanvas();var i=this._plotDimensions.width,a=this._plotDimensions.height;return n.width=i,n.height=a,this._elem=e(n),this._elem.addClass("jqplot-grid-canvas"),this._elem.css({position:"absolute",left:0,top:0}),n=t.canvasManager.initCanvas(n),this._top=this._offsets.top,this._bottom=a-this._offsets.bottom,this._left=this._offsets.left,this._right=i-this._offsets.right,this._width=this._right-this._left,this._height=this._bottom-this._top,n=null,this._elem},e.jqplot.CanvasGridRenderer.prototype.draw=function(){function t(t,i,a,s,r){n.save(),r=r||{},(null==r.lineWidth||0!=r.lineWidth)&&(e.extend(!0,n,r),n.beginPath(),n.moveTo(t,i),n.lineTo(a,s),n.stroke(),n.restore())}this._ctx=this._elem.get(0).getContext("2d");var n=this._ctx,i=this._axes;n.save(),n.clearRect(0,0,this._plotDimensions.width,this._plotDimensions.height),n.fillStyle=this.backgroundColor||this.background,n.fillRect(this._left,this._top,this._width,this._height),n.save(),n.lineJoin="miter",n.lineCap="butt",n.lineWidth=this.gridLineWidth,n.strokeStyle=this.gridLineColor;for(var a,s,r,o,l=["xaxis","yaxis","x2axis","y2axis"],c=4;c>0;c--){var d=l[c-1],h=i[d],u=h._ticks,p=u.length;if(h.show){if(h.drawBaseline){var f={};switch(null!==h.baselineWidth&&(f.lineWidth=h.baselineWidth),null!==h.baselineColor&&(f.strokeStyle=h.baselineColor),d){case"xaxis":t(this._left,this._bottom,this._right,this._bottom,f);break;case"yaxis":t(this._left,this._bottom,this._left,this._top,f);break;case"x2axis":t(this._left,this._bottom,this._right,this._bottom,f);break;case"y2axis":t(this._right,this._bottom,this._right,this._top,f)}}for(var m=p;m>0;m--){var g=u[m-1];if(g.show){var b=Math.round(h.u2p(g.value))+.5;switch(d){case"xaxis":if(g.showGridline&&this.drawGridlines&&(!g.isMinorTick&&h.drawMajorGridlines||g.isMinorTick&&h.drawMinorGridlines)&&t(b,this._top,b,this._bottom),g.showMark&&g.mark&&(!g.isMinorTick&&h.drawMajorTickMarks||g.isMinorTick&&h.drawMinorTickMarks)){r=g.markSize,o=g.mark;var b=Math.round(h.u2p(g.value))+.5;switch(o){case"outside":a=this._bottom,s=this._bottom+r;break;case"inside":a=this._bottom-r,s=this._bottom;break;case"cross":a=this._bottom-r,s=this._bottom+r;break;default:a=this._bottom,s=this._bottom+r}this.shadow&&this.renderer.shadowRenderer.draw(n,[[b,a],[b,s]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:.75*this.gridLineWidth,depth:2,fill:!1,closePath:!1}),t(b,a,b,s)}break;case"yaxis":if(g.showGridline&&this.drawGridlines&&(!g.isMinorTick&&h.drawMajorGridlines||g.isMinorTick&&h.drawMinorGridlines)&&t(this._right,b,this._left,b),g.showMark&&g.mark&&(!g.isMinorTick&&h.drawMajorTickMarks||g.isMinorTick&&h.drawMinorTickMarks)){r=g.markSize,o=g.mark;var b=Math.round(h.u2p(g.value))+.5;switch(o){case"outside":a=this._left-r,s=this._left;break;case"inside":a=this._left,s=this._left+r;break;case"cross":a=this._left-r,s=this._left+r;break;default:a=this._left-r,s=this._left}this.shadow&&this.renderer.shadowRenderer.draw(n,[[a,b],[s,b]],{lineCap:"butt",lineWidth:1.5*this.gridLineWidth,offset:.75*this.gridLineWidth,fill:!1,closePath:!1}),t(a,b,s,b,{strokeStyle:h.borderColor})}break;case"x2axis":if(g.showGridline&&this.drawGridlines&&(!g.isMinorTick&&h.drawMajorGridlines||g.isMinorTick&&h.drawMinorGridlines)&&t(b,this._bottom,b,this._top),g.showMark&&g.mark&&(!g.isMinorTick&&h.drawMajorTickMarks||g.isMinorTick&&h.drawMinorTickMarks)){r=g.markSize,o=g.mark;var b=Math.round(h.u2p(g.value))+.5;switch(o){case"outside":a=this._top-r,s=this._top;break;case"inside":a=this._top,s=this._top+r;break;case"cross":a=this._top-r,s=this._top+r;break;default:a=this._top-r,s=this._top}this.shadow&&this.renderer.shadowRenderer.draw(n,[[b,a],[b,s]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:.75*this.gridLineWidth,depth:2,fill:!1,closePath:!1}),t(b,a,b,s)}break;case"y2axis":if(g.showGridline&&this.drawGridlines&&(!g.isMinorTick&&h.drawMajorGridlines||g.isMinorTick&&h.drawMinorGridlines)&&t(this._left,b,this._right,b),g.showMark&&g.mark&&(!g.isMinorTick&&h.drawMajorTickMarks||g.isMinorTick&&h.drawMinorTickMarks)){r=g.markSize,o=g.mark;var b=Math.round(h.u2p(g.value))+.5;switch(o){case"outside":a=this._right,s=this._right+r;break;case"inside":a=this._right-r,s=this._right;break;case"cross":a=this._right-r,s=this._right+r;break;default:a=this._right,s=this._right+r}this.shadow&&this.renderer.shadowRenderer.draw(n,[[a,b],[s,b]],{lineCap:"butt",lineWidth:1.5*this.gridLineWidth,offset:.75*this.gridLineWidth,fill:!1,closePath:!1}),t(a,b,s,b,{strokeStyle:h.borderColor})}}}}g=null}h=null,u=null}l=["y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"];for(var c=7;c>0;c--){var h=i[l[c-1]],u=h._ticks;if(h.show){var v=u[h.numberTicks-1],y=u[0],_=h.getLeft(),E=[[_,v.getTop()+v.getHeight()/2],[_,y.getTop()+y.getHeight()/2+1]];this.shadow&&this.renderer.shadowRenderer.draw(n,E,{lineCap:"butt",fill:!1,closePath:!1}),t(E[0][0],E[0][1],E[1][0],E[1][1],{lineCap:"butt",strokeStyle:h.borderColor,lineWidth:h.borderWidth});for(var m=u.length;m>0;m--){var g=u[m-1];r=g.markSize,o=g.mark;var b=Math.round(h.u2p(g.value))+.5;if(g.showMark&&g.mark){switch(o){case"outside":a=_,s=_+r;break;case"inside":a=_-r,s=_;break;case"cross":a=_-r,s=_+r;break;default:a=_,s=_+r}E=[[a,b],[s,b]],this.shadow&&this.renderer.shadowRenderer.draw(n,E,{lineCap:"butt",lineWidth:1.5*this.gridLineWidth,offset:.75*this.gridLineWidth,fill:!1,closePath:!1}),t(a,b,s,b,{strokeStyle:h.borderColor})}g=null}y=null}h=null,u=null}if(n.restore(),this.shadow){var E=[[this._left,this._bottom],[this._right,this._bottom],[this._right,this._top]];this.renderer.shadowRenderer.draw(n,E)}0!=this.borderWidth&&this.drawBorder&&(t(this._left,this._top,this._right,this._top,{lineCap:"round",strokeStyle:i.x2axis.borderColor,lineWidth:i.x2axis.borderWidth}),t(this._right,this._top,this._right,this._bottom,{lineCap:"round",strokeStyle:i.y2axis.borderColor,lineWidth:i.y2axis.borderWidth}),t(this._right,this._bottom,this._left,this._bottom,{lineCap:"round",strokeStyle:i.xaxis.borderColor,lineWidth:i.xaxis.borderWidth}),t(this._left,this._bottom,this._left,this._top,{lineCap:"round",strokeStyle:i.yaxis.borderColor,lineWidth:i.yaxis.borderWidth})),n.restore(),n=null,i=null},e.jqplot.DivTitleRenderer=function(){},e.jqplot.DivTitleRenderer.prototype.init=function(t){e.extend(!0,this,t)},e.jqplot.DivTitleRenderer.prototype.draw=function(){this._elem&&(this._elem.emptyForce(),this._elem=null);var t=(this.renderer,document.createElement("div"));if(this._elem=e(t),this._elem.addClass("jqplot-title"),this.text){if(this.text){var n;this.color?n=this.color:this.textColor&&(n=this.textColor);var i={position:"absolute",top:"0px",left:"0px"};this._plotWidth&&(i.width=this._plotWidth+"px"),this.fontSize&&(i.fontSize=this.fontSize),i.textAlign="string"==typeof this.textAlign?this.textAlign:"center",n&&(i.color=n),this.paddingBottom&&(i.paddingBottom=this.paddingBottom),this.fontFamily&&(i.fontFamily=this.fontFamily),this._elem.css(i),this.escapeHtml?this._elem.text(this.text):this._elem.html(this.text)}}else this.show=!1,this._elem.height(0),this._elem.width(0);return t=null,this._elem},e.jqplot.DivTitleRenderer.prototype.pack=function(){};var P=.1;e.jqplot.LinePattern=function(t,n){var i={dotted:[P,e.jqplot.config.dotGapLength],dashed:[e.jqplot.config.dashLength,e.jqplot.config.gapLength],solid:null};if("string"==typeof n)if("."===n[0]||"-"===n[0]){var a=n;n=[];for(var s=0,r=a.length;r>s;s++){if("."===a[s])n.push(P);else{if("-"!==a[s])continue;n.push(e.jqplot.config.dashLength)}n.push(e.jqplot.config.gapLength)}}else n=i[n];if(!n||!n.length)return t;var o=0,l=n[0],c=0,d=0,h=0,u=0,p=function(e,n){t.moveTo(e,n),c=e,d=n,h=e,u=n},f=function(e,i){var a=t.lineWidth,s=e-c,r=i-d,h=Math.sqrt(s*s+r*r);if(h>0&&a>0)for(s/=h,r/=h;;){var u=a*l;if(!(h>u)){c=e,d=i,0==(1&o)?t.lineTo(c,d):t.moveTo(c,d),l-=h/a;break}c+=u*s,d+=u*r,0==(1&o)?t.lineTo(c,d):t.moveTo(c,d),h-=u,o++,o>=n.length&&(o=0),l=n[o]}},m=function(){t.beginPath()},g=function(){f(h,u)};return{moveTo:p,lineTo:f,beginPath:m,closePath:g}},e.jqplot.LineRenderer=function(){this.shapeRenderer=new e.jqplot.ShapeRenderer,this.shadowRenderer=new e.jqplot.ShadowRenderer},e.jqplot.LineRenderer.prototype.init=function(t,n){t=t||{},this._type="line",this.renderer.animation={show:!1,direction:"left",speed:2500,_supported:!0},this.renderer.smooth=!1,this.renderer.tension=null,this.renderer.constrainSmoothing=!0,this.renderer._smoothedData=[],this.renderer._smoothedPlotData=[],this.renderer._hiBandGridData=[],this.renderer._lowBandGridData=[],this.renderer._hiBandSmoothedData=[],this.renderer._lowBandSmoothedData=[],this.renderer.bandData=[],this.renderer.bands={show:!1,hiData:[],lowData:[],color:this.color,showLines:!1,fill:!0,fillColor:null,_min:null,_max:null,interval:"3%"};var i={highlightMouseOver:t.highlightMouseOver,highlightMouseDown:t.highlightMouseDown,highlightColor:t.highlightColor};delete t.highlightMouseOver,delete t.highlightMouseDown,delete t.highlightColor,e.extend(!0,this.renderer,t),this.renderer.options=t,this.renderer.bandData.length>1&&(!t.bands||null==t.bands.show)?this.renderer.bands.show=!0:t.bands&&null==t.bands.show&&null!=t.bands.interval&&(this.renderer.bands.show=!0),this.fill&&(this.renderer.bands.show=!1),this.renderer.bands.show&&this.renderer.initBands.call(this,this.renderer.options,n),this._stack&&(this.renderer.smooth=!1);var a={lineJoin:this.lineJoin,lineCap:this.lineCap,fill:this.fill,isarc:!1,strokeStyle:this.color,fillStyle:this.fillColor,lineWidth:this.lineWidth,linePattern:this.linePattern,closePath:this.fill};this.renderer.shapeRenderer.init(a);var s=t.shadowOffset;null==s&&(s=this.lineWidth>2.5?1.25*(1+.6*(Math.atan(this.lineWidth/2.5)/.785398163-1)):1.25*Math.atan(this.lineWidth/2.5)/.785398163);
var r={lineJoin:this.lineJoin,lineCap:this.lineCap,fill:this.fill,isarc:!1,angle:this.shadowAngle,offset:s,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.lineWidth,linePattern:this.linePattern,closePath:this.fill};if(this.renderer.shadowRenderer.init(r),this._areaPoints=[],this._boundingBox=[[],[]],!this.isTrendline&&this.fill||this.renderer.bands.show){if(this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColor=null,i.highlightMouseDown&&null==i.highlightMouseOver&&(i.highlightMouseOver=!1),e.extend(!0,this,{highlightMouseOver:i.highlightMouseOver,highlightMouseDown:i.highlightMouseDown,highlightColor:i.highlightColor}),!this.highlightColor){var o=this.renderer.bands.show?this.renderer.bands.fillColor:this.fillColor;this.highlightColor=e.jqplot.computeHighlightColors(o)}this.highlighter&&(this.highlighter.show=!1)}!this.isTrendline&&n&&(n.plugins.lineRenderer={},n.postInitHooks.addOnce(h),n.postDrawHooks.addOnce(u),n.eventListenerHooks.addOnce("jqplotMouseMove",m),n.eventListenerHooks.addOnce("jqplotMouseDown",g),n.eventListenerHooks.addOnce("jqplotMouseUp",b),n.eventListenerHooks.addOnce("jqplotClick",v),n.eventListenerHooks.addOnce("jqplotRightClick",y))},e.jqplot.LineRenderer.prototype.initBands=function(t){var n=t.bandData||[],i=this.renderer.bands;i.hiData=[],i.lowData=[];var a=this.data;if(i._max=null,i._min=null,2==n.length)if(e.isArray(n[0][0])){for(var s,r=0,o=0,l=0,c=n[0].length;c>l;l++)s=n[0][l],(null!=s[1]&&s[1]>i._max||null==i._max)&&(i._max=s[1]),(null!=s[1]&&s[1]<i._min||null==i._min)&&(i._min=s[1]);for(var l=0,c=n[1].length;c>l;l++)s=n[1][l],(null!=s[1]&&s[1]>i._max||null==i._max)&&(i._max=s[1],o=1),(null!=s[1]&&s[1]<i._min||null==i._min)&&(i._min=s[1],r=1);o===r&&(i.show=!1),i.hiData=n[o],i.lowData=n[r]}else if(n[0].length===a.length&&n[1].length===a.length)for(var d=n[0][0]>n[1][0]?0:1,h=d?0:1,l=0,c=a.length;c>l;l++)i.hiData.push([a[l][0],n[d][l]]),i.lowData.push([a[l][0],n[h][l]]);else i.show=!1;else if(n.length>2&&!e.isArray(n[0][0]))for(var d=n[0][0]>n[0][1]?0:1,h=d?0:1,l=0,c=n.length;c>l;l++)i.hiData.push([a[l][0],n[l][d]]),i.lowData.push([a[l][0],n[l][h]]);else{var u=i.interval,p=null,f=null,m=null,g=null;if(e.isArray(u)?(p=u[0],f=u[1]):p=u,isNaN(p)?"%"===p.charAt(p.length-1)&&(m="multiply",p=parseFloat(p)/100+1):(p=parseFloat(p),m="add"),null!==f&&isNaN(f)?"%"===f.charAt(f.length-1)&&(g="multiply",f=parseFloat(f)/100+1):null!==f&&(f=parseFloat(f),g="add"),null!==p){if(null===f&&(f=-p,g=m,"multiply"===g&&(f+=2)),f>p){var b=p;p=f,f=b,b=m,m=g,g=b}for(var l=0,c=a.length;c>l;l++){switch(m){case"add":i.hiData.push([a[l][0],a[l][1]+p]);break;case"multiply":i.hiData.push([a[l][0],a[l][1]*p])}switch(g){case"add":i.lowData.push([a[l][0],a[l][1]+f]);break;case"multiply":i.lowData.push([a[l][0],a[l][1]*f])}}}else i.show=!1}for(var v=i.hiData,y=i.lowData,l=0,c=v.length;c>l;l++)(null!=v[l][1]&&v[l][1]>i._max||null==i._max)&&(i._max=v[l][1]);for(var l=0,c=y.length;c>l;l++)(null!=y[l][1]&&y[l][1]<i._min||null==i._min)&&(i._min=y[l][1]);if(null===i.fillColor){var _=e.jqplot.getColorComponents(i.color);_[3]=.5*_[3],i.fillColor="rgba("+_[0]+", "+_[1]+", "+_[2]+", "+_[3]+")"}},e.jqplot.LineRenderer.prototype.setGridData=function(){var e=this._xaxis.series_u2p,t=this._yaxis.series_u2p,n=this._plotData,i=this._prevPlotData;this.gridData=[],this._prevGridData=[],this.renderer._smoothedData=[],this.renderer._smoothedPlotData=[],this.renderer._hiBandGridData=[],this.renderer._lowBandGridData=[],this.renderer._hiBandSmoothedData=[],this.renderer._lowBandSmoothedData=[];for(var a=this.renderer.bands,s=!1,r=0,o=n.length;o>r;r++)null!=n[r][0]&&null!=n[r][1]?this.gridData.push([e.call(this._xaxis,n[r][0]),t.call(this._yaxis,n[r][1])]):null==n[r][0]?(s=!0,this.gridData.push([null,t.call(this._yaxis,n[r][1])])):null==n[r][1]&&(s=!0,this.gridData.push([e.call(this._xaxis,n[r][0]),null])),null!=i[r]&&null!=i[r][0]&&null!=i[r][1]?this._prevGridData.push([e.call(this._xaxis,i[r][0]),t.call(this._yaxis,i[r][1])]):null!=i[r]&&null==i[r][0]?this._prevGridData.push([null,t.call(this._yaxis,i[r][1])]):null!=i[r]&&null!=i[r][0]&&null==i[r][1]&&this._prevGridData.push([e.call(this._xaxis,i[r][0]),null]);if(s&&(this.renderer.smooth=!1,"line"===this._type&&(a.show=!1)),"line"===this._type&&a.show){for(var r=0,o=a.hiData.length;o>r;r++)this.renderer._hiBandGridData.push([e.call(this._xaxis,a.hiData[r][0]),t.call(this._yaxis,a.hiData[r][1])]);for(var r=0,o=a.lowData.length;o>r;r++)this.renderer._lowBandGridData.push([e.call(this._xaxis,a.lowData[r][0]),t.call(this._yaxis,a.lowData[r][1])])}if("line"===this._type&&this.renderer.smooth&&this.gridData.length>2){var l;this.renderer.constrainSmoothing?(l=c.call(this,this.gridData),this.renderer._smoothedData=l[0],this.renderer._smoothedPlotData=l[1],a.show&&(l=c.call(this,this.renderer._hiBandGridData),this.renderer._hiBandSmoothedData=l[0],l=c.call(this,this.renderer._lowBandGridData),this.renderer._lowBandSmoothedData=l[0]),l=null):(l=d.call(this,this.gridData),this.renderer._smoothedData=l[0],this.renderer._smoothedPlotData=l[1],a.show&&(l=d.call(this,this.renderer._hiBandGridData),this.renderer._hiBandSmoothedData=l[0],l=d.call(this,this.renderer._lowBandGridData),this.renderer._lowBandSmoothedData=l[0]),l=null)}},e.jqplot.LineRenderer.prototype.makeGridData=function(e){var t=this._xaxis.series_u2p,n=this._yaxis.series_u2p,i=[];this.renderer._smoothedData=[],this.renderer._smoothedPlotData=[],this.renderer._hiBandGridData=[],this.renderer._lowBandGridData=[],this.renderer._hiBandSmoothedData=[],this.renderer._lowBandSmoothedData=[];for(var a=this.renderer.bands,s=!1,r=0;r<e.length;r++)null!=e[r][0]&&null!=e[r][1]?i.push([t.call(this._xaxis,e[r][0]),n.call(this._yaxis,e[r][1])]):null==e[r][0]?(s=!0,i.push([null,n.call(this._yaxis,e[r][1])])):null==e[r][1]&&(s=!0,i.push([t.call(this._xaxis,e[r][0]),null]));if(s&&(this.renderer.smooth=!1,"line"===this._type&&(a.show=!1)),"line"===this._type&&a.show){for(var r=0,o=a.hiData.length;o>r;r++)this.renderer._hiBandGridData.push([t.call(this._xaxis,a.hiData[r][0]),n.call(this._yaxis,a.hiData[r][1])]);for(var r=0,o=a.lowData.length;o>r;r++)this.renderer._lowBandGridData.push([t.call(this._xaxis,a.lowData[r][0]),n.call(this._yaxis,a.lowData[r][1])])}if("line"===this._type&&this.renderer.smooth&&i.length>2){var l;this.renderer.constrainSmoothing?(l=c.call(this,i),this.renderer._smoothedData=l[0],this.renderer._smoothedPlotData=l[1],a.show&&(l=c.call(this,this.renderer._hiBandGridData),this.renderer._hiBandSmoothedData=l[0],l=c.call(this,this.renderer._lowBandGridData),this.renderer._lowBandSmoothedData=l[0]),l=null):(l=d.call(this,i),this.renderer._smoothedData=l[0],this.renderer._smoothedPlotData=l[1],a.show&&(l=d.call(this,this.renderer._hiBandGridData),this.renderer._hiBandSmoothedData=l[0],l=d.call(this,this.renderer._lowBandGridData),this.renderer._lowBandSmoothedData=l[0]),l=null)}return i},e.jqplot.LineRenderer.prototype.draw=function(t,n,i){var a,s,r,o,l,c=e.extend(!0,{},i),d=c.shadow!=I?c.shadow:this.shadow,h=c.showLine!=I?c.showLine:this.showLine,u=c.fill!=I?c.fill:this.fill,p=c.fillAndStroke!=I?c.fillAndStroke:this.fillAndStroke;if(t.save(),n.length){if(h)if(u){if(this.fillToZero){var f=this.negativeColor;this.useNegativeColors||(f=c.fillStyle);var m=!1,g=c.fillStyle;if(p)var b=n.slice(0);if(0!=this.index&&this._stack){for(var v=this._prevGridData,a=v.length;a>0;a--)n.push(v[a-1]);d&&this.renderer.shadowRenderer.draw(t,n,c),this._areaPoints=n,this.renderer.shapeRenderer.draw(t,n,c)}else{var y=[],_=this.renderer.smooth?this.renderer._smoothedPlotData:this._plotData;this._areaPoints=[];{var E=this._yaxis.series_u2p(this.fillToValue);this._xaxis.series_u2p(this.fillToValue)}if(c.closePath=!0,"y"==this.fillAxis){y.push([n[0][0],E]),this._areaPoints.push([n[0][0],E]);for(var a=0;a<n.length-1;a++)if(y.push(n[a]),this._areaPoints.push(n[a]),_[a][1]*_[a+1][1]<=0){_[a][1]<0?(m=!0,c.fillStyle=f):(m=!1,c.fillStyle=g);var k=n[a][0]+(n[a+1][0]-n[a][0])*(E-n[a][1])/(n[a+1][1]-n[a][1]);y.push([k,E]),this._areaPoints.push([k,E]),d&&this.renderer.shadowRenderer.draw(t,y,c),this.renderer.shapeRenderer.draw(t,y,c),y=[[k,E]]}_[n.length-1][1]<0?(m=!0,c.fillStyle=f):(m=!1,c.fillStyle=g),y.push(n[n.length-1]),this._areaPoints.push(n[n.length-1]),y.push([n[n.length-1][0],E]),this._areaPoints.push([n[n.length-1][0],E])}d&&this.renderer.shadowRenderer.draw(t,y,c),this.renderer.shapeRenderer.draw(t,y,c)}}else{if(p)var b=n.slice(0);if(0!=this.index&&this._stack)for(var v=this._prevGridData,a=v.length;a>0;a--)n.push(v[a-1]);else{var w=t.canvas.height;n.unshift([n[0][0],w]);var T=n.length;n.push([n[T-1][0],w])}this._areaPoints=n,d&&this.renderer.shadowRenderer.draw(t,n,c),this.renderer.shapeRenderer.draw(t,n,c)}if(p){var D=e.extend(!0,{},c,{fill:!1,closePath:!1});if(this.renderer.shapeRenderer.draw(t,b,D),this.markerRenderer.show)for(this.renderer.smooth&&(b=this.gridData),a=0;a<b.length;a++)this.markerRenderer.draw(b[a][0],b[a][1],t,c.markerOptions)}}else{if(this.renderer.bands.show){var A,N=e.extend(!0,{},c);this.renderer.bands.showLines&&(A=this.renderer.smooth?this.renderer._hiBandSmoothedData:this.renderer._hiBandGridData,this.renderer.shapeRenderer.draw(t,A,c),A=this.renderer.smooth?this.renderer._lowBandSmoothedData:this.renderer._lowBandGridData,this.renderer.shapeRenderer.draw(t,A,N)),this.renderer.bands.fill&&(A=this.renderer.smooth?this.renderer._hiBandSmoothedData.concat(this.renderer._lowBandSmoothedData.reverse()):this.renderer._hiBandGridData.concat(this.renderer._lowBandGridData.reverse()),this._areaPoints=A,N.closePath=!0,N.fill=!0,N.fillStyle=this.renderer.bands.fillColor,this.renderer.shapeRenderer.draw(t,A,N))}d&&this.renderer.shadowRenderer.draw(t,n,c),this.renderer.shapeRenderer.draw(t,n,c)}var s=o=r=l=null;for(a=0;a<this._areaPoints.length;a++){var x=this._areaPoints[a];(s>x[0]||null==s)&&(s=x[0]),(l<x[1]||null==l)&&(l=x[1]),(o<x[0]||null==o)&&(o=x[0]),(r>x[1]||null==r)&&(r=x[1])}if("line"===this.type&&this.renderer.bands.show&&(l=this._yaxis.series_u2p(this.renderer.bands._min),r=this._yaxis.series_u2p(this.renderer.bands._max)),this._boundingBox=[[s,l],[o,r]],this.markerRenderer.show&&!u)for(this.renderer.smooth&&(n=this.gridData),a=0;a<n.length;a++)null!=n[a][0]&&null!=n[a][1]&&this.markerRenderer.draw(n[a][0],n[a][1],t,c.markerOptions)}t.restore()},e.jqplot.LineRenderer.prototype.drawShadow=function(){},e.jqplot.LinearAxisRenderer=function(){},e.jqplot.LinearAxisRenderer.prototype.init=function(t){this.breakPoints=null,this.breakTickLabel="&asymp;",this.drawBaseline=!0,this.baselineWidth=null,this.baselineColor=null,this.forceTickAt0=!1,this.forceTickAt100=!1,this.tickInset=0,this.minorTicks=0,this.alignTicks=!1,this._autoFormatString="",this._overrideFormatString=!1,this._scalefact=1,e.extend(!0,this,t),this.breakPoints&&(e.isArray(this.breakPoints)?(this.breakPoints.length<2||this.breakPoints[1]<=this.breakPoints[0])&&(this.breakPoints=null):this.breakPoints=null),null!=this.numberTicks&&this.numberTicks<2&&(this.numberTicks=2),this.resetDataBounds()},e.jqplot.LinearAxisRenderer.prototype.draw=function(t,n){if(this.show){this.renderer.createTicks.call(this,n);if(this._elem&&(this._elem.emptyForce(),this._elem=null),this._elem=e(document.createElement("div")),this._elem.addClass("jqplot-axis jqplot-"+this.name),this._elem.css("position","absolute"),"xaxis"==this.name||"x2axis"==this.name?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions),this._label.show){var i=this._label.draw(t,n);i.appendTo(this._elem),i=null}for(var a,s=this._ticks,r=0;r<s.length;r++)a=s[r],a.show&&a.showLabel&&(!a.isMinorTick||this.showMinorTicks)&&this._elem.append(a.draw(t,n));a=null,s=null}return this._elem},e.jqplot.LinearAxisRenderer.prototype.reset=function(){this.min=this._options.min,this.max=this._options.max,this.tickInterval=this._options.tickInterval,this.numberTicks=this._options.numberTicks,this._autoFormatString="",this._overrideFormatString&&this.tickOptions&&this.tickOptions.formatString&&(this.tickOptions.formatString="")},e.jqplot.LinearAxisRenderer.prototype.set=function(){var t,n=0,i=0,a=0,s=null==this._label?!1:this._label.show;if(this.show){for(var r,o=this._ticks,l=0;l<o.length;l++)r=o[l],r._breakTick||!r.show||!r.showLabel||r.isMinorTick&&!this.showMinorTicks||(t="xaxis"==this.name||"x2axis"==this.name?r._elem.outerHeight(!0):r._elem.outerWidth(!0),t>n&&(n=t));r=null,o=null,s&&(i=this._label._elem.outerWidth(!0),a=this._label._elem.outerHeight(!0)),"xaxis"==this.name?(n+=a,this._elem.css({height:n+"px",left:"0px",bottom:"0px"})):"x2axis"==this.name?(n+=a,this._elem.css({height:n+"px",left:"0px",top:"0px"})):"yaxis"==this.name?(n+=i,this._elem.css({width:n+"px",left:"0px",top:"0px"}),s&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",i+"px")):(n+=i,this._elem.css({width:n+"px",right:"0px",top:"0px"}),s&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",i+"px"))}},e.jqplot.LinearAxisRenderer.prototype.createTicks=function(t){var n,i,a,s,r=this._ticks,o=this.ticks,l=this.name,c=this._dataBounds,d="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height,h=this.min,u=this.max,p=this.numberTicks,f=this.tickInterval,m=30;if(this._scalefact=(Math.max(d,m+1)-m)/300,o.length){for(s=0;s<o.length;s++){var g=o[s],b=new this.tickRenderer(this.tickOptions);e.isArray(g)?(b.value=g[0],this.breakPoints?g[0]==this.breakPoints[0]?(b.label=this.breakTickLabel,b._breakTick=!0,b.showGridline=!1,b.showMark=!1):g[0]>this.breakPoints[0]&&g[0]<=this.breakPoints[1]?(b.show=!1,b.showGridline=!1,b.label=g[1]):b.label=g[1]:b.label=g[1],b.setTick(g[0],this.name),this._ticks.push(b)):e.isPlainObject(g)?(e.extend(!0,b,g),b.axis=this.name,this._ticks.push(b)):(b.value=g,this.breakPoints&&(g==this.breakPoints[0]?(b.label=this.breakTickLabel,b._breakTick=!0,b.showGridline=!1,b.showMark=!1):g>this.breakPoints[0]&&g<=this.breakPoints[1]&&(b.show=!1,b.showGridline=!1)),b.setTick(g,this.name),this._ticks.push(b))}this.numberTicks=o.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value,this.tickInterval=(this.max-this.min)/(this.numberTicks-1)}else{d="xaxis"==l||"x2axis"==l?this._plotDimensions.width:this._plotDimensions.height;var v=this.numberTicks;this.alignTicks&&("x2axis"===this.name&&t.axes.xaxis.show?v=t.axes.xaxis.numberTicks:"y"===this.name.charAt(0)&&"yaxis"!==this.name&&"yMidAxis"!==this.name&&t.axes.yaxis.show&&(v=t.axes.yaxis.numberTicks)),n=null!=this.min?this.min:c.min,i=null!=this.max?this.max:c.max;var y,_,E,k=i-n;if(null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),null==this.min||null==this.max&&null==this.tickInterval&&!this.autoscale){this.forceTickAt0&&(n>0&&(n=0),0>i&&(i=0)),this.forceTickAt100&&(n>100&&(n=100),100>i&&(i=100));var w=!1,T=!1;null!=this.min?w=!0:null!=this.max&&(T=!0);var D=e.jqplot.LinearTickGenerator(n,i,this._scalefact,v,w,T),A=null!=this.min?n:n+k*(this.padMin-1),N=null!=this.max?i:i-k*(this.padMax-1);(A>n||i>N)&&(A=null!=this.min?n:n-k*(this.padMin-1),N=null!=this.max?i:i+k*(this.padMax-1),D=e.jqplot.LinearTickGenerator(A,N,this._scalefact,v,w,T)),this.min=D[0],this.max=D[1],this.numberTicks=D[2],this._autoFormatString=D[3],this.tickInterval=D[4]}else{if(n==i){var x=.05;n>0&&(x=Math.max(Math.log(n)/Math.LN10,.05)),n-=x,i+=x}if(this.autoscale&&null==this.min&&null==this.max){for(var M,C,I,S=!1,P=!1,s=0;s<this._series.length;s++){var B=this._series[s],R="x"==B.fillAxis?B._xaxis.name:B._yaxis.name;if(this.name==R){for(var F=B._plotValues[B.fillAxis],O=F[0],H=F[0],q=1;q<F.length;q++)F[q]<O?O=F[q]:F[q]>H&&(H=F[q]);var j=(H-O)/H;B.renderer.constructor==e.jqplot.BarRenderer?O>=0&&(B.fillToZero||j>.1)?S=!0:(S=!1,P=B.fill&&B.fillToZero&&0>O&&H>0?!0:!1):B.fill?O>=0&&(B.fillToZero||j>.1)?S=!0:0>O&&H>0&&B.fillToZero?(S=!1,P=!0):(S=!1,P=!1):0>O&&(S=!1)}}if(S)this.numberTicks=2+Math.ceil((d-(this.tickSpacing-1))/this.tickSpacing),this.min=0,h=0,C=i/(this.numberTicks-1),E=Math.pow(10,Math.abs(Math.floor(Math.log(C)/Math.LN10))),C/E==parseInt(C/E,10)&&(C+=E),this.tickInterval=Math.ceil(C/E)*E,this.max=this.tickInterval*(this.numberTicks-1);else if(P){this.numberTicks=2+Math.ceil((d-(this.tickSpacing-1))/this.tickSpacing);var L=Math.ceil(Math.abs(n)/k*(this.numberTicks-1)),U=this.numberTicks-1-L;C=Math.max(Math.abs(n/L),Math.abs(i/U)),E=Math.pow(10,Math.abs(Math.floor(Math.log(C)/Math.LN10))),this.tickInterval=Math.ceil(C/E)*E,this.max=this.tickInterval*U,this.min=-this.tickInterval*L}else null==this.numberTicks&&(this.numberTicks=this.tickInterval?3+Math.ceil(k/this.tickInterval):2+Math.ceil((d-(this.tickSpacing-1))/this.tickSpacing)),null==this.tickInterval?(C=k/(this.numberTicks-1),E=1>C?Math.pow(10,Math.abs(Math.floor(Math.log(C)/Math.LN10))):1,this.tickInterval=Math.ceil(C*E*this.pad)/E):E=1/this.tickInterval,M=this.tickInterval*(this.numberTicks-1),I=(M-k)/2,null==this.min&&(this.min=Math.floor(E*(n-I))/E),null==this.max&&(this.max=this.min+M);var z,W=e.jqplot.getSignificantFigures(this.tickInterval);if(W.digitsLeft>=W.significantDigits)z="%d";else{var E=Math.max(0,5-W.digitsLeft);E=Math.min(E,W.digitsRight),z="%."+E+"f"}this._autoFormatString=z}else{y=null!=this.min?this.min:n-k*(this.padMin-1),_=null!=this.max?this.max:i+k*(this.padMax-1),k=_-y,null==this.numberTicks&&(this.numberTicks=null!=this.tickInterval?Math.ceil((_-y)/this.tickInterval)+1:d>100?parseInt(3+(d-100)/75,10):2),null==this.tickInterval&&(this.tickInterval=k/(this.numberTicks-1)),null==this.max&&(_=y+this.tickInterval*(this.numberTicks-1)),null==this.min&&(y=_-this.tickInterval*(this.numberTicks-1));var z,W=e.jqplot.getSignificantFigures(this.tickInterval);if(W.digitsLeft>=W.significantDigits)z="%d";else{var E=Math.max(0,5-W.digitsLeft);E=Math.min(E,W.digitsRight),z="%."+E+"f"}this._autoFormatString=z,this.min=y,this.max=_}if(this.renderer.constructor==e.jqplot.LinearAxisRenderer&&""==this._autoFormatString){k=this.max-this.min;var V=new this.tickRenderer(this.tickOptions),G=V.formatString||e.jqplot.config.defaultTickFormatString,G=G.match(e.jqplot.sprintf.regex)[0],$=0;if(G){if(G.search(/[fFeEgGpP]/)>-1){var J=G.match(/\%\.(\d{0,})?[eEfFgGpP]/);$=J?parseInt(J[1],10):6}else G.search(/[di]/)>-1&&($=0);var Y=Math.pow(10,-$);if(this.tickInterval<Y&&null==p&&null==f)if(this.tickInterval=Y,null==u&&null==h){this.min=Math.floor(this._dataBounds.min/Y)*Y,this.min==this._dataBounds.min&&(this.min=this._dataBounds.min-this.tickInterval),this.max=Math.ceil(this._dataBounds.max/Y)*Y,this.max==this._dataBounds.max&&(this.max=this._dataBounds.max+this.tickInterval);var K=(this.max-this.min)/this.tickInterval;K=K.toFixed(11),K=Math.ceil(K),this.numberTicks=K+1}else if(null==u){var K=(this._dataBounds.max-this.min)/this.tickInterval;K=K.toFixed(11),this.numberTicks=Math.ceil(K)+2,this.max=this.min+this.tickInterval*(this.numberTicks-1)}else if(null==h){var K=(this.max-this._dataBounds.min)/this.tickInterval;K=K.toFixed(11),this.numberTicks=Math.ceil(K)+2,this.min=this.max-this.tickInterval*(this.numberTicks-1)}else this.numberTicks=Math.ceil((u-h)/this.tickInterval)+1,this.min=Math.floor(h*Math.pow(10,$))/Math.pow(10,$),this.max=Math.ceil(u*Math.pow(10,$))/Math.pow(10,$),this.numberTicks=Math.ceil((this.max-this.min)/this.tickInterval)+1}}}this._overrideFormatString&&""!=this._autoFormatString&&(this.tickOptions=this.tickOptions||{},this.tickOptions.formatString=this._autoFormatString);for(var b,Q,s=0;s<this.numberTicks;s++){if(a=this.min+s*this.tickInterval,b=new this.tickRenderer(this.tickOptions),b.setTick(a,this.name),this._ticks.push(b),s<this.numberTicks-1)for(var q=0;q<this.minorTicks;q++)a+=this.tickInterval/(this.minorTicks+1),Q=e.extend(!0,{},this.tickOptions,{name:this.name,value:a,label:"",isMinorTick:!0}),b=new this.tickRenderer(Q),this._ticks.push(b);b=null}}this.tickInset&&(this.min=this.min-this.tickInset*this.tickInterval,this.max=this.max+this.tickInset*this.tickInterval),r=null},e.jqplot.LinearAxisRenderer.prototype.resetTickValues=function(t){if(e.isArray(t)&&t.length==this._ticks.length){for(var n,i=0;i<t.length;i++)n=this._ticks[i],n.value=t[i],n.label=n.formatter(n.formatString,t[i]),n.label=n.prefix+n.label,n._elem.html(n.label);n=null,this.min=e.jqplot.arrayMin(t),this.max=e.jqplot.arrayMax(t),this.pack()}},e.jqplot.LinearAxisRenderer.prototype.pack=function(t,n){t=t||{},n=n||this._offsets;var i=this._ticks,a=this.max,s=this.min,r=n.max,o=n.min,l=null==this._label?!1:this._label.show;for(var c in t)this._elem.css(c,t[c]);this._offsets=n;var d=r-o,h=a-s;if(this.breakPoints?(h=h-this.breakPoints[1]+this.breakPoints[0],this.p2u=function(e){return(e-o)*h/d+s},this.u2p=function(e){return e>this.breakPoints[0]&&e<this.breakPoints[1]&&(e=this.breakPoints[0]),e<=this.breakPoints[0]?(e-s)*d/h+o:(e-this.breakPoints[1]+this.breakPoints[0]-s)*d/h+o},"x"==this.name.charAt(0)?(this.series_u2p=function(e){return e>this.breakPoints[0]&&e<this.breakPoints[1]&&(e=this.breakPoints[0]),e<=this.breakPoints[0]?(e-s)*d/h:(e-this.breakPoints[1]+this.breakPoints[0]-s)*d/h},this.series_p2u=function(e){return e*h/d+s}):(this.series_u2p=function(e){return e>this.breakPoints[0]&&e<this.breakPoints[1]&&(e=this.breakPoints[0]),e>=this.breakPoints[1]?(e-a)*d/h:(e+this.breakPoints[1]-this.breakPoints[0]-a)*d/h},this.series_p2u=function(e){return e*h/d+a})):(this.p2u=function(e){return(e-o)*h/d+s},this.u2p=function(e){return(e-s)*d/h+o},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(e){return(e-s)*d/h},this.series_p2u=function(e){return e*h/d+s}):(this.series_u2p=function(e){return(e-a)*d/h},this.series_p2u=function(e){return e*h/d+a})),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(var u=0;u<i.length;u++){var p=i[u];if(p.show&&p.showLabel){var f;if(p.constructor==e.jqplot.CanvasAxisTickRenderer&&p.angle){var m="xaxis"==this.name?1:-1;switch(p.labelPosition){case"auto":f=m*p.angle<0?-p.getWidth()+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2:-p._textRenderer.height*Math.sin(p._textRenderer.angle)/2;break;case"end":f=-p.getWidth()+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2;break;case"start":f=-p._textRenderer.height*Math.sin(p._textRenderer.angle)/2;break;case"middle":f=-p.getWidth()/2+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2;break;default:f=-p.getWidth()/2+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2}}else f=-p.getWidth()/2;var g=this.u2p(p.value)+f+"px";p._elem.css("left",g),p.pack()}}if(l){var b=this._label._elem.outerWidth(!0);this._label._elem.css("left",o+d/2-b/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack()}}else{for(var u=0;u<i.length;u++){var p=i[u];if(p.show&&p.showLabel){var f;if(p.constructor==e.jqplot.CanvasAxisTickRenderer&&p.angle){var m="yaxis"==this.name?1:-1;switch(p.labelPosition){case"auto":case"end":f=m*p.angle<0?-p._textRenderer.height*Math.cos(-p._textRenderer.angle)/2:-p.getHeight()+p._textRenderer.height*Math.cos(p._textRenderer.angle)/2;break;case"start":f=p.angle>0?-p._textRenderer.height*Math.cos(-p._textRenderer.angle)/2:-p.getHeight()+p._textRenderer.height*Math.cos(p._textRenderer.angle)/2;break;case"middle":f=-p.getHeight()/2;break;default:f=-p.getHeight()/2}}else f=-p.getHeight()/2;var g=this.u2p(p.value)+f+"px";p._elem.css("top",g),p.pack()}}if(l){var v=this._label._elem.outerHeight(!0);this._label._elem.css("top",r-d/2-v/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack()}}i=null};e.jqplot.LinearTickGenerator=function(t,n,i,a,s,r){if(s=null===s?!1:s,r=null===r||s?!1:r,t===n&&(n=n?0:1),i=i||1,t>n){var o=n;n=t,t=o}var l=[],c=w(n-t,i),d=e.jqplot.getSignificantFigures;if(null==a)if(s||r){if(s){l[0]=t,l[2]=Math.ceil((n-t)/c+1),l[1]=t+(l[2]-1)*c;var h=d(t).digitsRight,u=d(c).digitsRight;l[3]=u>h?_(c):"%."+h+"f",l[4]=c}else if(r){l[1]=n,l[2]=Math.ceil((n-t)/c+1),l[0]=n-(l[2]-1)*c;var p=d(n).digitsRight,u=d(c).digitsRight;l[3]=u>p?_(c):"%."+p+"f",l[4]=c}}else l[0]=Math.floor(t/c)*c,l[1]=Math.ceil(n/c)*c,l[2]=Math.round((l[1]-l[0])/c+1),l[3]=_(c),l[4]=c;else{var f=[];if(f[0]=Math.floor(t/c)*c,f[1]=Math.ceil(n/c)*c,f[2]=Math.round((f[1]-f[0])/c+1),f[3]=_(c),f[4]=c,f[2]===a)l=f;else{var m=k(f[1]-f[0],a);l[0]=f[0],l[2]=a,l[4]=m,l[3]=_(m),l[1]=l[0]+(l[2]-1)*l[4]}}return l},e.jqplot.LinearTickGenerator.bestLinearInterval=w,e.jqplot.LinearTickGenerator.bestInterval=k,e.jqplot.LinearTickGenerator.bestLinearComponents=T,e.jqplot.LinearTickGenerator.bestConstrainedInterval=E,e.jqplot.MarkerRenderer=function(t){this.show=!0,this.style="filledCircle",this.lineWidth=2,this.size=9,this.color="#666666",this.shadow=!0,this.shadowAngle=45,this.shadowOffset=1,this.shadowDepth=3,this.shadowAlpha="0.07",this.shadowRenderer=new e.jqplot.ShadowRenderer,this.shapeRenderer=new e.jqplot.ShapeRenderer,e.extend(!0,this,t)},e.jqplot.MarkerRenderer.prototype.init=function(t){e.extend(!0,this,t);var n={angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,lineWidth:this.lineWidth,depth:this.shadowDepth,closePath:!0};-1!=this.style.indexOf("filled")&&(n.fill=!0),-1!=this.style.indexOf("ircle")&&(n.isarc=!0,n.closePath=!1),this.shadowRenderer.init(n);var i={fill:!1,isarc:!1,strokeStyle:this.color,fillStyle:this.color,lineWidth:this.lineWidth,closePath:!0};-1!=this.style.indexOf("filled")&&(i.fill=!0),-1!=this.style.indexOf("ircle")&&(i.isarc=!0,i.closePath=!1),this.shapeRenderer.init(i)},e.jqplot.MarkerRenderer.prototype.drawDiamond=function(e,t,n,i,a){var s=1.2,r=this.size/2/s,o=this.size/2*s,l=[[e-r,t],[e,t+o],[e+r,t],[e,t-o]];this.shadow&&this.shadowRenderer.draw(n,l),this.shapeRenderer.draw(n,l,a)},e.jqplot.MarkerRenderer.prototype.drawPlus=function(t,n,i){var a=1,s=this.size/2*a,r=this.size/2*a,o=[[t,n-r],[t,n+r]],l=[[t+s,n],[t-s,n]],c=e.extend(!0,{},this.options,{closePath:!1});this.shadow&&(this.shadowRenderer.draw(i,o,{closePath:!1}),this.shadowRenderer.draw(i,l,{closePath:!1})),this.shapeRenderer.draw(i,o,c),this.shapeRenderer.draw(i,l,c)},e.jqplot.MarkerRenderer.prototype.drawX=function(t,n,i){var a=1,s=this.size/2*a,r=this.size/2*a,o=e.extend(!0,{},this.options,{closePath:!1}),l=[[t-s,n-r],[t+s,n+r]],c=[[t-s,n+r],[t+s,n-r]];this.shadow&&(this.shadowRenderer.draw(i,l,{closePath:!1}),this.shadowRenderer.draw(i,c,{closePath:!1})),this.shapeRenderer.draw(i,l,o),this.shapeRenderer.draw(i,c,o)},e.jqplot.MarkerRenderer.prototype.drawDash=function(e,t,n,i,a){var s=1,r=this.size/2*s,o=(this.size/2*s,[[e-r,t],[e+r,t]]);this.shadow&&this.shadowRenderer.draw(n,o),this.shapeRenderer.draw(n,o,a)},e.jqplot.MarkerRenderer.prototype.drawLine=function(e,t,n,i,a){var s=[e,t];this.shadow&&this.shadowRenderer.draw(n,s),this.shapeRenderer.draw(n,s,a)},e.jqplot.MarkerRenderer.prototype.drawSquare=function(e,t,n,i,a){var s=1,r=this.size/2/s,o=this.size/2*s,l=[[e-r,t-o],[e-r,t+o],[e+r,t+o],[e+r,t-o]];this.shadow&&this.shadowRenderer.draw(n,l),this.shapeRenderer.draw(n,l,a)},e.jqplot.MarkerRenderer.prototype.drawCircle=function(e,t,n,i,a){var s=this.size/2,r=2*Math.PI,o=[e,t,s,0,r,!0];this.shadow&&this.shadowRenderer.draw(n,o),this.shapeRenderer.draw(n,o,a)},e.jqplot.MarkerRenderer.prototype.draw=function(e,t,n,i){if(i=i||{},null==i.show||0!=i.show)switch(i.color&&!i.fillStyle&&(i.fillStyle=i.color),i.color&&!i.strokeStyle&&(i.strokeStyle=i.color),this.style){case"diamond":this.drawDiamond(e,t,n,!1,i);break;case"filledDiamond":this.drawDiamond(e,t,n,!0,i);break;case"circle":this.drawCircle(e,t,n,!1,i);break;case"filledCircle":this.drawCircle(e,t,n,!0,i);break;case"square":this.drawSquare(e,t,n,!1,i);break;case"filledSquare":this.drawSquare(e,t,n,!0,i);break;case"x":this.drawX(e,t,n,!0,i);break;case"plus":this.drawPlus(e,t,n,!0,i);break;case"dash":this.drawDash(e,t,n,!0,i);break;case"line":this.drawLine(e,t,n,!1,i);break;default:this.drawDiamond(e,t,n,!1,i)}},e.jqplot.ShadowRenderer=function(t){this.angle=45,this.offset=1,this.alpha=.07,this.lineWidth=1.5,this.lineJoin="miter",this.lineCap="round",this.closePath=!1,this.fill=!1,this.depth=3,this.strokeStyle="rgba(0,0,0,0.1)",this.isarc=!1,e.extend(!0,this,t)},e.jqplot.ShadowRenderer.prototype.init=function(t){e.extend(!0,this,t)},e.jqplot.ShadowRenderer.prototype.draw=function(t,n,i){t.save();var a=null!=i?i:{},s=null!=a.fill?a.fill:this.fill,r=null!=a.fillRect?a.fillRect:this.fillRect,o=null!=a.closePath?a.closePath:this.closePath,l=null!=a.offset?a.offset:this.offset,c=null!=a.alpha?a.alpha:this.alpha,d=null!=a.depth?a.depth:this.depth,h=null!=a.isarc?a.isarc:this.isarc,u=null!=a.linePattern?a.linePattern:this.linePattern;t.lineWidth=null!=a.lineWidth?a.lineWidth:this.lineWidth,t.lineJoin=null!=a.lineJoin?a.lineJoin:this.lineJoin,t.lineCap=null!=a.lineCap?a.lineCap:this.lineCap,t.strokeStyle=a.strokeStyle||this.strokeStyle||"rgba(0,0,0,"+c+")",t.fillStyle=a.fillStyle||this.fillStyle||"rgba(0,0,0,"+c+")";for(var p=0;d>p;p++){var f=e.jqplot.LinePattern(t,u);if(t.translate(Math.cos(this.angle*Math.PI/180)*l,Math.sin(this.angle*Math.PI/180)*l),f.beginPath(),h)t.arc(n[0],n[1],n[2],n[3],n[4],!0);else if(r)r&&t.fillRect(n[0],n[1],n[2],n[3]);else if(n&&n.length)for(var m=!0,g=0;g<n.length;g++)null!=n[g][0]&&null!=n[g][1]?m?(f.moveTo(n[g][0],n[g][1]),m=!1):f.lineTo(n[g][0],n[g][1]):m=!0;o&&f.closePath(),s?t.fill():t.stroke()}t.restore()},e.jqplot.ShapeRenderer=function(t){this.lineWidth=1.5,this.linePattern="solid",this.lineJoin="miter",this.lineCap="round",this.closePath=!1,this.fill=!1,this.isarc=!1,this.fillRect=!1,this.strokeRect=!1,this.clearRect=!1,this.strokeStyle="#999999",this.fillStyle="#999999",e.extend(!0,this,t)},e.jqplot.ShapeRenderer.prototype.init=function(t){e.extend(!0,this,t)},e.jqplot.ShapeRenderer.prototype.draw=function(t,n,i){t.save();var a=null!=i?i:{},s=null!=a.fill?a.fill:this.fill,r=null!=a.closePath?a.closePath:this.closePath,o=null!=a.fillRect?a.fillRect:this.fillRect,l=null!=a.strokeRect?a.strokeRect:this.strokeRect,c=null!=a.clearRect?a.clearRect:this.clearRect,d=null!=a.isarc?a.isarc:this.isarc,h=null!=a.linePattern?a.linePattern:this.linePattern,u=e.jqplot.LinePattern(t,h);if(t.lineWidth=a.lineWidth||this.lineWidth,t.lineJoin=a.lineJoin||this.lineJoin,t.lineCap=a.lineCap||this.lineCap,t.strokeStyle=a.strokeStyle||a.color||this.strokeStyle,t.fillStyle=a.fillStyle||this.fillStyle,t.beginPath(),d)return t.arc(n[0],n[1],n[2],n[3],n[4],!0),r&&t.closePath(),s?t.fill():t.stroke(),t.restore(),void 0;if(c)return t.clearRect(n[0],n[1],n[2],n[3]),t.restore(),void 0;if(o||l){if(o&&t.fillRect(n[0],n[1],n[2],n[3]),l)return t.strokeRect(n[0],n[1],n[2],n[3]),t.restore(),void 0}else if(n&&n.length){for(var p=!0,f=0;f<n.length;f++)null!=n[f][0]&&null!=n[f][1]?p?(u.moveTo(n[f][0],n[f][1]),p=!1):u.lineTo(n[f][0],n[f][1]):p=!0;r&&u.closePath(),s?t.fill():t.stroke()}t.restore()},e.jqplot.TableLegendRenderer=function(){},e.jqplot.TableLegendRenderer.prototype.init=function(t){e.extend(!0,this,t)},e.jqplot.TableLegendRenderer.prototype.addrow=function(t,n,i,a){var s,r,o,l,c,d=i?this.rowSpacing+"px":"0px";o=document.createElement("tr"),s=e(o),s.addClass("jqplot-table-legend"),o=null,a?s.prependTo(this._elem):s.appendTo(this._elem),this.showSwatches&&(r=e(document.createElement("td")),r.addClass("jqplot-table-legend jqplot-table-legend-swatch"),r.css({textAlign:"center",paddingTop:d}),l=e(document.createElement("div")),l.addClass("jqplot-table-legend-swatch-outline"),c=e(document.createElement("div")),c.addClass("jqplot-table-legend-swatch"),c.css({backgroundColor:n,borderColor:n}),s.append(r.append(l.append(c)))),this.showLabels&&(r=e(document.createElement("td")),r.addClass("jqplot-table-legend jqplot-table-legend-label"),r.css("paddingTop",d),s.append(r),this.escapeHtml?r.text(t):r.html(t)),r=null,l=null,c=null,s=null,o=null},e.jqplot.TableLegendRenderer.prototype.draw=function(){if(this._elem&&(this._elem.emptyForce(),this._elem=null),this.show){var t=this._series,n=document.createElement("table");this._elem=e(n),this._elem.addClass("jqplot-table-legend");var i={position:"absolute"};this.background&&(i.background=this.background),this.border&&(i.border=this.border),this.fontSize&&(i.fontSize=this.fontSize),this.fontFamily&&(i.fontFamily=this.fontFamily),this.textColor&&(i.textColor=this.textColor),null!=this.marginTop&&(i.marginTop=this.marginTop),null!=this.marginBottom&&(i.marginBottom=this.marginBottom),null!=this.marginLeft&&(i.marginLeft=this.marginLeft),null!=this.marginRight&&(i.marginRight=this.marginRight);for(var a,s=!1,r=!1,o=0;o<t.length;o++)if(a=t[o],(a._stack||a.renderer.constructor==e.jqplot.BezierCurveRenderer)&&(r=!0),a.show&&a.showLabel){var l=this.labels[o]||a.label.toString();
if(l){var c=a.color;r&&o<t.length-1?s=!0:r&&o==t.length-1&&(s=!1),this.renderer.addrow.call(this,l,c,s,r),s=!0}for(var d=0;d<e.jqplot.addLegendRowHooks.length;d++){var h=e.jqplot.addLegendRowHooks[d].call(this,a);h&&(this.renderer.addrow.call(this,h.label,h.color,s),s=!0)}l=null}}return this._elem},e.jqplot.TableLegendRenderer.prototype.pack=function(e){if(this.show)if("insideGrid"==this.placement)switch(this.location){case"nw":var t=e.left,n=e.top;this._elem.css("left",t),this._elem.css("top",n);break;case"n":var t=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2,n=e.top;this._elem.css("left",t),this._elem.css("top",n);break;case"ne":var t=e.right,n=e.top;this._elem.css({right:t,top:n});break;case"e":var t=e.right,n=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({right:t,top:n});break;case"se":var t=e.right,n=e.bottom;this._elem.css({right:t,bottom:n});break;case"s":var t=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2,n=e.bottom;this._elem.css({left:t,bottom:n});break;case"sw":var t=e.left,n=e.bottom;this._elem.css({left:t,bottom:n});break;case"w":var t=e.left,n=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({left:t,top:n});break;default:var t=e.right,n=e.bottom;this._elem.css({right:t,bottom:n})}else if("outside"==this.placement)switch(this.location){case"nw":var t=this._plotDimensions.width-e.left,n=e.top;this._elem.css("right",t),this._elem.css("top",n);break;case"n":var t=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2,n=this._plotDimensions.height-e.top;this._elem.css("left",t),this._elem.css("bottom",n);break;case"ne":var t=this._plotDimensions.width-e.right,n=e.top;this._elem.css({left:t,top:n});break;case"e":var t=this._plotDimensions.width-e.right,n=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({left:t,top:n});break;case"se":var t=this._plotDimensions.width-e.right,n=e.bottom;this._elem.css({left:t,bottom:n});break;case"s":var t=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2,n=this._plotDimensions.height-e.bottom;this._elem.css({left:t,top:n});break;case"sw":var t=this._plotDimensions.width-e.left,n=e.bottom;this._elem.css({right:t,bottom:n});break;case"w":var t=this._plotDimensions.width-e.left,n=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({right:t,top:n});break;default:var t=e.right,n=e.bottom;this._elem.css({right:t,bottom:n})}else switch(this.location){case"nw":this._elem.css({left:0,top:e.top});break;case"n":var t=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;this._elem.css({left:t,top:e.top});break;case"ne":this._elem.css({right:0,top:e.top});break;case"e":var n=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({right:e.right,top:n});break;case"se":this._elem.css({right:e.right,bottom:e.bottom});break;case"s":var t=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;this._elem.css({left:t,bottom:e.bottom});break;case"sw":this._elem.css({left:e.left,bottom:e.bottom});break;case"w":var n=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({left:e.left,top:n});break;default:this._elem.css({right:e.right,bottom:e.bottom})}},e.jqplot.ThemeEngine=function(){this.themes={},this.activeTheme=null},e.jqplot.ThemeEngine.prototype.init=function(){var t,n,i,a=new e.jqplot.Theme({_name:"Default"});for(t in a.target)a.target[t]="textColor"==t?this.target.css("color"):this.target.css(t);if(this.title.show&&this.title._elem)for(t in a.title)a.title[t]="textColor"==t?this.title._elem.css("color"):this.title._elem.css(t);for(t in a.grid)a.grid[t]=this.grid[t];if(null==a.grid.backgroundColor&&null!=this.grid.background&&(a.grid.backgroundColor=this.grid.background),this.legend.show&&this.legend._elem)for(t in a.legend)a.legend[t]="textColor"==t?this.legend._elem.css("color"):this.legend._elem.css(t);var s;for(n=0;n<this.series.length;n++){s=this.series[n],s.renderer.constructor==e.jqplot.LineRenderer?a.series.push(new O):s.renderer.constructor==e.jqplot.BarRenderer?a.series.push(new q):s.renderer.constructor==e.jqplot.PieRenderer?a.series.push(new j):s.renderer.constructor==e.jqplot.DonutRenderer?a.series.push(new L):s.renderer.constructor==e.jqplot.FunnelRenderer?a.series.push(new U):s.renderer.constructor==e.jqplot.MeterGaugeRenderer?a.series.push(new z):a.series.push({});for(t in a.series[n])a.series[n][t]=s[t]}var r,o;for(t in this.axes){if(o=this.axes[t],r=a.axes[t]=new B,r.borderColor=o.borderColor,r.borderWidth=o.borderWidth,o._ticks&&o._ticks[0])for(i in r.ticks)o._ticks[0].hasOwnProperty(i)?r.ticks[i]=o._ticks[0][i]:o._ticks[0]._elem&&(r.ticks[i]=o._ticks[0]._elem.css(i));if(o._label&&o._label.show)for(i in r.label)o._label[i]?r.label[i]=o._label[i]:o._label._elem&&(r.label[i]="textColor"==i?o._label._elem.css("color"):o._label._elem.css(i))}this.themeEngine._add(a),this.themeEngine.activeTheme=this.themeEngine.themes[a._name]},e.jqplot.ThemeEngine.prototype.get=function(e){return e?this.themes[e]:this.activeTheme},e.jqplot.ThemeEngine.prototype.getThemeNames=function(){var e=[];for(var t in this.themes)e.push(t);return e.sort(D)},e.jqplot.ThemeEngine.prototype.getThemes=function(){var e=[],t=[];for(var n in this.themes)e.push(n);e.sort(D);for(var i=0;i<e.length;i++)t.push(this.themes[e[i]]);return t},e.jqplot.ThemeEngine.prototype.activate=function(t,n){var i=!1;if(!n&&this.activeTheme&&this.activeTheme._name&&(n=this.activeTheme._name),!this.themes.hasOwnProperty(n))throw new Error("No theme of that name");var a=this.themes[n];this.activeTheme=a;var s,r=["xaxis","x2axis","yaxis","y2axis"];for(m=0;m<r.length;m++){var o=r[m];null!=a.axesStyles.borderColor&&(t.axes[o].borderColor=a.axesStyles.borderColor),null!=a.axesStyles.borderWidth&&(t.axes[o].borderWidth=a.axesStyles.borderWidth)}for(var l in t.axes){var c=t.axes[l];if(c.show){var d=a.axes[l]||{},h=a.axesStyles,u=e.jqplot.extend(!0,{},d,h);if(s=null!=a.axesStyles.borderColor?a.axesStyles.borderColor:u.borderColor,null!=u.borderColor&&(c.borderColor=u.borderColor,i=!0),s=null!=a.axesStyles.borderWidth?a.axesStyles.borderWidth:u.borderWidth,null!=u.borderWidth&&(c.borderWidth=u.borderWidth,i=!0),c._ticks&&c._ticks[0])for(var p in u.ticks)s=u.ticks[p],null!=s&&(c.tickOptions[p]=s,c._ticks=[],i=!0);if(c._label&&c._label.show)for(var p in u.label)s=u.label[p],null!=s&&(c.labelOptions[p]=s,i=!0)}}for(var f in a.grid)null!=a.grid[f]&&(t.grid[f]=a.grid[f]);if(i||t.grid.draw(),t.legend.show)for(f in a.legend)null!=a.legend[f]&&(t.legend[f]=a.legend[f]);if(t.title.show)for(f in a.title)null!=a.title[f]&&(t.title[f]=a.title[f]);var m;for(m=0;m<a.series.length;m++){var g={};for(f in a.series[m])s=null!=a.seriesStyles[f]?a.seriesStyles[f]:a.series[m][f],null!=s&&(g[f]=s,"color"==f?(t.series[m].renderer.shapeRenderer.fillStyle=s,t.series[m].renderer.shapeRenderer.strokeStyle=s,t.series[m][f]=s):"lineWidth"==f||"linePattern"==f?(t.series[m].renderer.shapeRenderer[f]=s,t.series[m][f]=s):"markerOptions"==f?(N(t.series[m].markerOptions,s),N(t.series[m].markerRenderer,s)):t.series[m][f]=s,i=!0)}i&&(t.target.empty(),t.draw());for(f in a.target)null!=a.target[f]&&t.target.css(f,a.target[f])},e.jqplot.ThemeEngine.prototype._add=function(e,t){if(t&&(e._name=t),e._name||(e._name=Date.parse(new Date)),this.themes.hasOwnProperty(e._name))throw new Error("jqplot.ThemeEngine Error: Theme already in use");this.themes[e._name]=e},e.jqplot.ThemeEngine.prototype.remove=function(e){return"Default"==e?!1:delete this.themes[e]},e.jqplot.ThemeEngine.prototype.newTheme=function(t,n){"object"==typeof t&&(n=n||t,t=null),t=n&&n._name?n._name:t||Date.parse(new Date);var i=this.copy(this.themes.Default._name,t);return e.jqplot.extend(i,n),i},e.jqplot.clone=A,e.jqplot.merge=N,e.jqplot.extend=function(){var t,n=arguments[0]||{},i=1,a=arguments.length,s=!1;for("boolean"==typeof n&&(s=n,n=arguments[1]||{},i=2),"object"!=typeof n&&"[object Function]"===!toString.call(n)&&(n={});a>i;i++)if(null!=(t=arguments[i]))for(var r in t){var o=n[r],l=t[r];n!==l&&(s&&l&&"object"==typeof l&&!l.nodeType?n[r]=e.jqplot.extend(s,o||(null!=l.length?[]:{}),l):l!==I&&(n[r]=l))}return n},e.jqplot.ThemeEngine.prototype.rename=function(e,t){if("Default"==e||"Default"==t)throw new Error("jqplot.ThemeEngine Error: Cannot rename from/to Default");if(this.themes.hasOwnProperty(t))throw new Error("jqplot.ThemeEngine Error: New name already in use.");if(this.themes.hasOwnProperty(e)){var n=this.copy(e,t);return this.remove(e),n}throw new Error("jqplot.ThemeEngine Error: Old name or new name invalid")},e.jqplot.ThemeEngine.prototype.copy=function(t,n,i){if("Default"==n)throw new Error("jqplot.ThemeEngine Error: Cannot copy over Default theme");if(!this.themes.hasOwnProperty(t)){var a="jqplot.ThemeEngine Error: Source name invalid";throw new Error(a)}if(this.themes.hasOwnProperty(n)){var a="jqplot.ThemeEngine Error: Target name invalid";throw new Error(a)}var s=A(this.themes[t]);return s._name=n,e.jqplot.extend(!0,s,i),this._add(s),s},e.jqplot.Theme=function(t,n){"object"==typeof t&&(n=n||t,t=null),t=t||Date.parse(new Date),this._name=t,this.target={backgroundColor:null},this.legend={textColor:null,fontFamily:null,fontSize:null,border:null,background:null},this.title={textColor:null,fontFamily:null,fontSize:null,textAlign:null},this.seriesStyles={},this.series=[],this.grid={drawGridlines:null,gridLineColor:null,gridLineWidth:null,backgroundColor:null,borderColor:null,borderWidth:null,shadow:null},this.axesStyles={label:{},ticks:{}},this.axes={},"string"==typeof n?this._name=n:"object"==typeof n&&e.jqplot.extend(!0,this,n)};var B=function(){this.borderColor=null,this.borderWidth=null,this.ticks=new R,this.label=new F},R=function(){this.show=null,this.showGridline=null,this.showLabel=null,this.showMark=null,this.size=null,this.textColor=null,this.whiteSpace=null,this.fontSize=null,this.fontFamily=null},F=function(){this.textColor=null,this.whiteSpace=null,this.fontSize=null,this.fontFamily=null,this.fontWeight=null},O=function(){this.color=null,this.lineWidth=null,this.linePattern=null,this.shadow=null,this.fillColor=null,this.showMarker=null,this.markerOptions=new H},H=function(){this.show=null,this.style=null,this.lineWidth=null,this.size=null,this.color=null,this.shadow=null},q=function(){this.color=null,this.seriesColors=null,this.lineWidth=null,this.shadow=null,this.barPadding=null,this.barMargin=null,this.barWidth=null,this.highlightColors=null},j=function(){this.seriesColors=null,this.padding=null,this.sliceMargin=null,this.fill=null,this.shadow=null,this.startAngle=null,this.lineWidth=null,this.highlightColors=null},L=function(){this.seriesColors=null,this.padding=null,this.sliceMargin=null,this.fill=null,this.shadow=null,this.startAngle=null,this.lineWidth=null,this.innerDiameter=null,this.thickness=null,this.ringMargin=null,this.highlightColors=null},U=function(){this.color=null,this.lineWidth=null,this.shadow=null,this.padding=null,this.sectionMargin=null,this.seriesColors=null,this.highlightColors=null},z=function(){this.padding=null,this.backgroundColor=null,this.ringColor=null,this.tickColor=null,this.ringWidth=null,this.intervalColors=null,this.intervalInnerRadius=null,this.intervalOuterRadius=null,this.hubRadius=null,this.needleThickness=null,this.needlePad=null};e.fn.jqplotChildText=function(){return e(this).contents().filter(function(){return 3==this.nodeType}).text()},e.fn.jqplotGetComputedFontStyle=function(){for(var e=window.getComputedStyle?window.getComputedStyle(this[0],""):this[0].currentStyle,t=e["font-style"]?["font-style","font-weight","font-size","font-family"]:["fontStyle","fontWeight","fontSize","fontFamily"],n=[],i=0;i<t.length;++i){var a=String(e[t[i]]);a&&"normal"!=a&&n.push(a)}return n.join(" ")},e.fn.jqplotToImageCanvas=function(t){function n(t){var n=parseInt(e(t).css("line-height"),10);return isNaN(n)&&(n=1.2*parseInt(e(t).css("font-size"),10)),n}function i(t,i,a,s,r,o){for(var l=n(t),c=e(t).innerWidth(),d=(e(t).innerHeight(),a.split(/\s+/)),h=d.length,u="",p=[],f=r,m=s,g=0;h>g;g++)u+=d[g],i.measureText(u).width>c&&(p.push(g),u="",g--);if(0===p.length)"center"===e(t).css("textAlign")&&(m=s+(o-i.measureText(u).width)/2-v),i.fillText(a,m,r);else{u=d.slice(0,p[0]).join(" "),"center"===e(t).css("textAlign")&&(m=s+(o-i.measureText(u).width)/2-v),i.fillText(u,m,f),f+=l;for(var g=1,b=p.length;b>g;g++)u=d.slice(p[g-1],p[g]).join(" "),"center"===e(t).css("textAlign")&&(m=s+(o-i.measureText(u).width)/2-v),i.fillText(u,m,f),f+=l;u=d.slice(p[g-1],d.length).join(" "),"center"===e(t).css("textAlign")&&(m=s+(o-i.measureText(u).width)/2-v),i.fillText(u,m,f)}}function a(t,n,s){var r=t.tagName.toLowerCase(),o=e(t).position(),l=window.getComputedStyle?window.getComputedStyle(t,""):t.currentStyle,c=n+o.left+parseInt(l.marginLeft,10)+parseInt(l.borderLeftWidth,10)+parseInt(l.paddingLeft,10),d=s+o.top+parseInt(l.marginTop,10)+parseInt(l.borderTopWidth,10)+parseInt(l.paddingTop,10),h=u.width;if("div"!=r&&"span"!=r||e(t).hasClass("jqplot-highlighter-tooltip"))if("table"===r&&e(t).hasClass("jqplot-table-legend")){k.strokeStyle=e(t).css("border-top-color"),k.fillStyle=e(t).css("background-color"),k.fillRect(c,d,e(t).innerWidth(),e(t).innerHeight()),parseInt(e(t).css("border-top-width"),10)>0&&k.strokeRect(c,d,e(t).innerWidth(),e(t).innerHeight()),e(t).find("div.jqplot-table-legend-swatch-outline").each(function(){var t=e(this);k.strokeStyle=t.css("border-top-color");var n=c+t.position().left,i=d+t.position().top;k.strokeRect(n,i,t.innerWidth(),t.innerHeight()),n+=parseInt(t.css("padding-left"),10),i+=parseInt(t.css("padding-top"),10);var a=t.innerHeight()-2*parseInt(t.css("padding-top"),10),s=t.innerWidth()-2*parseInt(t.css("padding-left"),10),r=t.children("div.jqplot-table-legend-swatch");k.fillStyle=r.css("background-color"),k.fillRect(n,i,s,a)}),e(t).find("td.jqplot-table-legend-label").each(function(){var t=e(this),n=c+t.position().left,a=d+t.position().top+parseInt(t.css("padding-top"),10);k.font=t.jqplotGetComputedFontStyle(),k.fillStyle=t.css("color"),i(t,k,t.text(),n,a,h)})}else"canvas"==r&&k.drawImage(t,c,d);else{e(t).children().each(function(){a(this,c,d)});var p=e(t).jqplotChildText();p&&(k.font=e(t).jqplotGetComputedFontStyle(),k.fillStyle=e(t).css("color"),i(t,k,p,c,d,h))}}t=t||{};var s=null==t.x_offset?0:t.x_offset,r=null==t.y_offset?0:t.y_offset,o=null==t.backgroundColor?"rgb(255,255,255)":t.backgroundColor;if(0==e(this).width()||0==e(this).height())return null;if(e.jqplot.use_excanvas)return null;for(var l,c,d,h,u=document.createElement("canvas"),p=e(this).outerHeight(!0),f=e(this).outerWidth(!0),m=e(this).offset(),g=m.left,b=m.top,v=0,y=0,_=["jqplot-table-legend","jqplot-xaxis-tick","jqplot-x2axis-tick","jqplot-yaxis-tick","jqplot-y2axis-tick","jqplot-y3axis-tick","jqplot-y4axis-tick","jqplot-y5axis-tick","jqplot-y6axis-tick","jqplot-y7axis-tick","jqplot-y8axis-tick","jqplot-y9axis-tick","jqplot-xaxis-label","jqplot-x2axis-label","jqplot-yaxis-label","jqplot-y2axis-label","jqplot-y3axis-label","jqplot-y4axis-label","jqplot-y5axis-label","jqplot-y6axis-label","jqplot-y7axis-label","jqplot-y8axis-label","jqplot-y9axis-label"],E=0;E<_.length;E++)e(this).find("."+_[E]).each(function(){l=e(this).offset().top-b,c=e(this).offset().left-g,h=c+e(this).outerWidth(!0)+v,d=l+e(this).outerHeight(!0)+y,-v>c&&(f=f-v-c,v=-c),-y>l&&(p=p-y-l,y=-l),h>f&&(f=h),d>p&&(p=d)});u.width=f+Number(s),u.height=p+Number(r);var k=u.getContext("2d");return k.save(),k.fillStyle=o,k.fillRect(0,0,u.width,u.height),k.restore(),k.translate(v,y),k.textAlign="left",k.textBaseline="top",e(this).children().each(function(){a(this,s,r)}),u},e.fn.jqplotToImageStr=function(t){var n=e(this).jqplotToImageCanvas(t);return n?n.toDataURL("image/png"):null},e.fn.jqplotToImageElem=function(t){var n=document.createElement("img"),i=e(this).jqplotToImageStr(t);return n.src=i,n},e.fn.jqplotToImageElemStr=function(t){var n="<img src="+e(this).jqplotToImageStr(t)+" />";return n},e.fn.jqplotSaveImage=function(){var t=e(this).jqplotToImageStr({});t&&(window.location.href=t.replace("image/png","image/octet-stream"))},e.fn.jqplotViewImage=function(){{var t=e(this).jqplotToImageElemStr({});e(this).jqplotToImageStr({})}if(t){var n=window.open("");n.document.open("image/png"),n.document.write(t),n.document.close(),n=null}};/** 
     * @description
     * <p>Object with extended date parsing and formatting capabilities.
     * This library borrows many concepts and ideas from the Date Instance 
     * Methods by Ken Snyder along with some parts of Ken's actual code.</p>
     *
     * <p>jsDate takes a different approach by not extending the built-in 
     * Date Object, improving date parsing, allowing for multiple formatting 
     * syntaxes and multiple and more easily expandable localization.</p>
     * 
     * @author Chris Leonello
     * @date #date#
     * @version #VERSION#
     * @copyright (c) 2010-2013 Chris Leonello
     * jsDate is currently available for use in all personal or commercial projects 
     * under both the MIT and GPL version 2.0 licenses. This means that you can 
     * choose the license that best suits your project and use it accordingly.
     * 
     * <p>Ken's original Date Instance Methods and copyright notice:</p>
     * <pre>
     * Ken Snyder (ken d snyder at gmail dot com)
     * 2008-09-10
     * version 2.0.2 (http://kendsnyder.com/sandbox/date/)     
     * Creative Commons Attribution License 3.0 (http://creativecommons.org/licenses/by/3.0/)
     * </pre>
     * 
     * @class
     * @name jsDate
     * @param  {String | Number | Array | Date&nbsp;Object | Options&nbsp;Object} arguments Optional arguments, either a parsable date/time string,
     * a JavaScript timestamp, an array of numbers of form [year, month, day, hours, minutes, seconds, milliseconds],
     * a Date object, or an options object of form {syntax: "perl", date:some Date} where all options are optional.
     */
var W=function(){switch(this.syntax=W.config.syntax,this._type="jsDate",this.proxy=new Date,this.options={},this.locale=W.regional.getLocale(),this.formatString="",this.defaultCentury=W.config.defaultCentury,arguments.length){case 0:break;case 1:if("[object Object]"==M(arguments[0])&&"jsDate"!=arguments[0]._type){var e=this.options=arguments[0];this.syntax=e.syntax||this.syntax,this.defaultCentury=e.defaultCentury||this.defaultCentury,this.proxy=W.createDate(e.date)}else this.proxy=W.createDate(arguments[0]);break;default:for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);this.proxy=new Date,this.proxy.setFullYear.apply(this.proxy,t.slice(0,3)),t.slice(3).length&&this.proxy.setHours.apply(this.proxy,t.slice(3))}};W.config={defaultLocale:"en",syntax:"perl",defaultCentury:1900},W.prototype.add=function(e,t){var n=$[t]||$.day;return"number"==typeof n?this.proxy.setTime(this.proxy.getTime()+n*e):n.add(this,e),this},W.prototype.clone=function(){return new W(this.proxy.getTime())},W.prototype.getUtcOffset=function(){return 6e4*this.proxy.getTimezoneOffset()},W.prototype.diff=function(e,t,n){if(e=new W(e),null===e)return null;var i=$[t]||$.day;if("number"==typeof i)var a=(this.proxy.getTime()-e.proxy.getTime())/i;else var a=i.diff(this.proxy,e.proxy);return n?a:Math[a>0?"floor":"ceil"](a)},W.prototype.getAbbrDayName=function(){return W.regional[this.locale].dayNamesShort[this.proxy.getDay()]},W.prototype.getAbbrMonthName=function(){return W.regional[this.locale].monthNamesShort[this.proxy.getMonth()]},W.prototype.getAMPM=function(){return this.proxy.getHours()>=12?"PM":"AM"},W.prototype.getAmPm=function(){return this.proxy.getHours()>=12?"pm":"am"},W.prototype.getCentury=function(){return parseInt(this.proxy.getFullYear()/100,10)},W.prototype.getDate=function(){return this.proxy.getDate()},W.prototype.getDay=function(){return this.proxy.getDay()},W.prototype.getDayOfWeek=function(){var e=this.proxy.getDay();return 0===e?7:e},W.prototype.getDayOfYear=function(){var e=this.proxy,t=e-new Date(""+e.getFullYear()+"/1/1 GMT");return t+=6e4*e.getTimezoneOffset(),e=null,parseInt(t/6e4/60/24,10)+1},W.prototype.getDayName=function(){return W.regional[this.locale].dayNames[this.proxy.getDay()]},W.prototype.getFullWeekOfYear=function(){var e=this.proxy,t=this.getDayOfYear(),n=6-e.getDay(),i=parseInt((t+n)/7,10);return i},W.prototype.getFullYear=function(){return this.proxy.getFullYear()},W.prototype.getGmtOffset=function(){var e=this.proxy.getTimezoneOffset()/60,t=0>e?"+":"-";return e=Math.abs(e),t+G(Math.floor(e),2)+":"+G(e%1*60,2)},W.prototype.getHours=function(){return this.proxy.getHours()},W.prototype.getHours12=function(){var e=this.proxy.getHours();return e>12?e-12:0==e?12:e},W.prototype.getIsoWeek=function(){var e=this.proxy,t=this.getWeekOfYear(),n=new Date(""+e.getFullYear()+"/1/1").getDay(),i=t+(n>4||1>=n?0:1);return 53==i&&new Date(""+e.getFullYear()+"/12/31").getDay()<4?i=1:0===i&&(e=new W(new Date(""+(e.getFullYear()-1)+"/12/31")),i=e.getIsoWeek()),e=null,i},W.prototype.getMilliseconds=function(){return this.proxy.getMilliseconds()},W.prototype.getMinutes=function(){return this.proxy.getMinutes()},W.prototype.getMonth=function(){return this.proxy.getMonth()},W.prototype.getMonthName=function(){return W.regional[this.locale].monthNames[this.proxy.getMonth()]},W.prototype.getMonthNumber=function(){return this.proxy.getMonth()+1},W.prototype.getSeconds=function(){return this.proxy.getSeconds()},W.prototype.getShortYear=function(){return this.proxy.getYear()%100},W.prototype.getTime=function(){return this.proxy.getTime()},W.prototype.getTimezoneAbbr=function(){return this.proxy.toString().replace(/^.*\(([^)]+)\)$/,"$1")},W.prototype.getTimezoneName=function(){var e=/(?:\((.+)\)$| ([A-Z]{3}) )/.exec(this.toString());return e[1]||e[2]||"GMT"+this.getGmtOffset()},W.prototype.getTimezoneOffset=function(){return this.proxy.getTimezoneOffset()},W.prototype.getWeekOfYear=function(){var e=this.getDayOfYear(),t=7-this.getDayOfWeek(),n=parseInt((e+t)/7,10);return n},W.prototype.getUnix=function(){return Math.round(this.proxy.getTime()/1e3,0)},W.prototype.getYear=function(){return this.proxy.getYear()},W.prototype.next=function(e){return e=e||"day",this.clone().add(1,e)},W.prototype.set=function(){switch(arguments.length){case 0:this.proxy=new Date;break;case 1:if("[object Object]"==M(arguments[0])&&"jsDate"!=arguments[0]._type){var e=this.options=arguments[0];this.syntax=e.syntax||this.syntax,this.defaultCentury=e.defaultCentury||this.defaultCentury,this.proxy=W.createDate(e.date)}else this.proxy=W.createDate(arguments[0]);break;default:for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);this.proxy=new Date,this.proxy.setFullYear.apply(this.proxy,t.slice(0,3)),t.slice(3).length&&this.proxy.setHours.apply(this.proxy,t.slice(3))}return this},W.prototype.setDate=function(e){return this.proxy.setDate(e),this},W.prototype.setFullYear=function(){return this.proxy.setFullYear.apply(this.proxy,arguments),this},W.prototype.setHours=function(){return this.proxy.setHours.apply(this.proxy,arguments),this},W.prototype.setMilliseconds=function(e){return this.proxy.setMilliseconds(e),this},W.prototype.setMinutes=function(){return this.proxy.setMinutes.apply(this.proxy,arguments),this},W.prototype.setMonth=function(){return this.proxy.setMonth.apply(this.proxy,arguments),this},W.prototype.setSeconds=function(){return this.proxy.setSeconds.apply(this.proxy,arguments),this},W.prototype.setTime=function(e){return this.proxy.setTime(e),this},W.prototype.setYear=function(){return this.proxy.setYear.apply(this.proxy,arguments),this},W.prototype.strftime=function(e){return e=e||this.formatString||W.regional[this.locale].formatString,W.strftime(this,e,this.syntax)},W.prototype.toString=function(){return this.proxy.toString()},W.prototype.toYmdInt=function(){return 1e4*this.proxy.getFullYear()+100*this.getMonthNumber()+this.proxy.getDate()},W.regional={en:{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],formatString:"%Y-%m-%d %H:%M:%S"},fr:{monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],formatString:"%Y-%m-%d %H:%M:%S"},de:{monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],formatString:"%Y-%m-%d %H:%M:%S"},es:{monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],formatString:"%Y-%m-%d %H:%M:%S"},ru:{monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],formatString:"%Y-%m-%d %H:%M:%S"},ar:{monthNames:["كانون الثاني","شباط","آذار","نيسان","آذار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["السبت","الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة"],dayNamesShort:["سبت","أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة"],formatString:"%Y-%m-%d %H:%M:%S"},pt:{monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],formatString:"%Y-%m-%d %H:%M:%S"},"pt-BR":{monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],formatString:"%Y-%m-%d %H:%M:%S"},pl:{monthNames:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthNamesShort:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"],dayNames:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],dayNamesShort:["Ni","Pn","Wt","Śr","Cz","Pt","Sb"],formatString:"%Y-%m-%d %H:%M:%S"},nl:{monthNames:["Januari","Februari","Maart","April","Mei","Juni","July","Augustus","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:",".Zaterdag,dayNamesShort:["Zo","Ma","Di","Wo","Do","Vr","Za"],formatString:"%Y-%m-%d %H:%M:%S"},sv:{monthNames:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],monthNamesShort:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],dayNames:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],dayNamesShort:["sön","mån","tis","ons","tor","fre","lör"],formatString:"%Y-%m-%d %H:%M:%S"}},W.regional["en-US"]=W.regional["en-GB"]=W.regional.en,W.regional.getLocale=function(){var e=W.config.defaultLocale;return document&&document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang&&(e=document.getElementsByTagName("html")[0].lang,W.regional.hasOwnProperty(e)||(e=W.config.defaultLocale)),e};var V=864e5,G=function(e,t){e=String(e);var n=t-e.length,i=String(Math.pow(10,n)).slice(1);return i.concat(e)},$={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:V,week:7*V,month:{add:function(e,t){$.year.add(e,Math[t>0?"floor":"ceil"](t/12));var n=e.getMonth()+t%12;12==n?(n=0,e.setYear(e.getFullYear()+1)):-1==n&&(n=11,e.setYear(e.getFullYear()-1)),e.setMonth(n)},diff:function(e,t){var n=e.getFullYear()-t.getFullYear(),i=e.getMonth()-t.getMonth()+12*n,a=e.getDate()-t.getDate();return i+a/30}},year:{add:function(e,t){e.setYear(e.getFullYear()+Math[t>0?"floor":"ceil"](t))},diff:function(e,t){return $.month.diff(e,t)/12}}};for(var J in $)"s"!=J.substring(J.length-1)&&($[J+"s"]=$[J]);var Y=function(e,t,n){if(W.formats[n].shortcuts[t])return W.strftime(e,W.formats[n].shortcuts[t],n);var i=(W.formats[n].codes[t]||"").split("."),a=e["get"+i[0]]?e["get"+i[0]]():"";return i[1]&&(a=G(a,i[1])),a};W.strftime=function(e,t,n,i){var a="perl",s=W.regional.getLocale();n&&W.formats.hasOwnProperty(n)?a=n:n&&W.regional.hasOwnProperty(n)&&(s=n),i&&W.formats.hasOwnProperty(i)?a=i:i&&W.regional.hasOwnProperty(i)&&(s=i),("[object Object]"!=M(e)||"jsDate"!=e._type)&&(e=new W(e),e.locale=s),t||(t=e.formatString||W.regional[s].formatString);for(var r,o=t||"%Y-%m-%d",l="";o.length>0;)(r=o.match(W.formats[a].codes.matcher))?(l+=o.slice(0,r.index),l+=(r[1]||"")+Y(e,r[2],a),o=o.slice(r.index+r[0].length)):(l+=o,o="");return l},W.formats={ISO:"%Y-%m-%dT%H:%M:%S.%N%G",SQL:"%Y-%m-%d %H:%M:%S"},W.formats.perl={codes:{matcher:/()%(#?(%|[a-z]))/i,Y:"FullYear",y:"ShortYear.2",m:"MonthNumber.2","#m":"MonthNumber",B:"MonthName",b:"AbbrMonthName",d:"Date.2","#d":"Date",e:"Date",A:"DayName",a:"AbbrDayName",w:"Day",H:"Hours.2","#H":"Hours",I:"Hours12.2","#I":"Hours12",p:"AMPM",M:"Minutes.2","#M":"Minutes",S:"Seconds.2","#S":"Seconds",s:"Unix",N:"Milliseconds.3","#N":"Milliseconds",O:"TimezoneOffset",Z:"TimezoneName",G:"GmtOffset"},shortcuts:{F:"%Y-%m-%d",T:"%H:%M:%S",X:"%H:%M:%S",x:"%m/%d/%y",D:"%m/%d/%y","#c":"%a %b %e %H:%M:%S %Y",v:"%e-%b-%Y",R:"%H:%M",r:"%I:%M:%S %p",t:"	",n:"\n","%":"%"}},W.formats.php={codes:{matcher:/()%((%|[a-z]))/i,a:"AbbrDayName",A:"DayName",d:"Date.2",e:"Date",j:"DayOfYear.3",u:"DayOfWeek",w:"Day",U:"FullWeekOfYear.2",V:"IsoWeek.2",W:"WeekOfYear.2",b:"AbbrMonthName",B:"MonthName",m:"MonthNumber.2",h:"AbbrMonthName",C:"Century.2",y:"ShortYear.2",Y:"FullYear",H:"Hours.2",I:"Hours12.2",l:"Hours12",p:"AMPM",P:"AmPm",M:"Minutes.2",S:"Seconds.2",s:"Unix",O:"TimezoneOffset",z:"GmtOffset",Z:"TimezoneAbbr"},shortcuts:{D:"%m/%d/%y",F:"%Y-%m-%d",T:"%H:%M:%S",X:"%H:%M:%S",x:"%m/%d/%y",R:"%H:%M",r:"%I:%M:%S %p",t:"	",n:"\n","%":"%"}},W.createDate=function(e){function t(e,t){var n,i,a,s,r=parseFloat(t[1]),o=parseFloat(t[2]),l=parseFloat(t[3]),c=W.config.defaultCentury;return r>31?(i=l,a=o,n=c+r):(i=o,a=r,n=c+l),s=a+"/"+i+"/"+n,e.replace(/^([0-9]{1,2})[-\/]([0-9]{1,2})[-\/]([0-9]{1,2})/,s)}if(null==e)return new Date;if(e instanceof Date)return e;if("number"==typeof e)return new Date(e);var n=String(e).replace(/^\s*(.+)\s*$/g,"$1");n=n.replace(/^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,4})/,"$1/$2/$3"),n=n.replace(/^(3[01]|[0-2]?\d)[-\/]([a-z]{3,})[-\/](\d{4})/i,"$1 $2 $3");var i=n.match(/^(3[01]|[0-2]?\d)[-\/]([a-z]{3,})[-\/](\d{2})\D*/i);if(i&&i.length>3){var a=parseFloat(i[3]),s=W.config.defaultCentury+a;s=String(s),n=n.replace(/^(3[01]|[0-2]?\d)[-\/]([a-z]{3,})[-\/](\d{2})\D*/i,i[1]+" "+i[2]+" "+s)}i=n.match(/^([0-9]{1,2})[-\/]([0-9]{1,2})[-\/]([0-9]{1,2})[^0-9]/),i&&i.length>3&&(n=t(n,i));var i=n.match(/^([0-9]{1,2})[-\/]([0-9]{1,2})[-\/]([0-9]{1,2})$/);i&&i.length>3&&(n=t(n,i));for(var r,o,l,c=0,d=W.matchers.length,h=n;d>c;){if(o=Date.parse(h),!isNaN(o))return new Date(o);if(r=W.matchers[c],"function"==typeof r){if(l=r.call(W,h),l instanceof Date)return l}else h=n.replace(r[0],r[1]);c++}return 0/0},W.daysInMonth=function(e,t){return 2==t?29==new Date(e,1,29).getDate()?29:28:[I,31,I,31,30,31,30,31,31,30,31,30,31][t]},W.matchers=[[/(3[01]|[0-2]\d)\s*\.\s*(1[0-2]|0\d)\s*\.\s*([1-9]\d{3})/,"$2/$1/$3"],[/([1-9]\d{3})\s*-\s*(1[0-2]|0\d)\s*-\s*(3[01]|[0-2]\d)/,"$2/$3/$1"],function(e){var t=e.match(/^(?:(.+)\s+)?([012]?\d)(?:\s*\:\s*(\d\d))?(?:\s*\:\s*(\d\d(\.\d*)?))?\s*(am|pm)?\s*$/i);if(t){if(t[1]){var n=this.createDate(t[1]);if(isNaN(n))return}else{var n=new Date;n.setMilliseconds(0)}var i=parseFloat(t[2]);return t[6]&&(i="am"==t[6].toLowerCase()?12==i?0:i:12==i?12:i+12),n.setHours(i,parseInt(t[3]||0,10),parseInt(t[4]||0,10),1e3*(parseFloat(t[5]||0)||0)),n}return e},function(e){var t=e.match(/^(?:(.+))[T|\s+]([012]\d)(?:\:(\d\d))(?:\:(\d\d))(?:\.\d+)([\+\-]\d\d\:\d\d)$/i);if(t){if(t[1]){var n=this.createDate(t[1]);if(isNaN(n))return}else{var n=new Date;n.setMilliseconds(0)}var i=parseFloat(t[2]);return n.setHours(i,parseInt(t[3],10),parseInt(t[4],10),1e3*parseFloat(t[5])),n}return e},function(e){var t=e.match(/^([0-3]?\d)\s*[-\/.\s]{1}\s*([a-zA-Z]{3,9})\s*[-\/.\s]{1}\s*([0-3]?\d)$/);if(t){var n,i,a,s=new Date,r=W.config.defaultCentury,o=parseFloat(t[1]),l=parseFloat(t[3]);o>31?(i=l,n=r+o):(i=o,n=r+l);var a=x(t[2],W.regional[W.regional.getLocale()].monthNamesShort);return-1==a&&(a=x(t[2],W.regional[W.regional.getLocale()].monthNames)),s.setFullYear(n,a,i),s.setHours(0,0,0,0),s}return e}],e.jsDate=W,e.jqplot.sprintf=function(){function t(e,t,n,i){var a=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return i?e+a:a+e}function n(t){for(var n=new String(t),i=10;i>0&&n!=(n=n.replace(/^(\d+)(\d{3})/,"$1"+e.jqplot.sprintf.thousandsSeparator+"$2"));i--);return n}function i(e,n,i,a,s,r){var o=a-e.length;if(o>0){var l=" ";r&&(l="&nbsp;"),e=i||!s?t(e,a,l,i):e.slice(0,n.length)+t("",o,"0",!0)+e.slice(n.length)}return e}function a(e,n,a,s,r,o,l,c){var d=e>>>0;return a=a&&d&&{2:"0b",8:"0",16:"0x"}[n]||"",e=a+t(d.toString(n),o||0,"0",!1),i(e,a,s,r,l,c)}function s(e,t,n,a,s,r){return null!=a&&(e=e.slice(0,a)),i(e,"",t,n,s,r)}var r=arguments,o=0,l=r[o++];return l.replace(e.jqplot.sprintf.regex,function(l,c,d,h,u,p,f){if("%%"==l)return"%";for(var m=!1,g="",b=!1,v=!1,y=!1,_=!1,E=0;d&&E<d.length;E++)switch(d.charAt(E)){case" ":g=" ";break;case"+":g="+";break;case"-":m=!0;break;case"0":b=!0;break;case"#":v=!0;break;case"&":y=!0;break;case"'":_=!0}if(h=h?"*"==h?+r[o++]:"*"==h.charAt(0)?+r[h.slice(1,-1)]:+h:0,0>h&&(h=-h,m=!0),!isFinite(h))throw new Error("$.jqplot.sprintf: (minimum-)width must be finite");p=p?"*"==p?+r[o++]:"*"==p.charAt(0)?+r[p.slice(1,-1)]:+p:"fFeE".indexOf(f)>-1?6:"d"==f?0:void 0;var k=c?r[c.slice(0,-1)]:r[o++];switch(f){case"s":return null==k?"":s(String(k),m,h,p,b,y);case"c":return s(String.fromCharCode(+k),m,h,p,b,y);case"b":return a(k,2,v,m,h,p,b,y);case"o":return a(k,8,v,m,h,p,b,y);case"x":return a(k,16,v,m,h,p,b,y);case"X":return a(k,16,v,m,h,p,b,y).toUpperCase();case"u":return a(k,10,v,m,h,p,b,y);case"i":var w=parseInt(+k,10);if(isNaN(w))return"";var T=0>w?"-":g,D=_?n(String(Math.abs(w))):String(Math.abs(w));return k=T+t(D,p,"0",!1),i(k,T,m,h,b,y);case"d":var w=Math.round(+k);if(isNaN(w))return"";var T=0>w?"-":g,D=_?n(String(Math.abs(w))):String(Math.abs(w));return k=T+t(D,p,"0",!1),i(k,T,m,h,b,y);case"e":case"E":case"f":case"F":case"g":case"G":var w=+k;if(isNaN(w))return"";var T=0>w?"-":g,A=["toExponential","toFixed","toPrecision"]["efg".indexOf(f.toLowerCase())],N=["toString","toUpperCase"]["eEfFgG".indexOf(f)%2],D=Math.abs(w)[A](p),x=D.toString().split(".");x[0]=_?n(x[0]):x[0],D=x.join(e.jqplot.sprintf.decimalMark),k=T+D;var M=i(k,T,m,h,b,y)[N]();return M;case"p":case"P":var w=+k;if(isNaN(w))return"";var T=0>w?"-":g,x=String(Number(Math.abs(w)).toExponential()).split(/e|E/),C=-1!=x[0].indexOf(".")?x[0].length-1:String(w).length,I=x[1]<0?-x[1]-1:0;if(Math.abs(w)<1)k=p>=C+I?T+Math.abs(w).toPrecision(C):p-1>=C?T+Math.abs(w).toExponential(C-1):T+Math.abs(w).toExponential(p-1);else{var S=p>=C?C:p;k=T+Math.abs(w).toPrecision(S)}var N=["toString","toUpperCase"]["pP".indexOf(f)%2];return i(k,T,m,h,b,y)[N]();case"n":return"";default:return l}})},e.jqplot.sprintf.thousandsSeparator=",",e.jqplot.sprintf.decimalMark=".",e.jqplot.sprintf.regex=/%%|%(\d+\$)?([-+#0&\' ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([nAscboxXuidfegpEGP])/g,e.jqplot.getSignificantFigures=function(e){var t=String(Number(Math.abs(e)).toExponential()).split(/e|E/),n=-1!=t[0].indexOf(".")?t[0].length-1:t[0].length,i=t[1]<0?-t[1]-1:0,a=parseInt(t[1],10),s=a+1>0?a+1:0,r=s>=n?0:n-a-1;return{significantDigits:n,digitsLeft:s,digitsRight:r,zeros:i,exponent:a}},e.jqplot.getPrecision=function(t){return e.jqplot.getSignificantFigures(t).digitsRight};var K=e.uiBackCompat!==!1;e.jqplot.effects={effect:{}};var Q="jqplot.storage.";e.extend(e.jqplot.effects,{version:"1.9pre",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(Q+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.css(t[n],e.data(Q+t[n]))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},s=document.activeElement;return t.wrap(i),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(a),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t}}),e.fn.extend({jqplotEffect:function(){function t(t){function i(){e.isFunction(r)&&r.call(a[0]),e.isFunction(t)&&t()}var a=e(this),r=n.complete,o=n.mode;(a.is(":hidden")?"hide"===o:"show"===o)?i():s.call(a[0],n,i)}var n=C.apply(this,arguments),i=n.mode,a=n.queue,s=e.jqplot.effects.effect[n.effect],r=!s&&K&&e.jqplot.effects[n.effect];return e.fx.off||!s&&!r?i?this[i](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s?a===!1?this.each(t):this.queue(a||"fx",t):r.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})}});var X=/up|down|vertical/,Z=/up|left|vertical|horizontal/;e.jqplot.effects.effect.blind=function(t,n){var i,a,s,r=e(this),o=["position","top","bottom","left","right","height","width"],l=e.jqplot.effects.setMode(r,t.mode||"hide"),c=t.direction||"up",d=X.test(c),h=d?"height":"width",u=d?"top":"left",p=Z.test(c),f={},m="show"===l;r.parent().is(".ui-effects-wrapper")?e.jqplot.effects.save(r.parent(),o):e.jqplot.effects.save(r,o),r.show(),s=parseInt(r.css("top"),10),i=e.jqplot.effects.createWrapper(r).css({overflow:"hidden"}),a=d?i[h]()+s:i[h](),f[h]=m?String(a):"0",p||(r.css(d?"bottom":"right",0).css(d?"top":"left","").css({position:"absolute"}),f[u]=m?"0":String(a)),m&&(i.css(h,0),p||i.css(u,a)),i.animate(f,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===l&&r.hide(),e.jqplot.effects.restore(r,o),e.jqplot.effects.removeWrapper(r),n()}})}}(this.$),function(e){e.jqplot.CanvasTextRenderer=function(t){this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontSize="10px",this.fontFamily="sans-serif",this.fontStretch=1,this.fillStyle="#666666",this.angle=0,this.textAlign="start",this.textBaseline="alphabetic",this.text,this.width,this.height,this.pt2px=1.28,e.extend(!0,this,t),this.normalizedFontSize=this.normalizeFontSize(this.fontSize),this.setHeight()},e.jqplot.CanvasTextRenderer.prototype.init=function(t){e.extend(!0,this,t),this.normalizedFontSize=this.normalizeFontSize(this.fontSize),this.setHeight()},e.jqplot.CanvasTextRenderer.prototype.normalizeFontSize=function(e){e=String(e);var t=parseFloat(e);return e.indexOf("px")>-1?t/this.pt2px:e.indexOf("pt")>-1?t:e.indexOf("em")>-1?12*t:e.indexOf("%")>-1?12*t/100:t/this.pt2px},e.jqplot.CanvasTextRenderer.prototype.fontWeight2Float=function(e){if(Number(e))return e/400;switch(e){case"normal":return 1;case"bold":return 1.75;case"bolder":return 2.25;case"lighter":return.75;default:return 1}},e.jqplot.CanvasTextRenderer.prototype.getText=function(){return this.text},e.jqplot.CanvasTextRenderer.prototype.setText=function(e,t){return this.text=e,this.setWidth(t),this},e.jqplot.CanvasTextRenderer.prototype.getWidth=function(){return this.width},e.jqplot.CanvasTextRenderer.prototype.setWidth=function(e,t){return this.width=t?t:this.measure(e,this.text),this},e.jqplot.CanvasTextRenderer.prototype.getHeight=function(){return this.height},e.jqplot.CanvasTextRenderer.prototype.setHeight=function(e){return this.height=e?e:this.normalizedFontSize*this.pt2px,this},e.jqplot.CanvasTextRenderer.prototype.letter=function(e){return this.letters[e]},e.jqplot.CanvasTextRenderer.prototype.ascent=function(){return this.normalizedFontSize},e.jqplot.CanvasTextRenderer.prototype.descent=function(){return 7*this.normalizedFontSize/25},e.jqplot.CanvasTextRenderer.prototype.measure=function(e,t){for(var n=0,i=t.length,a=0;i>a;a++){var s=this.letter(t.charAt(a));s&&(n+=s.width*this.normalizedFontSize/25*this.fontStretch)}return n},e.jqplot.CanvasTextRenderer.prototype.draw=function(e,t){var n=0,i=.72*this.height,a=0,s=t.length,r=this.normalizedFontSize/25;e.save();var o,l;-Math.PI/2<=this.angle&&this.angle<=0||3*Math.PI/2<=this.angle&&this.angle<=2*Math.PI?(o=0,l=-Math.sin(this.angle)*this.width):0<this.angle&&this.angle<=Math.PI/2||2*-Math.PI<=this.angle&&this.angle<=3*-Math.PI/2?(o=Math.sin(this.angle)*this.height,l=0):-Math.PI<this.angle&&this.angle<-Math.PI/2||Math.PI<=this.angle&&this.angle<=3*Math.PI/2?(o=-Math.cos(this.angle)*this.width,l=-Math.sin(this.angle)*this.width-Math.cos(this.angle)*this.height):(3*-Math.PI/2<this.angle&&this.angle<Math.PI||Math.PI/2<this.angle&&this.angle<Math.PI)&&(o=Math.sin(this.angle)*this.height-Math.cos(this.angle)*this.width,l=-Math.cos(this.angle)*this.height),e.strokeStyle=this.fillStyle,e.fillStyle=this.fillStyle,e.translate(o,l),e.rotate(this.angle),e.lineCap="round";var c=this.normalizedFontSize>30?2:2+(30-this.normalizedFontSize)/20;e.lineWidth=c*r*this.fontWeight2Float(this.fontWeight);for(var d=0;s>d;d++){var h=this.letter(t.charAt(d));if(h){e.beginPath();for(var u=1,p=0;p<h.points.length;p++){var f=h.points[p];-1!=f[0]||-1!=f[1]?u?(e.moveTo(n+f[0]*r*this.fontStretch,i-f[1]*r),u=!1):e.lineTo(n+f[0]*r*this.fontStretch,i-f[1]*r):u=1}e.stroke(),n+=h.width*r*this.fontStretch}}return e.restore(),a},e.jqplot.CanvasTextRenderer.prototype.letters={" ":{width:16,points:[]},"!":{width:10,points:[[5,21],[5,7],[-1,-1],[5,2],[4,1],[5,0],[6,1],[5,2]]},'"':{width:16,points:[[4,21],[4,14],[-1,-1],[12,21],[12,14]]},"#":{width:21,points:[[11,25],[4,-7],[-1,-1],[17,25],[10,-7],[-1,-1],[4,12],[18,12],[-1,-1],[3,6],[17,6]]},$:{width:20,points:[[8,25],[8,-4],[-1,-1],[12,25],[12,-4],[-1,-1],[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},"%":{width:24,points:[[21,21],[3,0],[-1,-1],[8,21],[10,19],[10,17],[9,15],[7,14],[5,14],[3,16],[3,18],[4,20],[6,21],[8,21],[10,20],[13,19],[16,19],[19,20],[21,21],[-1,-1],[17,7],[15,6],[14,4],[14,2],[16,0],[18,0],[20,1],[21,3],[21,5],[19,7],[17,7]]},"&":{width:26,points:[[23,12],[23,13],[22,14],[21,14],[20,13],[19,11],[17,6],[15,3],[13,1],[11,0],[7,0],[5,1],[4,2],[3,4],[3,6],[4,8],[5,9],[12,13],[13,14],[14,16],[14,18],[13,20],[11,21],[9,20],[8,18],[8,16],[9,13],[11,10],[16,3],[18,1],[20,0],[22,0],[23,1],[23,2]]},"'":{width:10,points:[[5,19],[4,20],[5,21],[6,20],[6,18],[5,16],[4,15]]},"(":{width:14,points:[[11,25],[9,23],[7,20],[5,16],[4,11],[4,7],[5,2],[7,-2],[9,-5],[11,-7]]},")":{width:14,points:[[3,25],[5,23],[7,20],[9,16],[10,11],[10,7],[9,2],[7,-2],[5,-5],[3,-7]]},"*":{width:16,points:[[8,21],[8,9],[-1,-1],[3,18],[13,12],[-1,-1],[13,18],[3,12]]},"+":{width:26,points:[[13,18],[13,0],[-1,-1],[4,9],[22,9]]},",":{width:10,points:[[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"-":{width:18,points:[[6,9],[12,9]]},".":{width:10,points:[[5,2],[4,1],[5,0],[6,1],[5,2]]},"/":{width:22,points:[[20,25],[2,-7]]},0:{width:20,points:[[9,21],[6,20],[4,17],[3,12],[3,9],[4,4],[6,1],[9,0],[11,0],[14,1],[16,4],[17,9],[17,12],[16,17],[14,20],[11,21],[9,21]]},1:{width:20,points:[[6,17],[8,18],[11,21],[11,0]]},2:{width:20,points:[[4,16],[4,17],[5,19],[6,20],[8,21],[12,21],[14,20],[15,19],[16,17],[16,15],[15,13],[13,10],[3,0],[17,0]]},3:{width:20,points:[[5,21],[16,21],[10,13],[13,13],[15,12],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},4:{width:20,points:[[13,21],[3,7],[18,7],[-1,-1],[13,21],[13,0]]},5:{width:20,points:[[15,21],[5,21],[4,12],[5,13],[8,14],[11,14],[14,13],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},6:{width:20,points:[[16,18],[15,20],[12,21],[10,21],[7,20],[5,17],[4,12],[4,7],[5,3],[7,1],[10,0],[11,0],[14,1],[16,3],[17,6],[17,7],[16,10],[14,12],[11,13],[10,13],[7,12],[5,10],[4,7]]},7:{width:20,points:[[17,21],[7,0],[-1,-1],[3,21],[17,21]]},8:{width:20,points:[[8,21],[5,20],[4,18],[4,16],[5,14],[7,13],[11,12],[14,11],[16,9],[17,7],[17,4],[16,2],[15,1],[12,0],[8,0],[5,1],[4,2],[3,4],[3,7],[4,9],[6,11],[9,12],[13,13],[15,14],[16,16],[16,18],[15,20],[12,21],[8,21]]},9:{width:20,points:[[16,14],[15,11],[13,9],[10,8],[9,8],[6,9],[4,11],[3,14],[3,15],[4,18],[6,20],[9,21],[10,21],[13,20],[15,18],[16,14],[16,9],[15,4],[13,1],[10,0],[8,0],[5,1],[4,3]]},":":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],[-1,-1],[5,2],[4,1],[5,0],[6,1],[5,2]]},";":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],[-1,-1],[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"<":{width:24,points:[[20,18],[4,9],[20,0]]},"=":{width:26,points:[[4,12],[22,12],[-1,-1],[4,6],[22,6]]},">":{width:24,points:[[4,18],[20,9],[4,0]]},"?":{width:18,points:[[3,16],[3,17],[4,19],[5,20],[7,21],[11,21],[13,20],[14,19],[15,17],[15,15],[14,13],[13,12],[9,10],[9,7],[-1,-1],[9,2],[8,1],[9,0],[10,1],[9,2]]},"@":{width:27,points:[[18,13],[17,15],[15,16],[12,16],[10,15],[9,14],[8,11],[8,8],[9,6],[11,5],[14,5],[16,6],[17,8],[-1,-1],[12,16],[10,14],[9,11],[9,8],[10,6],[11,5],[-1,-1],[18,16],[17,8],[17,6],[19,5],[21,5],[23,7],[24,10],[24,12],[23,15],[22,17],[20,19],[18,20],[15,21],[12,21],[9,20],[7,19],[5,17],[4,15],[3,12],[3,9],[4,6],[5,4],[7,2],[9,1],[12,0],[15,0],[18,1],[20,2],[21,3],[-1,-1],[19,16],[18,8],[18,6],[19,5]]},A:{width:18,points:[[9,21],[1,0],[-1,-1],[9,21],[17,0],[-1,-1],[4,7],[14,7]]},B:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[-1,-1],[4,11],[13,11],[16,10],[17,9],[18,7],[18,4],[17,2],[16,1],[13,0],[4,0]]},C:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5]]},D:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[11,21],[14,20],[16,18],[17,16],[18,13],[18,8],[17,5],[16,3],[14,1],[11,0],[4,0]]},E:{width:19,points:[[4,21],[4,0],[-1,-1],[4,21],[17,21],[-1,-1],[4,11],[12,11],[-1,-1],[4,0],[17,0]]},F:{width:18,points:[[4,21],[4,0],[-1,-1],[4,21],[17,21],[-1,-1],[4,11],[12,11]]},G:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[18,8],[-1,-1],[13,8],[18,8]]},H:{width:22,points:[[4,21],[4,0],[-1,-1],[18,21],[18,0],[-1,-1],[4,11],[18,11]]},I:{width:8,points:[[4,21],[4,0]]},J:{width:16,points:[[12,21],[12,5],[11,2],[10,1],[8,0],[6,0],[4,1],[3,2],[2,5],[2,7]]},K:{width:21,points:[[4,21],[4,0],[-1,-1],[18,21],[4,7],[-1,-1],[9,12],[18,0]]},L:{width:17,points:[[4,21],[4,0],[-1,-1],[4,0],[16,0]]},M:{width:24,points:[[4,21],[4,0],[-1,-1],[4,21],[12,0],[-1,-1],[20,21],[12,0],[-1,-1],[20,21],[20,0]]},N:{width:22,points:[[4,21],[4,0],[-1,-1],[4,21],[18,0],[-1,-1],[18,21],[18,0]]},O:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21]]},P:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,14],[17,12],[16,11],[13,10],[4,10]]},Q:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21],[-1,-1],[12,4],[18,-2]]},R:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[4,11],[-1,-1],[11,11],[18,0]]},S:{width:20,points:[[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},T:{width:16,points:[[8,21],[8,0],[-1,-1],[1,21],[15,21]]},U:{width:22,points:[[4,21],[4,6],[5,3],[7,1],[10,0],[12,0],[15,1],[17,3],[18,6],[18,21]]},V:{width:18,points:[[1,21],[9,0],[-1,-1],[17,21],[9,0]]},W:{width:24,points:[[2,21],[7,0],[-1,-1],[12,21],[7,0],[-1,-1],[12,21],[17,0],[-1,-1],[22,21],[17,0]]},X:{width:20,points:[[3,21],[17,0],[-1,-1],[17,21],[3,0]]},Y:{width:18,points:[[1,21],[9,11],[9,0],[-1,-1],[17,21],[9,11]]},Z:{width:20,points:[[17,21],[3,0],[-1,-1],[3,21],[17,21],[-1,-1],[3,0],[17,0]]},"[":{width:14,points:[[4,25],[4,-7],[-1,-1],[5,25],[5,-7],[-1,-1],[4,25],[11,25],[-1,-1],[4,-7],[11,-7]]},"\\":{width:14,points:[[0,21],[14,-3]]},"]":{width:14,points:[[9,25],[9,-7],[-1,-1],[10,25],[10,-7],[-1,-1],[3,25],[10,25],[-1,-1],[3,-7],[10,-7]]},"^":{width:16,points:[[6,15],[8,18],[10,15],[-1,-1],[3,12],[8,17],[13,12],[-1,-1],[8,17],[8,0]]},_:{width:16,points:[[0,-2],[16,-2]]},"`":{width:10,points:[[6,21],[5,20],[4,18],[4,16],[5,15],[6,16],[5,17]]},a:{width:19,points:[[15,14],[15,0],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},b:{width:19,points:[[4,21],[4,0],[-1,-1],[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},c:{width:18,points:[[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},d:{width:19,points:[[15,21],[15,0],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},e:{width:18,points:[[3,8],[15,8],[15,10],[14,12],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},f:{width:12,points:[[10,21],[8,21],[6,20],[5,17],[5,0],[-1,-1],[2,14],[9,14]]},g:{width:19,points:[[15,14],[15,-2],[14,-5],[13,-6],[11,-7],[8,-7],[6,-6],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},h:{width:19,points:[[4,21],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},i:{width:8,points:[[3,21],[4,20],[5,21],[4,22],[3,21],[-1,-1],[4,14],[4,0]]},j:{width:10,points:[[5,21],[6,20],[7,21],[6,22],[5,21],[-1,-1],[6,14],[6,-3],[5,-6],[3,-7],[1,-7]]},k:{width:17,points:[[4,21],[4,0],[-1,-1],[14,14],[4,4],[-1,-1],[8,8],[15,0]]},l:{width:8,points:[[4,21],[4,0]]},m:{width:30,points:[[4,14],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0],[-1,-1],[15,10],[18,13],[20,14],[23,14],[25,13],[26,10],[26,0]]},n:{width:19,points:[[4,14],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},o:{width:19,points:[[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3],[16,6],[16,8],[15,11],[13,13],[11,14],[8,14]]},p:{width:19,points:[[4,14],[4,-7],[-1,-1],[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},q:{width:19,points:[[15,14],[15,-7],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},r:{width:13,points:[[4,14],[4,0],[-1,-1],[4,8],[5,11],[7,13],[9,14],[12,14]]},s:{width:17,points:[[14,11],[13,13],[10,14],[7,14],[4,13],[3,11],[4,9],[6,8],[11,7],[13,6],[14,4],[14,3],[13,1],[10,0],[7,0],[4,1],[3,3]]},t:{width:12,points:[[5,21],[5,4],[6,1],[8,0],[10,0],[-1,-1],[2,14],[9,14]]},u:{width:19,points:[[4,14],[4,4],[5,1],[7,0],[10,0],[12,1],[15,4],[-1,-1],[15,14],[15,0]]},v:{width:16,points:[[2,14],[8,0],[-1,-1],[14,14],[8,0]]},w:{width:22,points:[[3,14],[7,0],[-1,-1],[11,14],[7,0],[-1,-1],[11,14],[15,0],[-1,-1],[19,14],[15,0]]},x:{width:17,points:[[3,14],[14,0],[-1,-1],[14,14],[3,0]]},y:{width:16,points:[[2,14],[8,0],[-1,-1],[14,14],[8,0],[6,-4],[4,-6],[2,-7],[1,-7]]},z:{width:17,points:[[14,14],[3,0],[-1,-1],[3,14],[14,14],[-1,-1],[3,0],[14,0]]},"{":{width:14,points:[[9,25],[7,24],[6,23],[5,21],[5,19],[6,17],[7,16],[8,14],[8,12],[6,10],[-1,-1],[7,24],[6,22],[6,20],[7,18],[8,17],[9,15],[9,13],[8,11],[4,9],[8,7],[9,5],[9,3],[8,1],[7,0],[6,-2],[6,-4],[7,-6],[-1,-1],[6,8],[8,6],[8,4],[7,2],[6,1],[5,-1],[5,-3],[6,-5],[7,-6],[9,-7]]},"|":{width:8,points:[[4,25],[4,-7]]},"}":{width:14,points:[[5,25],[7,24],[8,23],[9,21],[9,19],[8,17],[7,16],[6,14],[6,12],[8,10],[-1,-1],[7,24],[8,22],[8,20],[7,18],[6,17],[5,15],[5,13],[6,11],[10,9],[6,7],[5,5],[5,3],[6,1],[7,0],[8,-2],[8,-4],[7,-6],[-1,-1],[8,8],[6,6],[6,4],[7,2],[8,1],[9,-1],[9,-3],[8,-5],[7,-6],[5,-7]]},"~":{width:24,points:[[3,6],[3,8],[4,11],[6,12],[8,12],[10,11],[14,8],[16,7],[18,7],[20,8],[21,10],[-1,-1],[3,8],[4,10],[6,11],[8,11],[10,10],[14,7],[16,6],[18,6],[20,7],[21,10],[21,12]]}},e.jqplot.CanvasFontRenderer=function(t){t=t||{},t.pt2px||(t.pt2px=1.5),e.jqplot.CanvasTextRenderer.call(this,t)
},e.jqplot.CanvasFontRenderer.prototype=new e.jqplot.CanvasTextRenderer({}),e.jqplot.CanvasFontRenderer.prototype.constructor=e.jqplot.CanvasFontRenderer,e.jqplot.CanvasFontRenderer.prototype.measure=function(e,t){var n=this.fontSize+" "+this.fontFamily;e.save(),e.font=n;var i=e.measureText(t).width;return e.restore(),i},e.jqplot.CanvasFontRenderer.prototype.draw=function(e,t){var n=0,i=.72*this.height;e.save();var a,s;-Math.PI/2<=this.angle&&this.angle<=0||3*Math.PI/2<=this.angle&&this.angle<=2*Math.PI?(a=0,s=-Math.sin(this.angle)*this.width):0<this.angle&&this.angle<=Math.PI/2||2*-Math.PI<=this.angle&&this.angle<=3*-Math.PI/2?(a=Math.sin(this.angle)*this.height,s=0):-Math.PI<this.angle&&this.angle<-Math.PI/2||Math.PI<=this.angle&&this.angle<=3*Math.PI/2?(a=-Math.cos(this.angle)*this.width,s=-Math.sin(this.angle)*this.width-Math.cos(this.angle)*this.height):(3*-Math.PI/2<this.angle&&this.angle<Math.PI||Math.PI/2<this.angle&&this.angle<Math.PI)&&(a=Math.sin(this.angle)*this.height-Math.cos(this.angle)*this.width,s=-Math.cos(this.angle)*this.height),e.strokeStyle=this.fillStyle,e.fillStyle=this.fillStyle;var r=this.fontSize+" "+this.fontFamily;e.font=r,e.translate(a,s),e.rotate(this.angle),e.fillText(t,n,i),e.restore()}}(jQuery),function(e){e.jqplot.CanvasAxisLabelRenderer=function(t){this.angle=0,this.axis,this.show=!0,this.showLabel=!0,this.label="",this.fontFamily='"Trebuchet MS", Arial, Helvetica, sans-serif',this.fontSize="11pt",this.fontWeight="normal",this.fontStretch=1,this.textColor="#666666",this.enableFontSupport=!0,this.pt2px=null,this._elem,this._ctx,this._plotWidth,this._plotHeight,this._plotDimensions={height:null,width:null},e.extend(!0,this,t),null==t.angle&&"xaxis"!=this.axis&&"x2axis"!=this.axis&&(this.angle=-90);var n={fontSize:this.fontSize,fontWeight:this.fontWeight,fontStretch:this.fontStretch,fillStyle:this.textColor,angle:this.getAngleRad(),fontFamily:this.fontFamily};this.pt2px&&(n.pt2px=this.pt2px),this._textRenderer=this.enableFontSupport?e.jqplot.support_canvas_text()?new e.jqplot.CanvasFontRenderer(n):new e.jqplot.CanvasTextRenderer(n):new e.jqplot.CanvasTextRenderer(n)},e.jqplot.CanvasAxisLabelRenderer.prototype.init=function(t){e.extend(!0,this,t),this._textRenderer.init({fontSize:this.fontSize,fontWeight:this.fontWeight,fontStretch:this.fontStretch,fillStyle:this.textColor,angle:this.getAngleRad(),fontFamily:this.fontFamily})},e.jqplot.CanvasAxisLabelRenderer.prototype.getWidth=function(e){if(this._elem)return this._elem.outerWidth(!0);var t=this._textRenderer,n=t.getWidth(e),i=t.getHeight(e),a=Math.abs(Math.sin(t.angle)*i)+Math.abs(Math.cos(t.angle)*n);return a},e.jqplot.CanvasAxisLabelRenderer.prototype.getHeight=function(e){if(this._elem)return this._elem.outerHeight(!0);var t=this._textRenderer,n=t.getWidth(e),i=t.getHeight(e),a=Math.abs(Math.cos(t.angle)*i)+Math.abs(Math.sin(t.angle)*n);return a},e.jqplot.CanvasAxisLabelRenderer.prototype.getAngleRad=function(){var e=this.angle*Math.PI/180;return e},e.jqplot.CanvasAxisLabelRenderer.prototype.draw=function(t,n){this._elem&&(e.jqplot.use_excanvas&&void 0!==window.G_vmlCanvasManager.uninitElement&&window.G_vmlCanvasManager.uninitElement(this._elem.get(0)),this._elem.emptyForce(),this._elem=null);var i=n.canvasManager.getCanvas();this._textRenderer.setText(this.label,t);var a=this.getWidth(t),s=this.getHeight(t);return i.width=a,i.height=s,i.style.width=a,i.style.height=s,i=n.canvasManager.initCanvas(i),this._elem=e(i),this._elem.css({position:"absolute"}),this._elem.addClass("jqplot-"+this.axis+"-label"),i=null,this._elem},e.jqplot.CanvasAxisLabelRenderer.prototype.pack=function(){this._textRenderer.draw(this._elem.get(0).getContext("2d"),this.label)}}(jQuery),function(e){e.jqplot.CanvasAxisTickRenderer=function(t){this.mark="outside",this.showMark=!0,this.showGridline=!0,this.isMinorTick=!1,this.angle=0,this.markSize=4,this.show=!0,this.showLabel=!0,this.labelPosition="auto",this.label="",this.value=null,this._styles={},this.formatter=e.jqplot.DefaultTickFormatter,this.formatString="",this.prefix="",this.fontFamily='"Trebuchet MS", Arial, Helvetica, sans-serif',this.fontSize="10pt",this.fontWeight="normal",this.fontStretch=1,this.textColor="#666666",this.enableFontSupport=!0,this.pt2px=null,this._elem,this._ctx,this._plotWidth,this._plotHeight,this._plotDimensions={height:null,width:null},e.extend(!0,this,t);var n={fontSize:this.fontSize,fontWeight:this.fontWeight,fontStretch:this.fontStretch,fillStyle:this.textColor,angle:this.getAngleRad(),fontFamily:this.fontFamily};this.pt2px&&(n.pt2px=this.pt2px),this._textRenderer=this.enableFontSupport?e.jqplot.support_canvas_text()?new e.jqplot.CanvasFontRenderer(n):new e.jqplot.CanvasTextRenderer(n):new e.jqplot.CanvasTextRenderer(n)},e.jqplot.CanvasAxisTickRenderer.prototype.init=function(t){e.extend(!0,this,t),this._textRenderer.init({fontSize:this.fontSize,fontWeight:this.fontWeight,fontStretch:this.fontStretch,fillStyle:this.textColor,angle:this.getAngleRad(),fontFamily:this.fontFamily})},e.jqplot.CanvasAxisTickRenderer.prototype.getWidth=function(e){if(this._elem)return this._elem.outerWidth(!0);var t=this._textRenderer,n=t.getWidth(e),i=t.getHeight(e),a=Math.abs(Math.sin(t.angle)*i)+Math.abs(Math.cos(t.angle)*n);return a},e.jqplot.CanvasAxisTickRenderer.prototype.getHeight=function(e){if(this._elem)return this._elem.outerHeight(!0);var t=this._textRenderer,n=t.getWidth(e),i=t.getHeight(e),a=Math.abs(Math.cos(t.angle)*i)+Math.abs(Math.sin(t.angle)*n);return a},e.jqplot.CanvasAxisTickRenderer.prototype.getTop=function(){return this._elem?this._elem.position().top:null},e.jqplot.CanvasAxisTickRenderer.prototype.getAngleRad=function(){var e=this.angle*Math.PI/180;return e},e.jqplot.CanvasAxisTickRenderer.prototype.setTick=function(e,t,n){return this.value=e,n&&(this.isMinorTick=!0),this},e.jqplot.CanvasAxisTickRenderer.prototype.draw=function(t,n){this.label||(this.label=this.prefix+this.formatter(this.formatString,this.value)),this._elem&&(e.jqplot.use_excanvas&&void 0!==window.G_vmlCanvasManager.uninitElement&&window.G_vmlCanvasManager.uninitElement(this._elem.get(0)),this._elem.emptyForce(),this._elem=null);var i=n.canvasManager.getCanvas();this._textRenderer.setText(this.label,t);var a=this.getWidth(t),s=this.getHeight(t);return i.width=a,i.height=s,i.style.width=a,i.style.height=s,i.style.textAlign="left",i.style.position="absolute",i=n.canvasManager.initCanvas(i),this._elem=e(i),this._elem.css(this._styles),this._elem.addClass("jqplot-"+this.axis+"-tick"),i=null,this._elem},e.jqplot.CanvasAxisTickRenderer.prototype.pack=function(){this._textRenderer.draw(this._elem.get(0).getContext("2d"),this.label)}}(jQuery),function(e){e.jqplot.CategoryAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this),this.sortMergedLabels=!1},e.jqplot.CategoryAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.CategoryAxisRenderer.prototype.constructor=e.jqplot.CategoryAxisRenderer,e.jqplot.CategoryAxisRenderer.prototype.init=function(t){this.groups=1,this.groupLabels=[],this._groupLabels=[],this._grouped=!1,this._barsPerGroup=null,this.reverse=!1,e.extend(!0,this,{tickOptions:{formatString:"%d"}},t);for(var n=this._dataBounds,i=0;i<this._series.length;i++){var a=this._series[i];a.groups&&(this.groups=a.groups);for(var s=a.data,r=0;r<s.length;r++)"xaxis"==this.name||"x2axis"==this.name?((s[r][0]<n.min||null==n.min)&&(n.min=s[r][0]),(s[r][0]>n.max||null==n.max)&&(n.max=s[r][0])):((s[r][1]<n.min||null==n.min)&&(n.min=s[r][1]),(s[r][1]>n.max||null==n.max)&&(n.max=s[r][1]))}this.groupLabels.length&&(this.groups=this.groupLabels.length)},e.jqplot.CategoryAxisRenderer.prototype.createTicks=function(){{var t,n,i,a,s,r=(this._ticks,this.ticks),o=this.name;this._dataBounds}if(r.length){if(this.groups>1&&!this._grouped){for(var l=r.length,c=parseInt(l/this.groups,10),d=0,s=c;l>s;s+=c)r.splice(s+d,0," "),d++;this._grouped=!0}this.min=.5,this.max=r.length+.5;var h=this.max-this.min;for(this.numberTicks=2*r.length+1,s=0;s<r.length;s++){a=this.min+2*s*h/(this.numberTicks-1);var u=new this.tickRenderer(this.tickOptions);u.showLabel=!1,u.setTick(a,this.name),this._ticks.push(u);var u=new this.tickRenderer(this.tickOptions);u.label=r[s],u.showMark=!1,u.showGridline=!1,u.setTick(a+.5,this.name),this._ticks.push(u)}var u=new this.tickRenderer(this.tickOptions);u.showLabel=!1,u.setTick(a+1,this.name),this._ticks.push(u)}else{t="xaxis"==o||"x2axis"==o?this._plotDimensions.width:this._plotDimensions.height,null!=this.min&&null!=this.max&&null!=this.numberTicks&&(this.tickInterval=null),null!=this.min&&null!=this.max&&null!=this.tickInterval&&parseInt((this.max-this.min)/this.tickInterval,10)!=(this.max-this.min)/this.tickInterval&&(this.tickInterval=null);for(var i,p,f=[],m=0,n=.5,g=!1,s=0;s<this._series.length;s++)for(var b=this._series[s],v=0;v<b.data.length;v++)p="xaxis"==this.name||"x2axis"==this.name?b.data[v][0]:b.data[v][1],-1==e.inArray(p,f)&&(g=!0,m+=1,f.push(p));g&&this.sortMergedLabels&&("string"==typeof f[0]?f.sort():f.sort(function(e,t){return e-t})),this.ticks=f;for(var s=0;s<this._series.length;s++)for(var b=this._series[s],v=0;v<b.data.length;v++){p="xaxis"==this.name||"x2axis"==this.name?b.data[v][0]:b.data[v][1];var y=e.inArray(p,f)+1;"xaxis"==this.name||"x2axis"==this.name?b.data[v][0]=y:b.data[v][1]=y}if(this.groups>1&&!this._grouped){for(var l=f.length,c=parseInt(l/this.groups,10),d=0,s=c;l>s;s+=c+1)f[s]=" ";this._grouped=!0}i=m+.5,null==this.numberTicks&&(this.numberTicks=2*m+1);var h=i-n;this.min=n,this.max=i;var _=0,E=parseInt(3+t/10,10),c=parseInt(m/E,10);null==this.tickInterval&&(this.tickInterval=h/(this.numberTicks-1));for(var s=0;s<this.numberTicks;s++){a=this.min+s*this.tickInterval;var u=new this.tickRenderer(this.tickOptions);s/2==parseInt(s/2,10)?(u.showLabel=!1,u.showMark=!0):(c>0&&c>_?(u.showLabel=!1,_+=1):(u.showLabel=!0,_=0),u.label=u.formatter(u.formatString,f[(s-1)/2]),u.showMark=!1,u.showGridline=!1),u.setTick(a,this.name),this._ticks.push(u)}}},e.jqplot.CategoryAxisRenderer.prototype.draw=function(t,n){if(this.show){this.renderer.createTicks.call(this);if(this._elem&&this._elem.emptyForce(),this._elem=this._elem||e('<div class="jqplot-axis jqplot-'+this.name+'" style="position:absolute;"></div>'),"xaxis"==this.name||"x2axis"==this.name?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions),this._label.show){var i=this._label.draw(t,n);i.appendTo(this._elem)}for(var a=this._ticks,s=0;s<a.length;s++){var r=a[s];if(r.showLabel&&(!r.isMinorTick||this.showMinorTicks)){var i=r.draw(t,n);i.appendTo(this._elem)}}this._groupLabels=[];for(var s=0;s<this.groupLabels.length;s++){var i=e('<div style="position:absolute;" class="jqplot-'+this.name+'-groupLabel"></div>');i.html(this.groupLabels[s]),this._groupLabels.push(i),i.appendTo(this._elem)}}return this._elem},e.jqplot.CategoryAxisRenderer.prototype.set=function(){var t,n=0,i=0,a=0,s=null==this._label?!1:this._label.show;if(this.show){for(var r=this._ticks,o=0;o<r.length;o++){var l=r[o];!l.showLabel||l.isMinorTick&&!this.showMinorTicks||(t="xaxis"==this.name||"x2axis"==this.name?l._elem.outerHeight(!0):l._elem.outerWidth(!0),t>n&&(n=t))}for(var c=0,o=0;o<this._groupLabels.length;o++){var d=this._groupLabels[o];t="xaxis"==this.name||"x2axis"==this.name?d.outerHeight(!0):d.outerWidth(!0),t>c&&(c=t)}s&&(i=this._label._elem.outerWidth(!0),a=this._label._elem.outerHeight(!0)),"xaxis"==this.name?(n+=c+a,this._elem.css({height:n+"px",left:"0px",bottom:"0px"})):"x2axis"==this.name?(n+=c+a,this._elem.css({height:n+"px",left:"0px",top:"0px"})):"yaxis"==this.name?(n+=c+i,this._elem.css({width:n+"px",left:"0px",top:"0px"}),s&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",i+"px")):(n+=c+i,this._elem.css({width:n+"px",right:"0px",top:"0px"}),s&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",i+"px"))}},e.jqplot.CategoryAxisRenderer.prototype.pack=function(t,n){var i,a=this._ticks,s=this.max,r=this.min,o=n.max,l=n.min,c=null==this._label?!1:this._label.show;for(var d in t)this._elem.css(d,t[d]);this._offsets=n;var h=o-l,u=s-r;if(this.reverse?(this.u2p=function(e){return l+(s-e)*h/u},this.p2u=function(e){return r+(e-l)*u/h},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(e){return(s-e)*h/u},this.series_p2u=function(e){return e*u/h+s}):(this.series_u2p=function(e){return(r-e)*h/u},this.series_p2u=function(e){return e*u/h+r})):(this.u2p=function(e){return(e-r)*h/u+l},this.p2u=function(e){return(e-l)*u/h+r},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(e){return(e-r)*h/u},this.series_p2u=function(e){return e*u/h+r}):(this.series_u2p=function(e){return(e-s)*h/u},this.series_p2u=function(e){return e*u/h+s})),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(i=0;i<a.length;i++){var p=a[i];if(p.show&&p.showLabel){var f;if(p.constructor==e.jqplot.CanvasAxisTickRenderer&&p.angle){var m="xaxis"==this.name?1:-1;switch(p.labelPosition){case"auto":f=m*p.angle<0?-p.getWidth()+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2:-p._textRenderer.height*Math.sin(p._textRenderer.angle)/2;break;case"end":f=-p.getWidth()+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2;break;case"start":f=-p._textRenderer.height*Math.sin(p._textRenderer.angle)/2;break;case"middle":f=-p.getWidth()/2+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2;break;default:f=-p.getWidth()/2+p._textRenderer.height*Math.sin(-p._textRenderer.angle)/2}}else f=-p.getWidth()/2;var g=this.u2p(p.value)+f+"px";p._elem.css("left",g),p.pack()}}var b=["bottom",0];if(c){var v=this._label._elem.outerWidth(!0);this._label._elem.css("left",l+h/2-v/2+"px"),"xaxis"==this.name?(this._label._elem.css("bottom","0px"),b=["bottom",this._label._elem.outerHeight(!0)]):(this._label._elem.css("top","0px"),b=["top",this._label._elem.outerHeight(!0)]),this._label.pack()}var y=parseInt(this._ticks.length/this.groups,10)+1;for(i=0;i<this._groupLabels.length;i++){for(var _=0,E=0,k=i*y;(i+1)*y>k;k++)if(!(k>=this._ticks.length-1)&&this._ticks[k]._elem&&" "!=this._ticks[k].label){var p=this._ticks[k]._elem,d=p.position();_+=d.left+p.outerWidth(!0)/2,E++}_/=E,this._groupLabels[i].css({left:_-this._groupLabels[i].outerWidth(!0)/2}),this._groupLabels[i].css(b[0],b[1])}}else{for(i=0;i<a.length;i++){var p=a[i];if(p.show&&p.showLabel){var f;if(p.constructor==e.jqplot.CanvasAxisTickRenderer&&p.angle){var m="yaxis"==this.name?1:-1;switch(p.labelPosition){case"auto":case"end":f=m*p.angle<0?-p._textRenderer.height*Math.cos(-p._textRenderer.angle)/2:-p.getHeight()+p._textRenderer.height*Math.cos(p._textRenderer.angle)/2;break;case"start":f=p.angle>0?-p._textRenderer.height*Math.cos(-p._textRenderer.angle)/2:-p.getHeight()+p._textRenderer.height*Math.cos(p._textRenderer.angle)/2;break;case"middle":f=-p.getHeight()/2;break;default:f=-p.getHeight()/2}}else f=-p.getHeight()/2;var g=this.u2p(p.value)+f+"px";p._elem.css("top",g),p.pack()}}var b=["left",0];if(c){var w=this._label._elem.outerHeight(!0);this._label._elem.css("top",o-h/2-w/2+"px"),"yaxis"==this.name?(this._label._elem.css("left","0px"),b=["left",this._label._elem.outerWidth(!0)]):(this._label._elem.css("right","0px"),b=["right",this._label._elem.outerWidth(!0)]),this._label.pack()}var y=parseInt(this._ticks.length/this.groups,10)+1;for(i=0;i<this._groupLabels.length;i++){for(var _=0,E=0,k=i*y;(i+1)*y>k;k++)if(!(k>=this._ticks.length-1)&&this._ticks[k]._elem&&" "!=this._ticks[k].label){var p=this._ticks[k]._elem,d=p.position();_+=d.top+p.outerHeight()/2,E++}_/=E,this._groupLabels[i].css({top:_-this._groupLabels[i].outerHeight()/2}),this._groupLabels[i].css(b[0],b[1])}}}}(jQuery),function(e){function t(){if("horizontal"==this.rendererOptions.barDirection&&(this._stackAxis="x",this._primaryAxis="_yaxis"),1==this.rendererOptions.waterfall){this._data=e.extend(!0,[],this.data);for(var t=0,n=this.rendererOptions.barDirection&&"vertical"!==this.rendererOptions.barDirection&&this.transposedData!==!1?0:1,i=0;i<this.data.length;i++)t+=this.data[i][n],i>0&&(this.data[i][n]+=this.data[i-1][n]);this.data[this.data.length]=1==n?[this.data.length+1,t]:[t,this.data.length+1],this._data[this._data.length]=1==n?[this._data.length+1,t]:[t,this._data.length+1]}if(this.rendererOptions.groups>1){this.breakOnNull=!0;for(var a=this.data.length,s=parseInt(a/this.rendererOptions.groups,10),r=0,i=s;a>i;i+=s)this.data.splice(i+r,0,[null,null]),this._plotData.splice(i+r,0,[null,null]),this._stackData.splice(i+r,0,[null,null]),r++;for(i=0;i<this.data.length;i++)"_xaxis"==this._primaryAxis?(this.data[i][0]=i+1,this._plotData[i][0]=i+1,this._stackData[i][0]=i+1):(this.data[i][1]=i+1,this._plotData[i][1]=i+1,this._stackData[i][1]=i+1)}}function n(e,t,i,a,s){var r,o,l=e,c=e-1,d="x"===s?0:1;return l>0?(o=a.series[c]._plotData[t][d],r=0>i*o?n(c,t,i,a,s):a.series[c].gridData[t][d]):r=0===d?a.series[l]._xaxis.series_u2p(0):a.series[l]._yaxis.series_u2p(0),r}function i(){for(var t=0;t<this.series.length;t++)this.series[t].renderer.constructor==e.jqplot.BarRenderer&&this.series[t].highlightMouseOver&&(this.series[t].highlightMouseDown=!1)}function a(){this.plugins.barRenderer&&this.plugins.barRenderer.highlightCanvas&&(this.plugins.barRenderer.highlightCanvas.resetCanvas(),this.plugins.barRenderer.highlightCanvas=null),this.plugins.barRenderer={highlightedSeriesIndex:null},this.plugins.barRenderer.highlightCanvas=new e.jqplot.GenericCanvas,this.eventCanvas._elem.before(this.plugins.barRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-barRenderer-highlight-canvas",this._plotDimensions,this)),this.plugins.barRenderer.highlightCanvas.setContext(),this.eventCanvas._elem.bind("mouseleave",{plot:this},function(e){r(e.data.plot)})}function s(e,t,n,i){var a=e.series[t],s=e.plugins.barRenderer.highlightCanvas;s._ctx.clearRect(0,0,s._ctx.canvas.width,s._ctx.canvas.height),a._highlightedPoint=n,e.plugins.barRenderer.highlightedSeriesIndex=t;var r={fillStyle:a.highlightColors[n]};a.renderer.shapeRenderer.draw(s._ctx,i,r),s=null}function r(e){var t=e.plugins.barRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var n=0;n<e.series.length;n++)e.series[n]._highlightedPoint=null;e.plugins.barRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight"),t=null}function o(e,t,n,i,a){if(i){var o=[i.seriesIndex,i.pointIndex,i.data],l=jQuery.Event("jqplotDataMouseOver");if(l.pageX=e.pageX,l.pageY=e.pageY,a.target.trigger(l,o),a.series[o[0]].show&&a.series[o[0]].highlightMouseOver&&(o[0]!=a.plugins.barRenderer.highlightedSeriesIndex||o[1]!=a.series[o[0]]._highlightedPoint)){var c=jQuery.Event("jqplotDataHighlight");c.which=e.which,c.pageX=e.pageX,c.pageY=e.pageY,a.target.trigger(c,o),s(a,i.seriesIndex,i.pointIndex,i.points)}}else null==i&&r(a)}function l(e,t,n,i,a){if(i){var o=[i.seriesIndex,i.pointIndex,i.data];if(a.series[o[0]].highlightMouseDown&&(o[0]!=a.plugins.barRenderer.highlightedSeriesIndex||o[1]!=a.series[o[0]]._highlightedPoint)){var l=jQuery.Event("jqplotDataHighlight");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,a.target.trigger(l,o),s(a,i.seriesIndex,i.pointIndex,i.points)}}else null==i&&r(a)}function c(e,t,n,i,a){var s=a.plugins.barRenderer.highlightedSeriesIndex;null!=s&&a.series[s].highlightMouseDown&&r(a)}function d(e,t,n,i,a){if(i){var s=[i.seriesIndex,i.pointIndex,i.data],r=jQuery.Event("jqplotDataClick");r.which=e.which,r.pageX=e.pageX,r.pageY=e.pageY,a.target.trigger(r,s)}}function h(e,t,n,i,a){if(i){var s=[i.seriesIndex,i.pointIndex,i.data],o=a.plugins.barRenderer.highlightedSeriesIndex;null!=o&&a.series[o].highlightMouseDown&&r(a);var l=jQuery.Event("jqplotDataRightClick");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,a.target.trigger(l,s)}}e.jqplot.BarRenderer=function(){e.jqplot.LineRenderer.call(this)},e.jqplot.BarRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.BarRenderer.prototype.constructor=e.jqplot.BarRenderer,e.jqplot.BarRenderer.prototype.init=function(t,n){this.barPadding=8,this.barMargin=10,this.barDirection="vertical",this.barWidth=null,this.shadowOffset=2,this.shadowDepth=5,this.shadowAlpha=.08,this.waterfall=!1,this.groups=1,this.varyBarColor=!1,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.transposedData=!0,this.renderer.animation={show:!1,direction:"down",speed:3e3,_supported:!0},this._type="bar",t.highlightMouseDown&&null==t.highlightMouseOver&&(t.highlightMouseOver=!1),e.extend(!0,this,t),e.extend(!0,this.renderer,t),this.fill=!0,"horizontal"===this.barDirection&&this.rendererOptions.animation&&null==this.rendererOptions.animation.direction&&(this.renderer.animation.direction="left"),this.waterfall&&(this.fillToZero=!1,this.disableStack=!0),"vertical"==this.barDirection?(this._primaryAxis="_xaxis",this._stackAxis="y",this.fillAxis="y"):(this._primaryAxis="_yaxis",this._stackAxis="x",this.fillAxis="x"),this._highlightedPoint=null,this._plotSeriesInfo=null,this._dataColors=[],this._barPoints=[];var s={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,strokeStyle:this.color,fillStyle:this.color,closePath:this.fill};this.renderer.shapeRenderer.init(s);var r={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill};this.renderer.shadowRenderer.init(r),n.postInitHooks.addOnce(i),n.postDrawHooks.addOnce(a),n.eventListenerHooks.addOnce("jqplotMouseMove",o),n.eventListenerHooks.addOnce("jqplotMouseDown",l),n.eventListenerHooks.addOnce("jqplotMouseUp",c),n.eventListenerHooks.addOnce("jqplotClick",d),n.eventListenerHooks.addOnce("jqplotRightClick",h)},e.jqplot.preSeriesInitHooks.push(t),e.jqplot.BarRenderer.prototype.calcSeriesNumbers=function(){for(var t,n,i=0,a=0,s=this[this._primaryAxis],r=0;r<s._series.length;r++)t=s._series[r],t===this&&(n=r),t.renderer.constructor==e.jqplot.BarRenderer&&(i+=t.data.length,a+=1);return[i,a,n]},e.jqplot.BarRenderer.prototype.setBarWidth=function(){var e=0,t=0,n=this[this._primaryAxis],i=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this);e=i[0],t=i[1];var a=n.numberTicks,s=(a-1)/2;return this.barWidth="xaxis"==n.name||"x2axis"==n.name?this._stack?(n._offsets.max-n._offsets.min)/e*t-this.barMargin:((n._offsets.max-n._offsets.min)/s-this.barPadding*(t-1)-2*this.barMargin)/t:this._stack?(n._offsets.min-n._offsets.max)/e*t-this.barMargin:((n._offsets.min-n._offsets.max)/s-this.barPadding*(t-1)-2*this.barMargin)/t,[e,t]},e.jqplot.BarRenderer.prototype.draw=function(t,i,a,s){{var r,o=e.extend({},a),l=void 0!=o.shadow?o.shadow:this.shadow,c=void 0!=o.showLine?o.showLine:this.showLine;void 0!=o.fill?o.fill:this.fill,this.xaxis,this.yaxis,this._xaxis.series_u2p,this._yaxis.series_u2p}this._dataColors=[],this._barPoints=[],null==this.barWidth&&this.renderer.setBarWidth.call(this);var d=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),h=(d[0],d[1]),u=d[2],p=[];if(this._barNudge=this._stack?0:(-Math.abs(h/2-.5)+u)*(this.barWidth+this.barPadding),c){var f=new e.jqplot.ColorGenerator(this.negativeSeriesColors),m=new e.jqplot.ColorGenerator(this.seriesColors),g=f.get(this.index);this.useNegativeColors||(g=o.fillStyle);var b,v,y,_=o.fillStyle;if("vertical"==this.barDirection){for(var r=0;r<i.length;r++)if(this._stack||null!=this.data[r][1]){if(p=[],b=i[r][0]+this._barNudge,y=this._stack&&this._prevGridData.length?n(this.index,r,this._plotData[r][1],s,"y"):this.fillToZero?this._yaxis.series_u2p(0):this.waterfall&&r>0&&r<this.gridData.length-1?this.gridData[r-1][1]:this.waterfall&&0==r&&r<this.gridData.length-1?this._yaxis.min<=0&&this._yaxis.max>=0?this._yaxis.series_u2p(0):this._yaxis.min>0?t.canvas.height:0:this.waterfall&&r==this.gridData.length-1?this._yaxis.min<=0&&this._yaxis.max>=0?this._yaxis.series_u2p(0):this._yaxis.min>0?t.canvas.height:0:t.canvas.height,o.fillStyle=this.fillToZero&&this._plotData[r][1]<0||this.waterfall&&this._data[r][1]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?f.next():m.next():g:this.varyBarColor&&!this._stack?m.next():_,!this.fillToZero||this._plotData[r][1]>=0?(p.push([b-this.barWidth/2,y]),p.push([b-this.barWidth/2,i[r][1]]),p.push([b+this.barWidth/2,i[r][1]]),p.push([b+this.barWidth/2,y])):(p.push([b-this.barWidth/2,i[r][1]]),p.push([b-this.barWidth/2,y]),p.push([b+this.barWidth/2,y]),p.push([b+this.barWidth/2,i[r][1]])),this._barPoints.push(p),l&&!this._stack){var E=e.extend(!0,{},o);delete E.fillStyle,this.renderer.shadowRenderer.draw(t,p,E)}var k=o.fillStyle||this.color;this._dataColors.push(k),this.renderer.shapeRenderer.draw(t,p,o)}}else if("horizontal"==this.barDirection)for(var r=0;r<i.length;r++)if(this._stack||null!=this.data[r][0]){if(p=[],b=i[r][1]-this._barNudge,v=this._stack&&this._prevGridData.length?n(this.index,r,this._plotData[r][0],s,"x"):this.fillToZero?this._xaxis.series_u2p(0):this.waterfall&&r>0&&r<this.gridData.length-1?this.gridData[r-1][0]:this.waterfall&&0==r&&r<this.gridData.length-1?this._xaxis.min<=0&&this._xaxis.max>=0?this._xaxis.series_u2p(0):this._xaxis.min>0?0:0:this.waterfall&&r==this.gridData.length-1?this._xaxis.min<=0&&this._xaxis.max>=0?this._xaxis.series_u2p(0):this._xaxis.min>0?0:t.canvas.width:0,o.fillStyle=this.fillToZero&&this._plotData[r][0]<0||this.waterfall&&this._data[r][0]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?f.next():m.next():g:this.varyBarColor&&!this._stack?m.next():_,!this.fillToZero||this._plotData[r][0]>=0?(p.push([v,b+this.barWidth/2]),p.push([v,b-this.barWidth/2]),p.push([i[r][0],b-this.barWidth/2]),p.push([i[r][0],b+this.barWidth/2])):(p.push([i[r][0],b+this.barWidth/2]),p.push([i[r][0],b-this.barWidth/2]),p.push([v,b-this.barWidth/2]),p.push([v,b+this.barWidth/2])),this._barPoints.push(p),l&&!this._stack){var E=e.extend(!0,{},o);delete E.fillStyle,this.renderer.shadowRenderer.draw(t,p,E)}var k=o.fillStyle||this.color;this._dataColors.push(k),this.renderer.shapeRenderer.draw(t,p,o)}}if(0==this.highlightColors.length)this.highlightColors=e.jqplot.computeHighlightColors(this._dataColors);else if("string"==typeof this.highlightColors){var d=this.highlightColors;this.highlightColors=[];for(var r=0;r<this._dataColors.length;r++)this.highlightColors.push(d)}},e.jqplot.BarRenderer.prototype.drawShadow=function(e,t,i,a){{var s,r,o,l,c,d=void 0!=i?i:{},h=(void 0!=d.shadow?d.shadow:this.shadow,void 0!=d.showLine?d.showLine:this.showLine);void 0!=d.fill?d.fill:this.fill,this.xaxis,this.yaxis,this._xaxis.series_u2p,this._yaxis.series_u2p}if(this._stack&&this.shadow){null==this.barWidth&&this.renderer.setBarWidth.call(this);var u=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this);if(o=u[0],l=u[1],c=u[2],this._barNudge=this._stack?0:(-Math.abs(l/2-.5)+c)*(this.barWidth+this.barPadding),h)if("vertical"==this.barDirection){for(var s=0;s<t.length;s++)if(null!=this.data[s][1]){r=[];var p,f=t[s][0]+this._barNudge;p=this._stack&&this._prevGridData.length?n(this.index,s,this._plotData[s][1],a,"y"):this.fillToZero?this._yaxis.series_u2p(0):e.canvas.height,r.push([f-this.barWidth/2,p]),r.push([f-this.barWidth/2,t[s][1]]),r.push([f+this.barWidth/2,t[s][1]]),r.push([f+this.barWidth/2,p]),this.renderer.shadowRenderer.draw(e,r,d)}}else if("horizontal"==this.barDirection)for(var s=0;s<t.length;s++)if(null!=this.data[s][0]){r=[];var m,f=t[s][1]-this._barNudge;m=this._stack&&this._prevGridData.length?n(this.index,s,this._plotData[s][0],a,"x"):this.fillToZero?this._xaxis.series_u2p(0):0,r.push([m,f+this.barWidth/2]),r.push([t[s][0],f+this.barWidth/2]),r.push([t[s][0],f-this.barWidth/2]),r.push([m,f-this.barWidth/2]),this.renderer.shadowRenderer.draw(e,r,d)}}}}(jQuery),function(e){function t(t,n){var i=t.plugins.highlighter,a=t.series[n.seriesIndex],s=a.markerRenderer,r=i.markerRenderer;r.style=s.style,r.lineWidth=s.lineWidth+i.lineWidthAdjust,r.size=s.size+i.sizeAdjust;var o=e.jqplot.getColorComponents(s.color),l=[o[0],o[1],o[2]],c=o[3]>=.6?.6*o[3]:o[3]*(2-o[3]);r.color="rgba("+l[0]+","+l[1]+","+l[2]+","+c+")",r.init(),r.draw(a.gridData[n.pointIndex][0],a.gridData[n.pointIndex][1],i.highlightCanvas._ctx)}function n(t,n,i){var o=t.plugins.highlighter,l=o._tooltipElem,c=n.highlighter||{},d=e.extend(!0,{},o,c);if(d.useAxesFormatters){for(var h,u=n._xaxis._ticks[0].formatter,p=n._yaxis._ticks[0].formatter,f=n._xaxis._ticks[0].formatString,m=n._yaxis._ticks[0].formatString,g=u(f,i.data[0]),b=[],v=1;v<d.yvalues+1;v++)b.push(p(m,i.data[v]));if("string"==typeof d.formatString)switch(d.tooltipAxes){case"both":case"xy":b.unshift(g),b.unshift(d.formatString),h=e.jqplot.sprintf.apply(e.jqplot.sprintf,b);break;case"yx":b.push(g),b.unshift(d.formatString),h=e.jqplot.sprintf.apply(e.jqplot.sprintf,b);break;case"x":h=e.jqplot.sprintf.apply(e.jqplot.sprintf,[d.formatString,g]);break;case"y":b.unshift(d.formatString),h=e.jqplot.sprintf.apply(e.jqplot.sprintf,b);break;default:b.unshift(g),b.unshift(d.formatString),h=e.jqplot.sprintf.apply(e.jqplot.sprintf,b)}else switch(d.tooltipAxes){case"both":case"xy":h=g;for(var v=0;v<b.length;v++)h+=d.tooltipSeparator+b[v];break;case"yx":h="";for(var v=0;v<b.length;v++)h+=b[v]+d.tooltipSeparator;h+=g;break;case"x":h=g;break;case"y":h=b.join(d.tooltipSeparator);break;default:h=g;for(var v=0;v<b.length;v++)h+=d.tooltipSeparator+b[v]}}else{var h;"string"==typeof d.formatString?h=e.jqplot.sprintf.apply(e.jqplot.sprintf,[d.formatString].concat(i.data)):"both"==d.tooltipAxes||"xy"==d.tooltipAxes?h=e.jqplot.sprintf(d.tooltipFormatString,i.data[0])+d.tooltipSeparator+e.jqplot.sprintf(d.tooltipFormatString,i.data[1]):"yx"==d.tooltipAxes?h=e.jqplot.sprintf(d.tooltipFormatString,i.data[1])+d.tooltipSeparator+e.jqplot.sprintf(d.tooltipFormatString,i.data[0]):"x"==d.tooltipAxes?h=e.jqplot.sprintf(d.tooltipFormatString,i.data[0]):"y"==d.tooltipAxes&&(h=e.jqplot.sprintf(d.tooltipFormatString,i.data[1]))}e.isFunction(d.tooltipContentEditor)&&(h=d.tooltipContentEditor(h,i.seriesIndex,i.pointIndex,t)),l.html(h);var y={x:i.gridData[0],y:i.gridData[1]},_=0,E=.707;1==n.markerRenderer.show&&(_=(n.markerRenderer.size+d.sizeAdjust)/2);var k=a;switch(n.fillToZero&&n.fill&&i.data[1]<0&&(k=r),k[s[d.tooltipLocation]]){case"nw":var w=y.x+t._gridPadding.left-l.outerWidth(!0)-d.tooltipOffset-E*_,T=y.y+t._gridPadding.top-d.tooltipOffset-l.outerHeight(!0)-E*_;break;case"n":var w=y.x+t._gridPadding.left-l.outerWidth(!0)/2,T=y.y+t._gridPadding.top-d.tooltipOffset-l.outerHeight(!0)-_;break;case"ne":var w=y.x+t._gridPadding.left+d.tooltipOffset+E*_,T=y.y+t._gridPadding.top-d.tooltipOffset-l.outerHeight(!0)-E*_;break;case"e":var w=y.x+t._gridPadding.left+d.tooltipOffset+_,T=y.y+t._gridPadding.top-l.outerHeight(!0)/2;break;case"se":var w=y.x+t._gridPadding.left+d.tooltipOffset+E*_,T=y.y+t._gridPadding.top+d.tooltipOffset+E*_;break;case"s":var w=y.x+t._gridPadding.left-l.outerWidth(!0)/2,T=y.y+t._gridPadding.top+d.tooltipOffset+_;break;case"sw":var w=y.x+t._gridPadding.left-l.outerWidth(!0)-d.tooltipOffset-E*_,T=y.y+t._gridPadding.top+d.tooltipOffset+E*_;break;case"w":var w=y.x+t._gridPadding.left-l.outerWidth(!0)-d.tooltipOffset-_,T=y.y+t._gridPadding.top-l.outerHeight(!0)/2;break;default:var w=y.x+t._gridPadding.left-l.outerWidth(!0)-d.tooltipOffset-E*_,T=y.y+t._gridPadding.top-d.tooltipOffset-l.outerHeight(!0)-E*_}l.css("left",w),l.css("top",T),d.fadeTooltip?l.stop(!0,!0).fadeIn(d.tooltipFadeSpeed):l.show(),l=null}function i(e,i,a,s,r){var o=r.plugins.highlighter,l=r.plugins.cursor;if(o.show)if(null==s&&o.isHighlighting){var c=jQuery.Event("jqplotHighlighterUnhighlight");r.target.trigger(c);var d=o.highlightCanvas._ctx;d.clearRect(0,0,d.canvas.width,d.canvas.height),o.fadeTooltip?o._tooltipElem.fadeOut(o.tooltipFadeSpeed):o._tooltipElem.hide(),o.bringSeriesToFront&&r.restorePreviousSeriesOrder(),o.isHighlighting=!1,o.currentNeighbor=null,d=null}else if(null!=s&&r.series[s.seriesIndex].showHighlight&&!o.isHighlighting){var c=jQuery.Event("jqplotHighlighterHighlight");c.which=e.which,c.pageX=e.pageX,c.pageY=e.pageY;var h=[s.seriesIndex,s.pointIndex,s.data,r];r.target.trigger(c,h),o.isHighlighting=!0,o.currentNeighbor=s,o.showMarker&&t(r,s),!r.series[s.seriesIndex].show||!o.showTooltip||l&&l._zoom.started||n(r,r.series[s.seriesIndex],s),o.bringSeriesToFront&&r.moveSeriesToFront(s.seriesIndex)}else if(null!=s&&o.isHighlighting&&o.currentNeighbor!=s&&r.series[s.seriesIndex].showHighlight){var d=o.highlightCanvas._ctx;d.clearRect(0,0,d.canvas.width,d.canvas.height),o.isHighlighting=!0,o.currentNeighbor=s,o.showMarker&&t(r,s),!r.series[s.seriesIndex].show||!o.showTooltip||l&&l._zoom.started||n(r,r.series[s.seriesIndex],s),o.bringSeriesToFront&&r.moveSeriesToFront(s.seriesIndex)}}e.jqplot.eventListenerHooks.push(["jqplotMouseMove",i]),e.jqplot.Highlighter=function(t){this.show=e.jqplot.config.enablePlugins,this.markerRenderer=new e.jqplot.MarkerRenderer({shadow:!1}),this.showMarker=!0,this.lineWidthAdjust=2.5,this.sizeAdjust=5,this.showTooltip=!0,this.tooltipLocation="nw",this.fadeTooltip=!0,this.tooltipFadeSpeed="fast",this.tooltipOffset=2,this.tooltipAxes="both",this.tooltipSeparator=", ",this.tooltipContentEditor=null,this.useAxesFormatters=!0,this.tooltipFormatString="%.5P",this.formatString=null,this.yvalues=1,this.bringSeriesToFront=!1,this._tooltipElem,this.isHighlighting=!1,this.currentNeighbor=null,e.extend(!0,this,t)
};var a=["nw","n","ne","e","se","s","sw","w"],s={nw:0,n:1,ne:2,e:3,se:4,s:5,sw:6,w:7},r=["se","s","sw","w","nw","n","ne","e"];e.jqplot.Highlighter.init=function(t,n,i){var a=i||{};this.plugins.highlighter=new e.jqplot.Highlighter(a.highlighter)},e.jqplot.Highlighter.parseOptions=function(){this.showHighlight=!0},e.jqplot.Highlighter.postPlotDraw=function(){this.plugins.highlighter&&this.plugins.highlighter.highlightCanvas&&(this.plugins.highlighter.highlightCanvas.resetCanvas(),this.plugins.highlighter.highlightCanvas=null),this.plugins.highlighter&&this.plugins.highlighter._tooltipElem&&(this.plugins.highlighter._tooltipElem.emptyForce(),this.plugins.highlighter._tooltipElem=null),this.plugins.highlighter.highlightCanvas=new e.jqplot.GenericCanvas,this.eventCanvas._elem.before(this.plugins.highlighter.highlightCanvas.createElement(this._gridPadding,"jqplot-highlight-canvas",this._plotDimensions,this)),this.plugins.highlighter.highlightCanvas.setContext();var t=document.createElement("div");this.plugins.highlighter._tooltipElem=e(t),t=null,this.plugins.highlighter._tooltipElem.addClass("jqplot-highlighter-tooltip"),this.plugins.highlighter._tooltipElem.css({position:"absolute",display:"none"}),this.eventCanvas._elem.before(this.plugins.highlighter._tooltipElem)},e.jqplot.preInitHooks.push(e.jqplot.Highlighter.init),e.jqplot.preParseSeriesOptionsHooks.push(e.jqplot.Highlighter.parseOptions),e.jqplot.postDrawHooks.push(e.jqplot.Highlighter.postPlotDraw)}(jQuery),function(e){function t(e,t,n){e.plugins.bubbleRenderer.highlightLabelCanvas.empty();var i=e.series[t],a=e.plugins.bubbleRenderer.highlightCanvas,s=a._ctx;s.clearRect(0,0,s.canvas.width,s.canvas.height),i._highlightedPoint=n,e.plugins.bubbleRenderer.highlightedSeriesIndex=t;var r=i.highlightColorGenerator.get(n),o=i.gridData[n][0],l=i.gridData[n][1],c=i.gridData[n][2];s.save(),s.fillStyle=r,s.strokeStyle=r,s.lineWidth=1,s.beginPath(),s.arc(o,l,c,0,2*Math.PI,0),s.closePath(),s.fill(),s.restore(),i.labels[n]&&(e.plugins.bubbleRenderer.highlightLabel=i.labels[n].clone(),e.plugins.bubbleRenderer.highlightLabel.appendTo(e.plugins.bubbleRenderer.highlightLabelCanvas),e.plugins.bubbleRenderer.highlightLabel.addClass("jqplot-bubble-label-highlight"))}function n(e){{var t=e.plugins.bubbleRenderer.highlightCanvas;e.plugins.bubbleRenderer.highlightedSeriesIndex}e.plugins.bubbleRenderer.highlightLabelCanvas.empty(),t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var n=0;n<e.series.length;n++)e.series[n]._highlightedPoint=null;e.plugins.bubbleRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight")}function i(e,i,a,s,r){if(s){var o=s.seriesIndex,l=s.pointIndex,c=[o,l,s.data,r.series[o].gridData[l][2]],d=jQuery.Event("jqplotDataMouseOver");if(d.pageX=e.pageX,d.pageY=e.pageY,r.target.trigger(d,c),r.series[c[0]].highlightMouseOver&&(c[0]!=r.plugins.bubbleRenderer.highlightedSeriesIndex||c[1]!=r.series[c[0]]._highlightedPoint)){var h=jQuery.Event("jqplotDataHighlight");h.which=e.which,h.pageX=e.pageX,h.pageY=e.pageY,r.target.trigger(h,c),t(r,c[0],c[1])}}else null==s&&n(r)}function a(e,i,a,s,r){if(s){var o=s.seriesIndex,l=s.pointIndex,c=[o,l,s.data,r.series[o].gridData[l][2]];if(r.series[c[0]].highlightMouseDown&&(c[0]!=r.plugins.bubbleRenderer.highlightedSeriesIndex||c[1]!=r.series[c[0]]._highlightedPoint)){var d=jQuery.Event("jqplotDataHighlight");d.which=e.which,d.pageX=e.pageX,d.pageY=e.pageY,r.target.trigger(d,c),t(r,c[0],c[1])}}else null==s&&n(r)}function s(e,t,i,a,s){var r=s.plugins.bubbleRenderer.highlightedSeriesIndex;null!=r&&s.series[r].highlightMouseDown&&n(s)}function r(e,t,n,i,a){if(i){var s=i.seriesIndex,r=i.pointIndex,o=[s,r,i.data,a.series[s].gridData[r][2]],l=jQuery.Event("jqplotDataClick");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,a.target.trigger(l,o)}}function o(e,t,i,a,s){if(a){var r=a.seriesIndex,o=a.pointIndex,l=[r,o,a.data,s.series[r].gridData[o][2]],c=s.plugins.bubbleRenderer.highlightedSeriesIndex;null!=c&&s.series[c].highlightMouseDown&&n(s);var d=jQuery.Event("jqplotDataRightClick");d.which=e.which,d.pageX=e.pageX,d.pageY=e.pageY,s.target.trigger(d,l)}}function l(){this.plugins.bubbleRenderer&&this.plugins.bubbleRenderer.highlightCanvas&&(this.plugins.bubbleRenderer.highlightCanvas.resetCanvas(),this.plugins.bubbleRenderer.highlightCanvas=null),this.plugins.bubbleRenderer={highlightedSeriesIndex:null},this.plugins.bubbleRenderer.highlightCanvas=new e.jqplot.GenericCanvas,this.plugins.bubbleRenderer.highlightLabel=null,this.plugins.bubbleRenderer.highlightLabelCanvas=e('<div style="position:absolute;"></div>');var t=this._gridPadding.top,n=this._gridPadding.left,i=this._plotDimensions.width-this._gridPadding.left-this._gridPadding.right,a=this._plotDimensions.height-this._gridPadding.top-this._gridPadding.bottom;this.plugins.bubbleRenderer.highlightLabelCanvas.css({top:t,left:n,width:i+"px",height:a+"px"}),this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-bubbleRenderer-highlight-canvas",this._plotDimensions,this)),this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightLabelCanvas);this.plugins.bubbleRenderer.highlightCanvas.setContext()}function c(t,n,i){i=i||{},i.axesDefaults=i.axesDefaults||{},i.seriesDefaults=i.seriesDefaults||{};var a=!1;if(i.seriesDefaults.renderer==e.jqplot.BubbleRenderer)a=!0;else if(i.series)for(var s=0;s<i.series.length;s++)i.series[s].renderer==e.jqplot.BubbleRenderer&&(a=!0);a&&(i.axesDefaults.renderer=e.jqplot.BubbleAxisRenderer,i.sortData=!1)}var d=function(e){return Math.max.apply(Math,e)};e.jqplot.BubbleRenderer=function(){e.jqplot.LineRenderer.call(this)},e.jqplot.BubbleRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.BubbleRenderer.prototype.constructor=e.jqplot.BubbleRenderer,e.jqplot.BubbleRenderer.prototype.init=function(t,n){this.varyBubbleColors=!0,this.autoscaleBubbles=!0,this.autoscaleMultiplier=1,this.autoscalePointsFactor=-.07,this.escapeHtml=!0,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.bubbleAlpha=1,this.highlightAlpha=null,this.bubbleGradients=!1,this.showLabels=!0,this.radii=[],this.maxRadius=0,this._highlightedPoint=null,this.labels=[],this.bubbleCanvases=[],this._type="bubble",t.highlightMouseDown&&null==t.highlightMouseOver&&(t.highlightMouseOver=!1),e.extend(!0,this,t),null==this.highlightAlpha&&(this.highlightAlpha=this.bubbleAlpha,this.bubbleGradients&&(this.highlightAlpha=.35)),this.autoscaleMultiplier=this.autoscaleMultiplier*Math.pow(this.data.length,this.autoscalePointsFactor),this._highlightedPoint=null;for(var c,d=0;d<this.data.length;d++){var h=null,u=this.data[d];this.maxRadius=Math.max(this.maxRadius,u[2]),u[3]&&"object"==typeof u[3]&&(h=u[3].color),null==h&&null!=this.seriesColors[d]&&(h=this.seriesColors[d]),h&&this.bubbleAlpha<1&&(c=e.jqplot.getColorComponents(h),h="rgba("+c[0]+", "+c[1]+", "+c[2]+", "+this.bubbleAlpha+")"),h&&(this.seriesColors[d]=h)}if(this.varyBubbleColors||(this.seriesColors=[this.color]),this.colorGenerator=new e.jqplot.ColorGenerator(this.seriesColors),0==this.highlightColors.length)for(var d=0;d<this.seriesColors.length;d++){for(var p=e.jqplot.getColorComponents(this.seriesColors[d]),f=[p[0],p[1],p[2]],m=f[0]+f[1]+f[2],g=0;3>g;g++)f[g]=m>570?.8*f[g]:f[g]+.3*(255-f[g]),f[g]=parseInt(f[g],10);this.highlightColors.push("rgba("+f[0]+","+f[1]+","+f[2]+", "+this.highlightAlpha+")")}this.highlightColorGenerator=new e.jqplot.ColorGenerator(this.highlightColors);var b={fill:!0,isarc:!0,angle:this.shadowAngle,alpha:this.shadowAlpha,closePath:!0};this.renderer.shadowRenderer.init(b),this.canvas=new e.jqplot.DivCanvas,this.canvas._plotDimensions=this._plotDimensions,n.eventListenerHooks.addOnce("jqplotMouseMove",i),n.eventListenerHooks.addOnce("jqplotMouseDown",a),n.eventListenerHooks.addOnce("jqplotMouseUp",s),n.eventListenerHooks.addOnce("jqplotClick",r),n.eventListenerHooks.addOnce("jqplotRightClick",o),n.postDrawHooks.addOnce(l)},e.jqplot.BubbleRenderer.prototype.setGridData=function(e){var t=this._xaxis.series_u2p,n=this._yaxis.series_u2p,i=this._plotData;this.gridData=[];var a=[];this.radii=[];for(var s=Math.min(e._height,e._width),r=0;r<this.data.length;r++)null!=i[r]&&(this.gridData.push([t.call(this._xaxis,i[r][0]),n.call(this._yaxis,i[r][1]),i[r][2]]),this.radii.push([r,i[r][2]]),a.push(i[r][2]));var o,l,c=this.maxRadius=d(a),h=this.gridData.length;if(this.autoscaleBubbles)for(var r=0;h>r;r++)l=a[r]/c,o=this.autoscaleMultiplier*s/6,this.gridData[r][2]=o*l;this.radii.sort(function(e,t){return t[1]-e[1]})},e.jqplot.BubbleRenderer.prototype.makeGridData=function(e,t){var n=this._xaxis.series_u2p,i=this._yaxis.series_u2p,a=[],s=[];this.radii=[];for(var r=Math.min(t._height,t._width),o=0;o<e.length;o++)null!=e[o]&&(a.push([n.call(this._xaxis,e[o][0]),i.call(this._yaxis,e[o][1]),e[o][2]]),s.push(e[o][2]),this.radii.push([o,e[o][2]]));var l,c,h=this.maxRadius=d(s),u=this.gridData.length;if(this.autoscaleBubbles)for(var o=0;u>o;o++)c=s[o]/h,l=this.autoscaleMultiplier*r/6,a[o][2]=l*c;return this.radii.sort(function(e,t){return t[1]-e[1]}),a},e.jqplot.BubbleRenderer.prototype.draw=function(t,n,i){this.plugins.pointLabels&&(this.plugins.pointLabels.show=!1);{var a=void 0!=i?i:{};void 0!=a.shadow?a.shadow:this.shadow}this.canvas._elem.empty();for(var s=0;s<this.radii.length;s++){var r=this.radii[s][0],o=null,l=null,c=null,d=this.data[r],n=this.gridData[r];d[3]&&("object"==typeof d[3]?o=d[3].label:"string"==typeof d[3]&&(o=d[3])),l=this.colorGenerator.get(r);var h,u,p=n[2];this.shadow&&(h=(.7+n[2]/40).toFixed(1),u=1+Math.ceil(n[2]/15),p+=h*u),this.bubbleCanvases[r]=new e.jqplot.BubbleCanvas,this.canvas._elem.append(this.bubbleCanvases[r].createElement(n[0],n[1],p)),this.bubbleCanvases[r].setContext();var t=this.bubbleCanvases[r]._ctx,f=t.canvas.width/2,m=t.canvas.height/2;if(this.shadow&&this.renderer.shadowRenderer.draw(t,[f,m,n[2],0,2*Math.PI],{offset:h,depth:u}),this.bubbleCanvases[r].draw(n[2],l,this.bubbleGradients,this.shadowAngle/180*Math.PI),o&&this.showLabels){c=e('<div style="position:absolute;" class="jqplot-bubble-label"></div>'),this.escapeHtml?c.text(o):c.html(o),this.canvas._elem.append(c);var g=e(c).outerHeight(),b=e(c).outerWidth(),v=n[1]-.5*g,y=n[0]-.5*b;c.css({top:v,left:y}),this.labels[r]=e(c)}}},e.jqplot.DivCanvas=function(){e.jqplot.ElemContainer.call(this),this._ctx},e.jqplot.DivCanvas.prototype=new e.jqplot.ElemContainer,e.jqplot.DivCanvas.prototype.constructor=e.jqplot.DivCanvas,e.jqplot.DivCanvas.prototype.createElement=function(t,n,i){this._offsets=t;var a="jqplot-DivCanvas";void 0!=n&&(a=n);var s;s=this._elem?this._elem.get(0):document.createElement("div"),void 0!=i&&(this._plotDimensions=i);var r=this._plotDimensions.width-this._offsets.left-this._offsets.right+"px",o=this._plotDimensions.height-this._offsets.top-this._offsets.bottom+"px";return this._elem=e(s),this._elem.css({position:"absolute",width:r,height:o,left:this._offsets.left,top:this._offsets.top}),this._elem.addClass(a),this._elem},e.jqplot.DivCanvas.prototype.setContext=function(){return this._ctx={canvas:{width:0,height:0},clearRect:function(){return null}},this._ctx},e.jqplot.BubbleCanvas=function(){e.jqplot.ElemContainer.call(this),this._ctx},e.jqplot.BubbleCanvas.prototype=new e.jqplot.ElemContainer,e.jqplot.BubbleCanvas.prototype.constructor=e.jqplot.BubbleCanvas,e.jqplot.BubbleCanvas.prototype.createElement=function(t,n,i){var a,s="jqplot-bubble-point";a=this._elem?this._elem.get(0):document.createElement("canvas"),a.width=null!=i?2*i:a.width,a.height=null!=i?2*i:a.height,this._elem=e(a);var r=null!=t&&null!=i?t-i:this._elem.css("left"),o=null!=n&&null!=i?n-i:this._elem.css("top");return this._elem.css({position:"absolute",left:r,top:o}),this._elem.addClass(s),e.jqplot.use_excanvas&&(window.G_vmlCanvasManager.init_(document),a=window.G_vmlCanvasManager.initElement(a)),this._elem},e.jqplot.BubbleCanvas.prototype.draw=function(t,n,i,a){var s=this._ctx,r=s.canvas.width/2,o=s.canvas.height/2;if(s.save(),i&&!e.jqplot.use_excanvas){t=1.04*t;var l=e.jqplot.getColorComponents(n),c="rgba("+Math.round(l[0]+.8*(255-l[0]))+", "+Math.round(l[1]+.8*(255-l[1]))+", "+Math.round(l[2]+.8*(255-l[2]))+", "+l[3]+")",d="rgba("+l[0]+", "+l[1]+", "+l[2]+", 0)",h=.35*t,u=r-.33*Math.cos(a)*t,p=o-.33*Math.sin(a)*t,f=s.createRadialGradient(u,p,h,r,o,t);f.addColorStop(0,c),f.addColorStop(.93,n),f.addColorStop(.96,d),f.addColorStop(1,d),s.fillStyle=f,s.fillRect(0,0,s.canvas.width,s.canvas.height)}else{s.fillStyle=n,s.strokeStyle=n,s.lineWidth=1,s.beginPath();var m=2*Math.PI;s.arc(r,o,t,0,m,0),s.closePath(),s.fill()}s.restore()},e.jqplot.BubbleCanvas.prototype.setContext=function(){return this._ctx=this._elem.get(0).getContext("2d"),this._ctx},e.jqplot.BubbleAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)},e.jqplot.BubbleAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.BubbleAxisRenderer.prototype.constructor=e.jqplot.BubbleAxisRenderer,e.jqplot.BubbleAxisRenderer.prototype.init=function(t){e.extend(!0,this,t);for(var n=this._dataBounds,i=0,a=0,s=0,r=0,o=0,l=0,c=0,d=0,h=0,u=0,p=0;p<this._series.length;p++)for(var f=this._series[p],m=f._plotData,g=0;g<m.length;g++)"xaxis"==this.name||"x2axis"==this.name?((m[g][0]<n.min||null==n.min)&&(n.min=m[g][0],i=p,a=g,l=m[g][2],c=f.maxRadius,u=f.autoscaleMultiplier),(m[g][0]>n.max||null==n.max)&&(n.max=m[g][0],s=p,r=g,o=m[g][2],d=f.maxRadius,h=f.autoscaleMultiplier)):((m[g][1]<n.min||null==n.min)&&(n.min=m[g][1],i=p,a=g,l=m[g][2],c=f.maxRadius,u=f.autoscaleMultiplier),(m[g][1]>n.max||null==n.max)&&(n.max=m[g][1],s=p,r=g,o=m[g][2],d=f.maxRadius,h=f.autoscaleMultiplier));var b=l/c,v=o/d,y=n.max-n.min,_=(Math.min(this._plotDimensions.width,this._plotDimensions.height),b*u/3*y),E=v*h/3*y;n.max+=E,n.min-=_},e.jqplot.preInitHooks.push(c)}(jQuery),ABINE_DNTME.CompiledTemplates=ABINE_DNTME.CompiledTemplates||{},ABINE_DNTME.define("abine/views/commonhelpers",["wycats/handlebars","abine/config","abine/intl"],function(e,t,n){e.registerHelper("configVar",function(n){return e.Utils.escapeExpression(t[n])}),e.registerHelper("ifContentUser",function(e,t){return"function"==typeof ABINE_DNTME.contentuser[e]&&ABINE_DNTME.contentuser[e]()?t.fn(this):t.inverse(this)}),e.registerHelper("intl",function(e,t){return arguments.length>1&&(t=Array.prototype.slice.call(arguments,1)),n.getText(e,t)}),e.registerHelper("plural",function(e,t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,1));var i=n.getText(e,t);return 1!=t[t.length-2]?i.length>2&&i.substr(i.length-3).match(/y$/)?i.substr(0,i.length-1)+"ies":i+"s":i}),e.registerHelper("date",function(e){return new Date(e).toLocaleDateString()})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/loading_display/loading_display"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r="",o="function",l=n.helperMissing,c=void 0,d=this.escapeExpression;return r+='<div class="loading-display">\n  <div class="progress progress-striped active">\n    <div class="bar bar-info" style="width: 100%;"></div>\n  </div>\n  <div class="loading-message">\n    ',i="mm_loading_display_Loading",s=n.intl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"intl",i,{hash:{}}):a,r+=d(i)+'\n  </div>\n</div>\n<div class="refreshing-display" style="display:none;">\n    <img src="',i="/pages/images/ajax_loader.gif",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'" />\n</div>\n'}),ABINE_DNTME.CompiledTemplates["views/loading_display/loading_display"]}),ABINE_DNTME.define("abine/views/loading_display",["documentcloud/underscore","jquery","duckbone/core","abine/timer","abine/intl"],function(e,t,n,i,a){var s=n.View.extend({templateName:"loading_display_loading_display",afterInitialize:function(){this.options.customMessages||(this.options.customMessages=["mm_loading_display_LotOfAccounts","mm_loading_display_StillWorking","mm_loading_display_HangOn","mm_loading_display_Sorry"]);var n=0;this.changeMessage=i.setInterval(e.bind(function(){n>=this.options.customMessages.length?i.clearInterval(this.changeMessage):(t(this.el).find(".loading-message").html(a.getText(this.options.customMessages[n],["loading_"+this.options.pageName])),n++)},this),this.options.interval||5e3)},reset:function(){i.clearInterval(this.changeMessage),t(this.el).find(".loading-message").html(""),this.afterInitialize()},hide:function(){i.clearInterval(this.changeMessage),t(this.el).find(".loading-display").hide(),t(this.el).find(".refreshing-display").hide()},startRefreshing:function(){t(this.el).find(".refreshing-display").show()}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/unlock/panel"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a="";return a+='\n         <div class="control-group">\n           <i class="icon-lock"></i>\n          ',t="mm_unlock_panel_login_message",l=n.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"intl",t,{hash:{}}):i,a+=m(t)+'\n             <button id="unlockButton" class="unlockButton btn btn-mini btn-success">',t="mm_unlock_panel_login",l=n.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"intl",t,{hash:{}}):i,a+=m(t)+"</button>\n         </div>\n    "}n=n||e.helpers;var r,o,l,c,d="",h=this,u="function",p=n.helperMissing,f=void 0,m=this.escapeExpression,g=n.blockHelperMissing;return d+='<div class="panel">\n\n    ',r="unlock",l=n.form,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),c=h.program(1,s,a),c.hash={},c.fn=c,c.inverse=h.noop,r=l&&typeof o===u?o.call(t,r,c):g.call(t,o,r,c),(r||0===r)&&(d+=r),d+='\n\n    <div class="header">\n        <div class="logo-link">\n            <img class="logo" height="16px" width="17px" src="',r="/pages/images/manage/dntme_logo.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"assetUrl",r,{hash:{}}):o,d+=m(r)+'"/>\n            <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n        </div>\n        <div class="links close-link"></div>\n    </div>\n</div>\n\n'}),ABINE_DNTME.CompiledTemplates["views/unlock/panel"]}),ABINE_DNTME.define("abine/views/unlockPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/eventLogger"],function(e,t,n,i,a,s,r){var o=a.extend({templateName:"unlock_panel",events:{"click #unlockButton":"login"},login:function(e){return e.preventDefault(),s.securityManager.login(),this.cleanupPanel(),this.closePanel(),!1},afterInitialize:function(){this.unlockHook=e.bind(this.unlocked,this),s.securityManager.on("background:securityManager:unlocked",this.unlockHook),this.field=this.options.field,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={},this.render(),this.contentManager=this.options.contentManager,this.bindBaseEvents()},cleanupPanel:function(){s.securityManager.off("background:securityManager:unlocked",this.unlockHook)},unlocked:function(){this.cleanupPanel(),this.closePanel();var e=this.options.field;r.setTimeout(function(){t(e.element)[0].focus()},1e3)}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/email_helper/panel"]=e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n        <!--Mask My Email-->\n        <a href="#" class="mmKeyOption disposableEmail"><div class="element" id="mask">\n            <span class="panelLeft">\n                <img class="iconPos" src="',i="/pages/images/maskmail-icon-green.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'"/>\n                ',i="mm_email_helper_maskMyEmail",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'\n            </span>\n            <span class="panelRight">\n                <img class="loading" style="display:none;" src="',i="/pages/images/ajax_loader.gif",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'"/>\n\n            </span>\n        </div></a>\n\n        <!--Server Down Error Handling-->\n        <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n            <span class="panelLeft">\n                <a>',i="mm_email_helper_serverIsDown",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'</a>\n            </span>\n            <span class="panelRight">\n                <a>',i="mm_email_helper_tryAgainLater",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'</a>\n            </span>\n        </div></span>\n\n        <!--Account disabled Error Handling-->\n        <div class="accountDisabledBtn element" style="display:none">\n            <span class="message">',i="mm_email_helper_accountDisabled",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'</span>\n            <a href=# class="enableAccount">',i="mm_email_helper_accountEnableLink",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+"</a>\n        </div>\n\n        <!--Disclose My Email-->\n        ",i="hasRegEmail",g=n.ifContentUser,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"ifContentUser"),b=y.program(2,r,t),b.hash={},b.fn=b,b.inverse=y.program(4,o,t),i=g&&typeof a===_?a.call(e,i,b):T.call(e,a,i,b),(i||0===i)&&(s+=i),s+="\n\n         <!-- If Masked Emails already exist for this domain -->\n         ",g=n.disposableEmails,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableEmails"),a=n.each,b=y.program(6,l,t),b.hash={},b.fn=b,b.inverse=y.noop,i=a.call(e,i,b),(i||0===i)&&(s+=i),s+='\n\n          <div class="header">\n              <div class="logo-link">\n                  <img class="logo" height="16px" width="17px" src="',i="/pages/images/dnt-ui-header-logo.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'"/>\n                  ',g=n.tabData,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"hasFiveOrMoreTrackers"),a=n["if"],b=y.program(8,c,t),b.hash={},b.fn=b,b.inverse=y.program(10,d,t),i=a.call(e,i,b),(i||0===i)&&(s+=i),s+='\n              </div>\n              <div class="links-wrapper">\n                <div class="links close-link">\n                  <img id="close" class="header-icon" src="',i="/pages/images/dnt-ui-header-close.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'">\n                </div>\n                <div class="links help-link">\n                  <img class="header-icon" src="',i="/pages/images/dnt-ui-header-help.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'">\n                </div>\n                <div class="links settings-link" data-highlight="email">\n                    <img class="header-icon" src="',i="/pages/images/dnt-ui-header-settings.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'">\n                </div>\n              </div>\n          </div>\n\n    '}function r(e){var t,i,a="";return a+='\n            <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskmail-icon-red.png",g=n.assetUrl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"assetUrl",t,{hash:{}}):i,a+=w(t)+'"/>\n                    ',t="mm_email_helper_discloseEmail",g=n.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"intl",t,{hash:{}}):i,a+=w(t)+"\n                </span>\n            </div></a>\n        "}function o(e){var t,i,a="";return a+='\n            <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskmail-icon-red.png",g=n.assetUrl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"assetUrl",t,{hash:{}}):i,a+=w(t)+'"/>\n                    ',t="mm_email_helper_discloseEmail",g=n.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"intl",t,{hash:{}}):i,a+=w(t)+'\n                </span>\n                <span class="panelRight">\n                    <span class="overflowText">',g=n.primaryEmail,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),typeof t===_?t=t.call(e,{hash:{}}):t===k&&(t=E.call(e,"primaryEmail.email",{hash:{}})),a+=w(t)+"</span>\n                </span>\n            </div></a>\n        "}function l(e){var t,i,a="";return a+='\n            <a href="#" data-aliasaddress="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===_?t=t.call(e,{hash:{}}):t===k&&(t=E.call(e,"this.getAddress",{hash:{}})),a+=w(t)+'" class="mmKeyOption usedEmail"><div class="element" id="mask">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskmail-icon-green.png",g=n.assetUrl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"assetUrl",t,{hash:{}}):i,a+=w(t)+'"/>\n                    ',t="mm_email_helper_use",g=n.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"intl",t,{hash:{}}):i,a+=w(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===_?t=t.call(e,{hash:{}}):t===k&&(t=E.call(e,"this.getAddress",{hash:{}})),a+=w(t)+'\n                </span>\n                <span class="panelRight">\n                    <span class="overflowText">',t="mm_email_helper_created",g=n.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"intl",t,{hash:{}}):i,a+=w(t)+" ",t="createdAt",g=n.live_timestamp,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof i===_?i.call(e,t,{hash:{}}):i===k?E.call(e,"live_timestamp",t,{hash:{}}):i,a+=w(t)+"</span>\n                </span>\n            </div></a>\n         "}function c(e){var t,i,a,s="";return s+='\n                    <span class="recommended">',g=n.tabData,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),i="mm_email_helper_recommended",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===_?a.call(e,i,t,{hash:{}}):a===k?E.call(e,"intl",i,t,{hash:{}}):a,(t||0===t)&&(s+=t),s+="</span>\n                  "}function d(){return'\n                    <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n                  '}function h(e,t){var i,a,s="";return s+='\n        <!-- new email register flow -->\n        <div class="progress-section" style="display:none">\n            <div class="progress progress-striped active">\n                <div class="bar bar-info" style="width: 100%;"></div>\n            </div>\n            <div class="loading-message"></div>\n        </div>\n\n        <div class="info">',i="mm_dntme_enter_email",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'</div>\n        <a href="#" class="mmKeyOption registerEmail"><div class="element" id="mask">\n          <span class="panelLeft">\n              <img class="iconPos" src="',i="/pages/images/maskmail-icon-green.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'"/>\n            ',i="mm_email_helper_maskMyEmail",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'\n          </span>\n          <span class="panelRight whatIsThisLink">\n            ',i="mm_email_helper_whatIsThis",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'\n          </span>\n        </div></a>\n        <a href="#" class="mmKeyOption noPrimaryEmail"><div class="element" id="disclose">\n            <span class="panelLeft">\n                <img class="iconPos" src="',i="/pages/images/maskmail-icon-red.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'"/>\n              ',i="mm_email_helper_discloseEmail",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"intl",i,{hash:{}}):a,s+=w(i)+'\n            </span>\n        </div></a>\n\n        <div class="header">\n            <div class="masked-emails-in-30-logo-link whatIsThisLink">\n                <img class="logo" height="16px" width="17px" src="',i="/pages/images/dnt-ui-header-logo.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'"/>\n                ',g=n.tabData,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"hasFiveOrMoreTrackers"),a=n["if"],b=y.program(13,u,t),b.hash={},b.fn=b,b.inverse=y.program(15,p,t),i=a.call(e,i,b),(i||0===i)&&(s+=i),s+='\n            </div>\n            <div class="links-wrapper">\n              <div class="links close-link">\n                <img id="close" class="header-icon" src="',i="/pages/images/dnt-ui-header-close.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'">\n              </div>\n              <div id="faqLink" class="links whatIsThisLink">\n                <img class="header-icon" src="',i="/pages/images/dnt-ui-header-help.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'">\n              </div>\n              <div class="links settings-link" data-highlight="email">\n                <img class="header-icon" src="',i="/pages/images/dnt-ui-header-settings.png",g=n.assetUrl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===_?a.call(e,i,{hash:{}}):a===k?E.call(e,"assetUrl",i,{hash:{}}):a,s+=w(i)+'">\n              </div>\n            </div>\n        </div>\n    '}function u(e){var t,i,a,s="";return s+='\n                  <span class="recommended">',g=n.tabData,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),i="mm_email_helper_recommended",g=n.intl,a=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===_?a.call(e,i,t,{hash:{}}):a===k?E.call(e,"intl",i,t,{hash:{}}):a,(t||0===t)&&(s+=t),s+="</span>\n                "
}function p(){return'\n                  <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n                '}n=n||e.helpers;var f,m,g,b,v="",y=this,_="function",E=n.helperMissing,k=void 0,w=this.escapeExpression,T=n.blockHelperMissing;return v+='<div class="panel">\n    <div id="error" style="display:none;"></div>\n    ',g=n.hasRegistered,f=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),m=n["if"],b=y.program(1,s,a),b.hash={},b.fn=b,b.inverse=y.program(12,h,a),f=m.call(t,f,b),(f||0===f)&&(v+=f),v+="\n\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/email_helper/panel"]}),ABINE_DNTME.define("abine/views/emailHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes"],function(e,t,n,i,a,s,r,o,l,c){function d(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",i=0;e>i;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var h=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,u=(n.View.extend({tagName:"span",templateName:"email_helper_tracker_count",afterInitialize:function(){this.doc=this.el.ownerDocument}}),a.extend({templateName:"email_helper_panel",events:{"click .whatIsThisLink":"openMaskedEmailsIn30","click .recommended span":"showDNTMe","click a.registerEmail":"setupUser","click a.noPrimaryEmail":"noPrimaryEmail","click a.primaryEmail":"fillWithPrimaryEmail","click a.disposableEmail":"fillWithDisposableEmail","click a.usedEmail":"fillWithUsedEmail","click a.disabled":"closePanel","click .panelSection":"performActions","click a.enableAccount":"enableAccount","click .errorReportLink":"makeErrorReport","click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose"},logClose:function(){this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId})},openMaskedEmailsIn30:function(e){return e.preventDefault(),t(e.target).hasClass("num-trackers")?!1:(o.webapp.openMaskedEmailsIn30(),this.closePanel(),!1)},openHelp:function(e){return t(e.target).hasClass("num-trackers")?!1:(o.webapp.openHelp("/email"),this.closePanel(),void 0)},showDNTMe:function(e){e.preventDefault(),this.contentManager.showDNTMe({page:"trackers"}),this.closePanel()},makeErrorReport:function(){o.webapp.openHelp(""),this.closePanel()},afterInitialize:function(){this.field=this.options.field,this.numMenuOptions=3,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.model={primaryEmail:!1,hasRegistered:this.options.hasRegistered,disposableEmails:new i.DisposableEmailCollection},this.model.tabData=new i.TabData({messenger:this.options.messenger}),this.model.tabData.fetch({success:e.bind(function(){this.model.shieldedEmails=new i.ShieldedEmailCollection,this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),this.model.primaryEmail?(this.panelId=1000001,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.model.disposableEmails=new i.DisposableEmailCollection,this.model.disposableEmails.fetchAllByDomain(this.options.domain,e.bind(function(){this.bind("enter0",function(e){this.fillWithDisposableEmail(e)}),this.bind("enter1",function(e){this.fillWithPrimaryEmail(e)}),this.numMenuOptions=this.model.disposableEmails.length+2;for(var e=2;e<this.numMenuOptions;e++)this.bind("enter"+e,function(e,t){this.fillWithUsedEmail(e,t)});this.render()},this))):(this.model.hasRegistered=!1,this.model.dynamicPanel?(this.panelId=this.model.dynamicPanel.id,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId})):(this.doNotCloseOnTyping=!0,this.panelId=5000001,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.bind("enter0",this.setupUser,this),this.bind("enter1",this.noPrimaryEmail,this)),this.render())},this)})},this)})},noPrimaryEmail:function(e){e&&e.preventDefault(),this.setupUser(e,!0)},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, .progress-section").hide(),this.$(".info, .registerEmail, .noPrimaryEmail").show(),this.$(".mmKeyOption .hover").removeClass("hover"),this.triggerRender(),delete this.selectedField},setupUser:function(n,i){function a(e,n){try{f.get(0).ownerDocument&&(i?t(".loading-message",f).text(l.getText("mm_loading_display_register_use"+Math.floor(e/5))):t(".loading-message",f).text(l.getText("mm_loading_display_register"+Math.floor(e/5))),n>e&&(m=s.setTimeout(function(){a(e+1,n)},500)))}catch(r){}}if(!n||(n.preventDefault(),!this.$(n.target).hasClass("whatIsThisLink"))){i=i||!1;var r=this.field.element.value;this.$(".info").hide();var c=this.$("#error");if(c.hide(),!r.match(h))return c.text(l.getText("mm_dntme_invalid_email")).show(),this.autoResize(),void 0;var u=d(6),p={email:r,password:u,password_hint:l.getText("mm_pwhint_default")},f=this.$(".progress-section"),m=null;a(0,20),f.show(),this.$(".registerEmail, .noPrimaryEmail").hide(),o.licenseModule.register(p,e.bind(function(t,a){this.processRegistration(t,a,p,e.bind(function(e){e?(s.clearTimeout(m),f.hide()):i?this.fillWithPrimaryEmail(n,!0):this.fillWithDisposableEmail(n,!0)},this))},this)),this.autoResize()}},processRegistration:function(t,n,i,a){if(t){var s=l.getText("mm_dntme_register_error"),r=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?s=l.getText("mm_dntme_invalid_email_server_error"):t.responseJSON.error_code==c.SCHEDULED_DOWNTIME?s=l.getText("mm_dntme_server_maintenance"):r&&r.email&&("has already been taken"==r.email[0]?s=l.getText("mm_dntme_duplicate_email",[i.email]):"was used for MaskMe Heavy"==r.email[0]&&(s=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(s).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password?this.$("#error #loginButton").click(e.bind(function(){this.openPasswordSetupPage(i.email)},this)):this.$("#error #loginButton").click(e.bind(this.openLoginPage,this)),this.$("#error #retryEmail").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),a(s)}else this.contentManager.preferences.fetchAll(),this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),a()},this)})},fillWithPrimaryEmail:function(t,n){if(t&&t.preventDefault(),n=n||!1,this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),n)this.field&&this.fillFieldsByType(this.options.fields,"/contact/email",this.model.primaryEmail.getAddress(),{domain:this.options.domain,origin:"primary"}),s.setTimeout(e.bind(function(){var e={msg:l.getText("mm_email_helper_nextDisclose"),targetUrl:("production"==ABINE_DNTME.config.environment?"https://":"http://")+ABINE_DNTME.config.webAppHost+"/#/emailsin30"};e.neverFade=!0,this.options.contentManager.showNotification(e)},this),1e3);else if(this.field&&this.model.primaryEmail&&!ABINE_DNTME.contentuser.hasRegEmail())""==this.model.primaryEmail.get("email")?this.openLoginPage("primaryemail"):this.fillFieldsByType(this.options.fields,"/contact/email",this.model.primaryEmail.getAddress(),{domain:this.options.domain,origin:"primary"});else if(ABINE_DNTME.contentuser.hasRegEmail())return this.openSetupEmailPage(),void 0;this.closePanel()},fillWithDisposableEmail:function(n,i){if(n&&n.preventDefault(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.field&&this.model.primaryEmail&&""==this.model.primaryEmail.get("email"))return this.openLoginPage("maskedemail"),void 0;if(!this.field.element.hasAttribute("generatingDisposable")){var a=this.field.element.value;a.match(h)&&this.model.primaryEmail.get("email")!=a?-1!=a.indexOf("@"+ABINE_DNTME.config.disposableDomain)&&(a=null):a=null,a&&(this.ignoreBlur(!0),this.doNotCloseOnTyping=!0,t(this.field.element).unbind("blur.dntme")),this.field.element.setAttribute("generatingDisposable","true"),this.$(".loading").show();var r=this.model.primaryEmail.generateDisposable(this.options.domain);r.save({},{success:e.bind(function(){this.field.disposableGUID=r.get("guid"),this.fillFieldsByType(this.options.fields,"/contact/email",r.getAddress(),{domain:this.options.domain,origin:"disposable",disposableGUID:r.get("guid")}),s.setTimeout(e.bind(function(){var e={type:"email",msg:l.getText("mm_email_helper_controlMasked"),targetUrl:("production"==ABINE_DNTME.config.environment?"http://":"http://")+ABINE_DNTME.config.webAppHost+"/#/emails",domain:this.options.domain,disposable:r.getAddress(),real:this.model.primaryEmail.getAddress(),targetId:r.get("guid")};i&&(e.type="post-register",e.neverFade=!0),this.options.contentManager.showNotification(e)},this),1e3),a?(this.$("#error").html(l.getText("mm_dntme_change_email_message",[this.model.primaryEmail.get("email"),a])).show(),this.$("#error #changeSetting").click(e.bind(this.openSettings,this)),this.$(".mmKeyOption, .sep, .errorBtn").hide(),this.field.element.focus(),delete this.doNotCloseOnTyping,this.bindFieldBlur(),this.autoResize()):this.closePanel(),this.field.element.removeAttribute("generatingDisposable")},this),error:e.bind(function(e){this.$(".disposableEmail").hide(),e&&"9"==e.statusCode?this.$(".accountDisabledBtn").show():this.$(".errorBtn").show()},this)})}},enableAccount:function(e){this.messenger=this.messenger||new r.ContentMessenger,this.messenger.send("window:createTab",{localUrl:"pages/index.html#emailDisabled"}),this.closePanel(e)},fillWithUsedEmail:function(n,i){n&&n.preventDefault(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var a;if(i||0==i){var s=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});a=t(s[i]).data("aliasaddress")}else a=t(n.target).closest("a").data("aliasaddress");this.fillFieldsByType(this.options.fields,"/contact/email",a,{domain:this.options.domain,origin:"disposable"}),this.closePanel()}}));return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/login_helper/panel"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a="";return a+='\n    <!-- Login Emails -->\n    <a href="#" class="mmKeyOption account acctIDLevel" data-aliasaddress="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===u?t=t.call(e,{hash:{}}):t===f&&(t=p.call(e,"this.getAddress",{hash:{}})),a+=m(t)+'"><div class="element" id="mask">\n        <span class="panelLeft">\n            <img class="iconPos" src="',t="/pages/images/maskmail-icon.png",l=n.assetUrl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"assetUrl",t,{hash:{}}):i,a+=m(t)+'"/>\n            ',t="mm_login_helper_use",l=n.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"intl",t,{hash:{}}):i,a+=m(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===u?t=t.call(e,{hash:{}}):t===f&&(t=p.call(e,"this.getAddress",{hash:{}})),a+=m(t)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">',t="mm_email_helper_created",l=n.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"intl",t,{hash:{}}):i,a+=m(t)+" ",t="createdAt",l=n.live_timestamp,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"live_timestamp",t,{hash:{}}):i,a+=m(t)+"</span>\n        </span>\n    </div></a>\n    "}n=n||e.helpers;var r,o,l,c,d="",h=this,u="function",p=n.helperMissing,f=void 0,m=this.escapeExpression;return d+='<div class="panel">\n\n    ',l=n.disposableEmails,r=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposableEmails"),o=n.each,c=h.program(1,s,a),c.hash={},c.fn=c,c.inverse=h.noop,r=o.call(t,r,c),(r||0===r)&&(d+=r),d+='\n\n    <div class="header">\n        <div class="logo-link">\n            <img class="logo" height="16px" width="17px" src="',r="/pages/images/manage/dntme_logo.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"assetUrl",r,{hash:{}}):o,d+=m(r)+'"/>\n            <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n        </div>\n        <div class="links-wrapper">\n            <div class="links close-link">\n                <img id="close" class="header-icon" src="',r="/pages/images/dnt-ui-header-close.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"assetUrl",r,{hash:{}}):o,d+=m(r)+'">\n            </div>\n            <div class="links settings-link" data-highlight="email">\n                <img class="header-icon" src="',r="/pages/images/dnt-ui-header-settings.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"assetUrl",r,{hash:{}}):o,d+=m(r)+'">\n            </div>\n        </div>\n    </div>\n\n</div>\n'}),ABINE_DNTME.CompiledTemplates["views/login_helper/panel"]}),ABINE_DNTME.define("abine/views/loginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase"],function(e,t,n,i,a){var s=a.extend({templateName:"login_helper_panel",events:{"click a.account":"fillWithUsedEmail"},afterInitialize:function(){this.field=this.options.field,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.model={disposableEmails:new i.DisposableEmailCollection},this.model.disposableEmails.fetchAllByDomain(this.options.domain,e.bind(function(e){if(e||0==this.model.disposableEmails.length)this.closePanel();else{this.numMenuOptions=this.model.disposableEmails.length;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithUsedEmail(e,t)});this.render()}},this))},fillWithUsedEmail:function(n,i){n&&n.preventDefault();var a;if(i||0==i){var s=e(this.el.children[0].children).filter(function(e){return t(e).is("a")&&!t(e).hasClass("disabled")});a=t(s[i]).data("aliasaddress")}else a=t(n.target).closest("a").data("aliasaddress");this.fillFieldsByType(this.options.fields,"/contact/email",a,{domain:this.options.domain,origin:"disposable"}),this.fillFieldsByType(this.options.fields,"/nameperson/friendly",a,{domain:this.options.domain,origin:"disposable"}),this.closePanel()}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/notification_helper/card_notification"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a,s="";return s+='\n      <ul style="padding-left:25px;padding-right:25px;">\n          <li>',t="mm_payment_helper_help_1",l=n.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"intl",t,{hash:{}}):i,(t||0===t)&&(s+=t),s+='<br/>\n              <div style="padding-left: 30px;">\n                (',t="mm_notification_helper_anyName",l=n.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"intl",t,{hash:{}}):i,s+=m(t)+")<br/>\n                280 SUMMER STREET<br/>\n                BOSTON MA 02210\n              </div>\n          </li>\n          <li>",l=n.maskedCard,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskedCard"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),i="mm_payment_helper_help_2",l=n.intl,a=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===u?a.call(e,i,t,{hash:{}}):a===f?p.call(e,"intl",i,t,{hash:{}}):a,(t||0===t)&&(s+=t),s+='</li>\n      </ul>\n      <a style="padding-left:25px;" href="#" id="faq">',t="mm_payment_helper_help_3",l=n.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===u?i.call(e,t,{hash:{}}):i===f?p.call(e,"intl",t,{hash:{}}):i,s+=m(t)+"</a>\n    "}n=n||e.helpers;var r,o,l,c,d="",h=this,u="function",p=n.helperMissing,f=void 0,m=this.escapeExpression;return d+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',r="/pages/images/manage/dd_close_icon.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"assetUrl",r,{hash:{}}):o,d+=m(r)+'"/></span>\n    </div>\n    <div class="body-notification outerCard">\n        <div id="maskedCard" class="creditcardfont">\n            <div style="border-radius:8px;padding:10px;padding-top:0px;background-repeat:no-repeat;width:336px;height:181px;background-image:url(\'',r="/pages/images/maskedcard.png",l=n.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"assetUrl",r,{hash:{}}):o,d+=m(r)+'\');">\n                <br style="clear:both;"/>\n                <div style="text-align:center;margin-top:10px;">\n                    <h3 id="cardNumber">',l=n.maskedCard,r=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskedCard"),r=null===r||void 0===r||r===!1?r:ABINE_DNTME.Duckbone.Handlebars.getAttr(r,"getSeparatedCardNumber"),typeof r===u?r=r.call(t,{hash:{}}):r===f&&(r=p.call(t,"maskedCard.getSeparatedCardNumber",{hash:{}})),d+=m(r)+'</h3>\n                </div>\n                <div style="font-size:15px;">\n                    <span style="float:left;">',r="mm_payment_helper_expDate",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"intl",r,{hash:{}}):o,d+=m(r)+' <span id="expiration">',l=n.maskedCard,r=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskedCard"),r=null===r||void 0===r||r===!1?r:ABINE_DNTME.Duckbone.Handlebars.getAttr(r,"getExpiry"),typeof r===u?r=r.call(t,{hash:{}}):r===f&&(r=p.call(t,"maskedCard.getExpiry",{hash:{}})),d+=m(r)+'</span></span> <span style="float:right;margin-right:25px;"> ',r="mm_payment_helper_cvc",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"intl",r,{hash:{}}):o,d+=m(r)+' <span id="cvc">',l=n.maskedCard,r=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskedCard"),r=null===r||void 0===r||r===!1?r:ABINE_DNTME.Duckbone.Handlebars.getAttr(r,"getCVC"),typeof r===u?r=r.call(t,{hash:{}}):r===f&&(r=p.call(t,"maskedCard.getCVC",{hash:{}})),d+=m(r)+'</span></span>\n                    <br style="clear:both;"/>\n                    <div style="margin-left:60px;font-size:16px;letter-spacing:2px;">\n                      ',r="mm_notification_helper_anyName",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"intl",r,{hash:{}}):o,d+=m(r)+'\n                    </div>\n                    <span id="street" style="margin-left: 100px;">280 SUMMER STREET</span><br><span id="cityStateZip" style="margin-left: 106px;">BOSTON MA 02210</span>\n                </div>\n            </div>\n        </div>\n    </div>\n    ',l=n.detailed,r=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"detailed"),o=n["if"],c=h.program(1,s,a),c.hash={},c.fn=c,c.inverse=h.noop,r=o.call(t,r,c),(r||0===r)&&(d+=r),d+='\n    <div style="text-align:center;padding-bottom:5px;">\n        <input type="button" id="chatNow" class="btn btn-primary" style="width:90%;text-align:center;" value="',r="mm_notification_helper_chatNow",l=n.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),r=typeof o===u?o.call(t,r,{hash:{}}):o===f?p.call(t,"intl",r,{hash:{}}):o,d+=m(r)+'" />\n    </div>\n</div>\n'}),ABINE_DNTME.CompiledTemplates["views/notification_helper/card_notification"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/notification_helper/detailed_email"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r,o,l="",c="function",d=n.helperMissing,h=void 0,u=this.escapeExpression;return l+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',i="/pages/images/manage/dd_close_icon.png",o=n.assetUrl,a=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===c?a.call(t,i,{hash:{}}):a===h?d.call(t,"assetUrl",i,{hash:{}}):a,l+=u(i)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',i="/images/Icon.png",o=n.assetUrl,a=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===c?a.call(t,i,{hash:{}}):a===h?d.call(t,"assetUrl",i,{hash:{}}):a,l+=u(i)+'"/>\n        <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n    </div>\n    <div class="title">\n        ',i="mm_notification_helper_what_happened_to_email",o=n.intl,a=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===c?a.call(t,i,{hash:{}}):a===h?d.call(t,"intl",i,{hash:{}}):a,(i||0===i)&&(l+=i),l+="\n    </div>\n    <ol>\n        <li>\n            ",o=n.disposable,i=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposable"),o=n.domain,a=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),s="mm_notification_helper_will_email_to",o=n.intl,r=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,s,a,i,{hash:{}}):r===h?d.call(t,"intl",s,a,i,{hash:{}}):r,(i||0===i)&&(l+=i),l+='\n            <a href="#" class="learn-more">',i="mm_notification_helper_learn_more",o=n.intl,a=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===c?a.call(t,i,{hash:{}}):a===h?d.call(t,"intl",i,{hash:{}}):a,l+=u(i)+"</a>.\n        </li>\n        <li>\n            ",o=n.real,i=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"real"),a="mm_notification_helper_email_forward_to",o=n.intl,s=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof s===c?s.call(t,a,i,{hash:{}}):s===h?d.call(t,"intl",a,i,{hash:{}}):s,(i||0===i)&&(l+=i),l+="\n        </li>\n        <li>\n            ",o=n.domain,i=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),a="mm_notification_helper_block_them",o=n.intl,s=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof s===c?s.call(t,a,i,{hash:{}}):s===h?d.call(t,"intl",a,i,{hash:{}}):s,(i||0===i)&&(l+=i),l+='\n        </li>\n    </ol>\n        <input type="button" class="btn btn-success done" style="width:25%;text-align:center;" value="',i="mm_notification_helper_got_it",o=n.intl,a=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===c?a.call(t,i,{hash:{}}):a===h?d.call(t,"intl",i,{hash:{}}):a,l+=u(i)+'" />\n        <a href="#" class="learn-more" style="width:25%;text-align:center;">',i="mm_notification_helper_learn_more",o=n.intl,a=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===c?a.call(t,i,{hash:{}}):a===h?d.call(t,"intl",i,{hash:{}}):a,l+=u(i)+"</a>.\n    </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/notification_helper/detailed_email"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/notification_helper/growl"]=e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n            <div id="',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof i===m?i=i.call(e,{hash:{}}):i===b&&(i=g.call(e,"this.id",{hash:{}})),s+=v(i)+'" style="',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),a=n["if"],u=f.program(2,r,t),u.hash={},u.fn=u,u.inverse=f.noop,i=a.call(e,i,u),(i||0===i)&&(s+=i),i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_action"),a=n["if"],u=f.program(4,o,t),u.hash={},u.fn=u,u.inverse=f.program(6,l,t),i=a.call(e,i,u),(i||0===i)&&(s+=i),s+='" class="panelSection ',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof i===m?i=i.call(e,{hash:{}}):i===b&&(i=g.call(e,"this.class_name",{hash:{}})),s+=v(i)+'">\n              ',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof i===m?i=i.call(e,{hash:{}}):i===b&&(i=g.call(e,"this.body",{hash:{}})),(i||0===i)&&(s+=i),s+="\n            </div>\n        "}function r(e){var t,n="";return n+="height:",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===m?t=t.call(e,{hash:{}}):t===b&&(t=g.call(e,"this.height",{hash:{}})),n+=v(t)+";"}function o(){return"cursor:pointer;"}function l(){return"cursor: default;"}n=n||e.helpers;var c,d,h,u,p="",f=this,m="function",g=n.helperMissing,b=void 0,v=this.escapeExpression;return p+='<div class="panel">\n    <div class="settings">\n      ',c="mm_dntme_settings",h=n.intl,d=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===m?d.call(t,c,{hash:{}}):d===b?g.call(t,"intl",c,{hash:{}}):d,p+=v(c)+'\n    </div>\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',c="/pages/images/manage/dd_close_icon.png",h=n.assetUrl,d=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),c=typeof d===m?d.call(t,c,{hash:{}}):d===b?g.call(t,"assetUrl",c,{hash:{}}):d,p+=v(c)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',c="/images/Icon.png",h=n.assetUrl,d=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),c=typeof d===m?d.call(t,c,{hash:{}}):d===b?g.call(t,"assetUrl",c,{hash:{}}):d,p+=v(c)+'"/>\n      ',c="mm_notification_helper_growl",h=n.intl,d=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===m?d.call(t,c,{hash:{}}):d===b?g.call(t,"intl",c,{hash:{}}):d,p+=v(c)+'\n    </div>\n    <div style="text-align:left;padding-bottom:5px;">\n      <div class="dynamicPanels">\n        ',h=n.panelSections,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelSections"),d=n.each,u=f.program(1,s,a),u.hash={},u.fn=u,u.inverse=f.noop,c=d.call(t,c,u),(c||0===c)&&(p+=c),p+="\n      </div>\n    </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/notification_helper/growl"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/notification_helper/panel"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r="",o="function",l=n.helperMissing,c=void 0,d=this.escapeExpression;return r+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',i="/pages/images/manage/dd_close_icon.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',i="/images/Icon.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>',s=n.msg,i=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"msg"),typeof i===o?i=i.call(t,{hash:{}}):i===c&&(i=l.call(t,"msg",{hash:{}})),(i||0===i)&&(r+=i),r+="</div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/notification_helper/panel"]}),ABINE_DNTME.define("abine/views/notificationPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/assets","abine/proxies"],function(e,t,n,i,a,s,r,o){var l=i.extend({templateName:"notification_helper_panel",events:{mouseover:"onHover",mouseout:"onHoverEnd",click:"clicked"},afterInitialize:function(){this.targetId=this.options.notification.targetId?this.options.notification.targetId:"",this.targetUrl=this.options.notification.targetUrl,this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.render(),this.startFadeOut()},clicked:function(e){return"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.stopFadeOut(),this.closePanel(),void 0):(this.messenger=this.messenger||new s.ContentMessenger,this.messenger.send("window:createTab",{url:this.targetUrl}),this.stopFadeOut(),this.closePanel(),void 0)},onHoverEnd:function(){this.startFadeOut()},onHover:function(){t(this.el).find("div.close-notification").show(),this.stopFadeOut()},startFadeOut:function(){this.options.notification.neverFade||(this.stopFadeOut(),this.fadeOutTimer=a.setTimeout(e.bind(function(){this.fadeOutTimer&&this.fadeOut()},this),this.options.timeout))},stopFadeOut:function(){this.fadeOutTimer&&(a.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null)}}),c=l.extend({templateName:"notification_helper_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model=this.options.notification.model,this.model.detailed=this.options.notification.detailed,this.panelId=this.options.notification.detailed?4000003:4000002,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){return e&&e.preventDefault(),"faq"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),o.webapp.openFAQ("card")):"chatNow"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),o.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=755&dl=maskedcard",400,400)):("close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")),!1}}),d=l.extend({templateName:"notification_helper_detailed_email",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId="email"==this.options.notification.type?1000002:5000002,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"here"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),o.securityManager.openPage("#emails/guide"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):e.target.className.match(/learn-more/)&&(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),o.securityManager.openPage("#dashboard/guide"),this.trigger("remove"))}}),h=l.extend({templateName:"notification_helper_growl",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .panelSection":"performActions","click .close-notification":"logClose","click .settings":"showSettings"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.options.dynamicPanel=this.options.notification.dynamicPanel,this.model={dynamicPanel:this.options.dynamicPanel},this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.render()},logClose:function(){this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.options.dynamicPanel.id}),this.trigger("remove")},showSettings:function(){this.contentManager.showDNTMe({page:"settings"}),this.trigger("remove")}});return{NotificationPanelView:l,CardNotificationPanelView:c,DetailedEmailNotificationPanelView:d,GrowlNotificationPanelView:h}}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/payment_helper/panel"]=e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+="\n        ",P=n.primaryCard,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryCard"),a=n["if"],B=F.program(2,r,t),B.hash={},B.fn=B,B.inverse=F.noop,i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n    "}function r(e,t){var i,a,s="";return s+='\n            <span id="panelOptions">\n            <!--Mask My Card-->\n                <a href="#" class="mmKeyOption disposableCard">\n                    <div class="element" id="mask">\n                        <span class="panelLeft">\n                          <img class="iconPos" src="',i="/pages/images/maskcard-icon.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'"/>\n                          ',i="mm_payment_helper_maskCard",P=n.intl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"intl",i,{hash:{}}):a,s+=j(i)+'\n                        </span>\n                        <span class="panelRight">\n                          <img class="loading" style="display:none;" src="',i="/pages/images/ajax_loader.gif",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'"/>\n                          <span class="overflowText">',i="mm_payment_helper_usesCard",P=n.intl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"intl",i,{hash:{}}):a,s+=j(i)+"</span>\n                        </span>\n                    </div>\n                </a>\n\n            <!-- If Masked Cards already exist for this domain -->\n                ",P=n.disposableCards,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableCards"),a=n.each,B=F.program(3,o,t),B.hash={},B.fn=B,B.inverse=F.noop,i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n            </span>\n        "
}function o(e){var t,i,a="";return a+='\n                  <a href="#" data-cardid="',P=n.id,t=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===O?t=t.call(e,{hash:{}}):t===q&&(t=H.call(e,"id",{hash:{}})),a+=j(t)+'" class="mmKeyOption usedCard">\n                    <div class="element" id="mask">\n                      <span class="panelLeft">\n                          <img class="iconPos" src="',t="/pages/images/maskcard-icon.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'"/>\n                          ',t="mm_payment_helper_useCardEnding",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLastFour"),typeof t===O?t=t.call(e,{hash:{}}):t===q&&(t=H.call(e,"this.getLastFour",{hash:{}})),a+=j(t)+'\n                      </span>\n                      <span class="panelRight">\n                          <span class="overflowText">',P=n.getOriginalValue,t=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===O?t=t.call(e,{hash:{}}):t===q&&(t=H.call(e,"getOriginalValue",{hash:{}})),a+=j(t)+" ",t="mm_payment_helper_card",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+"</span>\n                      </span>\n                    </div>\n                  </a>\n                "}function l(e,t){var i,a,s="";return s+="\n      ",P=n.cardNotSetup,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardNotSetup"),a=n["if"],B=F.program(6,c,t),B.hash={},B.fn=B,B.inverse=F.program(8,d,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n    "}function c(e){var t,i,a="";return a+='\n          <!-- Setup card -->\n          <a href="#" class="mmKeyOption setupCard">\n              <div class="element" id="mask">\n                  <span class="panelLeft">\n                    ',t="mm_payment_helper_setupMasked",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+"\n                  </span>\n              </div>\n          </a>\n      "}function d(e,t){var i,a,s="";return s+="\n        ",P=n.autoPremiumRegister,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"autoPremiumRegister"),a=n["if"],B=F.program(9,h,t),B.hash={},B.fn=B,B.inverse=F.program(11,u,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n      "}function h(e){var t,i,a="";return a+='\n            <!-- new premium register flow -->\n            <span id="panelOptions">\n              <div id="error" style="display:none;"></div>\n              <div class="info">',t="mm_payment_helper_enter_card",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+'</div>\n              <a href="#" class="mmKeyOption autoRegister"><div class="element" id="mask">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskcard-icon.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'"/>\n                  ',t="mm_payment_helper_maskCard",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+"\n                </span>\n              </div></a>\n            </span>\n        "}function u(e,t){var i,a,s="";return s+="\n            ",P=n.dynamicPanel,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),a=n["if"],B=F.program(12,p,t),B.hash={},B.fn=B,B.inverse=F.program(15,m,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n        "}function p(e,t){var i,a,s="";return s+="\n                ",P=n.panelSections,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),a=n.each,B=F.program(13,f,t),B.hash={},B.fn=B,B.inverse=F.noop,i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n            "}function f(e){var t,n="";return n+='\n                    <div id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===O?t=t.call(e,{hash:{}}):t===q&&(t=H.call(e,"this.id",{hash:{}})),n+=j(t)+'" style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===O?t=t.call(e,{hash:{}}):t===q&&(t=H.call(e,"this.height",{hash:{}})),n+=j(t)+'" class="panelSection ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof t===O?t=t.call(e,{hash:{}}):t===q&&(t=H.call(e,"this.class_name",{hash:{}})),n+=j(t)+'">\n                        ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof t===O?t=t.call(e,{hash:{}}):t===q&&(t=H.call(e,"this.body",{hash:{}})),(t||0===t)&&(n+=t),n+="\n                    </div>\n                "}function m(e,t){var i,a,s="";return s+="\n                ",P=n.entitledToPayments,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPayments"),a=n["if"],B=F.program(16,g,t),B.hash={},B.fn=B,B.inverse=F.program(18,b,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n            "}function g(e){var t,i,a="";return a+='\n                <!-- Activate card -->\n                  <a href="#" class="mmKeyOption setupCard">\n                    <div class="element" id="mask">\n                      <span class="panelLeft">\n                          ',t="mm_payment_helper_activateMasked",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+"\n                      </span>\n                    </div>\n                  </a>\n                "}function b(e){var t,i,a="";return a+='\n                <!-- Get Started -->\n                    <a href="#" class="mmKeyOption setupCard">\n                        <div class="element" id="mask">\n                            <span class="panelLeft">\n                                ',t="mm_payment_helper_upgradeMaskedCard",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+"\n                            </span>\n                        </div>\n                    </a>\n                "}function v(e){var t,i,a="";return a+='\n            <input id="autoEmail" type="text" placeholder="',t="mm_payment_helper_email",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+'">\n          '}function y(e,t){var i,a,s="";return s+="\n      ",P=n.freeCards,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"freeCards"),a=n["if"],B=F.program(23,_,t),B.hash={},B.fn=B,B.inverse=F.program(28,w,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n    "}function _(e,t){var i,a,s="";return s+='\n        <div class="header">\n            <div class="numFreeCardsHeader">\n              <img class="logo" height="16px" width="17px" src="',i="/pages/images/dnt-ui-header-logo.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'"/>\n              ',P=n.oneFreeCard,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"oneFreeCard"),a=n["if"],B=F.program(24,E,t),B.hash={},B.fn=B,B.inverse=F.program(26,k,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+='\n            </div>\n            <div class="links-wrapper">\n              <div class="links close-link">\n                <img id="close" class="header-icon" src="',i="/pages/images/dnt-ui-header-close.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'">\n              </div>\n              <div id="faqLink" class="links help-link">\n                <img id="help" class="header-icon" src="',i="/pages/images/dnt-ui-header-help.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'">\n              </div>\n              <div class="links settings-link" data-highlight="card">\n                <img class="header-icon" src="',i="/pages/images/dnt-ui-header-settings.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'">\n              </div>\n            </div>\n        </div>\n      '}function E(e){var t,i,a="";return a+='\n                <span class="cash-for-cards-webapp-faq"><a href="javascript:void(0);">',t="mm_payment_helper_you_have_1_free_card",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+"</a></span>\n              "}function k(e){var t,i,a,s="";return s+='\n                <span class="cash-for-cards-webapp-faq">',P=n.freeCards,t=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"freeCards"),i="mm_payment_helper_you_have_free_cards",P=n.intl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===O?a.call(e,i,t,{hash:{}}):a===q?H.call(e,"intl",i,t,{hash:{}}):a,s+=j(t)+"</span>\n              "}function w(e){var t,i,a="";return a+='\n        <div class="header">\n            <div class="masked-cards-in-30-logo-link whatIsThisLink">\n                <img class="logo" height="16px" width="17px" src="',t="/pages/images/dnt-ui-header-logo.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'"/>\n                <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n            </div>\n            <div class="links-wrapper">\n              <div class="links close-link">\n                <img id="close" class="header-icon" src="',t="/pages/images/dnt-ui-header-close.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'">\n              </div>\n              <div id="faqLink" class="links help-link">\n                <img id="help" class="header-icon" src="',t="/pages/images/dnt-ui-header-help.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'">\n              </div>\n              <div class="links settings-link" data-highlight="card">\n                <img class="header-icon" src="',t="/pages/images/dnt-ui-header-settings.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'">\n              </div>\n            </div>\n        </div>\n       '}function T(e,t){var i,a,s="";return s+="\n      ",P=n.dynamicPanel,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),a=n.unless,B=F.program(31,D,t),B.hash={},B.fn=B,B.inverse=F.noop,i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n    "}function D(e,t){var i,a,s="";return s+="\n          ",P=n.freeCards,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"freeCards"),a=n["if"],B=F.program(32,A,t),B.hash={},B.fn=B,B.inverse=F.program(37,M,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+="\n      "}function A(e,t){var i,a,s="";return s+='\n              <div class="header">\n                  <div class="numFreeCardsHeader">\n                    <img class="logo" height="16px" width="17px" src="',i="/pages/images/dnt-ui-header-logo.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'"/>\n                    ',P=n.oneFreeCard,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"oneFreeCard"),a=n["if"],B=F.program(33,N,t),B.hash={},B.fn=B,B.inverse=F.program(35,x,t),i=a.call(e,i,B),(i||0===i)&&(s+=i),s+='\n                  </div>\n                  <div class="links-wrapper">\n                    <div class="links close-link">\n                      <img id="close" class="header-icon" src="',i="/pages/images/dnt-ui-header-close.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'">\n                    </div>\n                    <div id="faqLink" class="links help-link">\n                      <img id="help" class="header-icon" src="',i="/pages/images/dnt-ui-header-help.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'">\n                    </div>\n                    <div class="links settings-link" data-highlight="card">\n                      <img class="header-icon" src="',i="/pages/images/dnt-ui-header-settings.png",P=n.assetUrl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===O?a.call(e,i,{hash:{}}):a===q?H.call(e,"assetUrl",i,{hash:{}}):a,s+=j(i)+'">\n                    </div>\n                  </div>\n              </div>\n          '}function N(e){var t,i,a="";return a+='\n                      <span class="cash-for-cards-webapp-faq">',t="mm_payment_helper_you_have_1_free_card",P=n.intl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"intl",t,{hash:{}}):i,a+=j(t)+"</span>\n                    "}function x(e){var t,i,a,s="";return s+='\n                      <span class="cash-for-cards-webapp-faq">',P=n.freeCards,t=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"freeCards"),i="mm_payment_helper_you_have_free_cards",P=n.intl,a=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===O?a.call(e,i,t,{hash:{}}):a===q?H.call(e,"intl",i,t,{hash:{}}):a,s+=j(t)+"</span>\n                    "}function M(e){var t,i,a="";return a+='\n            <div class="header">\n                <div class="logo-link">\n                    <img class="logo" height="16px" width="17px" src="',t="/pages/images/dnt-ui-header-logo.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'"/>\n                    <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n                </div>\n                <div class="links-wrapper">\n                  <div class="links close-link">\n                    <img id="close" class="header-icon" src="',t="/pages/images/dnt-ui-header-close.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'">\n                  </div>\n                  <div id="faqLink" class="links help-link">\n                    <img id="help" class="header-icon" src="',t="/pages/images/dnt-ui-header-help.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'">\n                  </div>\n                  <div class="links settings-link" data-highlight="card">\n                    <img class="header-icon" src="',t="/pages/images/dnt-ui-header-settings.png",P=n.assetUrl,i=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===O?i.call(e,t,{hash:{}}):i===q?H.call(e,"assetUrl",t,{hash:{}}):i,a+=j(t)+'">\n                  </div>\n                </div>\n            </div>\n          '}n=n||e.helpers;var C,I,S,P,B,R="",F=this,O="function",H=n.helperMissing,q=void 0,j=this.escapeExpression;return R+='<div class="panel">\n    ',P=n.hasEnabledPayments,C=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasEnabledPayments"),I=n["if"],B=F.program(1,s,a),B.hash={},B.fn=B,B.inverse=F.program(5,l,a),C=I.call(t,C,B),(C||0===C)&&(R+=C),R+='\n\n    <span id="newMaskedCard" style="display:none;">\n        <div style="height:auto;margin-left:15px;">\n            <div class="row">\n                <div class="span5">\n                    <p style="font-size=110%;font-weight:bold;text-align:center;"><img class="iconPos" src="',C="/pages/images/maskcard-icon.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'"/> ',C="mm_payment_helper_maskIt",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</p>\n                </div>\n            </div>\n            <div class="row" id="regularCardAmountRow">\n                <div class="span3">\n                    <span class="input-prepend">\n                      <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n                      <input maxlength="6" class="span2" id="cardAmount" type="text" placeholder="0.00">\n                    </span>\n                    <br/>\n                    <span id="amountError" style="line-height:11px;font-size:10px;color:red;"></span>\n                </div>\n\n                <div class="span2">\n                    <p style="margin-left:15px;font-size:14px;line-height:16px;">',C="mm_payment_helper_pleaseEnter",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</p>\n                </div>\n            </div>\n\n            <div class="row" id="subscriptionCardAmountRow" style="display:none;">\n                <div class="span3">\n                    <div style="padding:5px;">',C="mm_payment_helper_monthlyPrice",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</div>\n                    <div style="padding:5px;margin-top:10px;">',C="mm_payment_helper_numberOfMonths",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</div>\n                </div>\n                <div class="span2">\n                    <span class="input-prepend">\n                      <span class="add-on" style="font-size:18px;line-height:20px;height:20px;">$</span>\n                      <input maxlength="6" id="subscriptionAmount" type="text" style="width:100px;font-size:18px;line-height:20px;height:30px;" placeholder="0.00">\n                    </span>\n                    <br/>\n\n                    <input maxlength="2" class="span2" id="subscriptionMonths" type="text" style="margin-top:10px;font-size:18px;line-height:20px;height:30px;" placeholder="0" />\n                </div>\n            </div>\n\n            <div class="row" id="subscriptionErrorRow" style="display:none;">\n                <div class="offset1 span4" style="text-align:right;margin-bottom:5px;">\n                    <span id="subscriptionError" style="line-height:13px;font-size:11px;color:red;"></span>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="span2">\n                    <p class="charge-msg" style="font-size:10px;line-height:12px;margin-top:5px;">',C="mm_payment_helper_chargeWillBe",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+' <strong id="last4">',P=n.primaryCard,C=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryCard"),C=null===C||void 0===C||C===!1?C:ABINE_DNTME.Duckbone.Handlebars.getAttr(C,"getLastFour"),typeof C===O?C=C.call(t,{hash:{}}):C===q&&(C=H.call(t,"primaryCard.getLastFour",{hash:{}})),R+=j(C)+'</strong></p>\n                </div>\n\n                <div class="span3">\n                    <input type="button" id="createCard" style="margin-left:95px;font-size:16px;" value="&nbsp;&nbsp;&nbsp;&nbsp;',C="mm_payment_helper_next",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'&nbsp;&nbsp;&nbsp;&nbsp;" class="btn btn-primary" />\n                </div>\n            </div>\n            <div class="row">\n                <div class="offset2 span3 subscription-option">\n                    <input type="checkbox" id="subscriptionCard" /> <label style="display:inline-block;vertical-align:sub;" for="subscriptionCard">',C="mm_payment_helper_isThisFor",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</label>\n                </div>\n            </div>\n        </div>\n    </span>\n    <div id="processingRequestView" style="display:none;">\n      ',C="mm_payment_helper_please_wait",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,(C||0===C)&&(R+=C),R+='\n    </div>\n    <span id="confirmAmountView" style="display:none;">\n      <div style="padding:5px;padding-left:15px;">\n          <h5 id="confirmRegularMsg">\n            ',C="mm_payment_helper_greatThey",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,(C||0===C)&&(R+=C),R+='\n            <span class="card-fee"><img class="loading-card-fee" style="display:none;" src="',C="/pages/images/ajax_loader.gif",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'"/></span>\n            ',P=n.primaryCard,C=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryCard"),C=null===C||void 0===C||C===!1?C:ABINE_DNTME.Duckbone.Handlebars.getAttr(C,"getLastFour"),I="mm_payment_helper_toYourCardEnding",P=n.intl,S=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof S===O?S.call(t,I,C,{hash:{}}):S===q?H.call(t,"intl",I,C,{hash:{}}):S,(C||0===C)&&(R+=C),R+='\n          </h5>\n          <h5 id="confirmSubscriptionMsg" style="display:none;">\n            ',P=n.primaryCard,C=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryCard"),C=null===C||void 0===C||C===!1?C:ABINE_DNTME.Duckbone.Handlebars.getAttr(C,"getLastFour"),I="mm_payment_helper_confirmSub",P=n.intl,S=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof S===O?S.call(t,I,C,{hash:{}}):S===q?H.call(t,"intl",I,C,{hash:{}}):S,(C||0===C)&&(R+=C),R+='\n            <span class="card-fee"><img class="loading-card-fee" style="display:none;" src="',C="/pages/images/ajax_loader.gif",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'"/></span>\n            ',C="mm_payment_helper_chargedNow",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,(C||0===C)&&(R+=C),R+='\n          </h5>\n          <div style="text-align:center;">\n              <input type="button" value="',C="mm_payment_helper_nevermind",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'" id="cancelCardCreate" class="btn" />\n              <input type="button" value="',C="mm_payment_helper_yescreatecard",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'" id="confirmCardCreate" class="btn btn-primary" />\n          </div>\n          <div style="text-align:center;margin-top:20px;margin-left:-60px;">\n              <label for="dontShowCardConfirm">\n                  <input type="checkbox" id="dontShowCardConfirm" style="margin-top:-2px;"/> ',C="mm_payment_helper_dontAsk",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'\n              </label>\n          </div>\n      </div>\n    </span>\n    <span id="maskedCardView" style="display:none;">\n        <div id="maskedCardError" style="display:none;text-align:center;padding:10px;">\n            <div id="maskedCardErrorMsg" class="alert alert-error">\n\n            </div>\n            <div style="text-align:center;padding:10px 0 5px 0;">\n                <input type="button" id="chatNow" class="btn btn-primary" style="width:90%;text-align:center;" value="',C="mm_notification_helper_chatNow",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'" />\n            </div>            \n        </div>\n        <div id="loadingMaskedCard" style="height:50px;display:none;text-align:center;padding:10px;">\n        </div>\n        <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n            <div style="border-radius:8px;padding:10px;padding-top:0px;background-repeat:no-repeat;width:336px;height:181px;background-image:url(\'',C="/pages/images/maskedcard.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'\');">\n                <br style="clear:both;"/>\n                <div style="text-align:center;margin-top:10px;">\n                    <h3 id="cardNumber"></h3>\n                </div>\n                <div style="font-size:15px;">\n                    <span style="float:left;">',C="mm_payment_helper_expDate",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+' <span id="expiration"></span></span> <span style="float:right;margin-right:25px;"> ',C="mm_payment_helper_cvc",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+' <span id="cvc"></span></span>\n                    <br style="clear:both;"/>\n                    <div style="margin-left:60px;font-size:16px;letter-spacing:2px;">\n                      ',C="mm_notification_helper_anyName",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'\n                    </div>\n                    <span id="street" style="margin-left: 100px;">280 SUMMER STREET</span><br><span id="cityStateZip" style="margin-left: 106px;">BOSTON MA 02210</span>\n                </div>\n            </div>\n            <div style="text-align:center;">\n                <input type="button" value="',C="mm_payment_helper_useMyMasked",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'" class="btn btn-primary" id="useMaskedCard" />\n            </div>\n        </div>\n        <div id="dummyCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n            <div id="dummyCardTitle" style="display: none;font-family: arial, sans-serif;">',C="mm_payment_helper_dummy_card_ready",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</div>\n            <img class="dummyCardImg" src="',C="/pages/images/masked_card_gold.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'"/>\n        </div>\n        <div id="register" style="display: none;margin-top:-10px;">\n          <div style="text-align:center;">',C="mm_payment_helper_this_card_will_cost",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,(C||0===C)&&(R+=C),R+=' <span class="card-fee"><img class="loading-card-fee" style="display:none;" src="',C="/pages/images/ajax_loader.gif",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'"/></span></div>\n          <div class="title">',C="mm_payment_helper_card_complete_title",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</div>\n          <div style="padding-left: 15px;"><img style="margin-top: -3px;" src="',C="/pages/images/secure-lock.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'" height="16px" width="13px"/> ',C="mm_payment_helper_secure",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'</div>\n          <div class="clearfix">\n              <input id="autoCardNumber" type="text" placeholder="',C="mm_payment_helper_credit_card_number",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n              <input id="autoCardCvv" type="text" placeholder="',C="mm_payment_helper_cvv",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n          </div>\n          <div class="clearfix" style="padding-left: 5px;">\n            ',C="mm_payment_helper_expires",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'\n              <select id="autoCardMonth"><option value="1">01 - January</option><option value="2">02 - February</option><option value="3">03 - March</option><option value="4">04 - April</option><option value="5">05 - May</option><option value="6">06 - June</option><option value="7">07 - July</option><option value="8">08 - August</option><option value="9">09 - September</option><option value="10">10 - October</option><option value="11">11 - November</option><option value="12">12 - December</option></select>\n              <select id="autoCardYear"><option name="2014">2014</option><option name="2015" selected>2015</option><option name="2016">2016</option><option name="2017">2017</option><option name="2018">2018</option><option name="2019">2019</option><option name="2020">2020</option><option name="2021">2021</option><option name="2022">2022</option><option name="2023">2023</option></select>\n          </div>\n          <input id="autoAddress" type="text" placeholder="',C="mm_payment_helper_address",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n          <input id="autoApt" data-optional="yes" type="text" placeholder="',C="mm_payment_helper_apt",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n          <input id="autoCity" type="text" placeholder="',C="mm_payment_helper_city",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n          <div class="clearfix">\n              <select id="autoStateUS"><option value="">Select State</option><option value="">------------</option><option value="AK">Alaska</option><option value="AL">Alabama</option><option value="AP">Armed Forces Pacific</option><option value="AR">Arkansas</option><option value="AS">American Samoa</option><option value="AZ">Arizona</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DC">District of Columbia</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="FM">Federated States of Micronesia</option><option value="GA">Georgia</option><option value="GU">Guam</option><option value="HI">Hawaii</option><option value="IA">Iowa</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="MA">Massachusetts</option><option value="MD">Maryland</option><option value="ME">Maine</option><option value="MH">Marshall Islands</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MO">Missouri</option><option value="MP">Northern Mariana Islands</option><option value="MS">Mississippi</option><option value="MT">Montana</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="NE">Nebraska</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NV">Nevada</option><option value="NY">New York</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="PR">Puerto Rico</option><option value="PW">Palau</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VA">Virginia</option><option value="VI">Virgin Islands</option><option value="VT">Vermont</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select>\n              <input id="autoState" type="text" placeholder="',C="mm_payment_helper_state",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'" style="display:none;">\n              <input id="autoZip" type="text" placeholder="',C="mm_payment_helper_zip",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n          </div>\n          <select id="autoCountry"><option value="">Select Country</option><option value="">--------------</option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AC">Ascension Island</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="BQ">British Antarctic Territory</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="IC">Canary Islands</option><option value="CT">Canton and Enderbury Islands</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="EA">Ceuta and Melilla</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CP">Clipperton Island</option><option value="CC">Cocos [Keeling] Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CD">Congo [DRC]</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DG">Diego Garcia</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="NQ">Dronning Maud Land</option><option value="TL">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands [Islas Malvinas]</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="FQ">French Southern and Antarctic Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard Island and McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JT">Johnston Island</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LS">Lesotho</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia [FYROM]</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="FX">Metropolitan France</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MI">Midway Islands</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NT">Neutral Zone</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="VD">North Vietnam</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="QO">Outlying Oceania</option><option value="PC">Pacific Islands Trust Territory</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PZ">Panama Canal Zone</option><option value="PY">Paraguay</option><option value="YD">People\'s Democratic Republic of Yemen</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="RE">R&eacute;union</option><option value="BL">Saint Barth&eacute;lemy</option><option value="SH">Saint Helena</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="MF">Saint Martin</option><option value="PM">Saint Pierre and Miquelon</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="CS">Serbia and Montenegro</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="ZA">South Africa</option><option value="GS">South Georgia and the South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SR">Suriname</option><option value="SJ">Svalbard and Jan Mayen</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="ST">S&atilde;o Tom&eacute; and Pr&iacute;ncipe</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TA">Tristan da Cunha</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UM">U.S. Minor Outlying Islands</option><option value="PU">U.S. Miscellaneous Pacific Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US" selected="selected">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WK">Wake Island</option><option value="WF">Wallis and Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="AX">&Aring;land Islands</option></select>\n          <div class="clearfix">\n              <input id="autoFname" type="text" placeholder="',C="mm_payment_helper_first_name",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n              <input id="autoLname" type="text" placeholder="',C="mm_payment_helper_last_name",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,R+=j(C)+'">\n          </div>\n          ',P=n.hasRegistered,C=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),I=n.unless,B=F.program(20,v,a),B.hash={},B.fn=B,B.inverse=F.noop,C=I.call(t,C,B),(C||0===C)&&(R+=C),R+='\n          <div class="alert-error submit-error" style="display: none"></div>\n          <div class="progress" style="display: none;text-align: center;">please wait...</div>\n          <button class="btn btn-primary" id="registerAndMask">\n            <img src="',C="/pages/images/secure-lock.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'" height="32px" width="26px"/>\n            <div style="margin-top:10px;">',C="mm_payment_helper_premium_register_done",P=n.intl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"intl",C,{hash:{}}):I,(C||0===C)&&(R+=C),R+="</div>\n          </button>\n        </div>\n    </span>\n\n    ",P=n.autoPremiumRegister,C=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"autoPremiumRegister"),I=n["if"],B=F.program(22,y,a),B.hash={},B.fn=B,B.inverse=F.program(30,T,a),C=I.call(t,C,B),(C||0===C)&&(R+=C),R+='\n\n      <div class="header" id="default-header" style="display:none;">\n          <div class="logo-link">\n              <img class="logo" height="16px" width="17px" src="',C="/pages/images/dnt-ui-header-logo.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'"/>\n              <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n          </div>\n          <div class="links-wrapper">\n            <div class="links close-link">\n              <img id="close" class="header-icon" src="',C="/pages/images/dnt-ui-header-close.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'">\n            </div>\n            <div id="faqLink" class="links help-link">\n              <img id="help" class="header-icon" src="',C="/pages/images/dnt-ui-header-help.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'">\n            </div>\n            <div class="links settings-link" data-highlight="card">\n              <img class="header-icon" src="',C="/pages/images/dnt-ui-header-settings.png",P=n.assetUrl,I=P||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),C=typeof I===O?I.call(t,C,{hash:{}}):I===q?H.call(t,"assetUrl",C,{hash:{}}):I,R+=j(C)+'">\n            </div>\n          </div>\n      </div>\n</div>\n'
}),ABINE_DNTME.CompiledTemplates["views/payment_helper/panel"]}),ABINE_DNTME.define("abine/views/paymentHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/views/loading_display","abine/contentMessenger","abine/intl","abine/responseCodes","abine/config","abine/proxies"],function(e,t,n,i,a,s,r,o,l,c,d,h){function u(e){for(var t=0,n=!1,i=e.length-1;i>=0;i--,n=!n){var a=parseInt(e.charAt(i));n&&(a*=2,a>9&&(a-=9)),t+=a}return t%10==0}function p(e){for(var t="",n=0;e>n;n++){for(var i=0;0==i;)i=Math.floor(10*Math.random());t+=i}return t}function f(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var n="",i=0;e>i;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var m=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,g=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/i,b=[{regex:/^4[0-9]{12}(?:[0-9]{3})?$/,spacing:[4,4,4]},{regex:/^5[1-5][0-9]{14}$/,spacing:[4,4,4]},{regex:/^3[47][0-9]{13}$/,spacing:[4,6]},{regex:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,spacing:[4,6]},{regex:/^6(?:011|5[0-9]{2})[0-9]{12}$/,spacing:[4,4,4]},{regex:/^(?:2131|1800|35\d{3})\d{11}$/,spacing:[4,4,4]}],v={"/financial/creditcard/number/part1":"part1","/financial/creditcard/number/part2":"part2","/financial/creditcard/number/part3":"part3","/financial/creditcard/number/part4":"part4","/financial/creditcard/number":"number","/financial/creditcard/type":"type","/financial/creditcard/issuedto":"issuedto","/financial/creditcard/expirymonth":"expirymonth","/financial/creditcard/expiryyear":"expiryyear","/financial/creditcard/verification":"cvv","/contact/postaladdress/billing":"address1","/contact/postaladdressAdditional/billing":"address2","/contact/state/billing":"state","/contact/city/billing":"city","/contact/country/billing":"country","/contact/postalcode/billing":"zip","/contact/postaladdress":"address1","/contact/postaladdressAdditional":"address2","/contact/state":"state","/contact/city":"city","/contact/country":"country","/contact/postalcode":"zip","/nameperson/last":"lname","/nameperson/first":"fname","/nameperson/full":"name"},y=a.extend({templateName:"payment_helper_panel",events:{"click .whatIsThisLink":"openMaskedCardsIn30","click a.disposableCard":"verifyCardRequest","click a.autoRegister":"autoRegister","click #registerAndMask":"registerAndMask","click a.usedCard":"fillWithUsedCard","click a.getStarted":"getStarted","click a.setupCard":"getStartedWithPayments","click .panelSection":"performActions","click #createCard":"createCard","click #cancelCardCreate":"cancelCardCreate","click #confirmCardCreate":"confirmCardCreate","click #useMaskedCard":"fillWithDisposableCard","click #faqLink":"openFaqTab","click #linkToErrorReport":"makeErrorReport","click #maskedCardErrorMsg a":"makeErrorReport","click #registerHelp span":"openCardFAQ","change #autoCountry":"countryChanged","mousedown .subscription-option":"subscriptionClicked","click #chatNow":"chatNow","click .close-link":"logClose","click .cash-for-cards-webapp-faq":"openCashForCardsFaq"},logClose:function(){this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId})},chatNow:function(e){e.preventDefault(),h.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=755&dl=maskedcard",400,400)},openMaskedCardsIn30:function(e){return h.webapp.openFAQ("card"),this.closePanel(),e.preventDefault(),!1},openCardFAQ:function(e){return h.webapp.openFAQ("card","freefor30"),e.preventDefault(),!1},chatNow:function(e){e.preventDefault(),h.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&infocapture_values=|&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=755&dl=maskedcard",400,400)},getStartedWithPayments:function(e){e&&e.preventDefault(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),h.webapp.openCards(),this.closePanel(e)},subscriptionClicked:function(){this.$("#cardAmount").add(this.field.element).unbind("blur.dntme")},openCashForCardsFaq:function(e){return h.webapp.openCashForCardsFaq(),e.preventDefault(),!1},countryChanged:function(e){"US"==t(e.target).val()?(this.$("#autoStateUS").show(),this.$("#autoState").hide()):(this.$("#autoState").show(),this.$("#autoStateUS").hide())},cardNumberFocus:function(e){var n=t(e.target);n.val(n.val().replace(/[^0-9]+/g,""))},cardNumberBlur:function(n){var i=t(n.target),a=i.val().replace(/[^0-9]+/g,"");e.each(b,function(t){if(a.match(t.regex)){var n=0,i="";e.each(t.spacing,function(e){i+=a.substr(n,e)+" ",n+=e}),i+=a.substr(n),a=i}}),i.val(a)},makeErrorReport:function(e){return e&&e.target&&"verificationLink"!=e.target.id&&"phonesPageLink"!=e.target.id&&"statusPageLink"!=e.target.id&&e.preventDefault(),!e||e&&e.target&&"verificationLink"!=e.target.id&&"phonesPageLink"!=e.target.id&&"statusPageLink"!=e.target.id?(h.webapp.openHelp(),!1):void 0},refreshLastFourShieldedCardNumber:function(){h.licenseModule.refreshLastFourCardDigits({},e.bind(function(e,t){!e&&t&&t.last_four&&(this.model.primaryCard.set("last_four",t.last_four),this.$("#last4").text(t.last_four))},this))},openFaqTab:function(){h.webapp.openHelp("/card"),this.closePanel()},convertCentsToString:function(e){return"$"+(e/100).toFixed(2)},processError:function(e){this.$("#loadingMaskedCard").hide(),e.errorCode==c.NO_BILLING_ACCOUNT_FOR_USER_ERROR_CODE||e.errorCode==c.BILLING_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_billing")):e.errorCode==c.BILLING_DECLINED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_declined")):e.errorCode==c.NO_CARDS_AVAILABLE_ERROR_CODE||e.errorCode==c.PROVIDER_READ_FAILED_ERROR_CODE||e.errorCode==c.PROVIDER_CARD_CREATION_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_provider")):e.errorCode==c.REQUESTED_AMOUNT_OVER_LIMIT_ERROR_CODE?"verified"==e.responseJSON.data.category?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_verified",[this.convertCentsToString(e.responseJSON.data.min),this.convertCentsToString(e.responseJSON.data.max)])):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_max",[this.convertCentsToString(e.responseJSON.data.max),d.protocol+d.licenseServerHost+"/fraud_verification?auth_token="+this.model.authToken])):e.errorCode==c.REQUESTED_AMOUNT_BELOW_MINIMUM_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_min",[this.convertCentsToString(e.responseJSON.data.min)])):e.errorCode==c.REQUEST_ALREADY_EXISTS_ERROR_CODE||e.errorCode==c.NO_CARD_FOUND_ERROR_CODE||e.errorCode==c.NO_BILLING_TRANSACTION_FOUND_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_abine")):e.errorCode==c.REFUND_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_refund")):e.errorCode==c.GLOBAL_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_global_limit")):e.errorCode==c.FRAUD_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_soft_limit",[d.protocol+d.licenseServerHost+"/fraud_verification?auth_token="+this.model.authToken])):e.errorCode==c.FRAUD_HARD_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_hard_limit")):e.errorCode==c.FRAUD_VERIFIED_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_verified_soft_limit")):e.errorCode==c.FRAUD_HIGH_RISK_COUNTRY_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_high_risk_country")):e.errorCode==c.GREY_LISTED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_grey_listed",[d.protocol+d.licenseServerHost+"/fraud_verification?auth_token="+this.model.authToken])):e.errorCode==c.BILLING_IN_NON_US_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_helper_non_us1",[ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/phones"])):e.errorCode==c.DUPLICATE_CARD_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_duplicate_card_ban")):e.errorCode==c.BANNED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_banned_domain",[this.options.domain])):e.errorCode==c.REJECTED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_rejected_domain",[this.options.domain])):e.errorCode==c.SERVICE_UNAVAILABLE_ERROR?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_service_unavailable")):e.errorCode==c.SCHEDULED_DOWNTIME?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_server_maintenance")):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error")),this.$("#maskedCardView, #maskedCardError, #maskedCardErrorMsg").show()},confirmCardCreate:function(e){this.cardBeingCreated||(this.cardBeingCreated=!0,this.model.maskedCard=new i.DisposableCard({domain:this.options.domain,amount:i.DisposableCard.convertStringToCents(this.amount),months:this.months,shielded_card_id:this.model.primaryCard.id}),!e.skipConfirmCheck&&this.$("#dontShowCardConfirm").is(":checked")&&this.contentManager.preferences.setPref("confirmProtectedCard",!1),this.model.maskedCard.bind("sync:success",function(){this.cardBeingCreated=!1,this.model.autoPremiumRegister?(this.fillWithDisposableCard(),this.closePanel()):(this.$("#loadingMaskedCard").hide(),this.$("#cardNumber").html(this.model.maskedCard.getPrettyNumber()),this.$("#expiration").html(this.model.maskedCard.getExpiry()),this.$("#cvc").html(this.model.maskedCard.getCVC()),this.$("#maskedCard").show(),this.trigger("render"))},this),this.model.maskedCard.bind("sync:error",function(e){this.processError(e),this.trigger("render")},this),this.$("#newMaskedCard, #confirmAmountView").hide(),this.$("#maskedCardView").show(),this.loadingDisplay=new r({customMessages:["mm_loading_display_Crunching","mm_loading_display_Clouds","mm_loading_display_Tubes","mm_loading_display_HangOn","mm_loading_display_Whoops_Panel"],el:this.$("#loadingMaskedCard"),pageName:"card_create_panel"}),this.$("#loadingMaskedCard").show(),this.trigger("render"),this.ignoreExplicitClose=!0,this.model.maskedCard.save())},cancelCardCreate:function(){this.$("#confirmAmountView").hide(),this.$("#newMaskedCard").show(),this.ignoreBlur(!1),this.$("#cardAmount").focus(),this.trigger("render")},createCard:function(e){e&&e.preventDefault(),this.$(".header").hide(),this.$("#default-header").show();var t,n,i=/[^\d\.]/g,a=this.$("#subscriptionCard").is(":checked");if(a?(t=this.$("#subscriptionAmount").val(),n=this.$("#subscriptionMonths").val(),n=n.replace(i,""),n=parseInt(n)):t=this.$("#cardAmount").val(),t=t.replace(i,""),t=parseFloat(parseFloat(t).toFixed(2)),a){if(isNaN(n)||1>n)return this.$("#subscriptionError").html(l.getText("mm_payment_helper_nonzero_months")),this.$("#subscriptionErrorRow").show(),this.trigger("render"),void 0;this.$("#subscriptionErrorRow").hide(),this.$("#subscriptionError").html(""),t*=n}isNaN(t)?(this.$("#amountError").html(l.getText("mm_payment_error_validation_input")),this.trigger("render")):(this.$("#amountError").html(""),this.amount=t,this.months=n,this.model.autoPremiumRegister?this.showPremiumRegister():this.contentManager.preferences.isPrefTrue("confirmProtectedCard")?this.showConfirmAmountView(t,n):this.confirmCardCreate({amount:t,months:n,skipConfirmCheck:!0}))},showConfirmAmountView:function(e,n){this.$("#newMaskedCard").hide(),this.$(".confirmAmount").html(e),n?(this.$("#monthsExpired").html(n),this.$("#confirmRegularMsg").hide(),this.$("#confirmSubscriptionMsg").show()):(this.$("#confirmRegularMsg").show(),this.$("#confirmSubscriptionMsg").hide()),this.$("#confirmAmountView").show(),this.ignoreBlur(!0),t(this.field.element).focus(),this.options.entitledToPhone||this.updateAndShowCardFee(this.amount),this.trigger("render")},verifyCardRequest:function(t){return t&&t.preventDefault(),this.model.autoPremiumRegister?(this.showNewMaskedCardView(),void 0):(this.$("#processingRequestView").show(),this.$("#panelOptions").hide(),h.paymentsModule.verifyCardRequest({domain:this.options.domain},e.bind(function(e){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):this.showNewMaskedCardView()},this)),void 0)},showNewMaskedCardView:function(n){n&&n.preventDefault(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#panelOptions").hide(),this.$("#newMaskedCard").show(),this.ignoreBlur(!0),t(this.field.element).unbind("blur.dntme"),this.$("#subscriptionCard").change(e.bind(function(){this.$("#subscriptionCard").is(":checked")?(this.$("#regularCardAmountRow").hide(),this.$("#subscriptioncardAmountRow").show(),this.$("#subscriptionErrorRow").show()):(this.$("#subscriptionErrorRow").hide(),this.$("#subscriptioncardAmountRow").hide(),this.$("#regularCardAmountRow").show()),this.trigger("render"),this.$("#subscriptionCard").is(":checked")?this.$("#subscriptionAmount").focus():(this.$("#cardAmount").focus(),this.bindPanelTextInput(this.$("#cardAmount")))},this)),this.trigger("render"),s.setTimeout(e.bind(function(){this.$("#cardAmount").focus(),this.bindPanelTextInput(this.$("#cardAmount")),this.ignoreBlur(!1)},this),500)},cleanupPanel:function(){},canShowAutoPremiumPanel:function(e){return-1!=this.field.dataType.indexOf("/financial/creditcard/number")},refreshUserInput:function(){var n=this.model.userInput;if(e.each(this.options.fields,e.bind(function(e){var i=e.dataType;if(i){var a=t(e.element).val();if(a&&""!=a)for(var s=0;2>s;s++)i in v&&(!n[v[i]]||""==n[v[i]]||0==s)&&(n[v[i]]=a),i=i.substr(0,i.lastIndexOf("/"))}},this)),n.part1&&""!=n.part1&&(n.number=n.part1+n.part2+n.part3+n.part4),n.number&&(n.number=n.number.replace(/[^0-9]+/g,""),n.last4=n.number.substr(n.number.length-4)),n.name&&""!=n.name||(n.name=n.issuedto),n.name&&""!=n.name||(n.name=n.fname),!n.lname||""==n.lname){var i=n.name;if(i&&""!=i){var a=n.name.split(/\s+/);a.length>0&&(n.fname=a[0],n.lname=a[1])}}n.fname&&n.lname&&(n.fname=n.fname.replace(n.lname,"").replace(/^[\s]+]|[\s]+$/g,"")),n.country&&n.country.match(/USA|United[\s]*States/i)&&(n.country="US"),n.expirymonth&&(n.expirymonth=parseInt(n.expirymonth.replace(/[^0-9]+/g,"")))},afterInitialize:function(){this.field=this.options.field,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.model={primaryCard:!1,authToken:this.options.authToken,hasRegistered:this.options.hasRegistered,entitledToPayments:this.options.entitledToPayments,cardNotSetup:this.contentManager.preferences.getPref("cardNotSetup"),hasEnabledPayments:this.options.hasEnabledPayments,entitledToPhone:this.options.entitledToPhone};var t=this.contentManager.preferences.getPref("hasEnabledPayments");this.options.entitledToPhone||(this.model.freeCards=this.contentManager.preferences.getPref("cardsEarned"),1==this.model.freeCards&&(this.model.oneFreeCard=!0)),this.model.shieldedCard=new i.ShieldedCardCollection,this.model.shieldedCard.fetchAll({success:e.bind(function(){if(this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),this.model.primaryCard)this.refreshLastFourShieldedCardNumber(),this.panelId=t?4000001:9000001,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.model.disposableCards=new i.DisposableCardCollection,this.model.disposableCards.fetchAllByDomain(this.options.domain,e.bind(function(){t?(this.bind("enter0",this.verifyCardRequest,this),e.each(this.model.disposableCards.models,function(e,t){this.bind("enter"+(t+1),function(e){this.fillWithUsedCard(e,t)},this)},this)):this.bind("enter0",this.getStartedWithPayments,this),this.render()},this));else if(this.contentManager.preferences.isPrefTrue("showPremiumSubscriptionPanel")){this.model.userInput={};var n=this.model.userInput,a=new i.AddressCollection;a.fetchAll({success:e.bind(function(){if(a.length>0){var e=a.at(0);n.address1=e.get("address1"),n.address2=e.get("address2"),n.city=e.get("city"),n.state=e.get("state"),n.country=e.get("country"),n.zip=e.get("zip")}if(this.refreshUserInput(),this.canShowAutoPremiumPanel(n)){var t=new i.Preference;t.save({key:"autoPremiumRegisterShown",value:"true"}),this.doNotCloseOnTyping=!0,this.model.autoPremiumRegister=!0,this.panelId=8000002,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.bind("enter0",this.autoRegister,this),this.render()}else this.closePanel()},this)})}else if(this.options.dynamicPanel)this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render();else{if(!t)return this.closePanel(),void 0;this.panelId=8000001,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.bind("enter0",this.openActivateCardsPage,this)}},this)}),this.options.fromContextMenu&&s.setTimeout(e.bind(function(){this.verifyCardRequest},this),100)},autoRegister:function(e){e&&e.preventDefault(),this.refreshUserInput(),this.$(".info").hide();var t=this.model.userInput;if(!t.number||!t.number.match(g)||!u(t.number)){var n=this.$("#error");return n.text(l.getText("mm_dntme_invalid_card")).show(),this.autoResize(),void 0}t.last4&&""!=t.last4?(this.$(".charge-msg").show(),this.$("#last4").text(t.last4)):this.$(".charge-msg").hide(),this.verifyCardRequest()},showPremiumRegister:function(){this.$("#newMaskedCard, #confirmAmountView").hide(),this.$("#maskedCardView, #loadingMaskedCard").show(),this.$(".confirmAmount").html(this.amount),this.ignoreExplicitClose=!0,this.ignoreBlur(!0),t(this.field.element).focus(),s.setTimeout(e.bind(this.showDummyCard,this),100),this.options.entitledToPhone||this.updateAndShowCardFee(this.amount)},updateAndShowCardFee:function(t){this.$(".loading-card-fee").show(),h.paymentsModule.retrieveCardFee({requested_amount:t},e.bind(function(e,t){if(this.$(".loading-card-fee").hide(),e);else if(t.card_credit&&t.card_credit.free_cards){if(n=this.contentManager.preferences.getPref("cardsEarned"),this.contentManager.preferences.hasPref("cardsEarned"))this.contentManager.preferences.setPref("cardsEarned",t.card_credit.free_cards);else{var n=new i.Preference;n.save({key:"cardsEarned",value:t.card_credit.free_cards})}t.card_credit.free_cards>0?this.$(".card-fee").html(l.getText("mm_payment_helper_no_additional_fee")):this.$(".card-fee").html("+"+this.convertCentsToString(t.fee)+" "+l.getText("mm_payment_helper_per_card_fee"))}else this.$(".card-fee").html("+"+this.convertCentsToString(t.fee)+" "+l.getText("mm_payment_helper_per_card_fee"));this.autoResize()},this))},showDummyCard:function(){var t=p(4)+" "+p(4)+" "+p(4)+" "+p(4),n=new Date,i=(n.getMonth()<9?"0":"")+(n.getMonth()+1)+"/"+(n.getFullYear()+1),a=p(3);this.$("#loadingMaskedCard").hide(),this.$("#cardNumber").html(t),this.$("#expiration").html(i),this.$("#cvc").html(a),this.$("#useMaskedCard").hide(),this.$("#dummyCard, #register").show(),this.$("#autoCardNumber").val(this.model.userInput.number||""),this.$("#autoCardCvv").val(this.model.userInput.cvv||""),this.model.userInput.expirymonth&&this.$("#autoCardMonth").val(this.model.userInput.expirymonth),this.model.userInput.expiryyear&&this.$("#autoCardYear").val(this.model.userInput.expiryyear),this.$("#autoAddress").val(this.model.userInput.address1||""),this.$("#autoApt").val(this.model.userInput.address2||""),this.$("#autoCity").val(this.model.userInput.city||""),this.$("#autoCountry").val(this.model.userInput.country||"US"),this.$("#autoCardNumber").unbind("blur").blur(e.bind(this.cardNumberBlur,this)).unbind("focus").focus(e.bind(this.cardNumberFocus,this)).blur(),"US"==this.$("#autoCountry").val()?(this.$("#autoStateUS").val(this.model.userInput.state||"").show(),this.$("#autoState").hide()):(this.$("#autoState").val(this.model.userInput.state||"").show(),this.$("#autoStateUS").hide()),this.$("#autoZip").val(this.model.userInput.zip||""),this.$("#autoFname").val(this.model.userInput.fname||""),this.$("#autoLname").val(this.model.userInput.lname||""),this.trigger("render")},registerAndMask:function(n){n&&n.preventDefault();var i=!1,a=this.$("#register input,#register select");e.each(a,function(e){var e=t(e);e.is(":visible")&&""==e.val()&&!e.data("optional")?(e.addClass("error"),i||e.focus(),i=!0):e.removeClass("error")});var s=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if(!s.match(g)||!u(s))return this.$("#autoCardNumber").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_valid_card_number")).show(),this.autoResize(),void 0;if("US"!=this.$("#autoCountry").val())return this.$("#autoCountry").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_non_us3")).show(),this.autoResize(),void 0;if(i)return this.$(".alert-error").text(l.getText("mm_payment_helper_fill_all_required")).show(),this.autoResize(),void 0;if(this.model.hasRegistered)this.setupSubscription();else{if(!this.$("#autoEmail").val().match(m))return this.$(".alert-error").text(l.getText("mm_dntme_invalid_email")).show(),this.autoResize(),void 0;this.setupUser()}},setupUser:function(){var t=this.$("#autoEmail").val(),n=f(6),i={email:t,password:n,password_hint:l.getText("mm_pwhint_default")};this.showProgress(),h.licenseModule.register(i,e.bind(function(t,n){this.processRegistration(t,n,i,e.bind(function(e){e||this.setupSubscription()},this))},this)),this.autoResize()},setupSubscription:function(){this.$("#autoEmail").hide();var t=this.$("#autoState").val();"US"==this.$("#autoCountry").val()&&(t=this.$("#autoStateUS").val());var n=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,""),i={first_name:this.$("#autoFname").val(),last_name:this.$("#autoLname").val(),address1:this.$("#autoAddress").val(),state:t,city:this.$("#autoCity").val(),zip:this.$("#autoZip").val(),country:this.$("#autoCountry").val(),number:n,year:this.$("#autoCardYear").val(),month:this.$("#autoCardMonth").val(),verification_value:this.$("#autoCardCvv").val()};this.$(".alert-error").hide(),this.showProgress(),h.licenseModule.subscribe(i,e.bind(function(t,n){this.processSubscription(t,n,i,e.bind(function(t){t?this.hideProgress():(this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.$("#register, #dummyCard").hide(),this.$("#useMaskedCard").show(),this.model.shieldedCard.fetchAll({success:e.bind(function(){this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),this.confirmCardCreate({amount:this.amount,months:this.months,skipConfirmCheck:!0})},this)}))},this))},this))},showProgress:function(){this.$("#register .progress").show(),this.$("#register input, #register select").attr("disabled","disabled")},hideProgress:function(){this.$("#register .progress").hide(),this.$("#register input, #register select").removeAttr("disabled")},processRegistration:function(t,n,i,a){if(t){var s=l.getText("mm_payment_helper_register_error"),r=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?s=l.getText("mm_payment_helper_invalid_email_server_error"):r&&r.email&&("has already been taken"==r.email[0]?s=l.getText("mm_payment_helper_duplicate_email",[i.email]):"was used for MaskMe Heavy"==r.email[0]&&(s=l.getText("mm_payment_helper_version_not_allowed"))),this.$(".alert-error").html(s).show(),this.$(".alert-error #loginButton").click(e.bind(this.openLoginPage,this)),this.$(".alert-error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),a(s)}else this.contentManager.preferences.fetchAll(),this.model.hasRegistered=!0,a()},processSubscription:function(e,t,n,i){if(e){var a=t.errors.base;this.$(".alert-error").text(a[0]).show(),this.autoResize(),i(e)}else this.contentManager.preferences.fetchAll(),i()},fillWithDisposableCard:function(t){t&&t.preventDefault();var n=this.fillPaymentFieldsWith(this.options.fields,this.model.maskedCard.get("number"),this.model.maskedCard.get("type"),this.model.primaryCard.getFirstName()+" "+this.model.primaryCard.getLastName(),this.model.maskedCard.get("expiry_month"),this.model.maskedCard.get("expiry_year"),this.model.maskedCard.get("cvc"));this.triggerPanelFillEvent({domain:this.options.domain,origin:"disposable",field:{name:this.field.name,disposableGUID:this.model.maskedCard.get("guid"),value:n,dataType:"/financial/creditcard/number",origin:this.field.origin}}),s.setTimeout(e.bind(function(){this.options.contentManager.showNotification({msg:"<h4 style='display:inline;'>Masked Card</h4><div style='text-align:center;'><div>"+this.model.maskedCard.get("type")+"</div><div>"+this.model.maskedCard.get("number")+"</div><div>"+this.model.maskedCard.getExpiry()+"</div><div>"+this.model.maskedCard.getCVC()+"</div></div>",targetUrl:("production"==ABINE_DNTME.config.environment?"http://":"http://")+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:this.model,height:260,neverFade:!0,type:"card"})},this),1e3),this.closePanel()},setupCard:function(e){this.messenger=this.messenger||new o.ContentMessenger,this.messenger.send("window:createTab",{localUrl:"pages/index.html#payments"}),this.closePanel(e)},fillWithUsedCard:function(n,i){n&&n.preventDefault(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var a;if(i||0==i){var r=this.$("a.usedCard");a=t(r[i]).data("cardid")}else a=t(n.currentTarget).data("cardid");var o=e.find(this.model.disposableCards.models,function(e){return e.id==a?!0:void 0});if(o){{this.fillPaymentFieldsWith(this.options.fields,o.get("number"),o.get("type"),this.model.primaryCard.getFirstName()+" "+this.model.primaryCard.getLastName(),o.get("expiry_month"),o.get("expiry_year"),o.get("cvc"))}s.setTimeout(e.bind(function(){this.options.contentManager.showNotification({msg:"",targetUrl:("production"==ABINE_DNTME.config.environment?"http://":"http://")+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:o,primaryCard:this.model.primaryCard},height:260,neverFade:!0,type:"card"})},this),1e3)}this.closePanel()}});return y}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/phone_helper/panel"]=e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+="\n          ",b=n.primaryPhone,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"isValidated"),a=n["if"],v=_.program(2,r,t),v.hash={},v.fn=v,v.inverse=_.program(4,o,t),i=a.call(e,i,v),(i||0===i)&&(s+=i),s+='\n          <!--Disclose My Phone-->\n          <a href="#" class="mmKeyOption primaryPhone"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',i="/pages/images/maskphone-icon-red.png",b=n.assetUrl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof a===E?a.call(e,i,{hash:{}}):a===w?k.call(e,"assetUrl",i,{hash:{}}):a,s+=T(i)+'"/>\n                  ',i="mm_phone_helper_disclosePhone",b=n.intl,a=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===E?a.call(e,i,{hash:{}}):a===w?k.call(e,"intl",i,{hash:{}}):a,s+=T(i)+'\n              </span>\n              <span class="panelRight">\n                  <span class="overflowText">',b=n.primaryPhone,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"getPrettyNumber"),typeof i===E?i=i.call(e,{hash:{}}):i===w&&(i=k.call(e,"primaryPhone.getPrettyNumber",{hash:{}})),s+=T(i)+"</span>\n              </span>\n          </div></a>\n    "}function r(e){var t,i,a="";return a+='\n              <!--Mask My Phone-->\n              <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/maskphone-icon-green.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"assetUrl",t,{hash:{}}):i,a+=T(t)+'"/>\n                      ',t="mm_phone_helper_maskPhone",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,a+=T(t)+'\n                  </span>\n                  <span class="panelRight">\n                      <span class="overflowText">',t="mm_phone_helper_usesPhone",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,a+=T(t)+"</span>\n                  </span>\n              </div></a>\n          "}function o(e){var t,i,a="";return a+='\n              <!-- Setup your Masked Phone -->\n              <a href="#" class="mmKeyOption setupPhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      ',t="mm_phone_helper_pleaseValidate",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,a+=T(t)+"\n                  </span>\n              </div></a>\n          "}function l(e,t){var i,a,s="";return s+="\n\n        ",b=n.dynamicPanel,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),a=n["if"],v=_.program(7,c,t),v.hash={},v.fn=v,v.inverse=_.program(10,h,t),i=a.call(e,i,v),(i||0===i)&&(s+=i),s+="\n    "}function c(e,t){var i,a,s="";return s+="\n            ",b=n.panelSections,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),a=n.each,v=_.program(8,d,t),v.hash={},v.fn=v,v.inverse=_.noop,i=a.call(e,i,v),(i||0===i)&&(s+=i),s+="\n        "}function d(e){var t,n="";return n+='\n                <div id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===E?t=t.call(e,{hash:{}}):t===w&&(t=k.call(e,"this.id",{hash:{}})),n+=T(t)+'" style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===E?t=t.call(e,{hash:{}}):t===w&&(t=k.call(e,"this.height",{hash:{}})),n+=T(t)+'" class="panelSection ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof t===E?t=t.call(e,{hash:{}}):t===w&&(t=k.call(e,"this.class_name",{hash:{}})),n+=T(t)+'">\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof t===E?t=t.call(e,{hash:{}}):t===w&&(t=k.call(e,"this.body",{hash:{}})),(t||0===t)&&(n+=t),n+="\n                </div>\n            "}function h(e,t){var i,a,s="";return s+="\n            ",b=n.entitledToPhone,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),a=n["if"],v=_.program(11,u,t),v.hash={},v.fn=v,v.inverse=_.program(13,p,t),i=a.call(e,i,v),(i||0===i)&&(s+=i),s+="\n        "}function u(e){var t,i,a="";return a+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft">\n                            ',t="mm_phone_helper_setupMasked",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,a+=T(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function p(e){var t,i,a="";return a+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft" style="width:100%;">\n                            ',t="mm_phone_helper_upgradeMaskedPhone",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,a+=T(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function f(e){var t,i,a="";return a+='\n        <div class="header">\n          <div class="logo-link">\n              <img class="logo" height="16px" width="17px" src="',t="/pages/images/dnt-ui-header-logo.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"assetUrl",t,{hash:{}}):i,a+=T(t)+'"/>\n              <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n          </div>\n\n          <div class="links-wrapper">\n            <div class="links close-link">\n              <img id="close" class="header-icon" src="',t="/pages/images/dnt-ui-header-close.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"assetUrl",t,{hash:{}}):i,a+=T(t)+'">\n            </div>\n            <div class="links help-link"  href="https://www.abine.com/maskme/faq/#aliasphone">\n              <img id="help" class="header-icon" src="',t="/pages/images/dnt-ui-header-help.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"assetUrl",t,{hash:{}}):i,a+=T(t)+'">\n            </div>\n            <div class="links settings-link" data-highlight="phone">\n              <img class="header-icon" src="',t="/pages/images/dnt-ui-header-settings.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"assetUrl",t,{hash:{}}):i,a+=T(t)+'">\n            </div>\n          </div>\n        </div>\n    '
}n=n||e.helpers;var m,g,b,v,y="",_=this,E="function",k=n.helperMissing,w=void 0,T=this.escapeExpression;return y+='<div class="panel">\n    ',b=n.primaryPhone,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryPhone"),g=n["if"],v=_.program(1,s,a),v.hash={},v.fn=v,v.inverse=_.program(6,l,a),m=g.call(t,m,v),(m||0===m)&&(y+=m),y+="\n\n\n    ",b=n.dynamicPanel,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),g=n.unless,v=_.program(15,f,a),v.hash={},v.fn=v,v.inverse=_.noop,m=g.call(t,m,v),(m||0===m)&&(y+=m),y+="\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/phone_helper/panel"]}),ABINE_DNTME.define("abine/views/phoneHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,n,i,a,s,r){var o=a.extend({templateName:"phone_helper_panel",events:{"click a.primaryPhone":"fillWithPrimaryPhone","click a.disposablePhone":"fillWithDisposablePhone","click a.getStarted":"getStarted","click a.setupPhone":"setupPhone","click a.upgradeToPhone":"getStartedWithPhone","click .panelSection":"performActions","click .help-link":"openHelp","click .close-link":"logClose"},logClose:function(){this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId})},getStartedWithPhone:function(e){e&&e.preventDefault(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),r.webapp.openPhones(),this.closePanel(e)},openHelp:function(){r.webapp.openHelp("/phone"),this.closePanel()},setupPhone:function(e){r.webapp.openPhones(),this.closePanel(e),e.preventDefault()},afterInitialize:function(){this.field=this.options.field,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={primaryPhone:!1,hasRegistered:this.options.hasRegistered,entitledToPhone:this.options.entitledToPhone},this.contentManager=this.options.contentManager,this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=this.contentManager.preferences.getPref("hasRegistered")?!0:!1,this.model.shieldedPhones=new i.ShieldedPhoneCollection,this.model.shieldedPhones.bind("sync:success",function(){this.model.shieldedPhones.length>0&&(this.model.primaryPhone=this.model.shieldedPhones.at(0)),this.model.primaryPhone?(this.panelId=3000001,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.model.primaryPhone.isValidated()?this.bind("enter0",this.fillWithDisposablePhone,this):this.bind("enter0",this.setupPhone,this),this.bind("enter1",this.fillWithPrimaryPhone,this)):this.options.dynamicPanel?(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId})):(this.panelId=this.contentManager.preferences.getPref("entitledToPhone")?7000001:6000001,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.bind("enter0",this.getStartedWithPhone,this)),this.render()},this),this.model.shieldedPhones.fetchAll()},this))},fillWithPrimaryPhone:function(e){e&&e.preventDefault(),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var t=this.fillPhoneFieldsWith(this.options.fields,this.model.primaryPhone.get("country_code"),this.model.primaryPhone.get("number"));this.triggerPanelFillEvent({domain:this.options.domain,origin:"primary",field:{name:"/contact/phone"==this.field.dataType?this.field.name:"dynamic",value:"/contact/phone"==this.field.dataType?this.field.value:t,dataType:"/contact/phone",origin:this.field.origin}}),this.closePanel()},fillWithDisposablePhone:function(t){t&&t.preventDefault(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var n=this.model.primaryPhone.generateDisposable();n.save({},{success:e.bind(function(){var t=this.fillPhoneFieldsWith(this.options.fields,n.get("country_code"),n.get("number"));this.triggerPanelFillEvent({domain:this.options.domain,origin:"disposable",field:{name:"/contact/phone"==this.field.dataType?this.field.name:"dynamic",disposableGUID:n.get("id"),value:"/contact/phone"==this.field.dataType?this.field.value:t,dataType:"/contact/phone",origin:this.field.origin}}),s.setTimeout(e.bind(function(){this.options.contentManager.showNotification({msg:"Click here to view your Masked Phone usage.",targetUrl:("production"==ABINE_DNTME.config.environment?"http://":"http://")+ABINE_DNTME.config.webAppHost+"/#/phones",targetId:""})},this),1e3),this.closePanel()},this)})}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/blacklist"]=e.template(function(e,t,n,i,a){function s(){return"off"}function r(){return"off"}function o(){return"on"}function l(){return"data-blacklisted=1"}function c(e,t){var i,a,s="";return s+="\n    ",F=n.tracker,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),a=n["if"],O=q.program(10,d,t),O.hash={},O.fn=O,O.inverse=q.program(12,h,t),i=a.call(e,i,O),(i||0===i)&&(s+=i),s+="\n      </a>\n  "}function d(e){var t,i,a="";return a+='\n        <div class="skip suggested">',t="mm_dntme_suggested",F=n.intl,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===j?i.call(e,t,{hash:{}}):i===U?L.call(e,"intl",t,{hash:{}}):i,a+=z(t)+"</div>\n    "}function h(e){var t,i,a="";return a+='\n        <div class="skip not suggested">',t="mm_dntme_not_suggested",F=n.intl,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===j?i.call(e,t,{hash:{}}):i===U?L.call(e,"intl",t,{hash:{}}):i,a+=z(t)+"</div>\n    "}function u(e,t){var i,a,s="";return s+='\n<div class="clearfix feature ',F=n.globalEmail,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),a=n["if"],O=q.program(15,p,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+=" ",F=n.globalEmail,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),a=n.unless,O=q.program(18,m,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='">\n  <div class="message">',i="mm_dntme_dont_track_email_here",F=n.intl,a=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===j?a.call(e,i,{hash:{}}):a===U?L.call(e,"intl",i,{hash:{}}):a,s+=z(i)+'</div>\n  <div class="message messageHover">',i="mm_dntme_disabled_in_settings",F=n.intl,a=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===j?a.call(e,i,{hash:{}}):a===U?L.call(e,"intl",i,{hash:{}}):a,s+=z(i)+'</div>\n  <div class="switch ',F=n.emailEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),a=n["if"],O=q.program(20,g,t),O.hash={},O.fn=O,O.inverse=q.program(22,b,t),i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='" data-feature="email" ',F=n.emailEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),a=n.unless,O=q.program(24,v,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='>\n    <div class="knob"></div>\n  </div>\n  ',F=n.has_masked_emails,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_emails"),a=n["if"],O=q.program(26,y,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='\n</div>\n<div class="clearfix feature ',F=n.globalCard,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),a=n["if"],O=q.program(28,_,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+=" ",F=n.globalCard,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),a=n.unless,O=q.program(31,k,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='">\n    <div class="message">',i="mm_dntme_dont_track_card_here",F=n.intl,a=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===j?a.call(e,i,{hash:{}}):a===U?L.call(e,"intl",i,{hash:{}}):a,s+=z(i)+'</div>\n    <div class="message messageHover">',i="mm_dntme_disabled_in_settings",F=n.intl,a=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===j?a.call(e,i,{hash:{}}):a===U?L.call(e,"intl",i,{hash:{}}):a,s+=z(i)+'</div>\n    <div class="switch ',F=n.cardEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),a=n["if"],O=q.program(33,w,t),O.hash={},O.fn=O,O.inverse=q.program(35,T,t),i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='" data-feature="card"  ',F=n.cardEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),a=n.unless,O=q.program(37,D,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='>\n        <div class="knob"></div>\n    </div>\n  ',F=n.hasEnabledCard,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasEnabledCard"),a=n["if"],O=q.program(39,A,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='\n</div>\n<div class="clearfix feature ',F=n.globalPhone,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),a=n["if"],O=q.program(41,N,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+=" ",F=n.globalPhone,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),a=n.unless,O=q.program(44,M,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='">\n  <div class="message">',i="mm_dntme_dont_track_phone_here",F=n.intl,a=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===j?a.call(e,i,{hash:{}}):a===U?L.call(e,"intl",i,{hash:{}}):a,s+=z(i)+'</div>\n  <div class="message messageHover">',i="mm_dntme_disabled_in_settings",F=n.intl,a=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===j?a.call(e,i,{hash:{}}):a===U?L.call(e,"intl",i,{hash:{}}):a,s+=z(i)+'</div>\n  <div class="switch ',F=n.phoneEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),a=n["if"],O=q.program(46,C,t),O.hash={},O.fn=O,O.inverse=q.program(48,I,t),i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='" data-feature="phone" ',F=n.phoneEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),a=n.unless,O=q.program(50,S,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+='>\n    <div class="knob"></div>\n  </div>\n  ',F=n.has_masked_phones,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_phones"),a=n["if"],O=q.program(52,P,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),(i||0===i)&&(s+=i),s+="\n</div>\n"}function p(e,t){var i,a;return F=n.email,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),a=n["if"],O=q.program(16,f,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),i||0===i?i:""}function f(){return"off"}function m(){return"disabled"}function g(){return"on"}function b(){return"off"}function v(){return"data-blacklisted=1"}function y(e){var t,i,a="";return a+='\n    <div class="skip link viewMaskedEmails">',t="mm_dntme_view_maskmed_email",F=n.intl,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===j?i.call(e,t,{hash:{}}):i===U?L.call(e,"intl",t,{hash:{}}):i,a+=z(t)+"</div>\n  "}function _(e,t){var i,a;return F=n.cardEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),a=n.unless,O=q.program(29,E,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),i||0===i?i:""}function E(){return"off"}function k(){return"disabled"}function w(){return"on"}function T(){return"off"}function D(){return"data-blacklisted=1"}function A(e){var t,i,a="";return a+='\n      <div class="skip link viewMaskedCards">',t="mm_dntme_view_maskmed_card",F=n.intl,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===j?i.call(e,t,{hash:{}}):i===U?L.call(e,"intl",t,{hash:{}}):i,a+=z(t)+"</div>\n  "}function N(e,t){var i,a;return F=n.phoneEnabled,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),a=n.unless,O=q.program(42,x,t),O.hash={},O.fn=O,O.inverse=q.noop,i=a.call(e,i,O),i||0===i?i:""}function x(){return"off"}function M(){return"disabled"}function C(){return"on"}function I(){return"off"}function S(){return"data-blacklisted=1"}function P(e){var t,i,a="";return a+='\n    <div class="skip link viewMaskedPhones">',t="mm_dntme_view_maskmed_phone",F=n.intl,i=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===j?i.call(e,t,{hash:{}}):i===U?L.call(e,"intl",t,{hash:{}}):i,a+=z(t)+"</div>\n  "}n=n||e.helpers;var B,R,F,O,H="",q=this,j="function",L=n.helperMissing,U=void 0,z=this.escapeExpression;return H+='<div class="clearfix feature ',F=n.tracker,B=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),R=n["if"],O=q.program(1,s,a),O.hash={},O.fn=O,O.inverse=q.noop,B=R.call(t,B,O),(B||0===B)&&(H+=B),H+='">\n  <div class="message">',B="mm_dntme_dont_track_browsing_here",F=n.intl,R=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),B=typeof R===j?R.call(t,B,{hash:{}}):R===U?L.call(t,"intl",B,{hash:{}}):R,H+=z(B)+'</div>\n  <div class="switch ',F=n.tracker,B=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),R=n["if"],O=q.program(3,r,a),O.hash={},O.fn=O,O.inverse=q.program(5,o,a),B=R.call(t,B,O),(B||0===B)&&(H+=B),H+='" data-feature="tracker" ',F=n.tracker,B=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),R=n["if"],O=q.program(7,l,a),O.hash={},O.fn=O,O.inverse=q.noop,B=R.call(t,B,O),(B||0===B)&&(H+=B),H+='>\n    <div class="knob"></div>\n  </div>\n  ',F=n.suggestedAllow,B=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),R=n["if"],O=q.program(9,c,a),O.hash={},O.fn=O,O.inverse=q.noop,B=R.call(t,B,O),(B||0===B)&&(H+=B),H+="\n</div>\n",F=n.maskmeInstalled,B=F||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),R=n.unless,O=q.program(14,u,a),O.hash={},O.fn=O,O.inverse=q.noop,B=R.call(t,B,O),(B||0===B)&&(H+=B),H+="\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/blacklist"]}),ABINE_DNTME.define("abine/views/chartHelper",["documentcloud/underscore","abine/timer","abine/intl","abine/proxies"],function(e,t,n,i){function a(e){e=e||new Date;var t=new Date(e.getFullYear(),0,0);return Math.floor((e-t)/864e5)}function s(e,n,s){e.getRealJQuery&&(e=e.getRealJQuery(n.get(0)));for(var r=("Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),["F1E7BF","F1EACD"]),o=new Date,l=a(o),c=-1,d={},h=[],u=[],p=o,f=30,m=0;f+1>=m;m++){var g=p.getFullYear();c!=g&&(c=g,d[g]=s.getDailyTotalsByYear(c));var b=-1;l in d[c]&&(b=d[c][l]),h.push(b),u.push(p),l--,p=new Date(p.getFullYear(),p.getMonth(),p.getDate()-1),0>=l&&(l=a(p))}for(var v=[],y=[],_=[],E=-1,m=h.length-1;m>=0;m--){var b=h[m],p=u[m];-1==E&&-1==b&&m>7||(-1==b?b=E:E=b,-1==b&&(b=0),v.push(b),y.push(p))}var k=Math.floor(v.length/5);1>=k&&(k=2);for(var w=-1,T=-1,D=0,m=1,A=v.length-1;m<v.length;m++,A--){var p=y[m],N=p.getMonth();if(N!=w&&(w=N,T++,T>=r.length&&(T=0)),0==A)var x="TODAY";else var x=N+1+"/"+p.getDate();var M=v[m];m>0&&(M-=v[m-1]),M>D&&(D=M),_.push([x,M,"","",x])}if(0==D)return!1;D+=D/4,D=100*Math.round((D+50)/100);var C={series:[{renderer:e.jqplot.LineRenderer,rendererOptions:{},lineWidth:4,fillAndStroke:!0,showMarker:!0,markerOptions:{show:!0,style:"filledCircle",lineWidth:4,size:12,color:"#3b89c9",shadow:!0,shadowAngle:45,shadowOffset:1,shadowDepth:3,shadowAlpha:.01}}],highlighter:{show:!0,showMarker:!0,tooltipAxes:"y",tooltipLocation:"n",yvalues:4,formatString:'<div class="jqplot-highlighter" style="background-color:#3b89c9;color:#ffffff;padding:1px 4px;"><span style="display:none">%s%s%s</span>%s</div>'},seriesColors:["#3b89c9","#3b89c9"],grid:{drawGridLines:!0,gridLineColor:"#cccccc",background:"#fff",borderColor:"#ccc",borderWidth:.5,shadow:!1},seriesDefaults:{},axesDefaults:{tickRenderer:e.jqplot.CanvasAxisTickRenderer,tickOptions:{fontSize:"6pt"}},axes:{xaxis:{renderer:e.jqplot.CategoryAxisRenderer,tickOptions:{show:!1,angle:-30,showGridline:!1,formatter:function(){var e=-1;return function(t,n){return e++,e%k==0?n:" "}}()}},yaxis:{autoscale:!0,angle:90,min:0,max:D,tickOptions:{formatString:"%'d",mark:"inside"}}}},I=[_];n.jqplot(I,C);var S=(n.data("jqplot"),e("#stats",n));S&&S.show();var P=e("#nextBadgeMsg",n);return P&&(P.show(),0==e("#latestBadge",n).length&&(P.css("top",29),P.css("left",55))),n.bind("jqplotClick",function(){t.setTimeout(function(){i.webapp.openStats()},500)}),!0}return{renderChart:s}}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_a"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r="",o="function",l=n.helperMissing,c=void 0,d=this.escapeExpression;return r+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',i="pageContent",s=n.child,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"child",i,{hash:{}}):a,r+=d(i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',i="/pages/images/dnt-ui-header-settings-grey.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-a-link">\n            <img src="',i="pages/images/dnt-ui-footer-new.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>\n            ',i="mm_dntme_new_premium_added",s=n.intl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"intl",i,{hash:{}}):a,(i||0===i)&&(r+=i),r+="\n        </div>\n    </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_a"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_b"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r="",o="function",l=n.helperMissing,c=void 0,d=this.escapeExpression;return r+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',i="pageContent",s=n.child,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"child",i,{hash:{}}):a,r+=d(i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',i="/pages/images/dnt-ui-header-settings.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-b-link">\n            <img src="',i="pages/images/dnt-ui-footer-heart.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>\n          ',i="mm_dntme_support_online_privacy",s=n.intl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"intl",i,{hash:{}}):a,(i||0===i)&&(r+=i),r+="\n        </div>\n    </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_b"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_c"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a="";return a+="\n            ",t="mm_dntme_premium_member",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"intl",t,{hash:{}}):i,(t||0===t)&&(a+=t),a+="\n          "}function r(e){var t,i,a="";return a+="\n            ",t="mm_dntme_free_member",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"intl",t,{hash:{}}):i,(t||0===t)&&(a+=t),a+="\n          "}n=n||e.helpers;var o,l,c,d,h="",u=this,p="function",f=n.helperMissing,m=void 0,g=this.escapeExpression;return h+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',o="pageContent",c=n.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"child",o,{hash:{}}):l,h+=g(o)+'</div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="logo-link">\n            <img class="logo compact" src="',o="pages/images/dnt-ui-header-logo.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"assetUrl",o,{hash:{}}):l,h+=g(o)+'"/>\n        </div>\n        <a href="#" class="premium" target="_blank">\n          ',c=n.premium,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"premium"),l=n["if"],d=u.program(1,s,a),d.hash={},d.fn=d,d.inverse=u.program(3,r,a),o=l.call(t,o,d),(o||0===o)&&(h+=o),h+='\n        </a>\n        <div class="footer-settings-link settings-link">\n            <img class="logo compact" src="',o="/pages/images/dnt-ui-header-settings.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"assetUrl",o,{hash:{}}):l,h+=g(o)+'"/>\n        </div>\n    </div>\n</div>\n'}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_c"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_medal"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r="",o="function",l=n.helperMissing,c=void 0,d=this.escapeExpression;return r+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',i="pageContent",s=n.child,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"child",i,{hash:{}}):a,r+=d(i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',i="/pages/images/dnt-ui-header-settings-grey.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>\n            </div>\n        </div>\n    </div>\n</div>\n'}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_medal"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_weekly_report"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r="",o="function",l=n.helperMissing,c=void 0,d=this.escapeExpression;return r+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',i="pageContent",s=n.child,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"child",i,{hash:{}}):a,r+=d(i)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',i="/pages/images/dnt-ui-header-settings-grey.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer weeklyReport clearfix">\n        <img src="',i="pages/images/dnt-ui-weekly-report.png",s=n.assetUrl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"assetUrl",i,{hash:{}}):a,r+=d(i)+'"/>\n        ',i="mm_dntme_weekly_report_title",s=n.intl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"intl",i,{hash:{}}):a,(i||0===i)&&(r+=i),r+="\n    </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/compact_panel_weekly_report"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/dntStats"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a="";return a+='\n		<span class="halfBadge">\n			<div class="badgeText badgeIconSmall badge',x=n.getBadgeType,t=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getBadgeType"),typeof t===S?t=t.call(e,{hash:{}}):t===B&&(t=P.call(e,"getBadgeType",{hash:{}})),a+=R(t)+'Img"></div>\n			<div class="badgeCongratsNormal">\n				<div class="blueText congrats">',t="mm_dntme_congrats",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+'</div>\n				<div>\n					<span class="darkText blocked-over">',t="mm_dntme_youve_blocked_over",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+'</span>\n					<div class="blueText number-trackers">',x=n.getBadgeCount,t=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getBadgeCount"),typeof t===S?t=t.call(e,{hash:{}}):t===B&&(t=P.call(e,"getBadgeCount",{hash:{}})),a+=R(t)+" ",t="mm_dntme_trackers",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+"</div>\n				</div>\n			</div>\n		</span>\n	"}function r(e){var t,i,a="";return a+='\n		<span class="fullBadge">\n			<div class="badgeText badgeIconBig badge',x=n.getBadgeType,t=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getBadgeType"),typeof t===S?t=t.call(e,{hash:{}}):t===B&&(t=P.call(e,"getBadgeType",{hash:{}})),a+=R(t)+'Img"></div>\n			<div class="badgeCongratsWithCard">\n				<div class="blueText congrats">',t="mm_dntme_congrats",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+'</div>\n				<div>\n					<span class="darkText blocked-over">',t="mm_dntme_youve_blocked_over",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+'</span>\n					<div class="blueText number-trackers">',x=n.getBadgeCount,t=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getBadgeCount"),typeof t===S?t=t.call(e,{hash:{}}):t===B&&(t=P.call(e,"getBadgeCount",{hash:{}})),a+=R(t)+" ",t="mm_dntme_trackers",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+'</div>\n				</div>\n				<div class="darkText earned-card">',t="mm_dntme_youve_earned",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+'</div>\n				<a class="medal-with-card-notification cash-for-cards-webapp-signup" href="javascript:void(0);">\n					<img class="maskedCard" src="',t="pages/images/badge/plusonecard.png",x=n.assetUrl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"assetUrl",t,{hash:{}}):i,a+=R(t)+'">\n				</a>\n				<a class="medal-with-card-notification cash-for-cards-webapp-signup learn-more" href="javascript:void(0);">',t="mm_dntme_learn_more",x=n.intl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"intl",t,{hash:{}}):i,a+=R(t)+"</a>\n			</div>\n		</span>\n	"}function o(e,t){var i,a,s="";return s+='\n        <div class="total-trackers ',x=n.totalGreaterThan10000,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),a=n["if"],M=I.program(6,l,t),M.hash={},M.fn=M,M.inverse=I.noop,i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='">\n					<p>',x=n.formattedTotal,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof i===S?i=i.call(e,{hash:{}}):i===B&&(i=P.call(e,"formattedTotal",{hash:{}})),(i||0===i)&&(s+=i),s+="</p>\n				</div>\n				<div class=\"trackers-blocked\">\n					<p><span>trackers blocked</span><br />since <span class='date'>Feb' 12</span></p>\n				</div>\n			"}function l(){return"small"}function c(e,t){var i,a,s="";return s+="\n				",x=n.totalGreaterThan10000,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),a=n["if"],M=I.program(9,d,t),M.hash={},M.fn=M,M.inverse=I.program(11,h,t),i=a.call(e,i,M),(i||0===i)&&(s+=i),s+="\n			"}function d(e){var t,i,a,s="";return s+="\n					",x=n.formattedTotal,t=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),i="mm_dntme_alltime_blocked_small",x=n.intl,a=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===S?a.call(e,i,t,{hash:{}}):a===B?P.call(e,"intl",i,t,{hash:{}}):a,(t||0===t)&&(s+=t),s+="\n				"}function h(e){var t,i,a,s="";return s+="\n					",x=n.formattedTotal,t=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),i="mm_dntme_alltime_blocked",x=n.intl,a=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===S?a.call(e,i,t,{hash:{}}):a===B?P.call(e,"intl",i,t,{hash:{}}):a,(t||0===t)&&(s+=t),s+="\n				"}function u(e){var t,i,a="";return a+='\n		<div class="right">\n				<img class="arrow-open" src="',t="pages/images/dnt-ui-drawer-arrow-closed.png",x=n.assetUrl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"assetUrl",t,{hash:{}}):i,a+=R(t)+'" />\n				<img class="arrow-close" src="',t="pages/images/dnt-ui-drawer-arrow-open.png",x=n.assetUrl,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===S?i.call(e,t,{hash:{}}):i===B?P.call(e,"assetUrl",t,{hash:{}}):i,a+=R(t)+'" />\n			</div>\n'}function p(e,t){var i,a,s="";return s+='\n	<div id="chartArea" class="medals-expanded-wrapper">\n		<div class="medals-sanity-check">\n			<div class="medals-display">\n				<ul class="medals-list">\n					<li class="bronze medal ',x=n.achievedBronze,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),a=n["if"],M=I.program(16,f,t),M.hash={},M.fn=M,M.inverse=I.noop,i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='">\n						<span class="medal-graphic"></span><br />\n						<span class="medal-count">',x=n.achievedBronze,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),a=n["if"],M=I.program(18,m,t),M.hash={},M.fn=M,M.inverse=I.program(20,g,t),i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='</span>\n					</li>\n					<li class="silver medal ',x=n.achievedSilver,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),a=n["if"],M=I.program(22,b,t),M.hash={},M.fn=M,M.inverse=I.noop,i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='">\n						<span class="medal-graphic"></span><br />\n						<span class="medal-count">',x=n.achievedSilver,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),a=n["if"],M=I.program(24,v,t),M.hash={},M.fn=M,M.inverse=I.program(26,y,t),i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='</span>\n					</li>\n					<li class="gold medal ',x=n.achievedGold,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),a=n["if"],M=I.program(28,_,t),M.hash={},M.fn=M,M.inverse=I.noop,i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='">\n						<span class="medal-graphic"></span><br />\n						<span class="medal-count">',x=n.achievedGold,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),a=n["if"],M=I.program(30,E,t),M.hash={},M.fn=M,M.inverse=I.program(32,k,t),i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='</span>\n					</li>\n					<li class="platinum medal ',x=n.achievedPlatinum,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),a=n["if"],M=I.program(34,w,t),M.hash={},M.fn=M,M.inverse=I.noop,i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='">\n						<span class="medal-graphic"></span><br />\n						<span class="medal-count">',x=n.achievedPlatinum,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),a=n["if"],M=I.program(36,T,t),M.hash={},M.fn=M,M.inverse=I.program(38,D,t),i=a.call(e,i,M),(i||0===i)&&(s+=i),s+='</span>\n					</li>\n\n				</ul>\n			</div>\n			<div class="more-stats">\n				<p>Only <span id="nextMedalAt">',x=n.nextMedalAtFormatted,i=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nextMedalAtFormatted"),typeof i===S?i=i.call(e,{hash:{}}):i===B&&(i=P.call(e,"nextMedalAtFormatted",{hash:{}})),s+=R(i)+'</span> more until your next reward</p>\n				<a class="see-stats-btn" href="javascript:void(0)">See All Stats</a>\n			</div>\n		</div>\n	</div>\n '
}function f(){return"achieved"}function m(){return"&#10003;"}function g(){return"X"}function b(){return"achieved"}function v(){return"&#10003;"}function y(){return"X"}function _(){return"achieved"}function E(){return"&#10003;"}function k(){return"X"}function w(){return"achieved"}function T(e){var t;return x=n.getPlatinumCount,t=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPlatinumCount"),typeof t===S?t=t.call(e,{hash:{}}):t===B&&(t=P.call(e,"getPlatinumCount",{hash:{}})),R(t)}function D(){return"X"}n=n||e.helpers;var A,N,x,M,C="",I=this,S="function",P=n.helperMissing,B=void 0,R=this.escapeExpression;return C+='<div id="DNTPNewBadge" class="clearfix" style="display: none;">\n	<div class="close-badge"></div>\n	',x=n.noFreeCardOffer,A=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"noFreeCardOffer"),N=n["if"],M=I.program(1,s,a),M.hash={},M.fn=M,M.inverse=I.program(3,r,a),A=N.call(t,A,M),(A||0===A)&&(C+=A),C+='\n</div>\n<a href=# id="viewDetailedStats" class="open">\n		<div class="allTimeTotal">\n			',x=n.compact,A=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),N=n.unless,M=I.program(5,o,a),M.hash={},M.fn=M,M.inverse=I.program(8,c,a),A=N.call(t,A,M),(A||0===A)&&(C+=A),C+="\n		</div>\n",x=n.compact,A=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),N=n.unless,M=I.program(13,u,a),M.hash={},M.fn=M,M.inverse=I.noop,A=N.call(t,A,M),(A||0===A)&&(C+=A),C+="\n</a>\n",x=n.compact,A=x||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),N=n.unless,M=I.program(15,p,a),M.hash={},M.fn=M,M.inverse=I.noop,A=N.call(t,A,M),(A||0===A)&&(C+=A),C+="\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/dntStats"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/features"]=e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+="\n  <legend>",i="mm_dntme_trusted_sites",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===f?a.call(e,i,{hash:{}}):a===g?m.call(e,"intl",i,{hash:{}}):a,s+=b(i)+'<span class="info-message" title="',i="mm_dntme_help_trusted_sites",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===f?a.call(e,i,{hash:{}}):a===g?m.call(e,"intl",i,{hash:{}}):a,s+=b(i)+'"> (',i="mm_dntme_info",d=n.intl,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),i=typeof a===f?a.call(e,i,{hash:{}}):a===g?m.call(e,"intl",i,{hash:{}}):a,s+=b(i)+')</span></legend>\n  <div class="trusted-sites ',d=n.maskmeInstalled,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),a=n["if"],h=p.program(2,r,t),h.hash={},h.fn=h,h.inverse=p.noop,i=a.call(e,i,h),(i||0===i)&&(s+=i),s+='">\n    ',i="blacklist",d=n.child,a=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),i=typeof a===f?a.call(e,i,{hash:{}}):a===g?m.call(e,"child",i,{hash:{}}):a,s+=b(i)+"\n  </div>\n"}function r(){return"maskme"}function o(e){var t,i,a="";return a+='\n<div>\n  <a href=# class="more-options">\n    ',t="mm_dntme_more_options_in_dashboard",d=n.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,t,{hash:{}}):i===g?m.call(e,"intl",t,{hash:{}}):i,(t||0===t)&&(a+=t),a+="\n  </a>\n</div>\n"}n=n||e.helpers;var l,c,d,h,u="",p=this,f="function",m=n.helperMissing,g=void 0,b=this.escapeExpression;return u+="<legend>",l="mm_dntme_global_defaults",d=n.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===f?c.call(t,l,{hash:{}}):c===g?m.call(t,"intl",l,{hash:{}}):c,u+=b(l)+'<span class="info-message" title="',l="mm_dntme_help_global_defaults",d=n.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===f?c.call(t,l,{hash:{}}):c===g?m.call(t,"intl",l,{hash:{}}):c,u+=b(l)+'"> (',l="mm_dntme_info",d=n.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===f?c.call(t,l,{hash:{}}):c===g?m.call(t,"intl",l,{hash:{}}):c,u+=b(l)+")</span></legend>\n",l="features",d=n.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===f?c.call(t,l,{hash:{}}):c===g?m.call(t,"child",l,{hash:{}}):c,u+=b(l)+"\n\n",d=n.blacklist,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),l=null===l||void 0===l||l===!1?l:ABINE_DNTME.Duckbone.Handlebars.getAttr(l,"length"),c=n["if"],h=p.program(1,s,a),h.hash={},h.fn=h,h.inverse=p.noop,l=c.call(t,l,h),(l||0===l)&&(u+=l),u+="\n\n<legend>",l="mm_dntme_preferences",d=n.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===f?c.call(t,l,{hash:{}}):c===g?m.call(t,"intl",l,{hash:{}}):c,u+=b(l)+"</legend>\n",l="preferences",d=n.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===f?c.call(t,l,{hash:{}}):c===g?m.call(t,"child",l,{hash:{}}):c,u+=b(l)+"\n\n",d=n.maskmeInstalled,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),c=n.unless,h=p.program(4,o,a),h.hash={},h.fn=h,h.inverse=p.noop,l=c.call(t,l,h),(l||0===l)&&(u+=l),u+="\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/features"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/global_feature"]=e.template(function(e,t,n,i,a){function s(){return"off"}function r(e){var t,i,a="";return a+='\n      <a href=# id="viewAllTrackers">\n        ',t="mm_dntme_view_tracking_companies",h=n.intl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===b?g.call(e,"intl",t,{hash:{}}):i,a+=v(t)+'\n      </a><a href=# id="hideAllTrackers">\n        ',t="mm_dntme_hide_tracking_companies",h=n.intl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===b?g.call(e,"intl",t,{hash:{}}):i,a+=v(t)+"\n      </a>\n    "}function o(){return"on"}function l(){return"off"}n=n||e.helpers;var c,d,h,u,p="",f=this,m="function",g=n.helperMissing,b=void 0,v=this.escapeExpression;return p+='<div class="clearfix feature ',h=n.value,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=n.unless,u=f.program(1,s,a),u.hash={},u.fn=u,u.inverse=f.noop,c=d.call(t,c,u),(c||0===c)&&(p+=c),p+=" ",h=n.name,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"name",{hash:{}})),p+=v(c)+'" id="',h=n.name,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"name",{hash:{}})),p+=v(c)+'">\n  <div class="feature-icon ',h=n.name,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"name",{hash:{}})),p+=v(c)+'"></div>\n  <div class="message">',h=n.getLabel,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"getLabel",{hash:{}})),p+=v(c)+'<span class="info-message" title="',h=n.getTooltip,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"getTooltip",{hash:{}})),p+=v(c)+'"> (',c="mm_dntme_info",h=n.intl,d=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===m?d.call(t,c,{hash:{}}):d===b?g.call(t,"intl",c,{hash:{}}):d,p+=v(c)+")</span>\n    ",h=n.isBrowsing,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"isBrowsing"),d=n["if"],u=f.program(3,r,a),u.hash={},u.fn=u,u.inverse=f.noop,c=d.call(t,c,u),(c||0===c)&&(p+=c),p+='\n  </div>\n  <div class="settings-switch ',h=n.value,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=n["if"],u=f.program(5,o,a),u.hash={},u.fn=u,u.inverse=f.program(7,l,a),c=d.call(t,c,u),(c||0===c)&&(p+=c),p+='"><div class="knob"></div></div>\n</div>\n\n'}),ABINE_DNTME.CompiledTemplates["views/dntme/global_feature"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/global_trackers"]=e.template(function(e,t,n){n=n||e.helpers;var i,a,s,r="",o="function",l=n.helperMissing,c=void 0,d=this.escapeExpression;return r+="<legend>",i="mm_dntme_global_defaults",s=n.intl,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"intl",i,{hash:{}}):a,r+=d(i)+"</legend>\n",i="features",s=n.child,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"child",i,{hash:{}}):a,r+=d(i)+'\n<div class="trackers"><span id="reloadTrackers"></span>\n',i="globalTrackers",s=n.child,a=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),i=typeof a===o?a.call(t,i,{hash:{}}):a===c?l.call(t,"child",i,{hash:{}}):a,r+=d(i)+"\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/global_trackers"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/page"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a="";return a+='\n    <div class="alert-danger page-not-scanned"><i class="icon-warning-sign"></i>',t="mm_dntme_reload_required",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"intl",t,{hash:{}}):i,a+=E(t)+"</div>\n  "}function r(e,t){var i,a,s="";return s+="\n    ",i="trackerSection",f=n.child,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),i=typeof a===v?a.call(e,i,{hash:{}}):a===_?y.call(e,"child",i,{hash:{}}):a,s+=E(i)+"\n    ",f=n.compact,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"compact"),a=n.unless,m=b.program(4,o,t),m.hash={},m.fn=m,m.inverse=b.noop,i=a.call(e,i,m),(i||0===i)&&(s+=i),s+="\n    ",i="dntStats",f=n.child,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),i=typeof a===v?a.call(e,i,{hash:{}}):a===_?y.call(e,"child",i,{hash:{}}):a,s+=E(i)+"\n    ",f=n.compact,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"compact"),a=n.unless,m=b.program(6,l,t),m.hash={},m.fn=m,m.inverse=b.noop,i=a.call(e,i,m),(i||0===i)&&(s+=i),s+="\n  "}function o(e){var t,i,a="";return a+="\n      ",t="settingsChanged",f=n.child,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"child",t,{hash:{}}):i,a+=E(t)+'\n      <div class="separator"></div>\n      ',t="blacklistSection",f=n.child,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"child",t,{hash:{}}):i,a+=E(t)+"\n    "}function l(e,t){var i,a,s="";return s+="\n      ",f=n.dynamicPanel,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),a=n["if"],m=b.program(7,c,t),m.hash={},m.fn=m,m.inverse=b.noop,i=a.call(e,i,m),(i||0===i)&&(s+=i),s+="\n    "}function c(e,t){var i,a,s="";return s+='\n          <div class="dynamicPanels">\n            ',f=n.panelSections,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),a=n.each,m=b.program(8,d,t),m.hash={},m.fn=m,m.inverse=b.noop,i=a.call(e,i,m),(i||0===i)&&(s+=i),s+="\n          </div>\n      "}function d(e,t){var i,a,s="";return s+='\n                <div id="',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof i===v?i=i.call(e,{hash:{}}):i===_&&(i=y.call(e,"this.id",{hash:{}})),s+=E(i)+'" ',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),a=n["if"],m=b.program(9,h,t),m.hash={},m.fn=m,m.inverse=b.noop,i=a.call(e,i,m),(i||0===i)&&(s+=i),s+=' class="panelSection ',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof i===v?i=i.call(e,{hash:{}}):i===_&&(i=y.call(e,"this.class_name",{hash:{}})),s+=E(i)+'">\n                  ',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof i===v?i=i.call(e,{hash:{}}):i===_&&(i=y.call(e,"this.body",{hash:{}})),(i||0===i)&&(s+=i),s+="\n                </div>\n            "}function h(e){var t,n="";return n+='style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===v?t=t.call(e,{hash:{}}):t===_&&(t=y.call(e,"this.height",{hash:{}})),n+=E(t)+'"'}n=n||e.helpers;var u,p,f,m,g="",b=this,v="function",y=n.helperMissing,_=void 0,E=this.escapeExpression;return g+='<div class="page clearfix">\n  ',f=n.reloadRequired,u=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),p=n["if"],m=b.program(1,s,a),m.hash={},m.fn=m,m.inverse=b.program(3,r,a),u=p.call(t,u,m),(u||0===u)&&(g+=u),g+="\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/page"]}),ABINE_DNTME.define("abine/views/dntmePage",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl","abine/views/chartHelper"],function(e,t,n,i,a,s,r,o,l){var c=n.View.extend({tagName:"div",templateName:"dntme_dntStats",events:{"click #viewDetailedStats":"viewDetailedStats","click .allTimeTotal .blue":"viewDetailedStats","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .see-stats-btn":"openStatsPage","click .medals-display":"reshowLastMedal"},afterInitialize:function(){this.model.sync("read",this,{eventName:"read:dntStats:getBadgeData",success:function(e){this.model.bronzeLimit=e.totalBlocked.levels[0].limit,this.model.silverLimit=e.totalBlocked.levels[1].limit,this.model.goldLimit=e.totalBlocked.levels[2].limit,this.model.platinumLimit=e.totalBlocked.levels[3].limit,this.render()},error:function(){!0&&ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/dntStats]#[getBadgeData]# error event in model.sync event: read:dntStats:getBadgeData")}})},reshowLastMedal:function(e){e.preventDefault(),this.model.achievedBronze()&&(t("#DNTPNewBadge",this.el).slideDown(),this.hideChart())},openCashForCardsSignup:function(e){this.model.toggleViewedBadge(),r.webapp.openCashForCardsSignup(),e.preventDefault(),this.trigger("close")},hideChart:function(){var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideUp(t),this.$("#viewDetailedStats").removeClass("open")},showChart:function(){this.trigger("max-height");var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideDown(t),this.$("#viewDetailedStats").addClass("open")},viewDetailedStats:function(e){e.preventDefault(),this.$("#viewDetailedStats").hasClass("open")?this.hideChart():this.showChart()},openStatsPage:function(e){e.preventDefault(),r.webapp.openStats(),this.trigger("close")}}),d=n.View.extend({tagName:"div",templateName:"dntme_blacklist",events:{"click .viewMaskedEmails":"viewMaskedEmails","click .viewMaskedPhones":"viewMaskedPhones","click .viewMaskedCards":"viewMaskedCards","click .feature":"toggleSwitch","click .suggested":"openSuggested"},viewMaskedEmails:function(e){r.webapp.openEmails(),e.preventDefault(),this.trigger("close")},viewMaskedPhones:function(e){r.webapp.openPhones(),e.preventDefault(),this.trigger("close")},viewMaskedCards:function(e){r.webapp.openCards(),e.preventDefault(),this.trigger("close")},openSuggested:function(e){e.preventDefault(),r.securityManager.openLink({type:"recommended",host:this.model.get("host")})},toggleSwitch:function(n){var i=t(n.target);if(!i.hasClass("skip")&&(i.hasClass("feature")||(i=t(n.target).parents(".feature")),!i.hasClass("disabled"))){var a=t(".switch",i),s={},r=a.data("feature");s.changed=r,s[r]=!a.data("blacklisted"),t(".knob",a).animate({marginLeft:s[r]?0:20},e.bind(function(){this.model.save(s),this.trigger("featureToggled",r)},this))}},afterInitialize:function(){this.doc=this.el.ownerDocument}}),h=n.View.extend({tagName:"div",templateName:"dntme_tracker",events:{"click .suggested":"openSuggested","click .tracker":"toggleTracker"},openSuggested:function(e){e.preventDefault(),r.securityManager.openLink({type:"recommended",tracker:this.model.get("name")})},toggleTracker:function(e){e.target.className&&-1!=e.target.className.indexOf("suggested")||(this.model.save({blocked:!this.model.get("blocked")}),this.model.collection.trigger("changed"))},afterInitialize:function(){this.doc=this.el.ownerDocument}}),u=n.ListView.extend({tagName:"div",className:"",viewClass:h}),p=n.View.extend({tagName:"span",templateName:"dntme_tracker_title",afterInitialize:function(){this.doc=this.el.ownerDocument}}),f=n.View.extend({tagName:"div",templateName:"dntme_settings_changed",events:{"click #reason1":"siteNotWorking","click #feedback-submit":"otherReason"},siteNotWorking:function(e){e.preventDefault(),this.submitFeedback(o.getText("mm_dntme_reason_site_not_working"))},otherReason:function(e){return e.preventDefault(),this.$(".text-error").hide(),""==this.$("#desc").val()?(this.$(".text-error").show(),void 0):(this.submitFeedback(this.$("#desc").val()),!1)},submitFeedback:function(t){this.$(".feedback").slideUp("slow"),this.$(".thanks").slideDown("slow"),s.setTimeout(e.bind(function(){this.$(".thanks").fadeOut()},this),3e3),this.model.save({feedback:t}),this.doc.defaultView.focus()},afterInitialize:function(){this.doc=this.el.ownerDocument}}),m=n.View.extend({events:{"click .section-header":"toggleSection","click a.who":"openWhoAreThey"},tagName:"div",templateName:"dntme_trackers",openWhoAreThey:function(e){e.preventDefault(),r.webapp.openUnderstandingTracking(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(n,i){if(n&&n.preventDefault(),this.options.compact)return this.trigger("show-trackers"),void 0;if(!this.model.get("disabled")&&this.model.trackers.length>0){var a=this.$(".section-header").parent(".section");a.toggleClass("off").toggleClass("on"),this.trigger("max-height");var s=t(".section-content",a),r=e.bind(this.autoResize,this);i?(s.show(),r()):a.hasClass("on")?s.slideDown("fast",r):s.slideUp("fast",r)}},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){return{trackersTitle:new p({model:this.model,doc:this.el.ownerDocument}),trackerList:new u({collection:this.model.trackers,doc:this.el.ownerDocument})}}}),g=a.extend({events:{"click .panelSection":"performActions","click .close-badge":"toggleBadge"},templateName:"dntme_page",toggleBadge:function(){return this.options.compact?(this.model.dntStats.toggleViewedBadge(),this.trigger("show-trackers"),this.options.messenger.send("update:panelActivity:closed",{panelId:8000005}),void 0):(t("#viewDetailedStats",this.el).addClass("open"),t("#chartArea",this.el).slideDown("fast",e.bind(function(){},this)),t("#DNTPNewBadge",this.el).slideUp(),this.trigger("max-height"),this.model.get("premium")?this.options.messenger.send("update:panelActivity:closed",{panelId:8000004}):this.options.messenger.send("update:panelActivity:closed",{panelId:8000005}),void 0)},autoResize:function(){this.trigger("resize")},reload:function(){this.model.fetch({success:e.bind(this.render,this)})},trackerToggled:function(){this.featureToggled("individual-tracker")},featureToggled:function(n){this.model.fetch({success:e.bind(function(){var i=this.children.trackerSection;"tracker"==n&&(this.model.get("disabled")?this.$(".section-content",i.el).slideUp("slow",e.bind(function(){i.render(),this.autoResize()},this)):i.render());var a=this.children.settingsChanged;if(this.model.get("settingsChanged")){"individual-tracker"!=n?(this.model.custom.setCustomTabData("changedFeature",n),this.model.custom.setCustomTabData("changedFeatureOffStatus",this.model.blacklist.get(n))):(this.model.custom.setCustomTabData("changedFeature",""),this.model.custom.setCustomTabData("changedFeatureOffStatus","")),this.trigger("max-height");var r=a.el.innerHTML;a.render(),r!=a.el.innerHTML&&(t(a.el).hide(),t(a.el).slideDown("slow",e.bind(this.autoResize,this)))}else t(a.el).slideUp("slow",e.bind(function(){a.render(),this.autoResize()},this));"individual-tracker"!=n&&this.children.blacklistSection.render(),s.setTimeout(e.bind(function(){this.model.get("toggledOff")&&!this.model.custom.isFeedbackShown()&&this.model.custom.setCustomTabData("feedbackShown",!0)},this),500)},this)})},renderChart:function(){try{var e=t("#chartdiv",this.el);if(l.renderChart(t,e,this.model.dntStats))try{{t(this.el.ownerDocument.defaultView.top).height(),t(this.el.parentNode.parentNode).height()+100}t("#chartArea",this.el).hide(),t("#viewDetailedStats",this.el).show().removeClass("open")}catch(n){}else e.hide(),t("#viewDetailedStats",this.el).hide()}catch(n){e.hide(),t("#chartdiv",this.el).hide(),!0&&ABINE_DNTME.log.error("********\n"+n+"\n"+n.stack)}},refreshPanel:function(t){this.model.get("settingsChanged")||this.model.trackers.length==t.total||this.model.fetch({success:e.bind(function(){if(this.children&&this.children.trackerSection){var e=this.children.trackerSection.isOpen();this.children.trackerSection.render(),e&&this.children.trackerSection.toggleSection(null,!0),this.options.compact&&this.updateStats()}this.autoResize()},this)})},updateStats:function(){this.model.get("reloadRequired")||this.options.compact&&"medals"!=this.options.page?"weekly-report"==this.options.page&&t(".dntme_dntStats",this.el).hide():(this.children.dntStats.render(),this.model.dntStats.showMedals()&&!this.model.dntStats.viewedBadge()?(t("#chartArea",this.el).hide(),t("#viewDetailedStats",this.el).hide(),t("#DNTPNewBadge",this.el).show(),this.model.get("premium")?this.options.messenger.send("update:panelActivity:impression",{panelId:8000004}):this.options.messenger.send("update:panelActivity:impression",{panelId:8000005}),this.options.compact||this.model.dntStats.toggleViewedBadge()):(t("#DNTPNewBadge",this.el).hide(),this.renderChart()))},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new i.TabData({messenger:this.options.messenger}),this.options.dynamicPanel&&(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.options.compact&&(this.model.compact=!0),this.options.messenger.on("background:dntme:tracker-count-changed",e.debounce(e.bind(this.refreshPanel,this),1e3)),this.on("render",e.bind(function(){this.model.trackers.messenger=this.options.messenger,this.model.blacklist.messenger=this.options.messenger,this.model.get("weeklyReport")&&t(".weeklyReport span",this.el.ownerDocument).text(this.model.get("weeklyReport")),this.model.get("maskmeInstalled")&&(this.options.compact||t(".footer",this.el.ownerDocument).hide()),this.options.compact&&t(".premium span.date",this.el.ownerDocument).text(this.model.get("installMonth")),this.updateStats(),this.trigger("resize"),t("div.dntme_dntStats div.trackers-blocked p span.date",this.el.ownerDocument).text(this.model.get("installMonth"))},this)),s.setTimeout(e.bind(function(){this.model.fetch({success:e.bind(function(){if(this.options.compact&&!this.options.page){if(this.model.get("weeklyReport"))return this.trigger("show-report"),void 0;if(this.model.dntStats.canAutoShowBadge())return this.trigger("show-medals"),void 0}this.render()},this)})},this),0)},showTrackers:function(){this.children.trackerSection.toggleSection()},createChildren:function(){var t=new d({model:this.model.blacklist,doc:this.el.ownerDocument});t.on("featureToggled",e.bind(this.featureToggled,this)),t.on("close",e.bind(function(){this.trigger("close")},this));var n=new m({model:this.model,doc:this.el.ownerDocument,compact:this.options.compact});n.on("resize",e.bind(this.autoResize,this)),n.on("trackerToggled",e.bind(this.trackerToggled,this)),n.on("max-height",e.bind(function(){this.trigger("max-height")},this)),n.on("show-trackers",e.bind(function(){this.trigger("show-trackers")},this)),this.model.dntStats.compact=this.model.compact;var i=new c({model:this.model.dntStats,doc:this.el.ownerDocument});return i.on("close",e.bind(function(){this.trigger("close")},this)),i.on("resize",e.bind(this.autoResize,this)),i.on("max-height",e.bind(function(){this.trigger("max-height")},this)),{settingsChanged:new f({model:this.model,doc:this.el.ownerDocument}),trackerSection:n,blacklistSection:t,dntStats:i}}});return g}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/panel"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a="";return a+="\n        ",t="mm_dntme_premium",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"intl",t,{hash:{}}):i,a+=g(t)+"\n      "}function r(e){var t,i,a="";return a+="\n        ",t="mm_dntme_upgrade_to_premium",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"intl",t,{hash:{}}):i,a+=g(t)+"\n      "}n=n||e.helpers;var o,l,c,d,h="",u=this,p="function",f=n.helperMissing,m=void 0,g=this.escapeExpression;return h+='<div class="panel">\n  <div class="header dntme">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',o="/pages/images/dnt-ui-header-logo.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"assetUrl",o,{hash:{}}):l,h+=g(o)+'"/>\n      <span class="boldFont">DoNotTrack</span><span class="normalFont">Me</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"assetUrl",o,{hash:{}}):l,h+=g(o)+'">\n      </div>\n      <div class="links help-link">\n        <img id="help" class="header-icon" src="',o="/pages/images/dnt-ui-header-help.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"assetUrl",o,{hash:{}}):l,h+=g(o)+'">\n      </div>\n      <div class="links settings-link">\n        <img id="settings" class="header-icon" src="',o="/pages/images/dnt-ui-header-settings.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"assetUrl",o,{hash:{}}):l,h+=g(o)+'">\n      </div>\n    </div>\n  </div>\n  <div class="content-wrap">\n    <div class="page-content clearfix">\n      <div class="one">',o="pageContent",c=n.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"child",o,{hash:{}}):l,h+=g(o)+'</div>\n      <div class="two">',o="settingsContent",c=n.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"child",o,{hash:{}}):l,h+=g(o)+'</div>\n    </div>\n  </div>\n  <div class="footer clearfix">\n    <a href="#" class="dashboard" target="_blank">\n      <span class="dashboard-text">',o="mm_dntme_privacy_dashboard",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"intl",o,{hash:{}}):l,h+=g(o)+'</span>\n    </a>\n    <a href="#" class="premium" target="_blank">\n      ',c=n.premium,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"premium"),l=n["if"],d=u.program(1,s,a),d.hash={},d.fn=d,d.inverse=u.program(3,r,a),o=l.call(t,o,d),(o||0===o)&&(h+=o),h+="\n    </a>\n  </div>\n</div>\n\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/panel"]}),ABINE_DNTME.define("abine/views/dntmePanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","documentcloud/backbone","abine/proxies","abine/views/dntmePage","abine/views/dntmeSettings"],function(e,t,n,i,a,s,r,o,l,c,d){var h=a.extend({templateName:"dntme_panel",events:{"click .close-link":"logClose","click .settings-link":"showSettingsView","click .help-link":"showHelp","click .logo-link":"logoClick","click #pageView":"showPageView","click .go-back":"goBack","click .dashboard":"openDashboard","click .premium-a-link":"openPremiumA","click .premium-b-link":"openPremiumB","click .premium":"openPremiumC","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .weeklyReport":"openWeeklyReport","click .medal-notification":"clickedNormalMedalNotification","click .medal-with-card-notification":"clickedMedalWithCardNotification"},logoClick:function(e){e.preventDefault(),this.children.pageContent.model.get("maskmeInstalled")?l.securityManager.openLink({type:"dntme"}):l.webapp.openDashboard(),this.closePanel()},openDashboard:function(e){l.webapp.openDashboard(),e.preventDefault(),this.closePanel()},openWeeklyReport:function(e){var t=new i.Preference;t.save({key:"weeklyReportClickedOn",value:Date.now()}),l.webapp.openWeeklyReport(),e.preventDefault(),this.closePanel()},openCashForCardsSignup:function(e){l.webapp.openCashForCardsSignup(),e.preventDefault(),this.closePanel()},clickedNormalMedalNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000004})},clickedMedalWithCardNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000005})},openPremiumC:function(e){this.options.compact&&!this.options.premium?l.webapp.openPiwikCampaign("extIntFooterC","premium"):l.webapp.openPremium(),e.preventDefault(),this.closePanel()},openPremiumA:function(e){l.webapp.openPiwikCampaign("extIntFooterA","premium"),e.preventDefault(),this.closePanel()},openPremiumB:function(e){l.webapp.openPiwikCampaign("extIntFooterB","premium"),e.preventDefault(),this.closePanel()},showHelp:function(e){e.preventDefault(),l.webapp.openHelp("/dnt"),this.closePanel()},showPageView:function(t){t.preventDefault(),this.changingView||(this.changingView=!0,this.$(".settings-link").removeClass("highlight"),this.children.pageContent.reload(),this.$(".one").show(),this.$(".one").animate({marginLeft:0},e.bind(function(){this.changingView=!1,this.$(".two").hide()},this)))},showSettingsView:function(t){return t.preventDefault(),this.$(".settings-link").hasClass("highlight")?(this.showPageView(t),void 0):this.options.compact?("medals"==this.options.page?this.trigger("show-settings",{highlight:"showmedals"}):"weekly-report"==this.options.page?this.trigger("show-settings",{highlight:"showweeklyreports"}):this.trigger("show-settings",{highlight:"showtrackersonload"}),void 0):(this.changingView||(this.changingView=!0,this.children.pageContent.model.compact=!1,this.$(".settings-link").addClass("highlight"),this.children.settingsContent.reload(),this.$(".two").show(),this.$(".one").animate({marginLeft:-400},e.bind(function(){this.changingView=!1,this.$(".one").hide()},this))),void 0)},goBack:function(e){e.preventDefault(),this.showPageView(e)},logClose:function(){this.closePanel()},bindAutoFade:function(){function n(){s.clearTimeout(a.autoCloseTimer)}function i(){n(),a.autoCloseTimer=s.setTimeout(e.bind(a.closePanel,a),7e3)}if(this.options.compact){var a=this;t(this.el).hover(n,i),i()}else this.doc.defaultView.focus(),this.doc.defaultView.addEventListener("blur",e.bind(this.closePanel,this),!1)},afterInitialize:function(){this.doc=this.el.ownerDocument,this.contentManager=this.options.contentManager,this.applyFadingStyle(),this.fadeIn(),this.options.compact&&(this.opacity="0.8",this.templateName="dntme_compact_panel_c","weekly-report"==this.options.page?(this.templateName="dntme_compact_panel_weekly_report",this.opacity="1.0"):"medals"==this.options.page?this.templateName="dntme_compact_panel_medal":!this.options.premium&&this.options.footerCampaign&&(this.templateName="A"==this.options.footerCampaign?"dntme_compact_panel_a":"dntme_compact_panel_b")),this.bindAutoFade(),this.model={compact:this.options.compact,premium:this.options.premium},this.render(),"settings"==this.options.page?(this.$(".one").hide(),this.$(".two").show(),this.children.settingsContent.reload()):"trackers"==this.options.page&&s.setTimeout(e.bind(function(){this.children.pageContent.showTrackers()},this),100)},getPageView:function(){var t=new c({doc:this.el.ownerDocument,messenger:this.messenger,dynamicPanel:this.options.dynamicPanel,compact:this.options.compact,page:this.options.page,premium:this.options.premium});return t.on("resize",e.bind(this.autoResize,this)),t.on("max-height",e.bind(function(){this.trigger("max-height")},this)),t.on("show-trackers",e.bind(function(){this.trigger("show-trackers")},this)),t.on("show-medals",e.bind(function(){this.trigger("show-medals")},this)),t.on("show-report",e.bind(function(){this.trigger("show-report")},this)),t.on("close",e.bind(function(){this.closePanel()},this)),t},getSettingsView:function(){var t=new d({doc:this.el.ownerDocument,messenger:this.messenger,highlight:this.options.highlight});return delete this.options.highlight,t.on("resize",e.bind(this.autoResize,this)),t.on("max-height",e.bind(function(){this.trigger("max-height")},this)),t.on("close",e.bind(function(){this.closePanel()
},this)),t},createChildren:function(){return this.children={pageContent:this.getPageView(),settingsContent:this.getSettingsView()},this.children}});return h}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/preference"]=e.template(function(e,t,n,i,a){function s(){return"on"}function r(){return"off"}function o(e){var t,i;return t="/pages/images/selected.png",h=n.assetUrl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===b?g.call(e,"assetUrl",t,{hash:{}}):i,v(t)}function l(e){var t,i;return t="/pages/images/unselected.png",h=n.assetUrl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===b?g.call(e,"assetUrl",t,{hash:{}}):i,v(t)}n=n||e.helpers;var c,d,h,u,p="",f=this,m="function",g=n.helperMissing,b=void 0,v=this.escapeExpression;return p+='<div class="pref ',h=n.value,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=n["if"],u=f.program(1,s,a),u.hash={},u.fn=u,u.inverse=f.program(3,r,a),c=d.call(t,c,u),(c||0===c)&&(p+=c),p+='" id="',h=n.getId,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getId"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"getId",{hash:{}})),p+=v(c)+'">\n  <img width="16px" height="16px" src="',h=n.value,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=n["if"],u=f.program(5,o,a),u.hash={},u.fn=u,u.inverse=f.program(7,l,a),c=d.call(t,c,u),(c||0===c)&&(p+=c),p+='"/>\n  <span>',h=n.getLabel,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"getLabel",{hash:{}})),p+=v(c)+'</span><span class="info-message" title="',h=n.getTooltip,c=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof c===m?c=c.call(t,{hash:{}}):c===b&&(c=g.call(t,"getTooltip",{hash:{}})),p+=v(c)+'"> (',c="mm_dntme_info",h=n.intl,d=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===m?d.call(t,c,{hash:{}}):d===b?g.call(t,"intl",c,{hash:{}}):d,p+=v(c)+")</span>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/preference"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/settings"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a,s="";return s+='\n        <a href=# id="newVersion" class="info-message"\n           title="',t="mm_dntme_your_version",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"intl",t,{hash:{}}):i,s+=g(t)+" ",t="version",c=n.configVar,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"configVar",t,{hash:{}}):i,s+=g(t)+'">',c=n.new_version,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),i="mm_dntme_new_version_available",c=n.intl,a=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof a===p?a.call(e,i,t,{hash:{}}):a===m?f.call(e,"intl",i,t,{hash:{}}):a,s+=g(t)+"</a>\n      "}function r(e){var t,i,a="";return a+="\n        ",t="mm_dntme_version",c=n.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"intl",t,{hash:{}}):i,a+=g(t)+" ",t="version",c=n.configVar,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof i===p?i.call(e,t,{hash:{}}):i===m?f.call(e,"configVar",t,{hash:{}}):i,a+=g(t)+"\n      "}n=n||e.helpers;var o,l,c,d,h="",u=this,p="function",f=n.helperMissing,m=void 0,g=this.escapeExpression;return h+='<div class="settings">\n  <div class="settings-header clearfix">\n    <div class="go-back"><img src="',o="/pages/images/back.png",c=n.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"assetUrl",o,{hash:{}}):l,h+=g(o)+'" width="18px;"/> ',o="mm_dntme_back",c=n.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"intl",o,{hash:{}}):l,h+=g(o)+'</div>\n    <div class="version">\n      ',c=n.new_version,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"new_version"),l=n["if"],d=u.program(1,s,a),d.hash={},d.fn=d,d.inverse=u.program(3,r,a),o=l.call(t,o,d),(o||0===o)&&(h+=o),h+="\n    </div>\n  </div>\n\n  ",o="details",c=n.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===p?l.call(t,o,{hash:{}}):l===m?f.call(t,"child",o,{hash:{}}):l,h+=g(o)+"\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/settings"]}),ABINE_DNTME.define("abine/views/dntmeSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl","abine/proxies"],function(e,t,n,i,a,s,r,o){var l=n.View.extend({tagName:"div",templateName:"dntme_tracker",events:{"click .tracker":"toggleTracker"},toggleTracker:function(){this.model.save({blocked:!this.model.get("blocked")}),this.render()}}),c=n.ListView.extend({tagName:"div",className:"",viewClass:l}),d=n.View.extend({tagName:"div",templateName:"dntme_preference",events:{"click .pref":"togglePreference"},togglePreference:function(){this.model.save({value:!this.model.get("value")}),this.render(),t(".info-message",this.el.ownerDocument).tooltip({delay:0})}}),h=n.ListView.extend({tagName:"div",className:"",viewClass:d}),u=n.View.extend({tagName:"div",templateName:"dntme_global_feature",events:{"click .feature":"toggleFeature"},renderFeature:function(){this.render(),t(".info-message",this.el.ownerDocument).tooltip({delay:0})},toggleFeature:function(n){if("A"!=n.target.nodeName){var i=t(n.target);i.hasClass("feature")||(i=t(n.target).parents(".feature"));var a=t(".settings-switch",i);t(".knob",a).animate({marginLeft:this.model.get("value")?0:20},e.bind(function(){this.model.save({value:!this.model.get("value")},{success:e.bind(this.renderFeature,this)}),"browsing"==this.model.get("name")&&t("#reloadTrackers",this.el.ownerDocument).click()},this))}}}),p=n.ListView.extend({tagName:"div",className:"",viewClass:u}),f=n.View.extend({tagName:"div",templateName:"dntme_trusted_site",events:{"click .icon-tracker":"toggleBrowsing","click .icon-email":"toggleEmail","click .icon-phone":"togglePhone","click .icon-card":"toggleCard"},toggleBrowsing:function(){this.model.save({changed:"tracker",trusted:!0,tracker:!this.model.get("tracker")},{success:e.bind(this.render,this)})},toggleEmail:function(){this.model.save({changed:"email",trusted:!0,email:!this.model.get("email")},{success:e.bind(this.render,this)})},togglePhone:function(){this.model.save({changed:"phone",trusted:!0,phone:!this.model.get("phone")},{success:e.bind(this.render,this)})},toggleCard:function(){this.model.save({changed:"card",trusted:!0,card:!this.model.get("card")},{success:e.bind(this.render,this)})}}),m=n.ListView.extend({tagName:"div",className:"",viewClass:f}),g=n.View.extend({tagName:"div",templateName:"dntme_global_trackers",createChildren:function(){return{features:new p({collection:this.model.globalFeatures,doc:this.el.ownerDocument}),globalTrackers:new c({collection:this.model.trackers,doc:this.el.ownerDocument})}}}),b=n.View.extend({tagName:"div",className:"dntme_global_features",templateName:"dntme_features",createChildren:function(){return{features:new p({collection:this.model.globalFeatures,doc:this.el.ownerDocument}),preferences:new h({collection:this.model.preferences,doc:this.el.ownerDocument}),blacklist:new m({collection:this.model.blacklist,doc:this.el.ownerDocument})}}}),v=a.extend({templateName:"dntme_settings",events:{"click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click .more-options":"moreOptions","click #newVersion":"downloadNewVersion"},reload:function(){this.model.fetch()},downloadNewVersion:function(e){e.preventDefault(),o.securityManager.openPage("http://link.abine.com/dntme-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest"),this.trigger("close")},highlightIcon:function(e){var n=t("img",e.target);0==n.length&&(n=t("img",e.target.parentNode)),n.attr("src",n.attr("src").replace("grey","hover"))},lowlightIcon:function(e){var n=t("img",e.target);0==n.length&&(n=t("img",e.target.parentNode)),n.attr("src",n.attr("src").replace("hover","grey"))},moreOptions:function(e){e.preventDefault(),o.webapp.openSettings()},viewAllTrackers:function(e){e.preventDefault(),this.showTrackers=!0,this.reload()},hideAllTrackers:function(e){e.preventDefault(),this.showTrackers=!1,this.reload()},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new i.GlobalData({messenger:this.options.messenger}),this.model.showingTrackers=!1,this.on("render",e.bind(function(){function e(){i>0?(i--,n.addClass("highlight"),n.stop().animate({opacity:.3}).delay(100).animate({opacity:1})):(n.removeClass("highlight"),s.clearInterval(a))}if(this.trigger("resize"),this.model.get("premium")?t(".premium",this.el.ownerDocument).text(r.getText("mm_dntme_premium")):t(".premium",this.el.ownerDocument).text(r.getText("mm_dntme_upgrade_to_premium")),this.$("img.info-message").tooltip({delay:0,placement:"bottom"}),this.$(".info-message").tooltip({delay:0}),this.options.highlight){var n=this.$("#"+this.options.highlight),i=10,a=null;a=s.setInterval(e,800),this.$(".feature, .pref").mouseover(function(){i=0})}},this)),this.model.bind("sync:success",e.bind(this.render,this))},createChildren:function(){return this.showTrackers?{details:new g({model:this.model,doc:this.el.ownerDocument})}:{details:new b({model:this.model,doc:this.el.ownerDocument})}}});return v}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/settings_changed"]=e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n  <div class="alert">\n    <i class="icon-warning-sign"></i>\n    ',p=n.custom,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"changedFeature"),a=n["if"],f=g.program(2,r,t),f.hash={},f.fn=f,f.inverse=g.program(4,o,t),i=a.call(e,i,f),(i||0===i)&&(s+=i),s+="\n  </div>\n  ",p=n.toggledOff,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"toggledOff"),a=n["if"],f=g.program(6,l,t),f.hash={},f.fn=f,f.inverse=g.noop,i=a.call(e,i,f),(i||0===i)&&(s+=i),s+="\n"}function r(e){var t,i,a="";return a+="\n      ",a+="\n      ",p=n.custom,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"changedFeature"),typeof t===b?t=t.call(e,{hash:{}}):t===y&&(t=v.call(e,"custom.changedFeature",{hash:{}})),a+=_(t)+"<br>\n      <p>",t="mm_dntme_toggled_reload",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+"</p>\n    "}function o(e){var t,i,a="";return a+="\n      ",t="mm_dntme_toggled_reload",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+"\n    "}function l(e,t){var i,a,s="";return s+="\n    ",p=n.suggestedAllow,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggestedAllow"),a=n.unless,f=g.program(7,c,t),f.hash={},f.fn=f,f.inverse=g.noop,i=a.call(e,i,f),(i||0===i)&&(s+=i),s+="\n  "}function c(e,t){var i,a,s="";return s+="\n      ",p=n.custom,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"isFeedbackShown"),a=n.unless,f=g.program(8,d,t),f.hash={},f.fn=f,f.inverse=g.noop,i=a.call(e,i,f),(i||0===i)&&(s+=i),s+="\n    "}function d(e){var t,i,a="";return a+='\n        <div class="thanks alert alert-success" style="display:none"><i class="icon-ok-sign"></i> ',t="mm_dntme_thanks_for_feedback",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+'</div>\n        <div class="feedback well">\n            ',t="mm_dntme_help_others",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+"\n            <div id=reasons><ul>\n                <li id=reason1>",t="mm_dntme_reason_site_not_working",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+"</li>\n                <li id=reason2>",t="mm_dntme_reason_other",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+'</li>\n                <textarea id="desc" name="description"></textarea>\n                <button id="feedback-submit" class="btn btn-mini btn-success">',t="mm_dntme_feedback_submit",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+'</button>\n                <span class="text-error" style="display:none;">',t="mm_dntme_please_fill_reason",p=n.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===b?i.call(e,t,{hash:{}}):i===y?v.call(e,"intl",t,{hash:{}}):i,a+=_(t)+"</span>\n            </ul></div>\n        </div>\n      "}n=n||e.helpers;var h,u,p,f,m="",g=this,b="function",v=n.helperMissing,y=void 0,_=this.escapeExpression;return p=n.settingsChanged,h=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"settingsChanged"),u=n["if"],f=g.program(1,s,a),f.hash={},f.fn=f,f.inverse=g.noop,h=u.call(t,h,f),(h||0===h)&&(m+=h),m+="\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/settings_changed"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/tracker"]=e.template(function(e,t,n,i,a){function s(){return"blocked"}function r(){return"with-suggested"}function o(e){var t,i;return t="/pages/images/blocked.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"assetUrl",t,{hash:{}}):i,T(t)}function l(e){var t,i;return t="/pages/images/unblocked.png",b=n.assetUrl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"assetUrl",t,{hash:{}}):i,T(t)}function c(e){var t,i;return t="mm_dntme_blocked",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,T(t)}function d(e){var t,i;return t="mm_dntme_unblocked",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,T(t)}function h(e,t){var i,a;return b=n.suggested,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggested"),a=n["if"],v=_.program(14,u,t),v.hash={},v.fn=v,v.inverse=_.noop,i=a.call(e,i,v),i||0===i?i:""}function u(e,t){var i,a;return b=n.blocked,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blocked"),a=n["if"],v=_.program(15,p,t),v.hash={},v.fn=v,v.inverse=_.program(17,f,t),i=a.call(e,i,v),i||0===i?i:""}function p(e){var t,i,a="";return a+='<div class="not suggested">',t="mm_dntme_not_suggested",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,a+=T(t)+"</div>"}function f(e){var t,i,a="";return a+='<div class="suggested">',t="mm_dntme_suggested",b=n.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===E?i.call(e,t,{hash:{}}):i===w?k.call(e,"intl",t,{hash:{}}):i,a+=T(t)+"</div>"}n=n||e.helpers;var m,g,b,v,y="",_=this,E="function",k=n.helperMissing,w=void 0,T=this.escapeExpression;return y+='<div class="tracker ',b=n.blocked,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),g=n["if"],v=_.program(1,s,a),v.hash={},v.fn=v,v.inverse=_.noop,m=g.call(t,m,v),(m||0===m)&&(y+=m),y+=" ",b=n.suggested,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggested"),g=n["if"],v=_.program(3,r,a),v.hash={},v.fn=v,v.inverse=_.noop,m=g.call(t,m,v),(m||0===m)&&(y+=m),y+=' clearfix">\n  <span class="name">',b=n.name,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof m===E?m=m.call(t,{hash:{}}):m===w&&(m=k.call(t,"name",{hash:{}})),y+=T(m)+'</span>\n  <div class="state"><img src="',b=n.blocked,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),g=n["if"],v=_.program(5,o,a),v.hash={},v.fn=v,v.inverse=_.program(7,l,a),m=g.call(t,m,v),(m||0===m)&&(y+=m),y+='" /></div>\n  <div class="message">\n    ',b=n.blocked,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),g=n["if"],v=_.program(9,c,a),v.hash={},v.fn=v,v.inverse=_.program(11,d,a),m=g.call(t,m,v),(m||0===m)&&(y+=m),y+="\n  ",b=n.hasSuggested,m=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasSuggested"),g=n["if"],v=_.program(13,h,a),v.hash={},v.fn=v,v.inverse=_.noop,m=g.call(t,m,v),(m||0===m)&&(y+=m),y+="\n  </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/tracker"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/tracker_title"]=e.template(function(e,t,n,i,a){function s(e){var t,i,a="";return a+='\n    <div class="message">\n      <div class="blocked">',t="mm_dntme_tracking_disabled",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"intl",t,{hash:{}}):i,a+=E(t)+'</div>\n      <div class="host" title="',f=n.host,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===v?t=t.call(e,{hash:{}}):t===_&&(t=y.call(e,"host",{hash:{}})),a+=E(t)+'">',f=n.host,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===v?t=t.call(e,{hash:{}}):t===_&&(t=y.call(e,"host",{hash:{}})),a+=E(t)+"</div>\n    </div>\n  "}function r(e,t){var i,a,s="";return s+="\n    ",f=n.trackers,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"length"),a=n["if"],m=b.program(4,o,t),m.hash={},m.fn=m,m.inverse=b.program(6,l,t),i=a.call(e,i,m),(i||0===i)&&(s+=i),s+="\n  "}function o(e){var t,i,a,s="";return s+='\n      <div class="count">',f=n.trackers,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),typeof t===v?t=t.call(e,{hash:{}}):t===_&&(t=y.call(e,"trackers.getBlocked",{hash:{}})),s+=E(t)+'</div>\n      <div class="message">\n        <div class="blocked">',f=n.trackers,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),i="mm_dntme_tracker",f=n.plural,a=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof a===v?a.call(e,i,t,{hash:{}}):a===_?y.call(e,"plural",i,t,{hash:{}}):a,s+=E(t)+" ",t="mm_dntme_blocked_at",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"intl",t,{hash:{}}):i,s+=E(t)+'</div>\n        <div class="host" title="',f=n.host,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===v?t=t.call(e,{hash:{}}):t===_&&(t=y.call(e,"host",{hash:{}})),s+=E(t)+'">at ',f=n.host,t=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===v?t=t.call(e,{hash:{}}):t===_&&(t=y.call(e,"host",{hash:{}})),s+=E(t)+"</div>\n      </div>\n    "}function l(e){var t,i,a="";return a+='\n      <div class="message-clear">\n        <div class="count"></div>\n        <div class="all-clear">',t="mm_dntme_clear_skies",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"intl",t,{hash:{}}):i,a+=E(t)+'</div>\n        <div class="all-clear-subtext">',t="mm_dntme_clear_skies_subtext",f=n.intl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"intl",t,{hash:{}}):i,a+=E(t)+"</div>\n      </div>\n    "}function c(e,t){var i,a,s="";return s+="\n  ",f=n.disabled,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),a=n.unless,m=b.program(9,d,t),m.hash={},m.fn=m,m.inverse=b.noop,i=a.call(e,i,m),(i||0===i)&&(s+=i),s+="\n"}function d(e,t){var i,a,s="";return s+="\n    ",f=n.trackers,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"length"),a=n["if"],m=b.program(10,h,t),m.hash={},m.fn=m,m.inverse=b.noop,i=a.call(e,i,m),(i||0===i)&&(s+=i),s+="\n  "}function h(e){var t,i,a="";return a+='\n      <div class="right-section">\n        <img class="arrow-open" src="',t="pages/images/dnt-ui-drawer-arrow-closed.png",f=n.assetUrl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"assetUrl",t,{hash:{}}):i,a+=E(t)+'" />\n        <img class="arrow-close" src="',t="pages/images/dnt-ui-drawer-arrow-open.png",f=n.assetUrl,i=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===v?i.call(e,t,{hash:{}}):i===_?y.call(e,"assetUrl",t,{hash:{}}):i,a+=E(t)+'" />\n      </div>\n    '}n=n||e.helpers;var u,p,f,m,g="",b=this,v="function",y=n.helperMissing,_=void 0,E=this.escapeExpression;return g+='\n<div class="left-section">\n  ',f=n.disabled,u=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disabled"),p=n["if"],m=b.program(1,s,a),m.hash={},m.fn=m,m.inverse=b.program(3,r,a),u=p.call(t,u,m),(u||0===u)&&(g+=u),g+="\n</div>\n\n",f=n.compact,u=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),p=n.unless,m=b.program(8,c,a),m.hash={},m.fn=m,m.inverse=b.noop,u=p.call(t,u,m),(u||0===u)&&(g+=u),g+="\n\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/tracker_title"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/trackers"]=e.template(function(e,t,n,i,a){function s(){return"disabled"}function r(e,t){var i,a,s="";return s+=" ",u=n.trackers,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"length"),a=n.unless,p=m.program(4,o,t),p.hash={},p.fn=p,p.inverse=m.noop,i=a.call(e,i,p),(i||0===i)&&(s+=i),s}function o(){return"no-trackers"}function l(e,t){var i,a,s="";return s+="\n      ",u=n.trackers,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),i=null===i||void 0===i||i===!1?i:ABINE_DNTME.Duckbone.Handlebars.getAttr(i,"length"),a=n["if"],p=m.program(7,c,t),p.hash={},p.fn=p,p.inverse=m.noop,i=a.call(e,i,p),(i||0===i)&&(s+=i),s+="\n  "}function c(e){var t,i,a="";return a+='\n        <div class="section-content">\n          <div class="list"><div class="content">',t="trackerList",u=n.child,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof i===g?i.call(e,t,{hash:{}}):i===v?b.call(e,"child",t,{hash:{}}):i,a+=y(t)+'</div></div>\n          <a href="#" class="who">',t="mm_dntme_who_are_they",u=n.intl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,t,{hash:{}}):i===v?b.call(e,"intl",t,{hash:{}}):i,a+=y(t)+"</a>\n        </div>\n      "}n=n||e.helpers;var d,h,u,p,f="",m=this,g="function",b=n.helperMissing,v=void 0,y=this.escapeExpression;return f+='  <div class="section off others clearfix">\n      <div class="section-header clearfix ',u=n.disabled,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disabled"),h=n["if"],p=m.program(1,s,a),p.hash={},p.fn=p,p.inverse=m.program(3,r,a),d=h.call(t,d,p),(d||0===d)&&(f+=d),f+='">\n      ',d="trackersTitle",u=n.child,h=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),d=typeof h===g?h.call(t,d,{hash:{}}):h===v?b.call(t,"child",d,{hash:{}}):h,f+=y(d)+"\n    </div>\n    ",u=n.disabled,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disabled"),h=n.unless,p=m.program(6,l,a),p.hash={},p.fn=p,p.inverse=m.noop,d=h.call(t,d,p),(d||0===d)&&(f+=d),f+="\n  </div>\n"}),ABINE_DNTME.CompiledTemplates["views/dntme/trackers"]}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates["views/dntme/trusted_site"]=e.template(function(e,t,n,i,a){function s(){return"on"}function r(){return"off"}function o(){return"on"}function l(){return"off"}function c(){return"on"}function d(){return"off"}function h(){return"on"}function u(){return"off"}n=n||e.helpers;var p,f,m,g,b="",v=this,y="function",_=n.helperMissing,E=void 0,k=this.escapeExpression;return b+='<div class="clearfix site">\n  <span class="domain">',m=n.domain,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof p===y?p=p.call(t,{hash:{}}):p===E&&(p=_.call(t,"domain",{hash:{}})),b+=k(p)+'</span>\n  <span class="icons">\n      <img src="',p="/pages/images/maskcard-icon-grey.png",m=n.assetUrl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"assetUrl",p,{hash:{}}):f,b+=k(p)+'" width="16px" height="11px"\n           class="icon-card ',m=n.card,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card"),f=n["if"],g=v.program(1,s,a),g.hash={},g.fn=g,g.inverse=v.program(3,r,a),p=f.call(t,p,g),(p||0===p)&&(b+=p),b+='" title="',p="mm_dntme_help_trusted_card",m=n.intl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"intl",p,{hash:{}}):f,b+=k(p)+'"/>\n      <img src="',p="/pages/images/maskphone-icon-grey.png",m=n.assetUrl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"assetUrl",p,{hash:{}}):f,b+=k(p)+'" width="18px" height="18px"\n                 class="icon-phone ',m=n.phone,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"phone"),f=n["if"],g=v.program(5,o,a),g.hash={},g.fn=g,g.inverse=v.program(7,l,a),p=f.call(t,p,g),(p||0===p)&&(b+=p),b+='" title="',p="mm_dntme_help_trusted_phone",m=n.intl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"intl",p,{hash:{}}):f,b+=k(p)+'"/>\n      <img src="',p="/pages/images/maskmail-icon-grey.png",m=n.assetUrl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"assetUrl",p,{hash:{}}):f,b+=k(p)+'" width="18px" height="13px"\n                 class="icon-email ',m=n.email,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),f=n["if"],g=v.program(9,c,a),g.hash={},g.fn=g,g.inverse=v.program(11,d,a),p=f.call(t,p,g),(p||0===p)&&(b+=p),b+='" title="',p="mm_dntme_help_trusted_email",m=n.intl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"intl",p,{hash:{}}):f,b+=k(p)+'"/>\n      <img src="',p="/pages/images/globe-grey.png",m=n.assetUrl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"assetUrl",p,{hash:{}}):f,b+=k(p)+'" width="16px" height="16px"\n           class="icon-tracker ',m=n.tracker,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),f=n["if"],g=v.program(13,h,a),g.hash={},g.fn=g,g.inverse=v.program(15,u,a),p=f.call(t,p,g),(p||0===p)&&(b+=p),b+='" title="',p="mm_dntme_help_trusted_browsing",m=n.intl,f=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof f===y?f.call(t,p,{hash:{}}):f===E?_.call(t,"intl",p,{hash:{}}):f,b+=k(p)+'" />\n  </span>\n</div>\n'}),ABINE_DNTME.CompiledTemplates["views/dntme/trusted_site"]}),ABINE_DNTME.require(["abine/assets","abine/views/commonhelpers"],function(){}),function(){function e(){ABINE_DNTME.startTime=Date.now(),t(function(){n()})}function t(e){ABINE_DNTME.requireDuckbone(function(){ABINE_DNTME.requireModels(e)})}function n(){ABINE_DNTME.require(["abine/contentManager","abine/eventLogger","abine/pageEventsImpl"],function(e,t,n){var i=new e.ContentManager({document:document,force:!0});i.start(),n.startup(i.messenger,document),n.on("disable:form:helpers",function(){i.disableFormHelpers()}),window.addEventListener("beforeunload",function(){i.destroy()},!1),window.addEventListener("dntme_unload",function(){i.destroy()},!1),document.documentElement.contentManager=i})}function i(){document.webkitHidden||(document.removeEventListener("webkitvisibilitychange",i,!1),e())}var a=document.documentElement;"content.js"!=a.attributes.idmeScript&&(a.attributes.idmeScript="content.js","visible"!=document.webkitVisibilityState&&-1==document.location.host.indexOf(ABINE_DNTME.config.webAppHost)?document.addEventListener("webkitvisibilitychange",i,!1):e(),chrome.extension.sendRequest({eventName:"contentScript:init",payload:{}}))}();